!function(t,e){"use strict";t.troshx=t.troshx||{},t.troshx.util=t.troshx.util||{},t.troshx.sos=t.troshx.sos||{},t.troshx.sos.vue=t.troshx.sos.vue||{};var n={},i=function(){return D.__string_rec(this,"")};function r(t,e){function n(){}n.prototype=t;var i=new n;for(var r in e)i[r]=e[r];return e.toString!==Object.prototype.toString&&(i.toString=e.toString),i}var s=function(t,e){this.r=new RegExp(t,e.split("u").join(""))};n.EReg=s,s.__name__=["EReg"],s.prototype={match:function(t){return this.r.global&&(this.r.lastIndex=0),this.r.m=this.r.exec(t),this.r.s=t,null!=this.r.m},split:function(t){var e="#__delim__#";return t.replace(this.r,e).split(e)},__class__:s};var a=function(){};n.HxOverrides=a,a.__name__=["HxOverrides"],a.strDate=function(t){switch(t.length){case 8:var e=t.split(":"),n=new Date;return n.setTime(0),n.setUTCHours(e[0]),n.setUTCMinutes(e[1]),n.setUTCSeconds(e[2]),n;case 10:var i=t.split("-");return new Date(i[0],i[1]-1,i[2],0,0,0);case 19:var r=t.split(" "),s=r[0].split("-"),a=r[1].split(":");return new Date(s[0],s[1]-1,s[2],a[0],a[1],a[2]);default:throw new V("Invalid date format : "+t)}},a.cca=function(t,e){var n=t.charCodeAt(e);if(n==n)return n},a.substr=function(t,e,n){if(null==n)n=t.length;else if(n<0){if(0!=e)return"";n=t.length+n}return t.substr(e,n)},a.iter=function(t){return{cur:0,arr:t,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var o=function(){};n.Lambda=o,o.__name__=["Lambda"],o.exists=function(t,e){for(var n=$r(t)();n.hasNext();){if(e(n.next()))return!0}return!1},o.filter=function(t,e){for(var n=new l,i=$r(t)();i.hasNext();){var r=i.next();e(r)&&n.add(r)}return n};var l=function(){this.length=0};n.List=l,l.__name__=["List"],l.prototype={add:function(t){var e=new u(t,null);null==this.h?this.h=e:this.q.next=e,this.q=e,this.length++},push:function(t){var e=new u(t,this.h);this.h=e,null==this.q&&(this.q=e),this.length++},iterator:function(){return new c(this.h)},__class__:l};var u=function(t,e){this.item=t,this.next=e};n["_List.ListNode"]=u,u.__name__=["_List","ListNode"],u.prototype={__class__:u};var c=function(t){this.head=t};n["_List.ListIterator"]=c,c.__name__=["_List","ListIterator"],c.prototype={hasNext:function(){return null!=this.head},next:function(){var t=this.head.item;return this.head=this.head.next,t},__class__:c};var h=function(){this.boot=new N,Vue.use(SweetModal);var t,e,n=window.location.href.split("#")[0].split("?"),i=L.getParams();(null!=(null!=es.inventories?i.getReserved("inventories"):i.h.inventories)&&(ki.DOMAIN_INVENTORY=null!=es.inventories?i.getReserved("inventories"):i.h.inventories),null!=(null!=es.characters?i.getReserved("characters"):i.h.characters)&&(ki.DOMAIN_CHARACTER=null!=es.characters?i.getReserved("characters"):i.h.characters),null!=(null!=es.ranging?i.getReserved("ranging"):i.h.ranging)&&(ki.DOMAIN_RANGECALC=null!=es.ranging?i.getReserved("ranging"):i.h.ranging),null!=(null!=es.autoload?i.getReserved("autoload"):i.h.autoload)&&(ki.AUTO_LOAD=null!=es.autoload?i.getReserved("autoload"):i.h.autoload),null!=(null!=es.host?i.getReserved("host"):i.h.host)||window.USE_HOST)&&(e=null!=(t=null!=es.host?i.getReserved("host"):i.h.host)&&("http://"==a.substr(t,0,7)||"https://"==a.substr(t,0,8)),ki.CURL_DOMAIN=e?t:window.location.protocol+"//"+window.location.hostname);var r=n[0],s=n.pop();if("chargen"==(s=s.split("&")[0]))this.boot.startVueWithRootComponent("#app",new Ci),N.notifyStarted();else if("charsheet"==s)this.boot.startVueWithRootComponent("#app",new Ai),N.notifyStarted();else if("inventory"==s)this.boot.startVueWithRootComponent("#app",new Li(new Ti)),N.notifyStarted();else if("range"==s)this.boot.startVueWithRootComponent("#app",new Ni),N.notifyStarted();else{var o={template:'<div>\r\n\t\t\t\t\t<h1>Song of Swords Core Utilities</h1>\r\n\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t<li><a href="'+r+'?chargen">Create a Character</a></li>\r\n\t\t\t\t\t\t<li><a href="'+r+'?charsheet">Load a Character</a></li>\r\n\t\t\t\t\t\t<li><a href="'+r+'?inventory">Inventory Manager</a></li>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t\t<h1>Song of Swords Tactical Utilities</h1>\r\n\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t<li><a href="'+r+'?range">Range Viability Calculator</a></li>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t\t<h2>General TROSLike Utilities</h2>\r\n\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t<li><a href="http://glidias.github.io/Asharena/demos/trosdev/probability.html" target="_blank">Dice Pool Probability Calculator</a></li>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t\t</div>'};this.boot.startVueWithRootComponent("#app",o)}};n.MainSOS=h,h.__name__=["MainSOS"],h.main=function(){new h},h.prototype={__class__:h},Math.__name__=["Math"];var d=function(){};n.Reflect=d,d.__name__=["Reflect"],d.field=function(t,e){try{return t[e]}catch(t){return null}},d.fields=function(t){var e=[];if(null!=t){var n=Object.prototype.hasOwnProperty;for(var i in t)"__id__"!=i&&"hx__closures__"!=i&&n.call(t,i)&&e.push(i)}return e},d.isFunction=function(t){return"function"==typeof t&&!(t.__name__||t.__ename__)},d.compareMethods=function(t,e){return t==e||!(!d.isFunction(t)||!d.isFunction(e))&&(t.scope==e.scope&&t.method==e.method&&null!=t.method)},d.deleteField=function(t,e){return!!Object.prototype.hasOwnProperty.call(t,e)&&(delete t[e],!0)};var p=function(){};n.Std=p,p.__name__=["Std"],p.string=function(t){return D.__string_rec(t,"")},p.parseInt=function(t){var e=parseInt(t,10);return 0!=e||120!=a.cca(t,1)&&88!=a.cca(t,1)||(e=parseInt(t)),isNaN(e)?null:e};var g=function(){this.b=""};n.StringBuf=g,g.__name__=["StringBuf"],g.prototype={__class__:g};var m=function(){};n.StringTools=m,m.__name__=["StringTools"],m.isSpace=function(t,e){var n=a.cca(t,e);return n>8&&n<14||32==n},m.ltrim=function(t){for(var e=t.length,n=0;n<e&&m.isSpace(t,n);)++n;return n>0?a.substr(t,n,e-n):t},m.rtrim=function(t){for(var e=t.length,n=0;n<e&&m.isSpace(t,e-n-1);)++n;return n>0?a.substr(t,0,e-n):t},m.trim=function(t){return m.ltrim(m.rtrim(t))};var f=n.ValueType={__ename__:["ValueType"],__constructs__:["TNull","TInt","TFloat","TBool","TObject","TFunction","TClass","TEnum","TUnknown"]};f.TNull=["TNull",0],f.TNull.toString=i,f.TNull.__enum__=f,f.TInt=["TInt",1],f.TInt.toString=i,f.TInt.__enum__=f,f.TFloat=["TFloat",2],f.TFloat.toString=i,f.TFloat.__enum__=f,f.TBool=["TBool",3],f.TBool.toString=i,f.TBool.__enum__=f,f.TObject=["TObject",4],f.TObject.toString=i,f.TObject.__enum__=f,f.TFunction=["TFunction",5],f.TFunction.toString=i,f.TFunction.__enum__=f,f.TClass=function(t){var e=["TClass",6,t];return e.__enum__=f,e.toString=i,e},f.TEnum=function(t){var e=["TEnum",7,t];return e.__enum__=f,e.toString=i,e},f.TUnknown=["TUnknown",8],f.TUnknown.toString=i,f.TUnknown.__enum__=f;var _=function(){};n.Type=_,_.__name__=["Type"],_.getClassName=function(t){var e=t.__name__;return null==e?null:e.join(".")},_.getEnumName=function(t){return t.__ename__.join(".")},_.resolveClass=function(t){var e=n[t];return null!=e&&e.__name__?e:null},_.resolveEnum=function(t){var e=n[t];return null!=e&&e.__ename__?e:null},_.createInstance=function(t,e){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6]);case 8:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]);case 9:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]);case 10:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9]);case 11:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10]);case 12:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11]);case 13:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12]);case 14:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13]);default:throw new V("Too many arguments")}},_.createEmptyInstance=function(t){function e(){}return e.prototype=t.prototype,new e},_.createEnum=function(t,e,n){var i=d.field(t,e);if(null==i)throw new V("No such constructor "+e);if(d.isFunction(i)){if(null==n)throw new V("Constructor "+e+" need parameters");return i.apply(t,n)}if(null!=n&&0!=n.length)throw new V("Constructor "+e+" does not need parameters");return i},_.typeof=function(t){switch(typeof t){case"boolean":return f.TBool;case"function":return t.__name__||t.__ename__?f.TObject:f.TFunction;case"number":return Math.ceil(t)==t%2147483648?f.TInt:f.TFloat;case"object":if(null==t)return f.TNull;var e=t.__enum__;if(null!=e)return f.TEnum(e);var n=D.getClass(t);return null!=n?f.TClass(n):f.TObject;case"string":return f.TClass(String);case"undefined":return f.TNull;default:return f.TUnknown}};var v=function(){};n["haxe.IMap"]=v,v.__name__=["haxe","IMap"];var b=function(t){this.url=t,this.headers=new l,this.params=new l,this.async=!0,this.withCredentials=!1};n["haxe.Http"]=b,b.__name__=["haxe","Http"],b.prototype={setParameter:function(t,e){return this.params=o.filter(this.params,function(e){return e.param!=t}),this.params.push({param:t,value:e}),this},request:function(t){var e=this;e.responseData=null;var n=this.req=q.createXMLHttpRequest(),i=function(t){if(4==n.readyState){var i;try{i=n.status}catch(t){i=null}if(null!=i&&"undefined"!=typeof window){var r=window.location.protocol.toLowerCase();new s("^(?:about|app|app-storage|.+-extension|file|res|widget):$","").match(r)&&(i=null!=n.responseText?200:404)}if(null==i&&(i=null),null!=i&&e.onStatus(i),null!=i&&i>=200&&i<400)e.req=null,e.onData(e.responseData=n.responseText);else if(null==i)e.req=null,e.onError("Failed to connect or resolve host");else switch(i){case 12007:e.req=null,e.onError("Unknown host");break;case 12029:e.req=null,e.onError("Failed to connect to host");break;default:e.req=null,e.responseData=n.responseText,e.onError("Http Error #"+n.status)}}};this.async&&(n.onreadystatechange=i);var r=this.postData;if(null!=r)t=!0;else for(var a=this.params.h;null!=a;){var l=a.item;a=a.next;var u=l;null==r?r="":r+="&";var c=u.param,h=encodeURIComponent(c)+"=",d=u.value;r+=h+encodeURIComponent(d)}try{if(t)n.open("POST",this.url,this.async);else if(null!=r){var p=this.url.split("?").length<=1;n.open("GET",this.url+(p?"?":"&")+r,this.async),r=null}else n.open("GET",this.url,this.async)}catch(t){return t instanceof V&&(t=t.val),e.req=null,void this.onError(t.toString())}n.withCredentials=this.withCredentials,!o.exists(this.headers,function(t){return"Content-Type"==t.header})&&t&&null==this.postData&&n.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var g=this.headers.h;null!=g;){var m=g.item;g=g.next;var f=m;n.setRequestHeader(f.header,f.value)}n.send(r),this.async||i()},onData:function(t){},onError:function(t){},onStatus:function(t){},__class__:b};var y=function(){this.buf=new g,this.cache=[],this.useCache=y.USE_CACHE,this.useEnumIndex=y.USE_ENUM_INDEX,this.shash=new k,this.scount=0};n["haxe.Serializer"]=y,y.__name__=["haxe","Serializer"],y.prototype={toString:function(){return this.buf.b},serializeString:function(t){var e=this.shash,n=null!=es[t]?e.getReserved(t):e.h[t];if(null!=n)return this.buf.b+="R",void(this.buf.b+=null==n?"null":""+n);var i=this.shash,r=this.scount++;null!=es[t]?i.setReserved(t,r):i.h[t]=r,this.buf.b+="y",t=encodeURIComponent(t),this.buf.b+=p.string(t.length),this.buf.b+=":",this.buf.b+=null==t?"null":""+t},serializeRef:function(t){for(var e=typeof t,n=0,i=this.cache.length;n<i;){var r=n++,s=this.cache[r];if(typeof s==e&&s==t)return this.buf.b+="r",this.buf.b+=null==r?"null":""+r,!0}return this.cache.push(t),!1},serializeFields:function(t){for(var e=0,n=d.fields(t);e<n.length;){var i=n[e];++e,this.serializeString(i),this.serialize(d.field(t,i))}this.buf.b+="g"},serialize:function(t){var e=_.typeof(t);switch(e[1]){case 0:this.buf.b+="n";break;case 1:var n=t;if(0==n)return void(this.buf.b+="z");this.buf.b+="i",this.buf.b+=null==n?"null":""+n;break;case 2:var i=t;isNaN(i)?this.buf.b+="k":isFinite(i)?(this.buf.b+="d",this.buf.b+=null==i?"null":""+i):this.buf.b+=i<0?"m":"p";break;case 3:this.buf.b+=t?"t":"f";break;case 4:if(D.__instanceof(t,Jr)){var r=_.getClassName(t);this.buf.b+="A",this.serializeString(r)}else if(D.__instanceof(t,ts))this.buf.b+="B",this.serializeString(_.getEnumName(t));else{if(this.useCache&&this.serializeRef(t))return;this.buf.b+="o",this.serializeFields(t)}break;case 5:throw new V("Cannot serialize function");case 6:var s=e[2];if(s==String)return void this.serializeString(t);if(this.useCache&&this.serializeRef(t))return;switch(s){case Array:var o=0;this.buf.b+="a";for(var u=0,c=t.length;u<c;){var h=u++;null==t[h]?++o:(o>0&&(1==o?this.buf.b+="n":(this.buf.b+="u",this.buf.b+=null==o?"null":""+o),o=0),this.serialize(t[h]))}o>0&&(1==o?this.buf.b+="n":(this.buf.b+="u",this.buf.b+=null==o?"null":""+o)),this.buf.b+="h";break;case Date:var g=t;this.buf.b+="v",this.buf.b+=p.string(g.getTime());break;case l:this.buf.b+="l";for(var m=t.h;null!=m;){var f=m.item;m=m.next;var v=f;this.serialize(v)}this.buf.b+="h";break;case x:this.buf.b+="q";for(var b=t,w=b.keys();w.hasNext();){var S=w.next();this.buf.b+=":",this.buf.b+=null==S?"null":""+S,this.serialize(b.h[S])}this.buf.b+="h";break;case I:this.buf.b+="M";for(var C=t,A=C.keys();A.hasNext();){var L=A.next(),M=d.field(L,"__id__");d.deleteField(L,"__id__"),this.serialize(L),L.__id__=M,this.serialize(C.h[L.__id__])}this.buf.b+="h";break;case k:this.buf.b+="b";for(var E=t,P=E.keys();P.hasNext();){var R=P.next();this.serializeString(R),this.serialize(null!=es[R]?E.getReserved(R):E.h[R])}this.buf.b+="h";break;case T:var B=t;this.buf.b+="s",this.buf.b+=p.string(Math.ceil(8*B.length/6)),this.buf.b+=":";var N=0,W=B.length-2,F=y.BASE64_CODES;if(null==F){var O=y.BASE64.length;F=new Array(O);for(var H=0,q=y.BASE64.length;H<q;){var j=H++;F[j]=a.cca(y.BASE64,j)}y.BASE64_CODES=F}for(;N<W;){var G=B.b[N++],U=B.b[N++],$=B.b[N++];this.buf.b+=String.fromCharCode(F[G>>2]),this.buf.b+=String.fromCharCode(F[63&(G<<4|U>>4)]),this.buf.b+=String.fromCharCode(F[63&(U<<2|$>>6)]),this.buf.b+=String.fromCharCode(F[63&$])}if(N==W){var z=B.b[N++],Z=B.b[N++];this.buf.b+=String.fromCharCode(F[z>>2]),this.buf.b+=String.fromCharCode(F[63&(z<<4|Z>>4)]),this.buf.b+=String.fromCharCode(F[Z<<2&63])}else if(N==W+1){var Q=B.b[N++];this.buf.b+=String.fromCharCode(F[Q>>2]),this.buf.b+=String.fromCharCode(F[Q<<4&63])}break;default:this.useCache&&this.cache.pop(),null!=t.hxSerialize?(this.buf.b+="C",this.serializeString(_.getClassName(s)),this.useCache&&this.cache.push(t),t.hxSerialize(this),this.buf.b+="g"):(this.buf.b+="c",this.serializeString(_.getClassName(s)),this.useCache&&this.cache.push(t),this.serializeFields(t))}break;case 7:var Y=e[2];if(this.useCache){if(this.serializeRef(t))return;this.cache.pop()}this.buf.b+=p.string(this.useEnumIndex?"j":"w"),this.serializeString(_.getEnumName(Y)),this.useEnumIndex?(this.buf.b+=":",this.buf.b+=p.string(t[1])):this.serializeString(t[0]),this.buf.b+=":";var K=t.length;this.buf.b+=p.string(K-2);for(var X=2,J=K;X<J;){var tt=X++;this.serialize(t[tt])}this.useCache&&this.cache.push(t);break;default:throw new V("Cannot serialize "+p.string(t))}},__class__:y};var w=function(t){var e=this;this.id=setInterval(function(){e.run()},t)};n["haxe.Timer"]=w,w.__name__=["haxe","Timer"],w.delay=function(t,e){var n=new w(e);return n.run=function(){n.stop(),t()},n},w.prototype={stop:function(){null!=this.id&&(clearInterval(this.id),this.id=null)},run:function(){},__class__:w};var S=function(){};n["haxe._Unserializer.DefaultResolver"]=S,S.__name__=["haxe","_Unserializer","DefaultResolver"],S.prototype={resolveClass:function(t){return _.resolveClass(t)},resolveEnum:function(t){return _.resolveEnum(t)},__class__:S};var C=function(t){this.buf=t,this.length=t.length,this.pos=0,this.scache=[],this.cache=[];var e=C.DEFAULT_RESOLVER;null==e&&(e=new S,C.DEFAULT_RESOLVER=e),this.resolver=e};n["haxe.Unserializer"]=C,C.__name__=["haxe","Unserializer"],C.initCodes=function(){for(var t=[],e=0,n=C.BASE64.length;e<n;){var i=e++;t[C.BASE64.charCodeAt(i)]=i}return t},C.prototype={readDigits:function(){for(var t=0,e=!1,n=this.pos;;){var i=this.buf.charCodeAt(this.pos);if(i!=i)break;if(45!=i){if(i<48||i>57)break;t=10*t+(i-48),this.pos++}else{if(this.pos!=n)break;e=!0,this.pos++}}return e&&(t*=-1),t},readFloat:function(){for(var t=this.pos;;){var e=this.buf.charCodeAt(this.pos);if(e!=e)break;if(!(e>=43&&e<58||101==e||69==e))break;this.pos++}return parseFloat(a.substr(this.buf,t,this.pos-t))},unserializeObject:function(t){for(;;){if(this.pos>=this.length)throw new V("Invalid object");if(103==this.buf.charCodeAt(this.pos))break;var e=this.unserialize();if("string"!=typeof e)throw new V("Invalid object key");var n=this.unserialize();t[e]=n}this.pos++},unserializeEnum:function(t,e){if(58!=this.buf.charCodeAt(this.pos++))throw new V("Invalid enum format");var n=this.readDigits();if(0==n)return _.createEnum(t,e);for(var i=[];n-- >0;)i.push(this.unserialize());return _.createEnum(t,e,i)},unserialize:function(){switch(this.buf.charCodeAt(this.pos++)){case 65:var t=this.unserialize(),e=this.resolver.resolveClass(t);if(null==e)throw new V("Class not found "+t);return e;case 66:var n=this.unserialize(),i=this.resolver.resolveEnum(n);if(null==i)throw new V("Enum not found "+n);return i;case 67:var r=this.unserialize(),s=this.resolver.resolveClass(r);if(null==s)throw new V("Class not found "+r);var o=_.createEmptyInstance(s);if(this.cache.push(o),o.hxUnserialize(this),103!=this.buf.charCodeAt(this.pos++))throw new V("Invalid custom data");return o;case 77:var u=new I;this.cache.push(u);for(this.buf;104!=this.buf.charCodeAt(this.pos);){var c=this.unserialize();u.set(c,this.unserialize())}return this.pos++,u;case 82:var h=this.readDigits();if(h<0||h>=this.scache.length)throw new V("Invalid string reference");return this.scache[h];case 97:this.buf;var d=[];for(this.cache.push(d);;){var p=this.buf.charCodeAt(this.pos);if(104==p){this.pos++;break}if(117==p){this.pos++;var g=this.readDigits();d[d.length+g-1]=null}else d.push(this.unserialize())}return d;case 98:var m=new k;this.cache.push(m);for(this.buf;104!=this.buf.charCodeAt(this.pos);){var f=this.unserialize(),v=this.unserialize();null!=es[f]?m.setReserved(f,v):m.h[f]=v}return this.pos++,m;case 99:var b=this.unserialize(),y=this.resolver.resolveClass(b);if(null==y)throw new V("Class not found "+b);var w=_.createEmptyInstance(y);return this.cache.push(w),this.unserializeObject(w),w;case 100:return this.readFloat();case 102:return!1;case 105:return this.readDigits();case 106:var S=this.unserialize(),A=this.resolver.resolveEnum(S);if(null==A)throw new V("Enum not found "+S);this.pos++;var L=this.readDigits(),M=A.__constructs__.slice()[L];if(null==M)throw new V("Unknown enum index "+S+"@"+L);var E=this.unserializeEnum(A,M);return this.cache.push(E),E;case 107:return NaN;case 108:var P=new l;this.cache.push(P);for(this.buf;104!=this.buf.charCodeAt(this.pos);)P.add(this.unserialize());return this.pos++,P;case 109:return-1/0;case 110:return null;case 111:var R={};return this.cache.push(R),this.unserializeObject(R),R;case 112:return 1/0;case 113:var B=new x;this.cache.push(B);this.buf;for(var N=this.buf.charCodeAt(this.pos++);58==N;){var W=this.readDigits(),F=this.unserialize();B.h[W]=F,N=this.buf.charCodeAt(this.pos++)}if(104!=N)throw new V("Invalid IntMap format");return B;case 114:var O=this.readDigits();if(O<0||O>=this.cache.length)throw new V("Invalid reference");return this.cache[O];case 115:var H=this.readDigits(),D=this.buf;if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<H)throw new V("Invalid bytes length");var q=C.CODES;null==q&&(q=C.initCodes(),C.CODES=q);for(var j=this.pos,G=3&H,U=j+(H-G),$=new T(new ns(3*(H>>2)+(G>=2?G-1:0))),z=0;j<U;){var Z=q[D.charCodeAt(j++)],Q=q[D.charCodeAt(j++)];$.b[z++]=255&(Z<<2|Q>>4);var Y=q[D.charCodeAt(j++)];$.b[z++]=255&(Q<<4|Y>>2);var K=q[D.charCodeAt(j++)];$.b[z++]=255&(Y<<6|K)}if(G>=2){var X=q[D.charCodeAt(j++)],J=q[D.charCodeAt(j++)];if($.b[z++]=255&(X<<2|J>>4),3==G){var tt=q[D.charCodeAt(j++)];$.b[z++]=255&(J<<4|tt>>2)}}return this.pos+=H,this.cache.push($),$;case 116:return!0;case 118:var et;if(this.buf.charCodeAt(this.pos)>=48&&this.buf.charCodeAt(this.pos)<=57&&this.buf.charCodeAt(this.pos+1)>=48&&this.buf.charCodeAt(this.pos+1)<=57&&this.buf.charCodeAt(this.pos+2)>=48&&this.buf.charCodeAt(this.pos+2)<=57&&this.buf.charCodeAt(this.pos+3)>=48&&this.buf.charCodeAt(this.pos+3)<=57&&45==this.buf.charCodeAt(this.pos+4))et=a.strDate(a.substr(this.buf,this.pos,19)),this.pos+=19;else{var nt=this.readFloat();et=new Date(nt)}return this.cache.push(et),et;case 119:var it=this.unserialize(),rt=this.resolver.resolveEnum(it);if(null==rt)throw new V("Enum not found "+it);var st=this.unserializeEnum(rt,this.unserialize());return this.cache.push(st),st;case 120:throw V.wrap(this.unserialize());case 121:var at=this.readDigits();if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<at)throw new V("Invalid string length");var ot=a.substr(this.buf,this.pos,at);return this.pos+=at,ot=decodeURIComponent(ot.split("+").join(" ")),this.scache.push(ot),ot;case 122:return 0}throw this.pos--,new V("Invalid char "+this.buf.charAt(this.pos)+" at position "+this.pos)},__class__:C};var A=function(){};n["haxe.ds.ArraySort"]=A,A.__name__=["haxe","ds","ArraySort"],A.sort=function(t,e){A.rec(t,e,0,t.length)},A.rec=function(t,e,n,i){var r=n+i>>1;if(i-n<12){if(i<=n)return;for(var s=n+1,a=i;s<a;)for(var o=s++;o>n&&e(t[o],t[o-1])<0;)A.swap(t,o-1,o),--o}else A.rec(t,e,n,r),A.rec(t,e,r,i),A.doMerge(t,e,n,r,i,r-n,i-r)},A.doMerge=function(t,e,n,i,r,s,a){var o,l,u,c,h;0!=s&&0!=a&&(s+a!=2?(s>a?c=(l=A.lower(t,e,i,r,o=n+(u=s>>1)))-i:u=(o=A.upper(t,e,n,i,l=i+(c=a>>1)))-n,A.rotate(t,e,o,i,l),A.doMerge(t,e,n,o,h=o+c,u,c),A.doMerge(t,e,h,l,r,s-u,a-c)):e(t[i],t[n])<0&&A.swap(t,i,n))},A.rotate=function(t,e,n,i,r){var s;if(n!=i&&i!=r)for(s=A.gcd(r-n,i-n);0!=s--;){for(var a=t[n+s],o=i-n,l=n+s,u=n+s+o;u!=n+s;)t[l]=t[u],l=u,r-u>o?u+=o:u=n+(o-(r-u));t[l]=a}},A.gcd=function(t,e){for(;0!=e;){var n=t%e;t=e,e=n}return t},A.upper=function(t,e,n,i,r){for(var s,a,o=i-n;o>0;)a=n+(s=o>>1),e(t[r],t[a])<0?o=s:(n=a+1,o=o-s-1);return n},A.lower=function(t,e,n,i,r){for(var s,a,o=i-n;o>0;)e(t[a=n+(s=o>>1)],t[r])<0?(n=a+1,o=o-s-1):o=s;return n},A.swap=function(t,e,n){var i=t[e];t[e]=t[n],t[n]=i};var x=function(){this.h={}};n["haxe.ds.IntMap"]=x,x.__name__=["haxe","ds","IntMap"],x.__interfaces__=[v],x.prototype={keys:function(){var t=[];for(var e in this.h)this.h.hasOwnProperty(e)&&t.push(0|e);return a.iter(t)},__class__:x};var I=function(){this.h={__keys__:{}}};n["haxe.ds.ObjectMap"]=I,I.__name__=["haxe","ds","ObjectMap"],I.__interfaces__=[v],I.assignId=function(t){return t.__id__=++I.count},I.getId=function(t){return t.__id__},I.prototype={set:function(t,e){var n=t.__id__||(t.__id__=++I.count);this.h[n]=e,this.h.__keys__[n]=t},keys:function(){var t=[];for(var e in this.h.__keys__)this.h.hasOwnProperty(e)&&t.push(this.h.__keys__[e]);return a.iter(t)},__class__:I};var k=function(){this.h={}};n["haxe.ds.StringMap"]=k,k.__name__=["haxe","ds","StringMap"],k.__interfaces__=[v],k.prototype={setReserved:function(t,e){null==this.rh&&(this.rh={}),this.rh["$"+t]=e},getReserved:function(t){return null==this.rh?null:this.rh["$"+t]},existsReserved:function(t){return null!=this.rh&&this.rh.hasOwnProperty("$"+t)},keys:function(){return a.iter(this.arrayKeys())},arrayKeys:function(){var t=[];for(var e in this.h)this.h.hasOwnProperty(e)&&t.push(e);if(null!=this.rh)for(var e in this.rh)36==e.charCodeAt(0)&&t.push(e.substr(1));return t},__class__:k};var T=function(t){this.length=t.byteLength,this.b=new is(t),this.b.bufferValue=t,t.hxBytes=this,t.bytes=this.b};n["haxe.io.Bytes"]=T,T.__name__=["haxe","io","Bytes"],T.alloc=function(t){return new T(new ns(t))},T.ofString=function(t){for(var e=[],n=0;n<t.length;){var i=t.charCodeAt(n++);55296<=i&&i<=56319&&(i=i-55232<<10|1023&t.charCodeAt(n++)),i<=127?e.push(i):i<=2047?(e.push(192|i>>6),e.push(128|63&i)):i<=65535?(e.push(224|i>>12),e.push(128|i>>6&63),e.push(128|63&i)):(e.push(240|i>>18),e.push(128|i>>12&63),e.push(128|i>>6&63),e.push(128|63&i))}return new T(new is(e).buffer)},T.ofData=function(t){var e=t.hxBytes;return null!=e?e:new T(t)},T.fastGet=function(t,e){return t.bytes[e]},T.prototype={__class__:T};var L=function(){};n["haxe.web.Request"]=L,L.__name__=["haxe","web","Request"],L.getParams=function(){for(var t=a.substr(window.location.search,1,null),e=new k,n=0,i=new s("[&;]","g").split(t);n<i.length;){var r=i[n];++n;var o=r.split("=");if(!(o.length<2)){var l=o.shift(),u=decodeURIComponent(l.split("+").join(" ")),c=o.join("="),h=decodeURIComponent(c.split("+").join(" "));null!=es[u]?e.setReserved(u,h):e.h[u]=h}}return e};var M=function(){};n["haxevx.vuex.core.IBuildListed"]=M,M.__name__=["haxevx","vuex","core","IBuildListed"];var E=function(){};n["haxevx.vuex.core.IPayload"]=E,E.__name__=["haxevx","vuex","core","IPayload"],E.prototype={__class__:E};var P=function(){};n["haxevx.vuex.core.NoneT"]=P,P.__name__=["haxevx","vuex","core","NoneT"],P.prototype={toString:function(){return"NoneT"},__class__:P};var R=function(){};n["haxevx.vuex.core.Singletons"]=R,R.__name__=["haxevx","vuex","core","Singletons"],R.addLookup=function(t,e){var n,i=R.NAMES;if(null!=es[t]?i.existsReserved(t):i.h.hasOwnProperty(t)){var r=R.NAMES;n=null!=es[t]?r.getReserved(t):r.h[t]}else{n=[];var s=R.NAMES;null!=es[t]?s.setReserved(t,n):s.h[t]=n}n.push(e)},R.setAsSingleton=function(t){var e=R.SINGLETON_CACHE,n=t,i=_.getClassName(null==n?null:D.getClass(n)),r=t;return null!=es[i]?e.setReserved(i,r):e.h[i]=r,t},R.getSingleton=function(t){var e=R.SINGLETON_CACHE;return null!=es[t]?e.getReserved(t):e.h[t]},R.getClassNameOfInstance=function(t){var e=t;return _.getClassName(null==e?null:D.getClass(e))},R.clearLookups=function(){for(var t=R.NAMES.keys();t.hasNext();){var e=t.next(),n=R.SINGLETON_CACHE;if(null==(null!=es[e]?n.getReserved(e):n.h[e])){var i=R.NAMES;console.log("Warning:: Could not find singleton dependency from/to: ["+p.string(null!=es[e]?i.getReserved(e):i.h[e])+"] -> "+e)}}R.NAMES=new k};var B=function(){this._Init()};n["haxevx.vuex.core.VComponent"]=B,B.__name__=["haxevx","vuex","core","VComponent"],B.__super__=Object,B.prototype=r(Object.prototype,{_Init:function(){},get__props:function(){return this},get__vData:function(){return this.$data},PropsData:function(){return null},Data:function(){return null},Created:function(){},BeforeCreate:function(){},BeforeDestroy:function(){},Destroy:function(){},BeforeMount:function(){},Mounted:function(){},BeforeUpdate:function(){},Updated:function(){},Activated:function(){},Deactivated:function(){},El:function(){return null},Render:function(t){return null},Template:function(){return null},Components:function(){return null},GetDefaultPropSettings:function(){return null},GetDefaultPropValues:function(){return null},__class__:B});var N=function(){};n["haxevx.vuex.core.VxBoot"]=N,N.__name__=["haxevx","vuex","core","VxBoot"],N.registerModuleWithStore=function(t,e,n){e._Init(t+"/"),n[t]=e,n.registerModule(t,e),N.clearModuleInjStack(n)},N.clearModuleInjStack=function(t){for(var e=t.getters,n=W.stack,i=n.length;--i>-1;)n[i]._InjNative(e);W.stack=[]},N.notifyStarted=function(){R.clearLookups()},N.getRenderComponentMethod=function(t){return function(e){return e(t,null,null)}},N.prototype={startStore:function(t){if(null!=this.STORE)throw new V("Vuex store already started! Only 1 store is allowed");for(var e,n,i=new Vuex.Store(t),r=i.getters,s=W.stack,a=s.length;--a>-1;)s[a]._InjNative(r);if(s=[],null!=t.modules){var o=0;n=t.modules;for(var l=d.fields(n);o<l.length;){var u=l[o];++o;d.field(n,u);e=t[u],i[u]=e}}return this.STORE=i,i},startVueWithRootComponent:function(t,e){var n={};n.el=t,null!=this.STORE&&(n.store=this.STORE),n.render=N.getRenderComponentMethod(e);var i=new Vue(n);return N.notifyStarted(),i},__class__:N};var W=function(){};n["haxevx.vuex.core.ModuleStack"]=W,W.__name__=["haxevx","vuex","core","ModuleStack"];var F=function(){};n["haxevx.vuex.core.VxMacroUtil"]=F,F.__name__=["haxevx","vuex","core","VxMacroUtil"],F.dynamicSet=function(t,e,n){t[e]=n},F.dynamicSetPropValueInto=function(t,e,n){for(var i=0,r=d.fields(n);i<r.length;){var s=r[i];++i;var a=d.field(t,s);null==a&&(a={},t[s]=a),a[e]=d.field(n,s)}},F.dynamicSetPropSettingInto=function(t,e){for(var n=0,i=d.fields(e);n<i.length;){var r=i[n];++n;var s=d.field(e,r),a=d.field(t,r);if(null!=a)for(var o=0,l=d.fields(s);o<l.length;){var u=l[o];++o,a[u]=d.field(s,u)}else t[r]=s}},F.dynamicSetOverwrite=function(t,e){for(var n=0,i=d.fields(e);n<i.length;){var r=i[n];++n,t[r]=d.field(e,r)}};var O=function(){};n["haxevx.vuex.native.ActionContext"]=O,O.__name__=["haxevx","vuex","native","ActionContext"],O.prototype={__class__:O};var H=function(){};n["haxevx.vuex.util.VHTMacros"]=H,H.__name__=["haxevx","vuex","util","VHTMacros"];var V=function(t){Error.call(this),this.val=t,this.message=String(t),Error.captureStackTrace&&Error.captureStackTrace(this,V)};n["js._Boot.HaxeError"]=V,V.__name__=["js","_Boot","HaxeError"],V.wrap=function(t){return t instanceof Error?t:new V(t)},V.__super__=Error,V.prototype=r(Error.prototype,{__class__:V});var D=function(){};n["js.Boot"]=D,D.__name__=["js","Boot"],D.getClass=function(t){if(t instanceof Array&&null==t.__enum__)return Array;var e=t.__class__;if(null!=e)return e;var n=D.__nativeClassName(t);return null!=n?D.__resolveNativeClass(n):null},D.__string_rec=function(t,e){if(null==t)return"null";if(e.length>=5)return"<...>";var n=typeof t;switch("function"==n&&(t.__name__||t.__ename__)&&(n="object"),n){case"function":return"<function>";case"object":if(t instanceof Array){if(t.__enum__){if(2==t.length)return t[0];var i=t[0]+"(";e+="\t";for(var r=2,s=t.length;r<s;){var a=r++;i+=2!=a?","+D.__string_rec(t[a],e):D.__string_rec(t[a],e)}return i+")"}var o="[";e+="\t";for(var l=0,u=t.length;l<u;){var c=l++;o+=(c>0?",":"")+D.__string_rec(t[c],e)}return o+="]"}var h;try{h=t.toString}catch(t){return"???"}if(null!=h&&h!=Object.toString&&"function"==typeof h){var d=t.toString();if("[object Object]"!=d)return d}var p=null,g="{\n";e+="\t";var m=null!=t.hasOwnProperty;for(var p in t)m&&!t.hasOwnProperty(p)||"prototype"!=p&&"__class__"!=p&&"__super__"!=p&&"__interfaces__"!=p&&"__properties__"!=p&&(2!=g.length&&(g+=", \n"),g+=e+p+" : "+D.__string_rec(t[p],e));return g+="\n"+(e=e.substring(1))+"}";case"string":return t;default:return String(t)}},D.__interfLoop=function(t,e){if(null==t)return!1;if(t==e)return!0;var n=t.__interfaces__;if(null!=n)for(var i=0,r=n.length;i<r;){var s=n[i++];if(s==e||D.__interfLoop(s,e))return!0}return D.__interfLoop(t.__super__,e)},D.__instanceof=function(t,e){if(null==e)return!1;switch(e){case Array:return t instanceof Array&&null==t.__enum__;case Xr:return"boolean"==typeof t;case Yr:return!0;case Kr:return"number"==typeof t;case Qr:return"number"==typeof t&&(0|t)===t;case String:return"string"==typeof t;default:if(null==t)return!1;if("function"==typeof e){if(t instanceof e)return!0;if(D.__interfLoop(D.getClass(t),e))return!0}else if("object"==typeof e&&D.__isNativeObj(e)&&t instanceof e)return!0;return e==Jr&&null!=t.__name__||(e==ts&&null!=t.__ename__||t.__enum__==e)}},D.__nativeClassName=function(t){var e=D.__toStr.call(t).slice(8,-1);return"Object"==e||"Function"==e||"Math"==e||"JSON"==e?null:e},D.__isNativeObj=function(t){return null!=D.__nativeClassName(t)},D.__resolveNativeClass=function(t){return e[t]};var q=function(){};n["js.Browser"]=q,q.__name__=["js","Browser"],q.createXMLHttpRequest=function(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)return new ActiveXObject("Microsoft.XMLHTTP");throw new V("Unable to create XMLHttpRequest object.")},q.alert=function(t){window.alert(D.__string_rec(t,""))};var j=function(t){if(t instanceof Array&&null==t.__enum__)this.a=t,this.byteLength=t.length;else{var e=t;this.a=[];for(var n=0,i=e;n<i;){var r=n++;this.a[r]=0}this.byteLength=e}};n["js.html.compat.ArrayBuffer"]=j,j.__name__=["js","html","compat","ArrayBuffer"],j.sliceImpl=function(t,e){var n=new is(this,t,null==e?null:e-t),i=new ns(n.byteLength);return new is(i).set(n),i},j.prototype={slice:function(t,e){return new j(this.a.slice(t,e))},__class__:j};var G=function(){};n["js.html.compat.Uint8Array"]=G,G.__name__=["js","html","compat","Uint8Array"],G._new=function(t,e,n){var i;if("number"==typeof t){i=[];for(var r=0,s=t;r<s;){i[r++]=0}i.byteLength=i.length,i.byteOffset=0,i.buffer=new j(i)}else if(D.__instanceof(t,j)){var a=t;null==e&&(e=0),null==n&&(n=a.byteLength-e),(i=0==e?a.a:a.a.slice(e,e+n)).byteLength=i.length,i.byteOffset=e,i.buffer=a}else{if(!(t instanceof Array&&null==t.__enum__))throw new V("TODO "+p.string(t));(i=t.slice()).byteLength=i.length,i.byteOffset=0,i.buffer=new j(i)}return i.subarray=G._subarray,i.set=G._set,i},G._set=function(t,e){if(D.__instanceof(t.buffer,j)){var n=t;if(t.byteLength+e>this.byteLength)throw new V("set() outside of range");for(var i=0,r=t.byteLength;i<r;){var s=i++;this[s+e]=n[s]}}else{if(!(t instanceof Array&&null==t.__enum__))throw new V("TODO");var a=t;if(a.length+e>this.byteLength)throw new V("set() outside of range");for(var o=0,l=a.length;o<l;){var u=o++;this[u+e]=a[u]}}},G._subarray=function(t,e){var n=G._new(this.slice(t,e));return n.byteOffset=t,n};var U=function(t){null==t&&(t=[]),this.valueClasses=t,this.slots=J.NIL,this.priorityBased=!1};n["msignal.Signal"]=U,U.__name__=["msignal","Signal"],U.prototype={add:function(t){return this.registerListener(t)},addOnce:function(t){return this.registerListener(t,!0)},addWithPriority:function(t,e){return null==e&&(e=0),this.registerListener(t,!1,e)},addOnceWithPriority:function(t,e){return null==e&&(e=0),this.registerListener(t,!0,e)},remove:function(t){var e=this.slots.find(t);return null==e?null:(this.slots=this.slots.filterNot(t),e)},removeAll:function(){this.slots=J.NIL},registerListener:function(t,e,n){if(null==n&&(n=0),null==e&&(e=!1),this.registrationPossible(t,e)){var i=this.createSlot(t,e,n);return this.priorityBased||0==n||(this.priorityBased=!0),this.priorityBased||0!=n?this.slots=this.slots.insertWithPriority(i):this.slots=this.slots.prepend(i),i}return this.slots.find(t)},registrationPossible:function(t,e){return!this.slots.nonEmpty||null==this.slots.find(t)},createSlot:function(t,e,n){return null==n&&(n=0),null==e&&(e=!1),null},get_numListeners:function(){return this.slots.get_length()},__class__:U};var $=function(){U.call(this)};n["msignal.Signal0"]=$,$.__name__=["msignal","Signal0"],$.__super__=U,$.prototype=r(U.prototype,{dispatch:function(){for(var t=this.slots;t.nonEmpty;)t.head.execute(),t=t.tail},createSlot:function(t,e,n){return null==n&&(n=0),null==e&&(e=!1),new Y(this,t,e,n)},__class__:$});var z=function(t){U.call(this,[t])};n["msignal.Signal1"]=z,z.__name__=["msignal","Signal1"],z.__super__=U,z.prototype=r(U.prototype,{dispatch:function(t){for(var e=this.slots;e.nonEmpty;)e.head.execute(t),e=e.tail},createSlot:function(t,e,n){return null==n&&(n=0),null==e&&(e=!1),new K(this,t,e,n)},__class__:z});var Z=function(t,e){U.call(this,[t,e])};n["msignal.Signal2"]=Z,Z.__name__=["msignal","Signal2"],Z.__super__=U,Z.prototype=r(U.prototype,{dispatch:function(t,e){for(var n=this.slots;n.nonEmpty;)n.head.execute(t,e),n=n.tail},createSlot:function(t,e,n){return null==n&&(n=0),null==e&&(e=!1),new X(this,t,e,n)},__class__:Z});var Q=function(t,e,n,i){null==i&&(i=0),null==n&&(n=!1),this.signal=t,this.set_listener(e),this.once=n,this.priority=i,this.enabled=!0};n["msignal.Slot"]=Q,Q.__name__=["msignal","Slot"],Q.prototype={remove:function(){this.signal.remove(this.listener)},set_listener:function(t){return this.listener=t},__class__:Q};var Y=function(t,e,n,i){null==i&&(i=0),null==n&&(n=!1),Q.call(this,t,e,n,i)};n["msignal.Slot0"]=Y,Y.__name__=["msignal","Slot0"],Y.__super__=Q,Y.prototype=r(Q.prototype,{execute:function(){this.enabled&&(this.once&&this.remove(),this.listener())},__class__:Y});var K=function(t,e,n,i){null==i&&(i=0),null==n&&(n=!1),Q.call(this,t,e,n,i)};n["msignal.Slot1"]=K,K.__name__=["msignal","Slot1"],K.__super__=Q,K.prototype=r(Q.prototype,{execute:function(t){this.enabled&&(this.once&&this.remove(),null!=this.param&&(t=this.param),this.listener(t))},__class__:K});var X=function(t,e,n,i){null==i&&(i=0),null==n&&(n=!1),Q.call(this,t,e,n,i)};n["msignal.Slot2"]=X,X.__name__=["msignal","Slot2"],X.__super__=Q,X.prototype=r(Q.prototype,{execute:function(t,e){this.enabled&&(this.once&&this.remove(),null!=this.param1&&(t=this.param1),null!=this.param2&&(e=this.param2),this.listener(t,e))},__class__:X});var J=function(t,e){this.nonEmpty=!1,null==t&&null==e?this.nonEmpty=!1:null!=t&&(this.head=t,this.tail=null==e?J.NIL:e,this.nonEmpty=!0)};n["msignal.SlotList"]=J,J.__name__=["msignal","SlotList"],J.prototype={get_length:function(){if(!this.nonEmpty)return 0;if(this.tail==J.NIL)return 1;for(var t=0,e=this;e.nonEmpty;)++t,e=e.tail;return t},prepend:function(t){return new J(t,this)},append:function(t){if(null==t)return this;if(!this.nonEmpty)return new J(t);if(this.tail==J.NIL)return new J(t).prepend(this.head);for(var e=new J(this.head),n=e,i=this.tail;i.nonEmpty;)n=n.tail=new J(i.head),i=i.tail;return n.tail=new J(t),e},insertWithPriority:function(t){if(!this.nonEmpty)return new J(t);var e=t.priority;if(e>=this.head.priority)return this.prepend(t);for(var n=new J(this.head),i=n,r=this.tail;r.nonEmpty;){if(e>r.head.priority)return i.tail=r.prepend(t),n;i=i.tail=new J(r.head),r=r.tail}return i.tail=new J(t),n},filterNot:function(t){if(!this.nonEmpty||null==t)return this;if(d.compareMethods(this.head.listener,t))return this.tail;for(var e=new J(this.head),n=e,i=this.tail;i.nonEmpty;){if(d.compareMethods(i.head.listener,t))return n.tail=i.tail,e;n=n.tail=new J(i.head),i=i.tail}return this},contains:function(t){if(!this.nonEmpty)return!1;for(var e=this;e.nonEmpty;){if(d.compareMethods(e.head.listener,t))return!0;e=e.tail}return!1},find:function(t){if(!this.nonEmpty)return null;for(var e=this;e.nonEmpty;){if(d.compareMethods(e.head.listener,t))return e.head;e=e.tail}return null},__class__:J};var tt=function(){};n["troshx.core.IUid"]=tt,tt.__name__=["troshx","core","IUid"],tt.prototype={__class__:tt};var et=function(){};n["troshx.ds.IMatchArray"]=et,et.__name__=["troshx","ds","IMatchArray"],et.prototype={__class__:et};var nt=function(){this.hash={},this.list=[]};n["troshx.ds.HashedArray"]=nt,nt.__name__=["troshx","ds","HashedArray"],nt.__interfaces__=[et],nt.prototype={filter:function(t){this.list=this.list.filter(t),this.rehash()},rehash:function(){for(var t={},e=0,n=this.list.length;e<n;){var i=e++,r=this.list[i];t[r.get_uid()]=r}this.hash=t},add:function(t){var e=t.get_uid();this.hashContains(t)?this.hash[e].updateAgainst(t):(this.hash[e]=t,this.list.push(t))},indexOf:function(t){for(var e=0,n=this.list.length;e<n;){var i=e++;if(this.list[i].get_uid()==t.get_uid())return i}return-1},delete:function(t){var e=t.get_uid();this.hashContains(t)?d.deleteField(this.hash,e):console.log("Warning: No item found to be removed for uid:"+t.get_uid());var n=this.indexOf(t);n>=0?this.list.splice(n,1):console.log("Warning: No item found to be removed for array index:"+n)},contains:function(t){return this.hashContains(t)},containsId:function(t){return Object.prototype.hasOwnProperty.call(this.hash,t)},hashContains:function(t){var e=this.hash,n=t.get_uid();return Object.prototype.hasOwnProperty.call(e,n)},findById:function(t){return d.field(this.hash,t)},listContains:function(t){return this.indexOf(t)>=0},__class__:nt};var it=function(){this.list=[]};n["troshx.ds.IDMatchArray"]=it,it.__name__=["troshx","ds","IDMatchArray"],it.__interfaces__=[et],it.prototype={filter:function(t){this.list=this.list.filter(t)},add:function(t){t.get_uid();var e,n=this.getMatchingItem(t);null==n?this.list.push(t):(n.updateAgainst(t),t!=n&&(e=this.list.indexOf(t))>=0&&this.list.splice(e,1))},delete:function(t){t.get_uid();this.contains(t)||console.log("Warning: No item found to be removed for uid:"+t.get_uid());var e=this.list.indexOf(t);e>=0?this.list.splice(e,1):console.log("Warning: No item found to be removed for array index:"+e)},contains:function(t){for(var e=0,n=this.list.length;e<n;){var i=e++;if(this.list[i].get_uid()==t.get_uid())return!0}return!1},splicedAgainst:function(t){for(var e=-1,n=null,i=0,r=this.list.length;i<r;){var s=i++,a=this.list[s];if(a.get_uid()==t.get_uid()){n=a,e=s;break}}return null!=n&&(n.spliceAgainst(t)<=0&&this.list.splice(e,1),!0)},getMatchingItem:function(t){for(var e=0,n=this.list.length;e<n;){var i=e++,r=this.list[i];if(r.get_uid()==t.get_uid())return r}return null},listContains:function(t){return this.list.indexOf(t)>=0},get_length:function(){return this.list.length},__class__:it};var rt=function(){};n["troshx.ds.IUpdateWith"]=rt,rt.__name__=["troshx","ds","IUpdateWith"],rt.prototype={__class__:rt};var st=function(){};n["troshx.ds.IValidable"]=st,st.__name__=["troshx","ds","IValidable"],st.prototype={__class__:st};var at=function(t){this.value=t};n["troshx.ds.ValueHolder"]=at,at.__name__=["troshx","ds","ValueHolder"],at.prototype={__class__:at};var ot=function(t){this.value=t};n["troshx.ds.ValueHolder_Int"]=ot,ot.__name__=["troshx","ds","ValueHolder_Int"],ot.prototype={__class__:ot};var lt=function(t,e){this.name=t,this.costs=e,this.flags=0,this.clampRank=!1,this.multipleTimes=0,this.channels=0,this.superChannels=0};n["troshx.sos.core.BoonBane"]=lt,lt.__name__=["troshx","sos","core","BoonBane"],lt.prototype={isAvailableCharacterCreation:function(){return this.costs!=lt.COSTLESS_ARRAY},get_uid:function(){return this.name},__class__:lt};var ut=function(t,e){lt.call(this,t,e)};n["troshx.sos.core.Boon"]=ut,ut.__name__=["troshx","sos","core","Boon"],ut.__super__=lt,ut.prototype=r(lt.prototype,{getEmptyAssignInstance:function(t){return new pt},getAssign:function(t,e){var n=this.getEmptyAssignInstance(e);return n.boon=this,n.rank=t,n},__class__:ut});var ct=function(){ut.call(this,"Allies",[1,5,10]),this.clampRank=!0,this.multipleTimes=-2};n["troshx.sos.bnb.Allies"]=ct,ct.__name__=["troshx","sos","bnb","Allies"],ct.__super__=ut,ct.prototype=r(ut.prototype,{getEmptyAssignInstance:function(t){return new gt},__class__:ct});var ht=function(){};n["troshx.sos.bnb.IBuildUIFields"]=ht,ht.__name__=["troshx","sos","bnb","IBuildUIFields"];var dt=function(){this._minRequired=0,this._canceled=!1,this._forcePermanent=!1,this.discount=0};n["troshx.sos.core.BoonBaneAssign"]=dt,dt.__name__=["troshx","sos","core","BoonBaneAssign"],dt.__interfaces__=[tt],dt.prototype={freeze:function(){},unfreezeAll:function(){},dontCountCost:function(){return!!this._canceled||this._forcePermanent},cleanup:function(){},cleanupUIArrays:function(){},onFurtherAdded:function(t){},onRemoved:function(t){},onInited:function(t){},getQty:function(){return 1},getCost:function(t){return 0},getCosting:function(t,e){return t.costs[e-1]},isValid:function(){return!0},getBoonOrBane:function(){return null},getUIFields:function(){return null},get_uid:function(){return""},__class__:dt};var pt=function(){dt.call(this)};n["troshx.sos.core.BoonAssign"]=pt,pt.__name__=["troshx","sos","core","BoonAssign"],pt.__interfaces__=[rt],pt.__super__=dt,pt.prototype=r(dt.prototype,{getMaxLength:function(t,e){return(this._remainingCached+e*t)/t|0},clampLength:function(t,e){return null==e&&(e=1),t>=e?t:e},bitmaskIndexCanBeToggledAtCost:function(t,e,n){var i=0!=(e&1<<t),r=this._remainingCached>=n;return!!i||r},updateRemainingCache:function(t){this._remainingCached=t},get_uid:function(){return this.boon.name},getCost:function(t){return this.boon.costs[(t<2?1:t)-1]},getBaseCost:function(t){return this.boon.costs[(t<2?1:t)-1]},getBoonOrBane:function(){return this.boon},getUIFields:function(){return null},toString:function(){return"[BoonAssign: "+this.boon.name+"]"},updateAgainst:function(t){},spliceAgainst:function(t){return 0},__class__:pt});var gt=function(){this.__hasUIFields__=!0,this.majorPowerList=[],this.moderatePowerList=[],this.minorPowerList=[""],pt.call(this)};n["troshx.sos.bnb.AlliesAssign"]=gt,gt.__name__=["troshx","sos","bnb","AlliesAssign"],gt.__super__=pt,gt.prototype=r(pt.prototype,{getQty:function(){return this.minorPowerList.length+this.moderatePowerList.length+this.majorPowerList.length},getMaxLengthCost:function(t,e){return e*t},getCost:function(t){return this.getMaxLengthCost(1,this.minorPowerList.length)+this.getMaxLengthCost(5,this.moderatePowerList.length)+this.getMaxLengthCost(10,this.majorPowerList.length)},cleanupUIArrays:function(){var t=this.minorPowerList.length;this.minorPowerList=this.minorPowerList.slice(0,(this._remainingCached+(t>=1?t:1))/1|0),this.moderatePowerList=this.moderatePowerList.slice(0,(this._remainingCached+5*this.moderatePowerList.length)/5|0),this.majorPowerList=this.majorPowerList.slice(0,(this._remainingCached+10*this.majorPowerList.length)/10|0)},getUIFields:function(){var t=this.minorPowerList.length;return[{prop:"minorPowerList",minLength:0,maxLength:(this._remainingCached+(t>=1?t:1))/1|0,of:"String",defaultValue:"",type:"Array",label:"Minor Power List"},{prop:"moderatePowerList",minLength:0,maxLength:(this._remainingCached+5*this.moderatePowerList.length)/5|0,of:"String",defaultValue:"",type:"Array",label:"Moderate Power List"},{prop:"majorPowerList",minLength:0,maxLength:(this._remainingCached+10*this.majorPowerList.length)/10|0,of:"String",defaultValue:"",type:"Array",label:"Major Power List"},{prop:"notes",type:"textarea",label:"Notes"}]},__class__:gt});var mt=function(t,e){lt.call(this,t,e),this.isBane=!0};n["troshx.sos.core.Bane"]=mt,mt.__name__=["troshx","sos","core","Bane"],mt.__super__=lt,mt.prototype=r(lt.prototype,{getEmptyAssignInstance:function(t){return new vt},getAssign:function(t,e){var n=this.getEmptyAssignInstance(e);return n.bane=this,n.rank=t,n},__class__:mt});var ft=function(){mt.call(this,"Bad Eyes",[4,6]),this.channels=1,this.flags=2};n["troshx.sos.bnb.BadEyes"]=ft,ft.__name__=["troshx","sos","bnb","BadEyes"],ft.__super__=mt,ft.prototype=r(mt.prototype,{__class__:ft});var _t=function(){};n["troshx.sos.bnb.Banes"]=_t,_t.__name__=["troshx","sos","bnb","Banes"],_t.getList=function(){return[new yt,new wt,new ft,new St,new qt,new Ct,new At,new xt,new ge,new fe,new It,new kt,new ye,new Ce,new xe,new Tt,new Lt,new Le,new Mt,new Et,new Rt,new Pt,new Fe,new Bt,new De,new je,new Nt,new Ue,new ze,new Wt,new Ft,new Qe,new Ot,new Ht,new Vt,new Dt]},_t.prototype={__class__:_t};var vt=function(){dt.call(this)};n["troshx.sos.core.BaneAssign"]=vt,vt.__name__=["troshx","sos","core","BaneAssign"],vt.__interfaces__=[rt],vt.__super__=dt,vt.prototype=r(dt.prototype,{get_uid:function(){return this.bane.name},getCost:function(t){return this.bane.costs[(t<2?1:t)-1]},getBaseCost:function(t){return this.bane.costs[(t<2?1:t)-1]},getBoonOrBane:function(){return this.bane},getUIFields:function(){return null},toString:function(){return"[BaneAssign: "+this.bane.name+"]"},updateAgainst:function(t){},spliceAgainst:function(t){return 0},__class__:vt});var bt=function(){this.__hasUIFields__=!0,this.notes="",vt.call(this)};n["troshx.sos.bnb.BaneNotesAssign"]=bt,bt.__name__=["troshx","sos","bnb","BaneNotesAssign"],bt.__super__=vt,bt.prototype=r(vt.prototype,{getUIFields:function(){return[{prop:"notes",type:"textarea",label:"Notes"}]},__class__:bt});var yt=function(){mt.call(this,"Arrow Magnet",[3])};n["troshx.sos.bnb.ArrowMagnet"]=yt,yt.__name__=["troshx","sos","bnb","ArrowMagnet"],yt.__super__=mt,yt.prototype=r(mt.prototype,{__class__:yt});var wt=function(){mt.call(this,"Bad Ears",[2,4]),this.channels=2,this.flags=2};n["troshx.sos.bnb.BadEars"]=wt,wt.__name__=["troshx","sos","bnb","BadEars"],wt.__super__=mt,wt.prototype=r(mt.prototype,{__class__:wt});var St=function(){mt.call(this,"Bad Reputation",[3,6,9])};n["troshx.sos.bnb.BadReputation"]=St,St.__name__=["troshx","sos","bnb","BadReputation"],St.__super__=mt,St.prototype=r(mt.prototype,{__class__:St});var Ct=function(){mt.call(this,"Bigoted",[5])};n["troshx.sos.bnb.Bigoted"]=Ct,Ct.__name__=["troshx","sos","bnb","Bigoted"],Ct.__super__=mt,Ct.prototype=r(mt.prototype,{__class__:Ct});var At=function(){mt.call(this,"Blind",[20]),this.flags=2,this.superChannels=65};n["troshx.sos.bnb.Blind"]=At,At.__name__=["troshx","sos","bnb","Blind"],At.__super__=mt,At.prototype=r(mt.prototype,{__class__:At});var xt=function(){mt.call(this,"Braggart",[3])};n["troshx.sos.bnb.Braggart"]=xt,xt.__name__=["troshx","sos","bnb","Braggart"],xt.__super__=mt,xt.prototype=r(mt.prototype,{__class__:xt});var It=function(){mt.call(this,"Complete Monster",[10]),this.channels=256};n["troshx.sos.bnb.CompleteMonster"]=It,It.__name__=["troshx","sos","bnb","CompleteMonster"],It.__super__=mt,It.prototype=r(mt.prototype,{__class__:It});var kt=function(){mt.call(this,"Craven",[4,8]),this.channels=128};n["troshx.sos.bnb.Craven"]=kt,kt.__name__=["troshx","sos","bnb","Craven"],kt.__super__=mt,kt.prototype=r(mt.prototype,{__class__:kt});var Tt=function(){mt.call(this,"Enemies",[3,10,15])};n["troshx.sos.bnb.Enemies"]=Tt,Tt.__name__=["troshx","sos","bnb","Enemies"],Tt.__super__=mt,Tt.prototype=r(mt.prototype,{__class__:Tt});var Lt=function(){mt.call(this,"Facial Deformity",[2,4,8]),this.flags=2};n["troshx.sos.bnb.FacialDeformity"]=Lt,Lt.__name__=["troshx","sos","bnb","FacialDeformity"],Lt.__super__=mt,Lt.prototype=r(mt.prototype,{__class__:Lt});var Mt=function(){mt.call(this,"Frail",[8]),this.channels=32,this.staticModifiers=[Ln.create(12,"Frail",-1)]};n["troshx.sos.bnb.Frail"]=Mt,Mt.__name__=["troshx","sos","bnb","Frail"],Mt.__super__=mt,Mt.prototype=r(mt.prototype,{__class__:Mt});var Et=function(){mt.call(this,"Haemophilia",[8]),this.flags=2};n["troshx.sos.bnb.Haemophilia"]=Et,Et.__name__=["troshx","sos","bnb","Haemophilia"],Et.__super__=mt,Et.prototype=r(mt.prototype,{__class__:Et});var Pt=function(){mt.call(this,"Hothead",[3])};n["troshx.sos.bnb.Hothead"]=Pt,Pt.__name__=["troshx","sos","bnb","Hothead"],Pt.__super__=mt,Pt.prototype=r(mt.prototype,{__class__:Pt});var Rt=function(){mt.call(this,"Honorable",[5]),this.channels=256};n["troshx.sos.bnb.Honorable"]=Rt,Rt.__name__=["troshx","sos","bnb","Honorable"],Rt.__super__=mt,Rt.prototype=r(mt.prototype,{__class__:Rt});var Bt=function(){mt.call(this,"Mute",[5,8]),this.flags=2};n["troshx.sos.bnb.Mute"]=Bt,Bt.__name__=["troshx","sos","bnb","Mute"],Bt.__super__=mt,Bt.prototype=r(mt.prototype,{__class__:Bt});var Nt=function(){mt.call(this,"One-Eyed",[10]),this.flags=2,this.channels=64;var t=Ln.create(13,"One-Eyed",-1);t.next=Ln.create(15,"One-Eyed",-2),this.staticModifiers=[t]};n["troshx.sos.bnb.OneEyed"]=Nt,Nt.__name__=["troshx","sos","bnb","OneEyed"],Nt.__super__=mt,Nt.prototype=r(mt.prototype,{__class__:Nt});var Wt=function(){mt.call(this,"Sheltered",[2,4,6]),this.flags=1,this.channels=16,this.staticModifiers=[Ln.create(20,"Sheltered (i)",-1),Ln.create(20,"Sheltered (ii)",-2),Ln.create(20,"Sheltered (iii)",-3)]};n["troshx.sos.bnb.Sheltered"]=Wt,Wt.__name__=["troshx","sos","bnb","Sheltered"],Wt.__super__=mt,Wt.prototype=r(mt.prototype,{__class__:Wt});var Ft=function(){mt.call(this,"Short",[8,15]),this.channels=512;var t=Ln.create(14,"Short (i)",-1);t.next=Ln.create(9,"Short (i)",-1);var e=Ln.create(14,"Short (ii)",-2);e.next=Ln.create(9,"Short (ii)",-2),this.staticModifiers=[t,e]};n["troshx.sos.bnb.Short"]=Ft,Ft.__name__=["troshx","sos","bnb","Short"],Ft.__super__=mt,Ft.prototype=r(mt.prototype,{__class__:Ft});var Ot=function(){mt.call(this,"Technologically Impaired",[5])};n["troshx.sos.bnb.TechnologicallyImpaired"]=Ot,Ot.__name__=["troshx","sos","bnb","TechnologicallyImpaired"],Ot.__super__=mt,Ot.prototype=r(mt.prototype,{__class__:Ot});var Ht=function(){mt.call(this,"Unhappily Married",[1,2,3])};n["troshx.sos.bnb.UnhappilyMarried"]=Ht,Ht.__name__=["troshx","sos","bnb","UnhappilyMarried"],Ht.__super__=mt,Ht.prototype=r(mt.prototype,{__class__:Ht});var Vt=function(){mt.call(this,"Virtuous",[5])};n["troshx.sos.bnb.Virtuous"]=Vt,Vt.__name__=["troshx","sos","bnb","Virtuous"],Vt.__super__=mt,Vt.prototype=r(mt.prototype,{__class__:Vt});var Dt=function(){mt.call(this,"Wanted",[5,10,15])};n["troshx.sos.bnb.Wanted"]=Dt,Dt.__name__=["troshx","sos","bnb","Wanted"],Dt.__super__=mt,Dt.prototype=r(mt.prototype,{__class__:Dt});var qt=function(){mt.call(this,"Barren/Sterility",[1,3]),this.flags=2,this.conditions=[null,new Gt]};n["troshx.sos.bnb.BarrenOrSterility"]=qt,qt.__name__=["troshx","sos","bnb","BarrenOrSterility"],qt.__super__=mt,qt.prototype=r(mt.prototype,{__class__:qt});var jt=function(){};n["troshx.sos.core.BoonBaneCondition"]=jt,jt.__name__=["troshx","sos","core","BoonBaneCondition"],jt.prototype={valid:function(t){return!0},__class__:jt};var Gt=function(){jt.call(this)};n["troshx.sos.bnb.EunuchCondition"]=Gt,Gt.__name__=["troshx","sos","bnb","EunuchCondition"],Gt.__super__=jt,Gt.prototype=r(jt.prototype,{valid:function(t){return 0==t.gender},__class__:Gt});var Ut=function(){};n["troshx.sos.bnb.Boons"]=Ut,Ut.__name__=["troshx","sos","bnb","Boons"],Ut.getList=function(){return[new ct,new zt,new Zt,new Qt,new Yt,new Kt,new Xt,new Jt,new te,new ke,new ee,new Me,new ne,new Pe,new ie,new re,new se,new ae,new Re,new oe,new Ne,new He,new le,new ue,new de,new pe,new ce,new he]},Ut.prototype={__class__:Ut};var $t=function(){this.notes="",pt.call(this)};n["troshx.sos.bnb.BoonNotesAssign"]=$t,$t.__name__=["troshx","sos","bnb","BoonNotesAssign"],$t.__super__=pt,$t.prototype=r(pt.prototype,{getUIFields:function(){return[]},__class__:$t});var zt=function(){ut.call(this,"Ambidextrous",[3]),this.flags=1};n["troshx.sos.bnb.Ambidextrous"]=zt,zt.__name__=["troshx","sos","bnb","Ambidextrous"],zt.__super__=ut,zt.prototype=r(ut.prototype,{__class__:zt});var Zt=function(){ut.call(this,"Animal Affinity",[2,4,6])};n["troshx.sos.bnb.AnimalAffinity"]=Zt,Zt.__name__=["troshx","sos","bnb","AnimalAffinity"],Zt.__super__=ut,Zt.prototype=r(ut.prototype,{__class__:Zt});var Qt=function(){ut.call(this,"Beautiful",[3,6])};n["troshx.sos.bnb.Beautiful"]=Qt,Qt.__name__=["troshx","sos","bnb","Beautiful"],Qt.__super__=ut,Qt.prototype=r(ut.prototype,{__class__:Qt});var Yt=function(){ut.call(this,"Berserker",[8,12]);var t=Ln.create(13,"Berserker",4);this.staticModifiers=[t,t]};n["troshx.sos.bnb.Berserker"]=Yt,Yt.__name__=["troshx","sos","bnb","Berserker"],Yt.__super__=ut,Yt.prototype=r(ut.prototype,{__class__:Yt});var Kt=function(){ut.call(this,"Bloodthirsty",[4])};n["troshx.sos.bnb.Bloodthirsty"]=Kt,Kt.__name__=["troshx","sos","bnb","Bloodthirsty"],Kt.__super__=ut,Kt.prototype=r(ut.prototype,{__class__:Kt});var Xt=function(){ut.call(this,"Brave",[3])};n["troshx.sos.bnb.Brave"]=Xt,Xt.__name__=["troshx","sos","bnb","Brave"],Xt.__super__=ut,Xt.prototype=r(ut.prototype,{__class__:Xt});var Jt=function(){ut.call(this,"Contacts",[1,4,6,8])};n["troshx.sos.bnb.Contacts"]=Jt,Jt.__name__=["troshx","sos","bnb","Contacts"],Jt.__super__=ut,Jt.prototype=r(ut.prototype,{__class__:Jt});var te=function(){ut.call(this,"Direction Sense",[3])};n["troshx.sos.bnb.DirectionSense"]=te,te.__name__=["troshx","sos","bnb","DirectionSense"],te.__super__=ut,te.prototype=r(ut.prototype,{__class__:te});var ee=function(){ut.call(this,"Famous",[2,4])};n["troshx.sos.bnb.Famous"]=ee,ee.__name__=["troshx","sos","bnb","Famous"],ee.__super__=ut,ee.prototype=r(ut.prototype,{__class__:ee});var ne=function(){ut.call(this,"Folks Back Home",[3,6,8])};n["troshx.sos.bnb.FolksBackHome"]=ne,ne.__name__=["troshx","sos","bnb","FolksBackHome"],ne.__super__=ut,ne.prototype=r(ut.prototype,{__class__:ne});var ie=function(){ut.call(this,"Good Ears",[3]),this.channels=2};n["troshx.sos.bnb.GoodEars"]=ie,ie.__name__=["troshx","sos","bnb","GoodEars"],ie.__super__=ut,ie.prototype=r(ut.prototype,{__class__:ie});var re=function(){ut.call(this,"Good Eyes",[3]),this.channels=1};n["troshx.sos.bnb.GoodEyes"]=re,re.__name__=["troshx","sos","bnb","GoodEyes"],re.__super__=ut,re.prototype=r(ut.prototype,{__class__:re});var se=function(){ut.call(this,"Good Nose",[3]),this.channels=4};n["troshx.sos.bnb.GoodNose"]=se,se.__name__=["troshx","sos","bnb","GoodNose"],se.__super__=ut,se.prototype=r(ut.prototype,{__class__:se});var ae=function(){ut.call(this,"Hale and Hearty",[2,4])};n["troshx.sos.bnb.HaleAndHearty"]=ae,ae.__name__=["troshx","sos","bnb","HaleAndHearty"],ae.__super__=ut,ae.prototype=r(ut.prototype,{__class__:ae});var oe=function(){ut.call(this,"Known for Virtue",[5])};n["troshx.sos.bnb.KnownForVirtue"]=oe,oe.__name__=["troshx","sos","bnb","KnownForVirtue"],oe.__super__=ut,oe.prototype=r(ut.prototype,{__class__:oe});var le=function(){ut.call(this,"Natural Born Killer",[6,12,18]),this.staticModifiers=[Ln.create(13,"Natural Born Killer (i)",1),Ln.create(13,"Natural Born Killer (ii)",2),Ln.create(13,"Natural Born Killer (iii)",3)]};n["troshx.sos.bnb.NaturalBornKiller"]=le,le.__name__=["troshx","sos","bnb","NaturalBornKiller"],le.__super__=ut,le.prototype=r(ut.prototype,{__class__:le});var ue=function(){ut.call(this,"Natural Leader",[3])};n["troshx.sos.bnb.NaturalLeader"]=ue,ue.__name__=["troshx","sos","bnb","NaturalLeader"],ue.__super__=ut,ue.prototype=r(ut.prototype,{__class__:ue});var ce=function(){ut.call(this,"Tall",[8,12]),this.flags=1,this.channels=512,this.staticModifiers=[null,Ln.create(14,"Tall",1)]};n["troshx.sos.bnb.Tall"]=ce,ce.__name__=["troshx","sos","bnb","Tall"],ce.__super__=ut,ce.prototype=r(ut.prototype,{__class__:ce});var he=function(){ut.call(this,"True Grit",[2,4,6]),this.flags=1,this.channels=16,this.staticModifiers=[Ln.create(20,"True Grit (i)",1),Ln.create(20,"True Grit (ii)",2),Ln.create(20,"True Grit (iii)",3)]};n["troshx.sos.bnb.TrueGrit"]=he,he.__name__=["troshx","sos","bnb","TrueGrit"],he.__super__=ut,he.prototype=r(ut.prototype,{__class__:he});var de=function(){ut.call(this,"Rich",[1,3,5]),this.channels=8,this.flags=1,this.staticModifiers=[Ln.create(19,"Rich (i)",0,1.1),Ln.create(19,"Rich (ii)",0,1.5),Ln.create(19,"Rich (iii)",0,2)]};n["troshx.sos.bnb.Rich"]=de,de.__name__=["troshx","sos","bnb","Rich"],de.__super__=ut,de.prototype=r(ut.prototype,{__class__:de});var pe=function(){ut.call(this,"Robust",[8]),this.channels=32,this.staticModifiers=[Ln.create(12,"Robust",1)]};n["troshx.sos.bnb.Robust"]=pe,pe.__name__=["troshx","sos","bnb","Robust"],pe.__super__=ut,pe.prototype=r(ut.prototype,{__class__:pe});var ge=function(){mt.call(this,"Brain Damage",[4,8]),this.flags=2,this.multipleTimes=-2,this.clampRank=!0};n["troshx.sos.bnb.BrainDamage"]=ge,ge.__name__=["troshx","sos","bnb","BrainDamage"],ge.__super__=mt,ge.prototype=r(mt.prototype,{getEmptyAssignInstance:function(t){return new me(t)},__class__:ge});var me=function(t){this.__hasUIFields__=!0,this.intModifier=Ln.create(6,"Brain Damage",0),this.count2=0,this.count1=0,vt.call(this),this.char=t,this.oldWound=(new je).getAssign(0,t),this.mute=(new Bt).getAssign(0,t),this.lastingPain=(new Fe).getAssign(0,t),this.badEyes=(new ft).getAssign(0,t),this.badEars=(new wt).getAssign(0,t),this.blind=(new At).getAssign(0,t),this.oneEyed=(new Nt).getAssign(0,t)};n["troshx.sos.bnb.BrainDamageAssign"]=me,me.__name__=["troshx","sos","bnb","BrainDamageAssign"],me.__super__=vt,me.prototype=r(vt.prototype,{callbackUITrigger:function(t,e){return this.execute("count1"==e?0:1),this.baneQueue},gainBane:function(t,e){var n=t.bane.clampRank?1:e;t.rank>=n&&(n=t.rank),t.rank=n,t._minRequired=n,t.discount=t._costCached=t.getCost(n),this.baneQueue.push(t)},execute:function(t){var e;if(this._minRequired=1,0==t?(this.count1++,e=0):(this.count2++,e=2),this.char.ingame&&(this.intModifier.add-=1+(Math.random()*(0==t?2:5)|0),0!=this.intModifier.add&&!this.char.hasStaticModifier(this.intModifier))){var n=this.char,i=this.intModifier;if(null!=i){var r=n.staticModifierTable[i.index];r.push(i);for(var s=i.next;null!=s;)(r=n.staticModifierTable[s.index]).push(s),s=s.next}}var a=this.char.banes,o=this.oldWound.get_uid(),l=d.field(a.hash,o),u=this.char.banes,c=this.lastingPain.get_uid(),h=d.field(u.hash,c);l==this.oldWound&&(l=null),h==this.lastingPain&&(h=null),this.baneQueue=[];var p=(10*Math.random()|0)+e+1;switch(p){case 1:case 2:case 3:break;case 4:0==this.blind.rank&&this.gainBane(this.badEyes,1);break;case 5:this.gainBane(this.badEars,2);break;case 6:this.gainBane(this.oldWound.inflictRandom(),1),null!=l&&this.oldWound.mergeWith(l),this.gainBane(this.badEars,1);break;case 7:this.gainBane(this.oldWound.inflictRandom(),1),null!=l&&this.oldWound.mergeWith(l),this.gainBane(this.badEars,2);break;case 8:this.gainBane(this.oldWound.inflictRandom(),1),null!=l&&this.oldWound.mergeWith(l),0==this.blind.rank&&this.gainBane(this.oneEyed,1);break;case 9:this.gainBane(this.oldWound.inflictRandom(),1),null!=l&&this.oldWound.mergeWith(l),this.gainBane(this.mute,1);break;case 10:this.gainBane(this.oldWound.inflictRandom(),1),null!=l&&this.oldWound.mergeWith(l),this.gainBane(this.lastingPain.inflictRandomMinor(),1),null!=h&&this.lastingPain.mergeWith(h);break;case 11:this.gainBane(this.oldWound.inflictRandom(),1),null!=l&&this.oldWound.mergeWith(l),this.gainBane(this.lastingPain.inflictRandomMinor(),1),null!=h&&this.lastingPain.mergeWith(h),this.char.ingame&&(this.char.intelligence-=2);break;case 12:this.gainBane(this.oldWound.inflictRandom(),1),null!=l&&this.oldWound.mergeWith(l),this.gainBane(this.lastingPain.inflictRandomMajor(),2),null!=h&&this.lastingPain.mergeWith(h),this.gainBane(this.blind,1);break;default:console.log("Warning, unforeseen roll index number detected: "+p)}},getCost:function(t){return 4*this.count1+8*this.count2},getUIFields:function(){return[{prop:"count1",label:"Trigger Brain Damage (4)",type:"ButtonCounter",callback:Zr(this,this.callbackUITrigger),preventDefault:!0},{prop:"count2",label:"Trigger Brain Damage (8)",type:"ButtonCounter",callback:Zr(this,this.callbackUITrigger),preventDefault:!0}]},__class__:me});var fe=function(){mt.call(this,"Broken Limb",lt.COSTLESS_ARRAY),this.flags=2,this.multipleTimes=-2};n["troshx.sos.bnb.BrokenLimb"]=fe,fe.__name__=["troshx","sos","bnb","BrokenLimb"],fe.__super__=mt,fe.prototype=r(mt.prototype,{getEmptyAssignInstance:function(t){return new _e},__class__:fe});var _e=function(){this.__hasUIFields__=!0,this.affectedLimbs=0,vt.call(this);var t=new be(this);this.situationalModifiers=[t]};n["troshx.sos.bnb.BrokenLimbAssign"]=_e,_e.__name__=["troshx","sos","bnb","BrokenLimbAssign"],_e.__super__=vt,_e.prototype=r(vt.prototype,{isValid:function(){return this.affectedLimbs>0},getCost:function(t){return this.getQty()*vt.prototype.getCost.call(this,t)},getQty:function(){var t=0;return t+=0!=(1&this.affectedLimbs)?1:0,t+=0!=(2&this.affectedLimbs)?1:0,t+=0!=(4&this.affectedLimbs)?1:0,t+=0!=(8&this.affectedLimbs)?1:0},getUIFields:function(){return[{prop:"affectedLimbs",type:"Bitmask",labels:["Left Arm","Right Arm","Left Leg","Right Leg"],label:"Affected Limbs"}]},__class__:_e});var ve=function(t,e){this.index=t,this.name=e};n["troshx.sos.core.SituationalCharModifier"]=ve,ve.__name__=["troshx","sos","core","SituationalCharModifier"],ve.prototype={get_name:function(){return this.name},_setIndex:function(t){this.index=t},getModifiedValueMultiply:function(t,e,n){return n},getModifiedValueAdd:function(t,e,n){return n},__class__:ve};var be=function(t){ve.call(this,9,"Broken Limb"),this.current=t};n["troshx.sos.bnb.BrokenLimbMOBModifier"]=be,be.__name__=["troshx","sos","bnb","BrokenLimbMOBModifier"],be.__super__=ve,be.prototype=r(ve.prototype,{getModifiedValueMultiply:function(t,e,n){if(0!=(12&this.current.affectedLimbs)){var i=t.inventory.wornArmor;t.leftHanded;0!=(4&this.current.affectedLimbs)?t.leftHanded?1:2:0,0!=(8&this.current.affectedLimbs)?t.leftHanded?2:1:0;for(var r=0,s=i.length;r<s;)i[r++];return n<1?n:1}return n},__class__:be});var ye=function(){mt.call(this,"Crippled Limb/Appendage",[8]),this.flags=2,this.multipleTimes=-2};n["troshx.sos.bnb.CrippledLimb"]=ye,ye.__name__=["troshx","sos","bnb","CrippledLimb"],ye.__super__=mt,ye.prototype=r(mt.prototype,{getEmptyAssignInstance:function(t){return new we},__class__:ye});var we=function(){this.__hasUIFields__=!0,this.affectedLimbs=0,vt.call(this);var t=new Se(this);this.situationalModifiers=[t]};n["troshx.sos.bnb.CrippledLimbAssign"]=we,we.__name__=["troshx","sos","bnb","CrippledLimbAssign"],we.__super__=vt,we.prototype=r(vt.prototype,{isValid:function(){return this.getQty()>0},getCost:function(t){return this.getQty()*vt.prototype.getCost.call(this,t)},getQty:function(){var t=0;return t+=0!=(1&this.affectedLimbs)?1:0,t+=0!=(2&this.affectedLimbs)?1:0,t+=0!=(4&this.affectedLimbs)?1:0,t+=0!=(8&this.affectedLimbs)?1:0},getUIFields:function(){return[{prop:"affectedLimbs",type:"Bitmask",labels:["Left Arm","Right Arm","Left Leg","Right Leg"],label:"Affected Limbs"}]},__class__:we});var Se=function(t){ve.call(this,9,"Crippled Limb/Appendage"),this.current=t};n["troshx.sos.bnb.CrippedLimbMOBModifier"]=Se,Se.__name__=["troshx","sos","bnb","CrippedLimbMOBModifier"],Se.__super__=ve,Se.prototype=r(ve.prototype,{getModifiedValueMultiply:function(t,e,n){if(0!=(12&this.current.affectedLimbs)){var i=12==this.current.affectedLimbs?.25:.5;return e*i<n?e*i:n}return n},__class__:Se});var Ce=function(){mt.call(this,"Debt",[2,4,8])};n["troshx.sos.bnb.Debt"]=Ce,Ce.__name__=["troshx","sos","bnb","Debt"],Ce.__super__=mt,Ce.prototype=r(mt.prototype,{getEmptyAssignInstance:function(t){return new Ae},__class__:Ce});var Ae=function(){this.__hasUIFields__=!0,this.currentOwed=new Sn,vt.call(this)};n["troshx.sos.bnb.DebtAssign"]=Ae,Ae.__name__=["troshx","sos","bnb","DebtAssign"],Ae.__super__=vt,Ae.prototype=r(vt.prototype,{getUIFields:function(){return[{prop:"currentOwed",type:"Money",label:"Current Owed"}]},__class__:Ae});var xe=function(){mt.call(this,"Dire Past",[0]),this.flags=3};n["troshx.sos.bnb.DirePast"]=xe,xe.__name__=["troshx","sos","bnb","DirePast"],xe.__super__=mt,xe.prototype=r(mt.prototype,{getEmptyAssignInstance:function(t){return new Ie(t)},__class__:xe});var Ie=function(t){this.__hasUIFields__=!0,this.notes="",vt.call(this),this.char=t,this.uiActivated=this.char.direPast};n["troshx.sos.bnb.DirePastAssign"]=Ie,Ie.__name__=["troshx","sos","bnb","DirePastAssign"],Ie.__super__=vt,Ie.prototype=r(vt.prototype,{execute:function(){if(!this.char.direPast){this._forcePermanent=!0,this.char.direPast=!0;for(var t=this.char.banes.list,e=0,n=t.length;e<n;){var i=t[e++];i._minRequired=i.rank,i.discount=i._costCached=i.getCost(i.rank),i.freeze()}}},getUIFields:function(){return[{prop:"notes",type:"textarea",label:"Notes"},{prop:"uiActivated",type:"ButtonPermaPress",label:"Trigger",descriptionDone:"Done!",description:"Warning: For GM use only. Once you trigger Dire Past, all existing banes (assigned by GM based on your given 'story') are baked permanently at their current levels and can no longer be canceled/reduced during character creation! However, you will gain 10 free points to spend on Boons.",callback:Zr(this,this.execute)}]},__class__:Ie});var ke=function(){ut.call(this,"Estate",[10]),this.flags=1,this.multipleTimes=-2};n["troshx.sos.bnb.Estate"]=ke,ke.__name__=["troshx","sos","bnb","Estate"],ke.__super__=ut,ke.prototype=r(ut.prototype,{getEmptyAssignInstance:function(t){return new Te(t)},__class__:ke});var Te=function(t){this.__hasUIFields__=!0,this.notes="",this.estates=[Te.getEmptyWealthAssign()],pt.call(this),this.char=t};n["troshx.sos.bnb.EstateAssign"]=Te,Te.__name__=["troshx","sos","bnb","EstateAssign"],Te.getEmptyWealthAssign=function(){return{name:"",liquidate:!1,uid:Te.COUNT++,worth:2}},Te.__super__=pt,Te.prototype=r(pt.prototype,{getQty:function(){return this.estates.length},getCost:function(t){return 10*this.estates.length},cleanupUIArrays:function(){this.estates=this.estates.slice(0,(this._remainingCached+10*this.estates.length)/10|0)},getUIFields:function(){return[{prop:"estates",label:"Estates",defaultValue:Te.getEmptyWealthAssign,fixedWorth:!0,disableLiquidity:!this.char.ingame,minLength:1,maxLength:(this._remainingCached+10*this.estates.length)/10|0,of:"WealthAssetAssign",type:"Array"},{prop:"notes",type:"textarea",label:"Notes"}]},__class__:Te});var Le=function(){var t;mt.call(this,"Fat",[5]);var e=Ln.create(9,"Fat",-2);t=e,e=e.next=Ln.create(17,"Fat",-2),this.staticModifiers=[t]};n["troshx.sos.bnb.Fat"]=Le,Le.__name__=["troshx","sos","bnb","Fat"],Le.__super__=mt,Le.prototype=r(mt.prototype,{__class__:Le});var Me=function(){ut.call(this,"Favor",[1,3]),this.clampRank=!0,this.multipleTimes=-2};n["troshx.sos.bnb.Favor"]=Me,Me.__name__=["troshx","sos","bnb","Favor"],Me.__super__=ut,Me.prototype=r(ut.prototype,{getEmptyAssignInstance:function(t){return new Ee},__class__:Me});var Ee=function(){this.__hasUIFields__=!0,this.notes="",this.greaterFavors=[],this.simpleFavors=[""],pt.call(this)};n["troshx.sos.bnb.FavorAssign"]=Ee,Ee.__name__=["troshx","sos","bnb","FavorAssign"],Ee.__super__=pt,Ee.prototype=r(pt.prototype,{isValid:function(){return this.getQty()>=1},getQty:function(){return this.simpleFavors.length+this.greaterFavors.length},getCost:function(t){return this.simpleFavors.length+3*this.greaterFavors.length},cleanupUIArrays:function(){var t=this.simpleFavors.length;this.simpleFavors=this.simpleFavors.slice(0,(this._remainingCached+(t>=1?t:1))/1|0),this.greaterFavors=this.greaterFavors.slice(0,(this._remainingCached+3*this.greaterFavors.length)/3|0)},getUIFields:function(){var t=this.simpleFavors.length;return[{prop:"simpleFavors",minLength:0,maxLength:(this._remainingCached+(t>=1?t:1))/1|0,of:"String",defaultValue:"",type:"Array",label:"Simple Favors"},{prop:"greaterFavors",minLength:0,maxLength:(this._remainingCached+3*this.greaterFavors.length)/3|0,of:"String",defaultValue:"",type:"Array",label:"Greater Favors"},{prop:"notes",type:"textarea",label:"Notes"}]},__class__:Ee});var Pe=function(){ut.call(this,"Follower",[5])};n["troshx.sos.bnb.Follower"]=Pe,Pe.__name__=["troshx","sos","bnb","Follower"],Pe.__super__=ut,Pe.prototype=r(ut.prototype,{__class__:Pe});var Re=function(){ut.call(this,"Impressive Voice",[2]),this.multipleTimes=3};n["troshx.sos.bnb.ImpressiveVoice"]=Re,Re.__name__=["troshx","sos","bnb","ImpressiveVoice"],Re.__super__=ut,Re.prototype=r(ut.prototype,{getEmptyAssignInstance:function(t){return new Be},__class__:Re});var Be=function(){this.__hasUIFields__=!0,this.voiceQualities=0,pt.call(this)};n["troshx.sos.bnb.ImpressiveVoiceAssign"]=Be,Be.__name__=["troshx","sos","bnb","ImpressiveVoiceAssign"],Be.__super__=pt,Be.prototype=r(pt.prototype,{isValid:function(){return 0!=(7&this.voiceQualities)},canBeToggled:function(t){var e=0!=(this.voiceQualities&1<<t),n=this._remainingCached>=2;return!!e||n},getQty:function(){var t=0;return t+=0!=(1&this.voiceQualities)?1:0,t+=0!=(2&this.voiceQualities)?1:0,t+=0!=(4&this.voiceQualities)?1:0},getCost:function(t){return 2*this.getQty()},getUIFields:function(){return[{prop:"voiceQualities",type:"Bitmask",labels:["Powerful","Grating","Soothing"],validateOptionFunc:Zr(this,this.canBeToggled),label:"Voice Qualities"}]},__class__:Be});var Ne=function(){ut.call(this,"Language",[1,2,3]),this.customCostInnerSlashes="|/",this.multipleTimes=-2};n["troshx.sos.bnb.Language"]=Ne,Ne.__name__=["troshx","sos","bnb","Language"],Ne.__super__=ut,Ne.prototype=r(ut.prototype,{getEmptyAssignInstance:function(t){return new We(t)},__class__:Ne});var We=function(t){this.__hasUIFields__=!0,this.notes="",this.ingameLanguages=[],this.polyglotLanguages=[],this.secondLanguage=[],this.startingLanguages=[""],pt.call(this),this.char=t};n["troshx.sos.bnb.LanguageAssign"]=We,We.__name__=["troshx","sos","bnb","LanguageAssign"],We.__super__=pt,We.prototype=r(pt.prototype,{getQty:function(){return this.startingLanguages.length+this.secondLanguage.length+this.polyglotLanguages.length+this.ingameLanguages.length},getRankCost:function(t){return t>1?3==t?3:2:1},getCost:function(t){return(this.startingLanguages.length>1?this.startingLanguages.length-1:0)+(t>1?3==t?3:2:1)},cleanupUIArrays:function(){this.startingLanguages=this.startingLanguages.slice(0,(this._remainingCached+this.startingLanguages.length)/1|0),this.secondLanguage=this.secondLanguage.slice(0,2==this.rank?1:0),this.polyglotLanguages=this.polyglotLanguages.slice(0,this.rank>=3?this.char.get_INT()+2:0),this.ingameLanguages=this.ingameLanguages.slice(0,this.char.ingame?null:0)},getUIFields:function(){return[{prop:"startingLanguages",minLength:this.rank>=2?0:1,label:"Starting Languages #1",maxLength:(this._remainingCached+this.startingLanguages.length)/1|0,of:"String",defaultValue:"",type:"Array"},{prop:"secondLanguage",label:"2nd Starting Language #2",maxLength:2==this.rank?1:0,of:"String",defaultValue:"",type:"Array"},{prop:"polyglotLanguages",label:"Starting Polyglot Languages #3",maxLength:this.rank>=3?this.char.get_INT()+2:0,of:"String",defaultValue:"",type:"Array"},{prop:"ingameLanguages",maxLength:this.char.ingame?null:0,of:"String",defaultValue:"",type:"Array",label:"Ingame Languages"},{prop:"notes",type:"textarea",label:"Notes"}]},__class__:We});var Fe=function(){mt.call(this,"Lasting Pain",[4,8]),this.flags=2,this.multipleTimes=-2,this.clampRank=!0};n["troshx.sos.bnb.LastingPain"]=Fe,Fe.__name__=["troshx","sos","bnb","LastingPain"],Fe.__super__=mt,Fe.prototype=r(mt.prototype,{getEmptyAssignInstance:function(t){return new Oe(t)},__class__:Fe});var Oe=function(t){this.__hasUIFields__=!0,this.permaMask2=0,this.permaMask=0,this.hitLocationsMajor=0,this.hitLocationsMinor=0,vt.call(this),this.char=t};n["troshx.sos.bnb.LastingPainAssign"]=Oe,Oe.__name__=["troshx","sos","bnb","LastingPainAssign"],Oe.__super__=vt,Oe.prototype=r(vt.prototype,{isValidUILocation:function(t){return 0==(1<<t&this.permaMask)},isValidUILocation2:function(t){return 0==(1<<t&this.permaMask2)},getCost:function(t){return 4*this.minorCount()+8*this.majorCount()},mergeWith:function(t){this.hitLocationsMajor|=t.hitLocationsMajor,this.hitLocationsMinor|=t.hitLocationsMinor;for(var e=this.permaMask,n=this.char.body.hitLocations.length,i=0;--n>-1;)0!=(1<<n&e)&&++i;for(var r=4*i,s=this.permaMask2,a=this.char.body.hitLocations.length,o=0;--a>-1;)0!=(1<<a&s)&&++o;this.discount=r+8*o},freeze:function(){this.permaMask|=this.hitLocationsMinor,this.permaMask2|=this.hitLocationsMajor},unfreezeAll:function(){this.permaMask=0,this.permaMask2=0},inflictRandomMinor:function(){for(var t=this.char.body.hitLocations.length,e=[];--t>-1;)0==(1<<t&this.hitLocationsMinor)&&e.push(1<<t);return e.length>0&&(t=e[Math.random()*e.length|0],this.hitLocationsMinor|=t,this.permaMask|=t),this},inflictRandomMajor:function(){for(var t=this.char.body.hitLocations.length,e=[];--t>-1;)0==(1<<t&this.hitLocationsMajor)&&e.push(1<<t);return e.length>0&&(t=e[Math.random()*e.length|0],this.hitLocationsMajor|=t,this.permaMask2|=t),this},minorCount:function(){for(var t=this.hitLocationsMinor,e=this.char.body.hitLocations.length,n=0;--e>-1;)0!=(1<<e&t)&&++n;return n},majorCount:function(){for(var t=this.hitLocationsMajor,e=this.char.body.hitLocations.length,n=0;--e>-1;)0!=(1<<e&t)&&++n;return n},countMask:function(t){for(var e=this.char.body.hitLocations.length,n=0;--e>-1;)0!=(1<<e&t)&&++n;return n},getQty:function(){return this.minorCount()+this.majorCount()},isValid:function(){return 0!=this.hitLocationsMajor||0!=this.hitLocationsMinor},getUIFields:function(){return[{prop:"hitLocationsMinor",type:"HitLocationMultiSelector",body:this.char.body,validateOptionFunc:Zr(this,this.isValidUILocation),label:"Hit Locations Minor"},{prop:"hitLocationsMajor",type:"HitLocationMultiSelector",body:this.char.body,validateOptionFunc:Zr(this,this.isValidUILocation2),label:"Hit Locations Major"}]},__class__:Oe});var He=function(){ut.call(this,"Literate",[1]),this.multipleTimes=-2};n["troshx.sos.bnb.Literate"]=He,He.__name__=["troshx","sos","bnb","Literate"],He.__super__=ut,He.prototype=r(ut.prototype,{getEmptyAssignInstance:function(t){return new Ve},__class__:He});var Ve=function(){this.__hasUIFields__=!0,this.notes="",this.scripts=[""],pt.call(this)};n["troshx.sos.bnb.LiterateAssign"]=Ve,Ve.__name__=["troshx","sos","bnb","LiterateAssign"],Ve.__super__=pt,Ve.prototype=r(pt.prototype,{getQty:function(){return this.scripts.length},getCost:function(t){return this.boon.costs[0]*this.scripts.length},cleanupUIArrays:function(){var t=this.scripts.length;this.scripts=this.scripts.slice(0,(this._remainingCached+(t>=1?t:1))/1|0)},getUIFields:function(){var t=this.scripts.length;return[{prop:"scripts",label:"Known scripts",minLength:1,maxLength:(this._remainingCached+(t>=1?t:1))/1|0,of:"String",defaultValue:"",type:"Array"},{prop:"notes",type:"textarea",label:"Notes"}]},__class__:Ve});var De=function(){mt.call(this,"Oath",[2])};n["troshx.sos.bnb.Oath"]=De,De.__name__=["troshx","sos","bnb","Oath"],De.__super__=mt,De.prototype=r(mt.prototype,{getEmptyAssignInstance:function(t){return new qe},__class__:De});var qe=function(){this.__hasUIFields__=!0,this.notes="",this.cost=2,vt.call(this)};n["troshx.sos.bnb.OathAssign"]=qe,qe.__name__=["troshx","sos","bnb","OathAssign"],qe.__super__=vt,qe.prototype=r(vt.prototype,{getCost:function(t){return this.cost},getUIFields:function(){return[{prop:"cost",min:2,max:10,type:"Int",label:"Cost"},{prop:"notes",type:"textarea",label:"Notes"}]},__class__:qe});var je=function(){mt.call(this,"Old Wound",[1]),this.flags=2,this.multipleTimes=-2};n["troshx.sos.bnb.OldWound"]=je,je.__name__=["troshx","sos","bnb","OldWound"],je.__super__=mt,je.prototype=r(mt.prototype,{getEmptyAssignInstance:function(t){return new Ge(t)},__class__:je});var Ge=function(t){this.__hasUIFields__=!0,this.permaMask=0,this.hitLocations=0,vt.call(this),this.char=t};n["troshx.sos.bnb.OldWoundAssign"]=Ge,Ge.__name__=["troshx","sos","bnb","OldWoundAssign"],Ge.__super__=vt,Ge.prototype=r(vt.prototype,{getCost:function(t){return vt.prototype.getCost.call(this,t)*this.getQty()},isValidUILocation:function(t){return 0==(1<<t&this.permaMask)},freeze:function(){this.permaMask|=this.hitLocations},unfreezeAll:function(){this.permaMask=0},inflictRandom:function(){for(var t=this.char.body.hitLocations.length,e=[];--t>-1;)0==(1<<t&this.hitLocations)&&e.push(1<<t);return e.length>0&&(t=e[Math.random()*e.length|0],this.hitLocations|=t,this.permaMask|=t),this},mergeWith:function(t){this.hitLocations|=t.hitLocations;for(var e=vt.prototype.getCost.call(this,this.rank),n=this.permaMask,i=this.char.body.hitLocations.length,r=0;--i>-1;)0!=(1<<i&n)&&++r;this.discount=e*r},getQty:function(){for(var t=this.hitLocations,e=this.char.body.hitLocations.length,n=0;--e>-1;)0!=(1<<e&t)&&++n;return n},countMask:function(t){for(var e=this.char.body.hitLocations.length,n=0;--e>-1;)0!=(1<<e&t)&&++n;return n},isValid:function(){return 0!=this.hitLocations},getUIFields:function(){return[{prop:"hitLocations",type:"HitLocationMultiSelector",body:this.char.body,validateOptionFunc:Zr(this,this.isValidUILocation),label:"Hit Locations"}]},__class__:Ge});var Ue=function(){mt.call(this,"Poor",[4,6,8]),this.flags=1,this.channels=8;var t=Ln.create(18,"Poor (i)",0,.5);t.next=Ln.create(19,"Poor (i)",0,.5);var e=Ln.create(18,"Poor (ii)",0,.25);e.next=Ln.create(19,"Poor (ii)",0,.25),this.staticModifiers=[t,e,Ln.create(19,"Poor (iii)",0,0)]};n["troshx.sos.bnb.Poor"]=Ue,Ue.__name__=["troshx","sos","bnb","Poor"],Ue.__super__=mt,Ue.prototype=r(mt.prototype,{getEmptyAssignInstance:function(t){return new $e(t)},__class__:Ue});var $e=function(t){vt.call(this),this.char=t};n["troshx.sos.bnb.PoorAssign"]=$e,$e.__name__=["troshx","sos","bnb","PoorAssign"],$e.__super__=vt,$e.prototype=r(vt.prototype,{getCost:function(t){var e=3==this.rank?4:2==this.rank?3:2,n=this.char.socialClass.wealthIndex+1,i=(n<e?n/e:1)*(t>0?this.bane.costs[t-1]:0);return Math.floor(i)},getUIFields:function(){return[]},__class__:$e});var ze=function(){mt.call(this,"Severed Limb/Appendage",[10,15,18]),this.clampRank=!0,this.flags=2,this.multipleTimes=-2};n["troshx.sos.bnb.SeveredLimb"]=ze,ze.__name__=["troshx","sos","bnb","SeveredLimb"],ze.__super__=mt,ze.prototype=r(mt.prototype,{getEmptyAssignInstance:function(t){return new Ze},__class__:ze});var Ze=function(){this.__hasUIFields__=!0,this.severedLegRight=0,this.severedLegLeft=0,this.severedArmRight=0,this.severedArmLeft=0,vt.call(this)};n["troshx.sos.bnb.SeveredLimbAssign"]=Ze,Ze.__name__=["troshx","sos","bnb","SeveredLimbAssign"],Ze.__super__=vt,Ze.prototype=r(vt.prototype,{get_severedAreasLeft:function(){return this.severedArmLeft|this.severedLegLeft},get_severedAreasRight:function(){return this.severedArmRight|this.severedLegRight},isValid:function(){var t=0!=(261136&this.get_severedAreasLeft()),e=0!=(261136&this.get_severedAreasRight());return!!t||e},getCost:function(t){var e=0;return e+=245776==this.severedArmLeft?18:196608==this.severedArmLeft?15:0!=this.severedArmLeft?10:0,e+=245776==this.severedArmRight?18:196608==this.severedArmRight?15:0!=this.severedArmRight?10:0,e+=15360==this.severedLegLeft?18:12288==this.severedLegLeft?15:0!=this.severedLegLeft?10:0,e+=15360==this.severedLegRight?18:12288==this.severedLegRight?15:0!=this.severedLegRight?10:0},getUIFields:function(){return[{prop:"severedArmLeft",type:"SingleSelection",label:"Left Side Upper Limb",labels:["None","Left Hand","Left Lower Arm","Left Full Arm"],values:[0,131072,196608,245776]},{prop:"severedArmRight",type:"SingleSelection",label:"Right Side Upper Limb",labels:["None","Right Hand","Right Lower Arm","Right Full Arm"],values:[0,131072,196608,245776]},{prop:"severedLegLeft",type:"SingleSelection",label:"Left Side Lower Limb",labels:["None","Left Foot","Left Lower Leg","Left Full Leg"],values:[0,8192,12288,15360]},{prop:"severedLegRight",type:"SingleSelection",label:"Right Side Lower Limb",labels:["None","Right Foot","Right Lower Leg","Right Full Leg"],values:[0,8192,12288,15360]}]},__class__:Ze});var Qe=function(){var t;mt.call(this,"Skinny",[3]),t=Ln.create(16,"Skinny",-1),this.staticModifiers=[t]};n["troshx.sos.bnb.Skinny"]=Qe,Qe.__name__=["troshx","sos","bnb","Skinny"],Qe.__super__=mt,Qe.prototype=r(mt.prototype,{__class__:Qe});var Ye=function(t,e,n,i){null==i&&(i=""),this.name=t,this.pcp=e,this.maxCategoryPCP=n,this.desc=i};n["troshx.sos.chargen.CampaignPowerLevel"]=Ye,Ye.__name__=["troshx","sos","chargen","CampaignPowerLevel"],Ye.prototype={__class__:Ye};var Ke=function(t,e){null==e&&(e=!1),this.pcp=0,this.name=t,this.magic=e};n["troshx.sos.chargen.CategoryPCP"]=Ke,Ke.__name__=["troshx","sos","chargen","CategoryPCP"],Ke.prototype={__class__:Ke};var Xe=function(t){this.profCoreListRanged=[],this.profCoreListMelee=[],this.packetChoosy=!1,this.emptySocialBenefit={name:"",rank:0,cost:0},this.wealthAssets=[],this.socialBenefitTempArr=[],this.syncSocialWealth=!0,this.wealthIndex=0,this.socialClassIndex=0,this.warningAttributes={warn:!1,remain:0},this.selectedTierIndex=0,this.warningCategories={warn:!1,remain:0},this.campaignPowLevelIndex=1,this.campaignPowerLevels=[new Ye("Low (Grittiest)",14,5),new Ye("Medium(Default)",18,6),new Ye("High Fantasy",22,7),new Ye("Epic Fantasy",26,8),new Ye("Awesome Fantasy",30,10)],this.warningMsgs=[],this.savedCharContents="",this.showBnBs=!0,this.insideInventory=!1,this.char=null!=t?t:new yi,this.raceTierTable=zn.getTiers(),this.pcpForTiers=zn.PCP_FOR_TIERS.concat([]),null==t&&this.char.set_race(this.raceTierTable[0][0]),this.categories=Xe.getNewCharGenCategories(),this.categories[2].pcp=4,this.initBoons(),this.initSkills(),this.initSocialClasses(),this.initSocialClassesBenefits(),this.initSchools()};n["troshx.sos.chargen.CharGenData"]=Xe,Xe.__name__=["troshx","sos","chargen","CharGenData"],Xe.getTalentsAvailable=function(){for(var t=Rn.getTalentAdds(),e=t[0],n=1,i=t.length;n<i;){var r=n++;e+=t[r],t[r]=e}return t},Xe.getSuperiorsAvailable=function(){for(var t=Rn.getSuperiorAdds(),e=t[0],n=1,i=t.length;n<i;){var r=n++;e+=t[r],t[r]=e}return t},Xe.getNewCharGenCategories=function(){var t=[],e=new Ke("Race");return t[0]=e,e.slug="gen-race",e=new Ke("Attributes"),t[1]=e,e.slug="gen-attributes",e=new Ke("Boons & Banes"),t[2]=e,e.slug="gen-bnb",t[3]=new Ke("Skills"),e.slug="gen-skills",e=new Ke("Social class/Wealth"),t[4]=e,e.slug="gen-social-class",e=new Ke("School/Profeciencies"),t[5]=e,e.slug="gen-schoolprofs",t},Xe.GetAttributeTotalCostOfLevel=function(t){return t<11?t-1:9+2*(t-10)},Xe.MaxAttributeLevelUpsFrom=function(t,e){var n=t+e;return e-(n>10?n-10:0)},Xe.getBnBFromPCP=function(t){return 5*t-5-15},Xe.dynSetField=function(t,e,n){t[e]=n},Xe.dynSetArray=function(t,e,n){t[e]=n},Xe.dynDeleteField=function(t,e){d.deleteField(t,e)},Xe.clamp5=function(t){return t>=5?5:t},Xe.prototype={get_shouldShowBnBs:function(){return!!this.showBnBs||this.get_totalBnBScore()<0},initSchools:function(){this.schoolLevelCosts=Rn.getLevels();for(var t=this.schoolLevelCosts[0],e=1,n=this.schoolLevelCosts.length;e<n;){var i=e++;t+=this.schoolLevelCosts[i],this.schoolLevelCosts[i]=t}this.talentsAvailable=Xe.getTalentsAvailable(),this.superiorsAvailable=Xe.getSuperiorsAvailable(),this.schoolAssignList=[];for(var r=hi.getList(),s=0,a=r.length;s<a;){var o=r[s++];this.schoolAssignList.push({school:o,bonuses:o.getSchoolBonuses(this.char)})}},initBoons:function(){var t,e=Ut.getList();this.boonAssignList=[],this.baneAssignList=[];for(var n=0,i=e.length;n<i;){var r=n++;if((t=e[r]).costs!=lt.COSTLESS_ARRAY){var s,a=this.boonAssignList;s=e[r].getAssign(0,this.char),a.push(s),s._costCached=t.costs[0],s._remainingCached=999}}for(var o=_t.getList(),l=0,u=o.length;l<u;){var c=l++;if((t=o[c]).costs!=lt.COSTLESS_ARRAY){var h,d=this.baneAssignList;h=o[c].getAssign(0,this.char),d.push(h),h._costCached=t.costs[0]}}},initSkills:function(){this.skillPackets=Je.getNewSkillPackets(),this.skillLabelMappingBases=Je.getNewSkillLabelMappingBases(),this.skillsTable=Fn.getNewDefaultSkillTable(),this.skillObjs=this.skillsTable.getSkillObjectsAsArray(!0),this.specialisedSkills=this.skillsTable.getSpecialisationList(),this.skillLabelMappings=this.getEmptyMappingsFromBase(this.skillLabelMappingBases);for(var t=0,e=this.skillPackets.length;t<e;)for(var n=t++,i=this.skillPackets[n],r=0,s=d.fields(i.values);r<s.length;){var a=s[r];if(++r,null!=this.skillLabelMappings[a]){i.history=[];break}}this.skillSubjectHash={};for(var o=0,l=d.fields(this.skillValues);o<l.length;){var u=l[o];++o;var c=Wn.getSplitFromSpecialisation(u);if(null!=c){var h,p,g=c[0],m=c[1];null==(h=this.skillSubjectHash[g])&&(h=[],this.skillSubjectHash[g]=h),null==(p=this.skillSubjectHash[m])&&(p=[],this.skillSubjectHash[m]=p),h.push(m),p.push(g)}}this.startingSkillObjsCount=this.skillObjs.length},initSocialClasses:function(){var t={cost:2,name:"Hale and Hearty",rank:1},e={cost:3,name:"Folks Back Home",rank:1},n={cost:6,name:"Folks Back Home",rank:2},i={cost:1,name:"Literate",rank:1},r={cost:2,name:"Literate",rank:1,qty:2},s={cost:2,name:"Language",rank:2},a={cost:1,name:"Language",rank:1},o={cost:1,name:"Contacts",rank:1},l={cost:4,name:"Contacts",rank:2},u={cost:5,name:"Allies",rank:2},c={cost:10,name:"Allies",rank:3},h={cost:2,name:"Famous",rank:1},d={cost:4,name:"Famous",rank:2};this.socialClassList=[{socialClass:new On("Slave/Exile",Sn.create(0,10,0),0),boons:[t,s,{cost:3,name:"Beautiful",rank:1}],maxBoons:1},{socialClass:new On("Peasant",Sn.create(5,0,0),0),boons:[t,e],maxBoons:1},{socialClass:new On("Poor Freeman",Sn.create(15,0,0),0),boons:[t,e,i],maxBoons:1},{socialClass:new On("Freeman",Sn.create(25,0,0),1),boons:[t,e,i],maxBoons:2},{socialClass:new On("High Freeman",Sn.create(40,0,0),2),boons:[n,i,a,o],maxBoons:2},{socialClass:new On("Minor Noble",Sn.create(80,0,0),3),boons:[t,n,i,a,o,u,h],maxBoons:2},{socialClass:new On("Landed Noble",Sn.create(150,0,0),6),boons:[t,n,r,s,l,u,h],maxBoons:2},{socialClass:new On("High Noble",Sn.create(300,0,0),10),boons:[t,n,r,s,l,c,d],maxBoons:2},{socialClass:new On("Royalty",Sn.create(800,0,0),15),boons:[t,n,r,s,l,c,d],maxBoons:3},{socialClass:new On("High Royalty",Sn.create(1500,0,0),20),boons:[t,n,{cost:3,name:"Literate",rank:1,qty:3},{cost:3,name:"Language",rank:3},{cost:6,name:"Contacts",rank:3},c,d],maxBoons:3}]},initSocialClassesBenefits:function(){for(var t=0,e=this.socialClassList.length;t<e;)for(var n=t++,i=this.socialClassList[n],r=0,s=i.boons.length;r<s;){var a=r++,o=i.boons[a];if(null==o.index&&(o.index=this.findBoonIndexByName(o.name),o.label=o.name+" ("+o.cost+")",-1==o.index))throw new V("Could not find Social boon by: "+o.name)}this.socialBenefit1=this.emptySocialBenefit,this.socialBenefit2=this.emptySocialBenefit,this.socialBenefit3=this.emptySocialBenefit},findBoonIndexByName:function(t){for(var e=0,n=this.boonAssignList.length;e<n;){var i=e++;if(this.boonAssignList[i].boon.name==t)return i}return-1},privateInit:function(){for(var t=0,e=this.skillPackets.length;t<e;){var n=t++,i=this.skillPackets[n];i.fields=d.fields(i.values)}this.validateSocialBenefitsWithClass(1)},get_campaignPowLevel:function(){return this.campaignPowerLevels[this.campaignPowLevelIndex]},get_categoryRace:function(){return this.categories[0]},get_categoryAttributes:function(){return this.categories[1]},get_categorySocialClassWealth:function(){return this.categories[4]},get_categoriesRemainingAssignable:function(){for(var t=0,e=0,n=this.categories.length;e<n;){var i=e++;t+=this.categories[i].pcp}return this.campaignPowerLevels[this.campaignPowLevelIndex].pcp-t},get_isValidCategories:function(){return 0==this.get_categoriesRemainingAssignable()},checkWarningCategories:function(){var t=this.get_categoriesRemainingAssignable();return t>0&&(this.warningCategories.warn=!0,this.warningCategories.remain=t,!0)},get_isHuman:function(){return"Human"==(null!=this.char.race?this.char.race.name:"")},get_selectedRaceName:function(){return null!=this.char.race?this.char.race.name:""},resetToHuman:function(){this.selectedTierIndex=0,this.char.set_race(this.raceTierTable[0][0])},selectRaceAt:function(t,e){this.selectedTierIndex=t,this.char.set_race(this.raceTierTable[t][e])},settleRaceTier:function(){this.categories[0].pcp=this.pcpForTiers[this.selectedTierIndex]},get_promptSettleRaceTier:function(){return this.categories[0].pcp!=this.pcpForTiers[this.selectedTierIndex]},get_raceTier:function(){return this.getRaceTierFromPCP(this.categories[0].pcp)},getRaceTierFromPCP:function(t){for(var e=0,n=0,i=this.pcpForTiers.length;n<i;){var r=n++;if(this.pcpForTiers[r]>t)break;e=r}return e+1},get_totalAttributePointsSpent:function(){var t=0,e=this.char.strength;t+=e<11?e-1:9+2*(e-10);var n=this.char.agility;t+=n<11?n-1:9+2*(n-10);var i=this.char.endurance;t+=i<11?i-1:9+2*(i-10);var r=this.char.health;t+=r<11?r-1:9+2*(r-10);var s=this.char.willpower;t+=s<11?s-1:9+2*(s-10);var a=this.char.wit;t+=a<11?a-1:9+2*(a-10);var o=this.char.intelligence;t+=o<11?o-1:9+2*(o-10);var l=this.char.perception;return t+=l<11?l-1:9+2*(l-10)},get_availableAttributePoints:function(){return Xe.PCP_COLUMN_ATTRIBUTES[this.categories[1].pcp-1]},get_remainingAttributePoints:function(){return this.get_availableAttributePoints()-this.get_totalAttributePointsSpent()},canBuyMoreAttributeLevels:function(){var t=this.get_remainingAttributePoints(),e=this.char.strength+t;if(t-(e>10?e-10:0)>0)return!0;var n=this.char.agility+t;if(t-(n>10?n-10:0)>0)return!0;var i=this.char.endurance+t;if(t-(i>10?i-10:0)>0)return!0;var r=this.char.health+t;if(t-(r>10?r-10:0)>0)return!0;var s=this.char.willpower+t;if(t-(s>10?s-10:0)>0)return!0;var a=this.char.wit+t;if(t-(a>10?a-10:0)>0)return!0;var o=this.char.intelligence+t;if(t-(o>10?o-10:0)>0)return!0;var l=this.char.perception+t;return t-(l>10?l-10:0)>0},checkWarningAttributes:function(){var t=this.get_remainingAttributePoints();return!!(t>0&&this.canBuyMoreAttributeLevels())&&(this.warningAttributes.warn=!0,this.warningAttributes.remain=t,!0)},updateSocialBenefitsToBoon:function(t,e){var n;if(e.rank>0&&((n=this.boonAssignList[e.index]).rank==e.rank&&n.getCost(n.rank)==e.cost&&(n.rank=0),n._minRequired=0,n.discount=0),t.rank>0){(n=this.boonAssignList[t.index]).discount=t.cost,0==n.rank&&(n.rank=t.rank),n._minRequired=t.rank;t.qty}},validateSocialBenefitsWithClass:function(t){var e=null;1==t?e=this.socialBenefit1:2==t?e=this.socialBenefit2:3==t&&(e=this.socialBenefit3);var n=this.socialClassList[this.socialClassIndex].maxBoons;this.socialBenefitTempArr[0]=1==t?null:this.socialBenefit1.name,this.socialBenefitTempArr[1]=2==t||n<2?null:this.socialBenefit2.name,this.socialBenefitTempArr[2]=3==t||n<3?null:this.socialBenefit3.name;var i=this.socialClassList[this.socialClassIndex].boons,r=i.indexOf(e),s=-1;if(r<0){for(var a=0,o=i.length;a<o;){var l=a++;if(-1==s&&this.socialBenefitTempArr.indexOf(i[l].name)<0&&(s=l),i[l].name==e.name){r=l;break}}r<0&&(r=s>=0?s:0),1==t?this.socialBenefit1=i[r]:2==t?this.socialBenefit2=i[r]:3==t&&(this.socialBenefit3=i[r])}if(r<0)throw new V("Should have resolved index for social benefit choice!")},socialBenefitSelectChangeHandler:function(t,e){var n=this.socialClassList[this.socialClassIndex].boons;1==t?this.socialBenefit1=n[e]:2==t?this.socialBenefit2=n[e]:3==t&&(this.socialBenefit3=n[e])},get_availableWealthPointsBase:function(){return this.socialClassList[this.wealthIndex].socialClass.wealth},get_availableWealthPoints:function(){var t=Math.floor(this.char.getModifiedValue(18,this.socialClassList[this.wealthIndex].socialClass.wealth));return t<0&&(t=0),t},get_remainingWealthPointsFull:function(){var t=Math.floor(this.char.getModifiedValue(18,this.socialClassList[this.wealthIndex].socialClass.wealth));return t<0&&(t=0),t-this.wealthAssetsWorthFullArray()},get_remainingWealthPoints:function(){var t=Math.floor(this.char.getModifiedValue(18,this.socialClassList[this.wealthIndex].socialClass.wealth));return t<0&&(t=0),t-this.wealthAssetsWorth()},wealthAssetsWorthFullArray:function(){for(var t=this.wealthAssets.length,e=0;--t>-1;)e+=this.wealthAssets[t].worth;return e},wealthAssetsWorthLen:function(){var t=this.wealthAssets.length,e=this.get_maxWealthAssets();return t>=e?e:t},wealthAssetsWorth:function(){for(var t=0,e=this.wealthAssets.length,n=this.get_maxWealthAssets(),i=0,r=e>=n?n:e;i<r;){var s=i++;t+=this.wealthAssets[s].worth}return t},get_socialBenefitChoices:function(){return this.socialClassList[this.socialClassIndex].boons},get_curSelectedSocialClass:function(){return this.socialClassList[this.socialClassIndex]},get_maxSocialClassIndex:function(){return this.categories[4].pcp-1},constraintSocialWealth:function(){if(this.syncSocialWealth){var t=this.categories[4].pcp-1;this.socialClassIndex>t&&(this.socialClassIndex=t),this.wealthIndex=this.socialClassIndex}else{var e=this.get_unevenMaxWealthIndex();this.wealthIndex>e&&(this.wealthIndex=e),e=this.get_unevenMaxSocialClassIndex(),this.socialClassIndex>e&&(this.socialClassIndex=e)}},get_socialEitherMaxIndex:function(){var t=this.categories[4].pcp-1,e=this.get_unevenMaxSocialClassIndex();return this.syncSocialWealth?t:e},get_wealthEitherMaxIndex:function(){var t=this.categories[4].pcp-1,e=this.get_unevenMaxWealthIndex();return this.syncSocialWealth?t:e},get_socialClassPlaceHolderName:function(){return this.socialClassIndex!=this.wealthIndex?this.socialClassList[this.socialClassIndex].socialClass.name+" -$: "+this.socialClassList[this.wealthIndex].socialClass.name:this.socialClassList[this.socialClassIndex].socialClass.name},get_promptSettleSocialTier:function(){return(this.socialClassIndex!=this.wealthIndex?this.get_unevenSocialPCPRequired():this.socialClassIndex+1)!=this.categories[4].pcp},get_socialPCPRequired:function(){return this.socialClassIndex!=this.wealthIndex?this.get_unevenSocialPCPRequired():this.socialClassIndex+1},settleSocialTier:function(){this.syncSocialWealth=this.socialClassIndex==this.wealthIndex;var t=this.socialClassIndex!=this.wealthIndex?this.get_unevenSocialPCPRequired():this.socialClassIndex+1;this.categories[4].pcp=t},solveSocialOrWealthMaxX:function(t,e,n){return t=2*n-4-e,t-=1&t^1&e},get_unevenSocialPCPRequired:function(){var t=this.socialClassIndex+1,e=this.wealthIndex+1;this.categories[4].pcp;return Math.ceil((t+e)/2)+2},get_unevenMaxSocialClassIndex:function(){var t=this.socialClassIndex+1,e=this.wealthIndex+1;t=2*this.categories[4].pcp-4-e;var n=(t-=1&t^1&e)-1;return n>=0?n:0},get_unevenMaxWealthIndex:function(){var t=this.wealthIndex+1,e=this.socialClassIndex+1;t=2*this.categories[4].pcp-4-e;var n=(t-=1&t^1&e)-1;return n>=0?n:0},setSocialClassIndex:function(t){this.socialClassIndex=t,this.syncSocialWealth&&(this.wealthIndex=t)},setWealthIndex:function(t){this.wealthIndex=t},updateSocialToCharsheet:function(){var t=this.socialClassList[this.socialClassIndex];this.validateSocialBenefitsWithClass(1),t.maxBoons>=2?this.validateSocialBenefitsWithClass(2):this.socialBenefit2=this.emptySocialBenefit,t.maxBoons>=3?this.validateSocialBenefitsWithClass(3):this.socialBenefit3=this.emptySocialBenefit,this.char.socialClass.classIndex=this.socialClassIndex},get_maxWealthAssets:function(){var t=this.wealthAssets.length,e=Math.floor(this.char.getModifiedValue(18,this.socialClassList[this.wealthIndex].socialClass.wealth));return e<0&&(e=0),t+(e-this.wealthAssetsWorthFullArray())},updateMoneyToCharsheet:function(){var t=this.socialClassList[this.wealthIndex];this.char.socialClass.wealthIndex=this.wealthIndex,this.char.socialClass.money.matchWith(t.socialClass.money),this.char.socialClass.wealth=t.socialClass.wealth},filterAwayLiquidatedAssets:function(t){return!t.liquidate},saveFinaliseSocial:function(t){this.socialClassIndex!=this.wealthIndex&&""!=this.char.socialClass.name||(this.char.socialClass.name=this.get_socialClassPlaceHolderName());var e=this.wealthAssets.length,n=this.get_maxWealthAssets(),i=e>=n?n:e,r=this.wealthAssets.slice(0,i);r=r.filter(Zr(this,this.filterAwayLiquidatedAssets)),this.char.wealthAssets=r,this.char.money.matchWith(t)},get_categoryBnB:function(){return this.categories[2]},get_totalBaneExpenditure:function(){for(var t=this.char.banes.list,e=0,n=t.length;--n>-1;){var i=t[n],r=!(i._canceled||i._forcePermanent)?i._costCached:0;0!=i.discount&&(r-=i.discount)<0&&(r=0),e+=r}return e},get_maxBanePointsEarnable:function(){return this.get_BnBpoints()<0?15-this.get_BnBpoints():15},get_totalBanePointsEarned:function(){var t=this.get_totalBaneExpenditure(),e=this.get_BnBpoints()<0?15-this.get_BnBpoints():15;return t>e?e:t},get_totalBanePointsSpent:function(){return this.get_totalBaneExpenditure()-this.get_totalBanePointsEarned()},get_totalBoonExpenditure:function(){for(var t=this.char.boons.list,e=0,n=t.length;--n>-1;){var i=t[n],r=!(i._canceled||i._forcePermanent)?i._costCached:0;0!=i.discount&&(r-=i.discount)<0&&(r=0),e+=r}return e},get_boonsArray:function(){return this.char.boons.list},get_banesArray:function(){return this.char.banes.list},get_BnBpoints:function(){return 5*this.get_categoryBnB().pcp-5-15},get_totalBnBScore:function(){return this.get_BnBpoints()+this.get_totalBanePointsEarned()-this.get_totalBoonExpenditure()+(this.char.direPast?10:0)},get_maxBoonsSpendable:function(){return this.get_BnBpoints()+(this.get_BnBpoints()<0?15-this.get_BnBpoints():15)},get_maxBoonsSpendableLeft:function(){return this.get_maxBoonsSpendable()-this.get_totalBoonExpenditure()},get_maxBanesSpendable:function(){return(this.get_BnBpoints()<0?15-this.get_BnBpoints():15)+(this.get_BnBpoints()<0?0:this.get_BnBpoints())},get_maxBanesSpendableLeft:function(){return this.get_maxBanesSpendable()-this.get_totalBaneExpenditure()},addSkill:function(t,e){var n,i;null==(n=this.skillSubjectHash[t])&&(n=[],Xe.dynSetField(this.skillSubjectHash,t,n)),null==(i=this.skillSubjectHash[e])&&(i=[],Xe.dynSetField(this.skillSubjectHash,e,i)),n.push(e),i.push(t);var r=t+" ("+e+")";Xe.dynSetField(this.skillValues,r,0),Xe.dynSetField(this.skillPacketValues,r,0),this.skillObjs.push({name:r,attribs:0})},deleteSkillInput:function(t){var e=this.skillObjs[t],n=Wn.getSplitFromSpecialisation(e.name),i=n[0],r=n[1],s=this.skillSubjectHash[i],a=this.skillSubjectHash[r];s.splice(s.indexOf(r),1),a.splice(s.indexOf(i),1),Xe.dynDeleteField(this.skillValues,e.name),Xe.dynDeleteField(this.skillPacketValues,e.name),this.skillObjs.splice(t,1),this.truncateSkillPacketHistory()},onSkillPacketChange:function(t,e,n){var i=this.skillPackets[t];if(null==i.history)for(var r=0,s=i.fields.length;r<s;){var a=r++,o=i.fields[a];this.skillPacketValues[o]+=i.values[o]*e}else for(var l=i.qty-e,u=e>=0,c=u?1:-1,h=u?l:l-1,d=l+e;u?h<d:h>=d;){for(var p=i.history[h],g=0,m=i.fields.length;g<m;){var f=g++,_=i.fields[f],v=p[_];this.skillPacketValues[v]+=i.values[_]*c}h+=c}e>0&&(null==i.history||n)&&this.truncateSkillPacketHistory()},onSkillIndividualChange:function(t){t>0&&this.truncateSkillPacketHistory()},truncateSkillPacketHistory:function(){for(var t=0,e=this.skillPackets.length;t<e;){var n=t++,i=this.skillPackets[n];if(null!=i.history&&i.history.length!=i.qty){var r=i.history,s=i.qty;r.splice(s,r.length-s)}}},saveFinaliseSkillsFromPackets:function(){for(var t=0,e=this.skillObjs.length;t<e;){var n=t++,i=this.skillObjs[n],r=this.skillPacketValues[i.name],s=(r>=5?5:r)+this.skillValues[i.name];s>0&&(this.char.skills.skillHash[i.name]=s)}},clampSkillValue:function(t){return t>=5?5:t},isSkillLabelBinded:function(t){return"~"==t.charAt(0)},get_SkillPoints:function(){return 3*(this.categories[3].pcp-1)},get_individualSkillsSpent:function(){for(var t=0,e=0,n=d.fields(this.skillValues);e<n.length;){var i=n[e];++e,t+=this.skillValues[i]}return t},get_maxSkillPacketsAllowed:function(){return Math.floor((this.get_totalSkillPointsProvided()-this.get_individualSkillsSpent())/3)},get_maxIndividualSkillsSpendable:function(){return this.get_totalSkillPointsProvided()-3*this.get_skillPacketsBought()},get_individualSkillsRemaining:function(){return this.get_maxIndividualSkillsSpendable()-this.get_individualSkillsSpent()},get_totalSkillPointsProvided:function(){return this.get_SkillPoints()+2*this.char.intelligence},get_skillPacketsRemaining:function(){return this.get_maxSkillPacketsAllowed()-this.get_skillPacketsBought()},get_skillPacketsBought:function(){for(var t=0,e=this.skillPackets.length;--e>-1;)t+=this.skillPackets[e].qty;return t},get_totalSkillPointsLeft:function(){return this.get_totalSkillPointsProvided()-this.get_individualSkillsSpent()-3*this.get_skillPacketsBought()},getEmptyMappingsFromBase:function(t){for(var e={},n=0,i=d.fields(t);n<i.length;){var r=i[n];++n;var s=t[r];s instanceof Array&&null==s.__enum__?e[r]=(s instanceof Array&&null==s.__enum__?s:null)[0]:e[r]=""}var a=[];this.skillValues={},this.skillPacketValues={};for(var o=0,l=this.skillPackets.length;o<l;)for(var u=o++,c=this.skillPackets[u],h=0,p=d.fields(c.values);h<p.length;){var g=p[h];++h,this.skillValues[g]=0,this.skillPacketValues[g]=0,"~"==g.charAt(0)||Object.prototype.hasOwnProperty.call(this.skillsTable.skillHash,g)||(this.skillsTable.skillHash[g]=0,a.push({name:g,attribs:0}))}for(var m=0,f=d.fields(this.skillsTable.skillHash);m<f.length;){var _=f[m];++m,this.skillsTable.requiresSpecialisation[_]||(this.skillValues[_]=0,this.skillPacketValues[_]=0)}a.sort(Fn.sortArrayMethod),this.skillObjs=this.skillObjs.concat(a),this.skillSubjects=Je.getExistingSubjects();for(var v={},b=0,y=this.skillSubjects.length;b<y;){var w=b++;v[this.skillSubjects[w]]=!0}return this.skillSubjectsInitial=v,e},selectSchoolAssign:function(t){null!=t?(this.char.set_school(t.school),this.char.set_schoolBonuses(t.bonuses)):(this.char.set_school(null),this.char.set_schoolBonuses(null))},canStillSpendSchool:function(t){var e=0;if(null==this.char.school)return 3*(this.categories[5].pcp-1)!=0;var n=this.char.schoolLevel+1;return n<=20&&(e=this.schoolLevelCosts[n-1]-(n>=2?this.schoolLevelCosts[n-2]:0)),e>0&&t>=e},get_hasSchool:function(){return null!=this.char.school},get_schoolProfLevel:function(){return null!=this.char.school?this.char.schoolLevel:0},get_ProfPoints:function(){return 3*(this.categories[5].pcp-1)},get_totalAvailProfSlots:function(){return null!=this.char.school?this.char.school.profLimit:0},get_profArcCost:function(){return"Human"==(null!=this.char.race?this.char.race.name:"")?0:3},get_schoolArcCost:function(){return null!=this.char.school?this.char.school.costArc:0},get_profExpenditure:function(){return("Human"==(null!=this.char.race?this.char.race.name:"")?0:3)*this.get_totalProfecienciesBought()},get_totalProfSlotExpenditure:function(){var t="Human"==(null!=this.char.race?this.char.race.name:"")?0:3;return t*this.profCoreListRanged.length+t*this.profCoreListMelee.length},get_maxAvailableProfSlots:function(){return null!=this.char.school?this.char.school.profLimit:0},get_maxMeleeProfSlots:function(){var t=(null!=this.char.school?this.char.school.profLimit:0)-this.profCoreListRanged.length,e="Human"==(null!=this.char.race?this.char.race.name:"")?0:3,n=3*(this.categories[5].pcp-1)-(null!=this.char.school?this.char.school.costArc:0)-(null!=this.char.school&&this.char.schoolLevel>0?this.schoolLevelCosts[this.char.schoolLevel-1]:0)-this.profCoreListRanged.length*e;return e>0&&((n=Math.floor(n/e))<0&&(n=0),n<t&&(t=n)),null!=this.char.school?t<0?0:t:0},get_maxRangedProfSlots:function(){var t=(null!=this.char.school?this.char.school.profLimit:0)-this.profCoreListMelee.length,e="Human"==(null!=this.char.race?this.char.race.name:"")?0:3,n=3*(this.categories[5].pcp-1)-(null!=this.char.school?this.char.school.costArc:0)-(null!=this.char.school&&this.char.schoolLevel>0?this.schoolLevelCosts[this.char.schoolLevel-1]:0)-this.profCoreListMelee.length*e;return e>0&&((n=Math.floor(n/e))<0&&(n=0),n<t&&(t=n)),null!=this.char.school?t<0?0:t:0},get_maxTalentSlots:function(){var t=this.char.schoolLevel>0?this.talentsAvailable[this.char.schoolLevel-1]:0;return null!=this.char.school?t:0},get_maxSuperiorSlots:function(){var t=this.char.schoolLevel>0?this.superiorsAvailable[this.char.schoolLevel-1]:0;return null!=this.char.school?t:0},get_maxMasterySlots:function(){var t=this.char.schoolLevel>=20?1:0;return null!=this.char.school?t:0},get_totalProfecienciesBought:function(){var t=this.get_maxMeleeProfSlots(),e=this.profCoreListMelee.length,n=this.get_maxRangedProfSlots(),i=this.profCoreListRanged.length;return(t<e?t:e)+(n<i?n:i)},get_maxClampedMeleeProfs:function(){var t=this.get_maxMeleeProfSlots(),e=this.profCoreListMelee.length;return t<e?t:e},get_maxClampedRangedProfs:function(){var t=this.get_maxRangedProfSlots(),e=this.profCoreListRanged.length;return t<e?t:e},get_levelsExpenditure:function(){return null!=this.char.school&&this.char.schoolLevel>0?this.schoolLevelCosts[this.char.schoolLevel-1]:0},get_totalProfArcExpenditure:function(){return this.get_totalProfecienciesBought()*("Human"==(null!=this.char.race?this.char.race.name:"")?0:3)},get_profPointsLeft:function(){return 3*(this.categories[5].pcp-1)-this.get_totalProfecienciesBought()*("Human"==(null!=this.char.race?this.char.race.name:"")?0:3)-(null!=this.char.school?this.char.school.costArc:0)-(null!=this.char.school&&this.char.schoolLevel>0?this.schoolLevelCosts[this.char.schoolLevel-1]:0)},get_traceProfCoreRangedCurrent:function(){return En.getLabelsOfArrayProfs(null!=En.CORE_RANGED?En.CORE_RANGED:En.CORE_RANGED=En.getNewCoreRanged(),this.char.profsRanged)},get_traceProfCoreMeleeCurrent:function(){return En.getLabelsOfArrayProfs(En.getCoreMelee(),this.char.profsMelee)},get_traceProfCoreRangedCount:function(){return En.getCountOfArrayProfs(null!=En.CORE_RANGED?En.CORE_RANGED:En.CORE_RANGED=En.getNewCoreRanged(),this.char.profsRanged)},get_traceProfCoreMeleeCount:function(){return En.getCountOfArrayProfs(En.getCoreMelee(),this.char.profsMelee)},saveFinaliseSchoolProfs:function(){this.char.schoolLevel=null!=this.char.school?this.char.schoolLevel:0;var t=this.char.masteryManueverNotes,e=this.get_maxMasterySlots();this.char.masteryManueverNotes=t.slice(0,e);var n=this.char.superiorManueverNotes,i=this.get_maxSuperiorSlots();this.char.superiorManueverNotes=n.slice(0,i);var r=this.char.talentNotes,s=this.get_maxTalentSlots();this.char.talentNotes=r.slice(0,s)},saveFinaliseCleanupChar:function(t){this.saveFinaliseSocial(t),this.saveFinaliseSchoolProfs(),this.saveFinaliseSkillsFromPackets(),this.char.boons.filter(function(t){return!t._canceled}),this.char.banes.filter(function(t){return!t._canceled});for(var e=0,n=this.char.boons.list.length;e<n;){var i=e++;this.char.boons.list[i].cleanupUIArrays()}for(var r=0,s=this.char.banes.list.length;r<s;){var a=r++;this.char.banes.list[a].cleanupUIArrays()}for(var o=0,l=this.char.boons.list.length;o<l;){var u=o++;this.char.boons.list[u].cleanup()}for(var c=0,h=this.char.banes.list.length;c<h;){var d=c++;this.char.banes.list[d].cleanup()}this.char.inventory.cleanupBeforeSerialize(),"Human"!=(null!=this.char.race?this.char.race.name:"")&&(this.char.arcFlaw="")},__class__:Xe};var Je=function(){};n["troshx.sos.chargen.CharGenSkillPackets"]=Je,Je.__name__=["troshx","sos","chargen","CharGenSkillPackets"],Je.getNewSkillPackets=function(){var t=new k,e="Profession (Farmer)";null!=es[e]?t.setReserved(e,2):t.h[e]=2;var n="Crafting (Wood)";null!=es[n]?t.setReserved(n,1):t.h[n]=1,null!=es.Cooking?t.setReserved("Cooking",1):t.h.Cooking=1;var i={name:"Farmer",qty:0,values:Je.strMapValues(t)},r=new k,s="Profession (Trade)";null!=es[s]?r.setReserved(s,2):r.h[s]=2;var a="Crafting (Trade)";null!=es[a]?r.setReserved(a,1):r.h[a]=1,null!=es.Persuasion?r.setReserved("Persuasion",1):r.h.Persuasion=1;var o={name:"Tradesman",qty:0,values:Je.strMapValues(r)},l=new k,u="Knowledge (Finance)";null!=es[u]?l.setReserved(u,2):l.h[u]=2,null!=es.Etiquette?l.setReserved("Etiquette",1):l.h.Etiquette=1,null!=es.Persuasion?l.setReserved("Persuasion",1):l.h.Persuasion=1;var c={name:"Merchant",qty:0,values:Je.strMapValues(l)},h=new k;null!=es["Gather Information"]?h.setReserved("Gather Information",1):h.h["Gather Information"]=1,null!=es.Intimidation?h.setReserved("Intimidation",1):h.h.Intimidation=1,null!=es.Observation?h.setReserved("Observation",1):h.h.Observation=1;var d="Knowledge (Criminal)";null!=es[d]?h.setReserved(d,1):h.h[d]=1;var p={name:"Criminal",qty:0,values:Je.strMapValues(h)},g=new k;null!=es.Intimidation?g.setReserved("Intimidation",1):g.h.Intimidation=1;var m="Knowledge (Criminal)";null!=es[m]?g.setReserved(m,1):g.h[m]=1,null!=es.Observation?g.setReserved("Observation",2):g.h.Observation=2;var f={name:"Guard",qty:0,values:Je.strMapValues(g)},_=new k;null!=es.Surgery?_.setReserved("Surgery",2):_.h.Surgery=2,null!=es.Chymistry?_.setReserved("Chymistry",1):_.h.Chymistry=1;var v="Profession (Doctor)";null!=es[v]?_.setReserved(v,1):_.h[v]=1;var b={name:"Surgeon",qty:0,values:Je.strMapValues(_)},y=new k;null!=es.Sailing?y.setReserved("Sailing",2):y.h.Sailing=2;var w="Profession (Sailing)";null!=es[w]?y.setReserved(w,1):y.h[w]=1,null!=es.Navigation?y.setReserved("Navigation",1):y.h.Navigation=1;var S={name:"Sailor",qty:0,values:Je.strMapValues(y)},C=new k;null!=es.Etiquette?C.setReserved("Etiquette",1):C.h.Etiquette=1;var A="Knowledge (Politics)";null!=es[A]?C.setReserved(A,1):C.h[A]=1,null!=es.Oration?C.setReserved("Oration",1):C.h.Oration=1,null!=es.Persuasion?C.setReserved("Persuasion",1):C.h.Persuasion=1;var x={name:"Politician",qty:0,values:Je.strMapValues(C)},I=new k,T="Knowledge (Nobility)";null!=es[T]?I.setReserved(T,1):I.h[T]=1,null!=es.Etiquette?I.setReserved("Etiquette",1):I.h.Etiquette=1;var L="Knowledge (Politics)";null!=es[L]?I.setReserved(L,1):I.h[L]=1,null!=es.Persuasion?I.setReserved("Persuasion",1):I.h.Persuasion=1;var M={name:"Nobleman",qty:0,values:Je.strMapValues(I)},E=new k;null!=es.Cooking?E.setReserved("Cooking",2):E.h.Cooking=2;var P="Crafting (Homestead)";return null!=es[P]?E.setReserved(P,2):E.h[P]=2,[{name:"Academic",qty:0,values:{"~academic1":1,"~academic2":1,Research:1,"~academicLast":1}},{name:"Athlete",qty:0,values:{Athletics:2,Climbing:1,Swimming:1}},i,o,c,{name:"Thief",qty:0,values:{Stealth:1,Thievery:2,Observation:1}},p,{name:"Hunter",qty:0,values:{"~hunter1":1,Navigation:1,Hunting:2}},f,{name:"Soldier",qty:0,values:{"~soldier1":1,Tactics:1,Drill:2}},b,{name:"Officer",qty:0,values:{Drill:1,Tactics:1,Navigation:1,Strategy:1}},S,{name:"Scout",qty:0,values:{"~scout1":1,Stealth:1,Navigation:1,Observation:1}},x,M,{name:"Domestic",qty:0,values:Je.strMapValues(E)}]},Je.getExistingSubjects=function(){return["Farmer","Trade","Finance","Wood","Homestead","Criminal","Nobility","Politics","Sailing","Doctor"]},Je.getNewSkillLabelMappingBases=function(){return{"~academic1":"Knowledge","~academic2":"Knowledge","~academicLast":["Engineering","Knowledge (Politics)","Chymistry"],"~soldier1":["Athletics","Riding"],"~scout1":["Athletics","Riding"],"~hunter1":["Stealth","Riding"]}},Je.strMapValues=function(t){for(var e={},n=t.keys();n.hasNext();){var i=n.next();e[i]=null!=es[i]?t.getReserved(i):t.h[i]}return e},Je.isSkillLabelBinded=function(t){return"~"==t.charAt(0)},Je.getSkillLabel=function(t,e,n){return"~"==t.charAt(0)?"string"==typeof e[t]?e[t]+" ("+n[t]+")":n[t]:t};var tn=function(t,e){null==e&&(e=""),null==t&&(t=""),this.unit=1,this.costCurrency=0,this.cost=0,this.flags=0,this.weight=0,this.id=null!=t?t:"Item_"+tn.UID_COUNT++,this.name=e};n["troshx.sos.core.Item"]=tn,tn.__name__=["troshx","sos","core","Item"],tn.getLabelsOfArray=function(t,e){for(var n=[],i=0,r=t.length;i<r;){var s=i++;0!=(e&1<<s)&&n.push(t[s].name)}return n},tn.sign=function(t){return t>=0?"+":""},tn.labelizeAllCaps=function(t){for(var e=t.split("_"),n=0,i=e.length;n<i;){var r=n++;e[r]=e[r].charAt(0).toUpperCase()+a.substr(e[r],1,null).toLowerCase()}return e.join(" ")},tn.labelizeCamelCase=function(t){var e=new RegExp("([A-Z]+)","g".split("u").join("")),n=new RegExp("([A-Z][a-z])","g".split("u").join(""));return t=(t=t.replace(e,"$1")).replace(n," $1"),t=(t=m.trim(t)).charAt(0).toUpperCase()+a.substr(t,1,null)},tn.labelizeAllCapsArr=function(t){for(var e=[],n=0,i=t.length;n<i;){var r=n++;e[r]=tn.labelizeAllCaps(t[r])}return e},tn.labelizeCamelCaseArr=function(t){for(var e=[],n=0,i=t.length;n<i;){var r=n++;e[r]=tn.labelizeCamelCase(t[r])}return e},tn.prototype={normalize:function(){return this},setWeightCost:function(t,e,n){return this.weight=t,this.cost=e,this.costCurrency=n,this},setUnit:function(t){return this.unit=t,this},serializeClone:function(){var t=new y;return t.serialize(this),new C(t.toString()).unserialize()},addTagsToStrArr:function(t){0!=(2&this.flags)&&t.push("Strapped"),D.getClass(this)!=on&&0!=(1&this.flags)&&t.push("Two-Handed"),0!=(4&this.flags)&&t.push("Eye-Corrective"),0!=(8&this.flags)&&t.push("Prosthetic")},getTypeLabel:function(){return"MiscItem"},get_uid:function(){return""!=this.id?this.id:this.name},get_label:function(){return this.name},get_twoHanded:function(){return 0!=(1&this.flags)},get_strapped:function(){return 0!=(2&this.flags)},__class__:tn};var en=function(){this.customise=null,this.special=null,this.specialFlags=0,this.pp=0,this.burdinadin=null,this.AVB=0,this.AVP=0,this.AVC=0,tn.call(this)};n["troshx.sos.core.Armor"]=en,en.__name__=["troshx","sos","core","Armor"],en.createEmptyInstance=function(){var t=new en;return t.coverage={},t},en.__super__=tn,en.prototype=r(tn.prototype,{writeAVsAtLocation:function(t,e,n,i,r,s,a,o){var l=this.coverage[e];if(0!=(r&n)&&-1==this.special.wornWith.layer)return!1;var u=0!=(2&l)?.5:1;0!=(4&l)&&0==(t.thrustMask&a)&&(u=0);var c=0;0!=n&&null!=this.special&&null!=this.special.hitModifier&&0!=u&&(0==a&&0==this.special.hitModifier.targetZoneMask&&0!=(this.special.hitModifier.locationMask&n)&&(this.special.hitModifier.multiplyAV<1&&this.special.hitModifier.multiplyAV<u&&(u=this.special.hitModifier.multiplyAV),this.special.hitModifier.multiplyAV>1&&this.special.hitModifier.multiplyAV>u&&(u=this.special.hitModifier.multiplyAV),c+=this.special.hitModifier.addAV),0==a||0==(this.special.hitModifier.targetZoneMask&a)||0!=this.special.hitModifier.locationMask&&0==(this.special.hitModifier.locationMask&n)||(this.special.hitModifier.multiplyAV<1&&this.special.hitModifier.multiplyAV<u&&(u=this.special.hitModifier.multiplyAV),this.special.hitModifier.multiplyAV>1&&this.special.hitModifier.multiplyAV>u&&(u=this.special.hitModifier.multiplyAV),c+=this.special.hitModifier.addAV)),o&&0!=n&&null!=this.customise&&null!=this.customise.hitLocationAllAVModifiers&&null!=this.customise.hitLocationAllAVModifiers[e]&&(c+=this.customise.hitLocationAllAVModifiers[e]);var h=s&&0!=(8&this.specialFlags)?2*u:u,d=(this.AVC*u|0)+c,p=(this.AVP*h|0)+c,g=(this.AVB*u|0)+c;return d<0&&(d=0),p<0&&(p=0),g<0&&(g=0),i.avc=d,i.avp=p,i.avb=g,!0},writeAVVAluesTo:function(t,e,n,i,r){var s;null==en.TEMPAVS&&(en.TEMPAVS={avc:0,avp:0,avb:0}),s=en.TEMPAVS;for(var a=0,o=d.fields(this.coverage);a<o.length;){var l=o[a];++a;var u=t[l],c=l,h=1<<e.hitLocationHash[c];this.writeAVsAtLocation(e,c,h,s,n,i,r,!0)&&(s.avc>u.avc&&(u.avc=s.avc),s.avp>u.avp&&(u.avp=s.avp),s.avb>u.avb&&(u.avb=s.avb))}},checkFubarCrushed:function(t,e,n){var i;null==en.TEMPAVS&&(en.TEMPAVS={avc:0,avp:0,avb:0}),i=en.TEMPAVS;for(var r=0,s=d.fields(this.coverage);r<s.length;){var a=s[r];++r;var o=a,l=1<<t.hitLocationHash[o];if(this.writeAVsAtLocation(t,o,l,i,0,!1,e,!0))if(0!=(0==n?i.avc:1==n?i.avp:i.avb))return!1}return!0},normalize:function(){null==this.coverage&&(this.coverage={});var t=null!=this.special&&null!=this.special.otherBodyType?this.special.otherBodyType:un.getInstance(),e=this.special,n=this.coverage;this.coverage=null,this.special=null;var i=this.serializeClone();i._coverageValues=[];for(var r=0,s=t.hitLocations.length;r<s;){var a=r++,o=t.hitLocations[a].id;null!=n[o]?(i._coverageValues.push(a),i._coverageValues.push(n[o])):(i._coverageValues.push(0),i._coverageValues.push(0))}return null!=e&&(this.special=e,i.special=e),this.coverage=n,i},getCoverageMask:function(t){for(var e=0,n=0,i=d.fields(this.coverage);n<i.length;){var r=i[n];++n,e|=1<<t.hitLocationHash[r]}return e},get_uid:function(){return tn.prototype.get_uid.call(this)+(null!=this.customise?" *"+this.customise.name+"*":"")},addCoverageTagsToStrArr:function(t){(null!=this.special&&null!=this.special.otherBodyType?this.special.otherBodyType:un.getInstance()).pushArmorCoverageLabelsTo(this.coverage,t)},addTagsToStrArr:function(t){tn.prototype.addTagsToStrArr.call(this,t),this.pp>0&&t.push("PP -"+this.pp);var e=this.specialFlags;0!=e&&(0!=(1&e)&&t.push("Movable"),0!=(2&e)&&t.push("Hard"),0!=(4&e)&&t.push("Mail"),0!=(8&e)&&t.push("Textile"),0!=(16&e)&&t.push("Bulletproof")),null!=this.special&&this.special.addTagsToStrArr(t,this),null!=this.burdinadin&&this.burdinadin.addTagsToStrArr(t),null!=this.customise&&this.customise.addTagsToStrArr(t)},get_label:function(){return this.name+(null!=this.customise?" *"+(this.customise.name,this.customise.name)+"*":"")},getTypeLabel:function(){return"Armor"},getLayerValueAt:function(t,e){var n=null!=this.special&&0!=this.special.layer?(0==this.special.layerCoverage||0!=(this.special.layerCoverage&t)?1:0)*this.special.layer:0;return 0!=e&&this.special.wornWith.layer>0&&this.special.wornWith.layer>n&&(n=this.special.wornWith.layer),n},__class__:en});var nn=function(){this.crest=0,this.hitLocationAllAVModifiers=null,this.name=""};n["troshx.sos.core.ArmorCustomise"]=nn,nn.__name__=["troshx","sos","core","ArmorCustomise"],nn.__interfaces__=[tt],nn.prototype={addTagsToStrArr:function(t){var e=this.crest;1==e&&t.push("*Identifying"),2==e&&t.push("*Intimidating"),3==e&&t.push("*Ruthlessly Fashionable")},get_uid:function(){return this.name},__class__:nn};var rn=function(){this.otherBodyType=null,this.hitModifier=null,this.wornWith=null,this.layerCoverage=0,this.layer=0,this.restrictsBreathing=0};n["troshx.sos.core.ArmorSpecial"]=rn,rn.__name__=["troshx","sos","core","ArmorSpecial"],rn.prototype={addTagsToStrArr:function(t,e){var n=null!=this.otherBodyType?this.otherBodyType:un.getInstance();if(null!=this.otherBodyType&&t.push("For Body Type: "+n.name),0!=this.restrictsBreathing&&t.push("Restricts Breathing "+this.restrictsBreathing),this.layer>0)if(0!=this.layerCoverage){var i=[];n.pushHitLocationNamesToStrArrByMask(i,this.layerCoverage),t.push("Layer"+(i.length>0?"s":"")+" "+this.layer+" ("+i.join(", ")+")")}else t.push("Layer "+this.layer);null!=this.hitModifier&&this.hitModifier.addTagsToStrArr(t,n),null!=this.wornWith&&this.wornWith.addTagsToStrArr(t,e)},__class__:rn};var sn=function(){this.addAV=0,this.multiplyAV=1,this.targetZoneMask=0,this.locationMask=0};n["troshx.sos.core.HitModifier"]=sn,sn.__name__=["troshx","sos","core","HitModifier"],sn.prototype={addTagsToStrArr:function(t,e){if(!(0==this.targetZoneMask&&0==this.locationMask||1==this.multiplyAV&&0==this.addAV)){var n=(this.targetZoneMask&e.swingMask)==e.swingMask,i=(this.targetZoneMask&e.thrustMask)==e.thrustMask;if(0!=this.locationMask||!n||!i){var r=0!=this.addAV&&1!=this.multiplyAV,s=0==this.multiplyAV&&0==this.addAV?"No AV":(this.addAV<0?"Reduced ":"")+(r?0!=this.multiplyAV?(this.addAV>0?"+":"")+this.addAV+" AV over "+(.5==this.multiplyAV?"Half AV":this.multiplyAV+"x AV"):this.addAV>0?"Only "+this.addAV+" AV":"+"+-this.addAV+" damage":1!=this.multiplyAV?.5==this.multiplyAV?"Provides Half AV":this.multiplyAV+"x AV":(this.addAV>0?"+":"")+this.addAV+" AV");t.push(s+(0==this.targetZoneMask||n&&i?"":" vs "+e.describeTargetZones(this.targetZoneMask))+(0!=this.locationMask?" on "+e.getLabelsHitLocationMask(this.locationMask).join(" ,"):""))}}},__class__:sn};var an=function(){this.layer=0,this.name=""};n["troshx.sos.core.WornWith"]=an,an.__name__=["troshx","sos","core","WornWith"],an.prototype={addTagsToStrArr:function(t,e){""!=this.name&&(0==this.layer||-1==this.layer?t.push("When worn with "+this.name+": Use "+(0==this.layer?"own":this.name)+" AV value instead"):t.push("Can be worn with "+this.name+" for Layer "+this.layer))},__class__:an};var on=function(t,e){null==e&&(e=""),null==t&&(t=""),this._showCustomTags=!0,this.isAmmo=!1,this.firearm=null,this.crossbow=null,this.requiredStr=0,this.stuckChance=0,this.missileSpecial=null,this.missileFlags=0,this.damageTypeM=1,this.damageM=0,this.atnM=0,this.range=0,this.meleeSpecial=null,this.meleeFlags=0,this.guard=0,this.dtn=0,this.damageTypeT=1,this.damageTypeS=0,this.damageT=0,this.damageS=0,this.atnT=0,this.atnS=0,this.variant=null,this.reach=4,this.ranged=!1,this.profsCustom=null,this.profs=0,this.customise=null,tn.call(this,t,e)};n["troshx.sos.core.Weapon"]=on,on.__name__=["troshx","sos","core","Weapon"],on.isTwoHandedOff=function(t){var e=t.meleeFlags,n=t.flags;return!(!(!t.ranged&&!t.isAmmo)||0==(128&e))&&0!=(1&n)},on.IsPowerOfTwoOrZero=function(t){return 0==(t&t-1)},on.__super__=tn,on.prototype=r(tn.prototype,{normalize:function(){if(this.ranged){var t=0!=(1&this.profs);this.ranged&&t&&!this.isAmmo||(this.requiredStr=0),this.meleeFlags=0,this.meleeSpecial=null,this.atnS=0,this.atnT=0,this.dtn=0,this.guard=0,this.damageS=0,this.damageT=0,this.damageTypeS=0,this.damageTypeT=1,this.variant=null,this.reach=4}else this.missileFlags=0,this.missileSpecial=null,this.stuckChance=0,this.requiredStr=0,this.firearm=null,this.crossbow=null,this.isAmmo=!1,this.damageTypeM=1;return this},isAttachment:function(){var t=0!=(65536&this.meleeFlags),e=0!=(16&this.missileFlags);return this.ranged?e:t},isMeleeAttachmentFor:function(t){return!this.ranged&&(0!=(65536&this.meleeFlags)&&t.supportsMeleeAttachment())},supportsMeleeAttachment:function(){var t=this.ranged;return 0!=(20480&this.meleeFlags)&&!t},hasNoProf:function(){return(null==this.profsCustom||0==this.profsCustom.list.length)&&0==this.profs},matchesTypes:function(t,e){var n=this.profs;return this.ranged==t&&(null==e||0!=(e&n))},isMelee:function(){return!this.ranged&&!this.isAmmo},isRangedWeap:function(){return!!this.ranged&&!this.isAmmo},isBow:function(){var t=0!=(1&this.profs);return!(!this.ranged||!t)&&!this.isAmmo},isSling:function(){var t=0!=(2&this.profs);return!(!this.ranged||!t)&&!this.isAmmo},isCrossbow:function(){var t=0!=(4&this.profs);return!(!this.ranged||!t||this.isAmmo)&&null!=this.crossbow},isFirearm:function(){var t=0!=(8&this.profs);return!(!this.ranged||!t||this.isAmmo)&&null!=this.firearm},isThrowing:function(){var t=0!=(16&this.profs);return!(!this.ranged||!t)&&!this.isAmmo},isAmmunition:function(){return!!this.isAmmo&&this.ranged},profLabels:function(){var t=En.getLabelsOfArrayProfs(this.ranged?null!=En.CORE_RANGED?En.CORE_RANGED:En.CORE_RANGED=En.getNewCoreRanged():En.getCoreMelee(),this.profs);if(null!=this.profsCustom)for(var e=0,n=this.profsCustom.list.length;e<n;){var i=e++;t.push(this.profsCustom.list[i].name)}return t.join(", ")},addTagsToStrArr:function(t){tn.prototype.addTagsToStrArr.call(this,t);var e;this.ranged?this.missileFlags:this.meleeFlags;if(this.ranged){for(var n=0,i=(e=kn.getLabelsOfFlags(this.missileSpecial,this.missileFlags)).length;n<i;){var r=n++;t.push(e[r])}this.isAmmo&&(null!=this.crossbow&&0!=(4&this.profs)&&this.crossbow.addAmmoTagsToStrArr(t),0!=(1&this.profs)&&0!=this.requiredStr&&t.push("Required STR "+(this.requiredStr>=0?"+":"")+this.requiredStr)),null!=this.firearm&&0!=(8&this.profs)&&this.firearm.addTagsToStrArr(t,this.isAmmo,this.isAmmo)}else{for(var s=0,a=(e=In.getLabelsOfFlags(this.meleeSpecial,this.meleeFlags)).length;s<a;){var o=s++;t.push(e[o])}null!=this.customise&&this._showCustomTags&&this.customise.addMeleeTagsToStrArr(t)}},isMultipleCoreProf:function(){if(0!=this.profs){var t=this.profs;return 0!=(t&t-1)}return!1},hasCustomProf:function(){return null!=this.profsCustom&&this.profsCustom.list.length>0},setSingleProfIndex:function(t){this.profs=1<<t},setMultipleProf:function(t){this.profs=t},get_uid:function(){return tn.prototype.get_uid.call(this)+(null!=this.customise?"_"+this.customise.get_uid():"")},getWeapLabel:function(t){var e=0!=(8&this.profs);return(!(!this.ranged||!e||this.isAmmo||null==this.firearm)&&null!=this.firearm.firingMechanism?this.firearm.firingMechanism.name+" ":"")+this.name+(t?"*":"")+(null!=this.customise?" *"+(null!=this.customise.name?this.customise.name:this.customise.get_uid())+"*":"")},get_label:function(){var t=0!=(8&this.profs);return(!(!this.ranged||!t||this.isAmmo||null==this.firearm)&&null!=this.firearm.firingMechanism?this.firearm.firingMechanism.name+" ":"")+this.name+""+(null!=this.customise?" *"+(null!=this.customise.name?this.customise.name:this.customise.get_uid())+"*":"")},getLabelHeld:function(t){var e=0!=(8&this.profs);return(!(!this.ranged||!e||this.isAmmo||null==this.firearm)&&null!=this.firearm.firingMechanism?this.firearm.firingMechanism.name+" ":"")+this.name+(t?"*":"")+(null!=this.customise?" *"+(null!=this.customise.name?this.customise.name:this.customise.get_uid())+"*":"")},getTypeLabel:function(){return"Weapon"},__class__:on});var ln=function(t,e,n){null==n&&(n=""),null==e&&(e=0),null==t&&(t=""),on.call(this,n,t),this.stuckChance=e,this.isAmmo=!0,this.ranged=!0,this.profs=5};n["troshx.sos.core.Arrow"]=ln,ln.__name__=["troshx","sos","core","Arrow"],ln.getDefaultList=function(){return null!=ln.LIST?ln.LIST:ln.LIST=ln.getNewDefaultList()},ln.getNewDefaultList=function(){var t=[],e=new ln("Bodkin",1).setWeightCost(0,1,1).setUnit(20);return t[0]=e,e.range=10,e.missileFlags=2,e=new ln("Barbed Broadhead",10).setWeightCost(0,4,1).setUnit(20),t[1]=e,e.missileSpecial=new kn,e.missileSpecial.winged=2,e=new ln("Bludgeon/Stun Arrow",0).setWeightCost(0,10,0).setUnit(20),t[2]=e,e.missileSpecial=new kn,e.missileSpecial.shock=2,e.missileFlags=1,e.range=-5,e=new ln("Broadhead",5).setWeightCost(0,2,1).setUnit(20),t[3]=e,e.damageM=-1,e.missileSpecial=new kn,e.missileSpecial.winged=2,e=new ln("Fire Arrow",5).setWeightCost(0,2,1).setUnit(20),t[4]=e,e.damageM=-1,e.atnM=1,e.range=-5,e.missileSpecial=new kn,e.missileSpecial.flaming=1,e=new ln("Heavy Broadhead",5).setWeightCost(0,3,1).setUnit(20),t[5]=e,e.damageM=-2,e.range=-5,e.missileSpecial=new kn,e.missileSpecial.winged=2,e=new ln("Lozenge-Head",2).setWeightCost(0,2,1).setUnit(20),t[6]=e,e.range=-5,e.missileSpecial=new kn,e.missileSpecial.AP=2,e=new ln("Swallowtail",8).setWeightCost(0,4,1).setUnit(20),t[7]=e,e.requiredStr=-1,e.missileSpecial=new kn,e.missileSpecial.winged=1,t},ln.__super__=on,ln.prototype=r(on.prototype,{__class__:ln});var un=function(){this.hitLocationHash=null};n["troshx.sos.core.BodyChar"]=un,un.__name__=["troshx","sos","core","BodyChar"],un.getInstance=function(){return null!=un.DEFAULT?un.DEFAULT:un.DEFAULT=un.getNewDefaultInstance()},un.getNewDefaultInstance=function(){var t=new un;return t.name="Humanoid",t.targetZones=hn.getNewTargetZones(),t.hitLocations=hn.getNewHitLocations(),t.thrustStartIndex=9,t.rearStartIndex=18,t.missileHitLocations=[-1,9,11,11,12,15,13,14,16,17],t.bake(),t},un.createBlankInstance=function(){var t=new un;return t.name="",t.targetZones=[],t.missileHitLocations=[],t.hitLocations=[],t.thrustStartIndex=0,t},un.createEmptyInstance=function(){return new un},un.prototype={getNewHitLocationsFrontSlice:function(){return this.hitLocations.slice(0,this.rearStartIndex)},isSwingingAll:function(t){return(t&this.swingMask)==this.swingMask},isThrustingAll:function(t){return(t&this.thrustMask)==this.thrustMask},isSwingingOnly:function(t){return t==this.swingMask},isThrustingOnly:function(t){return t==this.thrustMask},isThrusting:function(t){return t>=this.thrustStartIndex},bake:function(){for(var t={},e=0,n=this.hitLocations.length;e<n;){var i=e++;t[this.hitLocations[i].id]=i}this.hitLocationHash=t,this.thrustMask=0;for(var r=this.thrustStartIndex,s=this.targetZones.length;r<s;){var a=r++;this.thrustMask|=1<<a}this.swingMask=0;for(var o=0,l=this.thrustStartIndex;o<l;){var u=o++;this.swingMask|=1<<u}},getTargetZoneHitAreaMasks:function(){for(var t=[],e=0,n=this.targetZones.length;e<n;){var i=e++,r=this.targetZones[i];t.push(r.getHitAreaMask())}return t},getDescLabelTargetZone:function(t){var e=t>=this.thrustStartIndex,n=this.targetZones[t];return(""!=n.description?n.description+" to":e?"Thrust to":"Swing to")+" "+n.name},getDescLabelsTargetZoneMask:function(t){for(var e=[],n=0,i=this.targetZones.length;n<i;){var r=n++;0!=(1<<r&t)&&e.push(this.getDescLabelTargetZone(r))}return e},getTitleLabelsTargetZoneMask:function(t){for(var e=[],n=0,i=this.targetZones.length;n<i;){var r=n++,s=this.targetZones[r];0!=(1<<r&t)&&e.push(s.name+(""!=s.description?" ("+s.description+")":""))}return e},describeTargetZones:function(t){var e="",n=t&this.swingMask,i=t&this.thrustMask;return n==this.swingMask&&i==this.thrustMask?"all swinging and thrusting attacks":(0!=n&&(n==this.swingMask?e+="all Swinging attacks":e+="Swinging attacks to the "+this.getTitleLabelsTargetZoneMask(n).join(", ")),0!=i&&(0!=n&&(e+=" and "),i==this.thrustMask?e+="all Thrusting attacks":e+="Thrusting attacks to the "+this.getTitleLabelsTargetZoneMask(i).join(", ")),e)},getLabelsHitLocationMask:function(t){for(var e=[],n=0,i=this.hitLocations.length;n<i;){var r=n++;0!=(1<<r&t)&&e.push(this.hitLocations[r].name)}return e},pushHitLocationNamesToStrArrByMask:function(t,e){for(var n=0,i=this.hitLocations.length;n<i;){var r=n++;0!=(e&1<<r)&&t.push(this.hitLocations[r].name)}},pushArmorCoverageLabelsTo:function(t,e){for(var n=0,i=d.fields(this.hitLocationHash);n<i.length;){var r=i[n];++n;var s=this.hitLocations[this.hitLocationHash[r]],a=t[r];e.push(s.name+(0!=(1&a)?"ϕ":"")+(0!=(2&a)?"*":""))}},getHitLocationLabelFromId:function(t){var e=this.hitLocationHash[t];return null!=e?this.hitLocations[e].name:null},getHitLocationById:function(t){var e=this.hitLocationHash[t];return null!=e?this.hitLocations[e]:null},gotSideWithId:function(t){var e=this.getHitLocationById(t);return null!=e&&e.twoSided},__class__:un};var cn=function(){};n["troshx.sos.core.IBodyHitZones"]=cn,cn.__name__=["troshx","sos","core","IBodyHitZones"];var hn=function(){};n["troshx.sos.core.Humanoid"]=hn,hn.__name__=["troshx","sos","core","Humanoid"],hn.getNewTargetZones=function(){return[Vn.create("Head",[3,2,2,3],[4,2,1,0],0,"Downward Swing"),Vn.create("Head",[3,2,3,2],[5,3,2,1],0,"Upward Swing"),Vn.create("Neck",[3,3,2,2],[4,3,2,1]),Vn.create("Torso",[3,4,3],[7,6,5]),Vn.create("Upper Arm",[3,4,3],[15,14,4]),Vn.create("Lower Arm",[3,4,3],[17,16,15]),Vn.create("Upper Leg",[3,4,3],[11,10,8]),Vn.create("Lower Leg",[3,4,3],[13,12,11]),Vn.create("Groin",[3,4,3],[10,9,7]),Vn.create("Head",[3,4,3],[3,1,0]),Vn.create("Neck",[3,4,3],[5,3,1]),Vn.create("Chest",[3,4,2,1],[7,5,4,3]),Vn.create("Belly",[1,1,5,3],[9,8,6,7]),Vn.create("Upper Arm",[3,4,3],[15,14,4]),Vn.create("Lower Arm",[3,4,3],[17,16,15]),Vn.create("Groin",[3,4,3],[10,9,7]),Vn.create("Upper Leg",[3,4,3],[11,10,8]),Vn.create("Lower Leg",[3,4,3],[13,12,11])]},hn.getNewHitLocations=function(){return[new wn("Upper Head","upperHead"),new wn("Face","face"),new wn("Lower Head","lowerHead"),new wn("Neck","neck"),new wn("Shoulder","shoulder",!0),new wn("Chest","chest"),new wn("Side","side",!0),new wn("Belly","belly"),new wn("Hip","hip",!0),new wn("Groin","groin"),new wn("Thigh","thigh",!0),new wn("Knee","knee",!0),new wn("Shin","shin",!0),new wn("Foot","foot",!0),new wn("Upper Arm","upperArm",!0),new wn("Elbow","elbow",!0),new wn("Forearm","forearm",!0),new wn("Hand","hand",!0),new wn("Upper Back","upperBack"),new wn("Lower Back","lowerBack")]};var dn=function(){};n["troshx.sos.core.BurdinadinArmory"]=dn,dn.__name__=["troshx","sos","core","BurdinadinArmory"];var pn=function(){this.augmentations=0,this.insulation=0};n["troshx.sos.core.BurdinadinArmor"]=pn,pn.__name__=["troshx","sos","core","BurdinadinArmor"],pn.prototype={addTagsToStrArr:function(t){0!=this.insulation&&t.push("Insulation "+this.insulation),0!=this.augmentations&&t.push("Augmentations ("+this.augmentations+")")},__class__:pn};var gn=function(){this.spanningTools=0,this.span=0};n["troshx.sos.core.Crossbow"]=gn,gn.__name__=["troshx","sos","core","Crossbow"],gn.prototype={getSpanningToolsStrArr:function(){return tn.getLabelsOfArray(mn.getDefaultList(),this.spanningTools)},addAmmoTagsToStrArr:function(t){0!=this.span&&t.push("Span "+(this.span>=0?"+":"")+this.span)},__class__:gn};var mn=function(t,e,n,i){null==i&&(i=""),null==n&&(n=!1),null==e&&(e=0),null==t&&(t=""),tn.call(this,i,t),this.spanBonus=e,this.storeSpan=n};n["troshx.sos.core.SpanningTool"]=mn,mn.__name__=["troshx","sos","core","SpanningTool"],mn.getDefaultList=function(){return null!=mn.LIST?mn.LIST:mn.LIST=mn.getNewDefaultList()},mn.getNewDefaultList=function(){var t=[];return t[0]=new mn("Hand",0,!1,"").setWeightCost(0,0,0),t[1]=new mn("Lever",2,!1,"").setWeightCost(0,5,0),t[2]=new mn("Screw",0,!0,"").setWeightCost(0,1,1),t[3]=new mn("Stirrup",5,!1,"").setWeightCost(1,5,0),t[4]=new mn("Windlass",4,!0,"").setWeightCost(1,2,1),t[5]=new mn("Winch",6,!0,"").setWeightCost(2,3,1),t[6]=new mn("Crank",3,!0,"").setWeightCost(0,1,1),t},mn.__super__=tn,mn.prototype=r(tn.prototype,{__class__:mn});var fn=function(){};n["troshx.sos.core.DamageType"]=fn,fn.__name__=["troshx","sos","core","DamageType"],fn.isMelee=function(t){return t<4},fn.getNewFlagVarNames=function(){var t=[];return t.push("c"),t.push("p"),t.push("b"),t.push("u"),t.push("fl"),t.push("br"),t.push("el"),t.push("cl"),t},fn.getFlagVarNames=function(){return null!=fn.FLAG_VAR_NAMES?fn.FLAG_VAR_NAMES:fn.FLAG_VAR_NAMES=fn.getNewFlagVarNames()},fn.getNewFlagLabels=function(){var t=[];return t.push("Cutting"),t.push("Piercing"),t.push("Bludgeoning"),t.push("Unarmed"),t.push("Falling"),t.push("Burn"),t.push("Electrical"),t.push("Cold"),t},fn.getFlagLabels=function(){return null!=fn.FLAG_LABELS?fn.FLAG_LABELS:fn.FLAG_LABELS=fn.getNewFlagLabels()},fn.prototype={__class__:fn};var _n=function(){this.firingMechanism=null,this.highCaliber=0,this.revolver=0,this.magazine=0,this.multishot=0,this.double=!1,this.load=0,this.ammunitionsCustom=null,this.ammunitions=0};n["troshx.sos.core.Firearm"]=_n,_n.__name__=["troshx","sos","core","Firearm"],_n.prototype={addTagsToStrArr:function(t,e,n){this.double&&t.push("Double"),0!=this.multishot&&t.push("Multishot "+(e&&this.multishot>=0?"+":"")+this.multishot),0!=this.magazine&&t.push("Magazine "+(e&&this.magazine>=0?"+":"")+this.magazine),0!=this.revolver&&t.push("Revolver "+(e&&this.revolver>=0?"+":"")+this.revolver),0!=this.revolver&&t.push("High Caliber "+(e&&this.highCaliber>=0?"+":"")+this.highCaliber),n&&0!=this.load&&t.push("Load "+(e&&this.load>=0?"+":"")+this.load)},getAmmunitionsStrArr:function(){var t=tn.getLabelsOfArray(bn.getDefaultList(),this.ammunitions);return null!=this.ammunitionsCustom&&(t=this.ammunitionsCustom.concat(t)),t},__class__:_n};var vn=function(t,e,n){null==n&&(n=""),null==e&&(e=0),null==t&&(t=""),this.loadingMechanismsCustom=null,tn.call(this,n,t),this.loadingMechanisms=e};n["troshx.sos.core.FiringMechanism"]=vn,vn.__name__=["troshx","sos","core","FiringMechanism"],vn.getDefaultList=function(){return null!=vn.LIST?vn.LIST:vn.LIST=vn.getNewDefaultList()},vn.getNewDefaultList=function(){var t=[],e=new vn("Caplock",5).setWeightCost(0,12,2);return t[0]=e,e=new vn("Firelock",1),t[1]=e,e=new vn("Flintlock",5).setWeightCost(0,3,1),t[2]=e,e=new vn("Matchlock",5).setWeightCost(0,6,0),t[3]=e,e=new vn("Needlefire",10).setWeightCost(0,5,2),t[4]=e,e=new vn("Snaplock",5).setWeightCost(0,2,1),t[5]=e,e=new vn("Wheelock",5).setWeightCost(0,8,1),t[6]=e,t},vn.__super__=tn,vn.prototype=r(tn.prototype,{__class__:vn});var bn=function(t,e,n){null==n&&(n=""),null==e&&(e=0),null==t&&(t=""),on.call(this,n,t),this.stuckChance=e,this.ranged=!0,this.isAmmo=!0,this.firearm=new _n,this.profs=8};n["troshx.sos.core.Ammunition"]=bn,bn.__name__=["troshx","sos","core","Ammunition"],bn.getDefaultList=function(){return null!=bn.LIST?bn.LIST:bn.LIST=bn.getNewDefaultList()},bn.getNewDefaultList=function(){var t=[],e=new bn("Ball",9).setWeightCost(0,1,0).setUnit(10);return t[0]=e,e.missileSpecial=new kn,e.missileSpecial.AP=4,e=new bn("Buck and Ball",9).setWeightCost(0,1,0).setUnit(10),t[1]=e,e.missileSpecial=new kn,e.missileSpecial.scatter=3,e.missileSpecial.scatter_y=6,e.missileSpecial.AP=2,e.missileFlags=8,e=new bn("Heavy Shot",9).setWeightCost(0,3,0).setUnit(10),t[2]=e,e.missileSpecial=new kn,e.missileSpecial.scatter=8,e.missileSpecial.scatter_y=6,e=new bn("Rifle Ball",8).setWeightCost(0,6,0).setUnit(10),t[3]=e,e.atnM=-1,e.missileSpecial=new kn,e.missileSpecial.AP=4,e.firearm=new _n,e.firearm.load=-10,e=new bn("Shot",9).setWeightCost(0,1,0).setUnit(10),t[4]=e,e.missileSpecial=new kn,e.missileSpecial.scatter=6,e.missileSpecial.scatter_y=6,e=new bn("Spike",1).setWeightCost(0,1,0),t[5]=e,e.damageM=2,e.atnM=-1,e.range=3,e.firearm=new _n,e.firearm.load=10,t},bn.__super__=on,bn.prototype=r(on.prototype,{__class__:bn});var yn=function(t,e,n){null==n&&(n=100),null==e&&(e=0),null==t&&(t=""),this.name=t,this.loadBonus=e,this.ammunitionCostModifier=n};n["troshx.sos.core.LoadingMechanism"]=yn,yn.__name__=["troshx","sos","core","LoadingMechanism"],yn.getDefaultList=function(){return null!=yn.LIST?yn.LIST:yn.LIST=yn.getNewDefaultList()},yn.getNewDefaultList=function(){var t=[],e=new yn("Manual",0,100);return t[0]=e,e=new yn("Brass Catridge",10,1e3),t[1]=e,e=new yn("Paper Catridge",3,200),t[2]=e,e=new yn("Paper Mache Catridge",5,300),t[3]=e,t},yn.prototype={get_ammunitionCostRatio:function(){return this.ammunitionCostModifier/100},__class__:yn};var wn=function(t,e,n){null==n&&(n=!1),this.name=t,this.id=e,this.twoSided=n};n["troshx.sos.core.HitLocation"]=wn,wn.__name__=["troshx","sos","core","HitLocation"],wn.prototype={get_uid:function(){return this.id},__class__:wn};var Sn=function(){this.cp=0,this.sp=0,this.gp=0};n["troshx.sos.core.Money"]=Sn,Sn.__name__=["troshx","sos","core","Money"],Sn.create=function(t,e,n){var i=new Sn;return i.gp=t,i.sp=e,i.cp=n,i},Sn.getLabelWith=function(t,e,n){return(0!=t?t+" gp":"")+(0!=e?(0!=t?" ":"")+e+" sp":"")+(0!=n?(0!=e||0!=t?" ":"")+n+" cp":"")},Sn.prototype={matchWith:function(t){return this.gp=t.gp,this.sp=t.sp,this.cp=t.cp,this},matchWithValues:function(t,e,n){return this.gp=t,this.sp=e,this.cp=n,this},isNegative:function(){return this.cp<0},changeToHighest:function(){var t;return this.cp>12&&(t=.08333333333333333*this.cp|0,this.sp+=t,this.cp-=12*t),this.sp>20&&(t=.05*this.sp|0,this.gp+=t,this.sp-=20*t),this},getLabel:function(){return(0!=this.gp?this.gp+" gp":"")+(0!=this.sp?(0!=this.gp?" ":"")+this.sp+" sp":"")+(0!=this.cp?(0!=this.sp||0!=this.gp?" ":"")+this.cp+" cp":"")},tempCalc:function(){return Sn.TEMP.matchWith(this)},resetTo:function(t){return t.matchWith(this),t},addValues:function(t,e,n){return this.gp+=t,this.sp+=e,this.cp+=n,this},getCPValue:function(){return 240*this.gp+12*this.sp+this.cp},getGoldValue:function(){return this.gp+.05*this.sp+.004166666666666667*this.cp},getSilverValue:function(){return 20*this.gp+this.sp+.08333333333333333*this.cp},convertAllToCP:function(){var t=240*this.gp+12*this.sp+this.cp;return this.gp=0,this.sp=0,this.cp=t,this},addCP:function(t){return this.cp+=t,this},subtractCP:function(t){return this.cp-=t,this.cp<0&&(this.sp>0&&(this.cp+=12*this.sp,this.sp=0),this.cp<0&&this.gp>0&&(this.cp+=240*this.gp,this.gp=0)),this},addAgainst:function(t){return this.gp+=t.gp,this.sp+=t.sp,this.cp+=t.cp,this},subtractValues:function(t,e,n){return this.gp-=t,this.gp<0&&(this.sp+=20*this.gp,this.gp=0),this.sp-=e,this.sp<0&&(this.cp+=12*this.sp,this.sp=0),this.cp-=n,this.cp<0&&(this.sp>0&&(this.cp+=12*this.sp,this.sp=0),this.cp<0&&this.gp>0&&(this.cp+=240*this.gp,this.gp=0)),this},naiveChangeNegativeCP:function(){this.cp<0&&(this.sp>0&&(this.cp+=12*this.sp,this.sp=0),this.cp<0&&this.gp>0&&(this.cp+=240*this.gp,this.gp=0))},subtractAgainst:function(t){return this.gp-=t.gp,this.gp<0&&(this.sp+=20*this.gp,this.gp=0),this.sp-=t.sp,this.sp<0&&(this.cp+=12*this.sp,this.sp=0),this.cp-=t.cp,this.cp<0&&(this.sp>0&&(this.cp+=12*this.sp,this.sp=0),this.cp<0&&this.gp>0&&(this.cp+=240*this.gp,this.gp=0)),this},_resetToZero:function(){this.sp=0,this.cp=0,this.gp=0},resetToZero:function(){return this.sp=0,this.cp=0,this.gp=0,this},__class__:Sn};var Cn=function(){this.version=3,this.shieldPosition=0,this.weapons=[],this.shields=[],this.equipedNonMeleeItems=[],this.wornArmor=[],this.dropPack=!1,this.packed=new it,this.dropped=new it};n["troshx.sos.core.Inventory"]=Cn,Cn.__name__=["troshx","sos","core","Inventory"],Cn.getUnheldLabelsArray=function(){var t=[];return t.push(""),t.push("Sheath/Holster"),t.push("Strapped-Arm"),t.push("Strapped-Shoulder"),t.push("Back"),t.push("Concealed"),t.push("DISABLED"),t},Cn.getReachBetween=function(t,e){return jr.maxI(null!=t?t.reach:1,null!=e?e.reach:1)},Cn.getReadyAssignOf=function(t){return D.__instanceof(t,on)?{weapon:t,held:0,unheld:0,unheldRemark:"",key:Cn.UID_COUNT++,attached:!1,holding1H:!1}:D.__instanceof(t,Nn)?{shield:t,attached:!1,held:0,unheld:0,unheldRemark:"",key:Cn.UID_COUNT++}:D.__instanceof(t,en)?{armor:t,attached:!1,held:0,unheld:0,unheldRemark:"",key:Cn.UID_COUNT++}:{item:t,attached:!1,held:0,unheld:0,unheldRemark:"",key:Cn.UID_COUNT++}},Cn.getEmptyReadyAssign=function(t){return"weapon"==t?{weapon:new on,held:0,unheld:0,unheldRemark:"",key:Cn.UID_COUNT++,holding1H:!1,attached:!1}:"shield"==t?{shield:new Nn,attached:!1,held:0,unheld:0,unheldRemark:"",key:Cn.UID_COUNT++}:"armor"==t?{armor:en.createEmptyInstance(),attached:!1,held:0,unheld:0,unheldRemark:"",key:Cn.UID_COUNT++}:{item:new tn,attached:!1,held:0,unheld:0,unheldRemark:"",key:Cn.UID_COUNT++}},Cn.prototype={setNewDroppedList:function(t){this.dropped=t},getSignaler:function(){return null!=this.signaler?this.signaler:this.signaler=this.createSignaler()},createSignaler:function(){return this.signaler=new z,this.signaler},setSignaler:function(t){null!=this.signaler&&t!=this.signaler&&this.signaler.removeAll(),this.signaler=t},dispatchSignal:function(t){(null!=this.signaler?this.signaler:this.signaler=this.createSignaler()).dispatch(t)},findOffHandItem:function(){for(var t=0,e=this.weapons.length;t<e;){var n=t++;if(2==this.weapons[n].held)return this.weapons[n].weapon}for(var i=0,r=this.shields.length;i<r;){var s=i++;if(2==this.shields[s].held)return this.shields[s].shield}for(var a=0,o=this.equipedNonMeleeItems.length;a<o;){var l=a++;if(2==this.equipedNonMeleeItems[l].held)return this.equipedNonMeleeItems[l].item}return null},findMasterHandItem:function(){for(var t=0,e=this.weapons.length;t<e;){var n=t++;if(0!=(1&this.weapons[n].held))return this.weapons[n].weapon}for(var i=0,r=this.shields.length;i<r;){var s=i++;if(0!=(1&this.shields[s].held))return this.shields[s].shield}for(var a=0,o=this.equipedNonMeleeItems.length;a<o;){var l=a++;if(0!=(1&this.equipedNonMeleeItems[l].held))return this.equipedNonMeleeItems[l].item}return null},getOffhandWeapon:function(){for(var t=0,e=this.weapons.length;t<e;){var n=t++;if(2==this.weapons[n].held){var i=this.weapons[n];return i.holding1H&&null!=i.weapon.variant?i.weapon.variant:i.weapon}}return null},getMasterWeapon:function(){for(var t=0,e=this.weapons.length;t<e;){var n=t++;if(0!=(1&this.weapons[n].held)){var i=this.weapons[n];return i.holding1H&&null!=i.weapon.variant?i.weapon.variant:i.weapon}}return null},getReach:function(){var t=this.getMasterWeapon(),e=this.getOffhandWeapon();return jr.maxI(null!=t?t.reach:1,null!=e?e.reach:1)},findHeldShield:function(){for(var t=0,e=this.shields.length;t<e;){var n=t++;if(2==this.shields[n].held)return this.shields[n].shield}for(var i=0,r=this.shields.length;i<r;){var s=i++;if(0!=this.shields[s].held)return this.shields[s].shield}return null},getWeildableWeaponsTypeFiltered:function(t,e){for(var n=[],i=0,r=this.weapons.length;i<r;){var s=i++,a=this.weapons[s],o=a.weapon,l=o.matchesTypes(t,e);o.isAmmo&&o.ranged||!l||n.push(a)}return n},get_ammoFiltered:function(){for(var t=[],e=0,n=this.weapons.length;e<n;){var i=e++,r=this.weapons[i],s=this.weapons[i].weapon;s.isAmmo&&s.ranged&&t.push(r)}return t},compareItemsEq:function(t,e){var n=new y,i=new y;return n.serialize(t),i.serialize(e),n.toString()==i.toString()},_shiftItem:function(t,e,n,i){var r,s;if(null==n&&(n=1),n<=0&&(n=1),e>0)return 4!=e?1==e?((r=new xn(t,n)).attachments=i,!!(null!=(s=this.packed.getMatchingItem(r))&&s.item!=r.item)&&!this.compareItemsEq(s.item.normalize(),r.item.normalize())?r:(this.packed.add(r),null)):2==e?((r=new xn(t,n)).attachments=i,!!(null!=(s=this.dropped.getMatchingItem(r))&&s.item!=r.item)&&!this.compareItemsEq(s.item.normalize(),r.item.normalize())?r:(this.dropped.add(r),null)):(console.log("Unaccounted prefered unheld case: "+e),null):null;if(e<0){var a=new xn(t);return-2==e?this.dropped.splicedAgainst(a):this.packed.splicedAgainst(a),null}return null},packItemEntryFromGround:function(t,e){null==e&&(e=0),0==e?e=t.qty:t=t.getQtyCopy(e);var n=this._shiftItem(t.item,1,e);return null!=n?n:(this.dropped.splicedAgainst(t),this.dispatchSignal(An.PackItem),null)},dropItemEntryFromPack:function(t,e){null==e&&(e=0),0==e?e=t.qty:t=t.getQtyCopy(e);var n=this._shiftItem(t.item,2,e);return null!=n?n:(this.packed.splicedAgainst(t),this.dispatchSignal(An.DropItem),null)},equipItemEntryFromGround:function(t,e){return null==e&&(e=""),this.dropped.splicedAgainst(new xn(t.item,1)),this.dispatchSignal(An.EquipItem),this.equipItem(t.item,e)},equipItemEntryFromPack:function(t,e){return null==e&&(e=""),this.packed.splicedAgainst(new xn(t.item,1)),this.dispatchSignal(An.EquipItem),this.equipItem(t.item,e)},holdEquiped:function(t,e){this._unholdAllItems(e,Object.prototype.hasOwnProperty.call(t,"shield")),t.held=e,this.dispatchSignal(An.HoldItem)},getPerceptionPenalty:function(){for(var t=0,e=0,n=this.wornArmor.length;e<n;){var i=e++;t+=this.wornArmor[i].armor.pp}return t},calculateTotalWeight:function(t,e){null==e&&(e=!1),null==t&&(t=!1);var n=0;if(e)for(var i=0,r=this.dropped.list.length;i<r;){var s=i++;n+=this.dropped.list[s].item.weight*this.dropped.list[s].qty}if(!this.dropPack||t)for(var a=0,o=this.packed.list.length;a<o;){var l=a++;n+=this.packed.list[l].item.weight*this.packed.list[l].qty}for(var u=0,c=this.wornArmor.length;u<c;){var h=u++;n+=this.wornArmor[h].armor.weight}for(var d=0,p=this.equipedNonMeleeItems.length;d<p;){var g=d++;n+=this.equipedNonMeleeItems[g].item.weight}for(var m=0,f=this.shields.length;m<f;){var _=m++;n+=this.shields[_].shield.weight}for(var v=0,b=this.weapons.length;v<b;){var y=v++;n+=0==this.weapons[y].held?this.weapons[y].weapon.weight:0}return n},normalizeDroppedItems:function(){for(var t=0,e=this.dropped.list.length;t<e;){var n=t++;this.dropped.list[n].item.normalize()}},normalizeAllItems:function(){for(var t=0,e=this.dropped.list.length;t<e;){var n=t++;this.dropped.list[n].item.normalize()}for(var i=0,r=this.packed.list.length;i<r;){var s=i++;this.packed.list[s].item.normalize()}for(var a=0,o=this.wornArmor.length;a<o;){var l=a++;this.wornArmor[l].armor.normalize()}for(var u=0,c=this.equipedNonMeleeItems.length;u<c;){var h=u++;this.equipedNonMeleeItems[h].item.normalize()}for(var d=0,p=this.shields.length;d<p;){var g=d++;this.shields[g].shield.normalize()}for(var m=0,f=this.weapons.length;m<f;){var _=m++;this.weapons[_].weapon.normalize()}},calculateTotalCost:function(t){var e,n;null==t&&(t=!1);var i=Cn.MONEY_CALC_CACHE;if(i[0]=0,i[1]=0,i[2]=0,t)for(var r=0,s=this.dropped.list.length;r<s;){var a=r++;i[(n=this.dropped.list[a]).item.costCurrency]+=n.item.cost*n.qty}for(var o=0,l=this.packed.list.length;o<l;){var u=o++;i[(n=this.packed.list[u]).item.costCurrency]+=n.item.cost*n.qty}for(var c=0,h=this.wornArmor.length;c<h;){var d=c++;i[(e=this.wornArmor[d].armor).costCurrency]+=e.cost}for(var p=0,g=this.equipedNonMeleeItems.length;p<g;){var m=p++;i[(e=this.equipedNonMeleeItems[m].item).costCurrency]+=e.cost}for(var f=0,_=this.shields.length;f<_;){var v=f++;i[(e=this.shields[v].shield).costCurrency]+=e.cost}for(var b=0,y=this.weapons.length;b<y;){var w=b++;i[(e=this.weapons[w].weapon).costCurrency]+=e.cost}var S=Cn.MONEY_REF;return S.matchWithValues(i[2],i[1],i[0]),S.changeToHighest()},sortBetweenAttachmentItems:function(t,e){var n=t.get_label().toLowerCase(),i=e.get_label().toLowerCase();return n<i?-1:n>i?1:0},getAttachmentArray:function(t,e,n){if(e<0||e+1>=t.length||!t[e+1].attached)return null;for(var i=[],r=e,s=t.length;r<s;){var a=r++;if(i.push(d.field(t[a],n)),!t[a].attached)break}return i.sort(Zr(this,this.sortBetweenAttachmentItems)),i},dropEquipedShield:function(t,e){null==e&&(e=!1);var n=this.shields.indexOf(t);if(!e){var i=this._shiftItem(t.shield,2,1);if(null!=i)return i}return this.shields.splice(n,1),this.dispatchSignal(e?An.DeleteItem:An.DropItem),null},dropMiscItem:function(t,e){null==e&&(e=!1);var n=this.equipedNonMeleeItems.indexOf(t);if(!e){var i=this._shiftItem(t.item,2,1,this.getAttachmentArray(this.equipedNonMeleeItems,n,"item"));if(null!=i)return i}return this.equipedNonMeleeItems.splice(n,1),this.dispatchSignal(e?An.DeleteItem:An.DropItem),null},dropEquipedWeapon:function(t,e){null==e&&(e=!1);var n=this.weapons.indexOf(t);if(!e){var i=this._shiftItem(t.weapon,2,1,this.getAttachmentArray(this.weapons,n,"weapon"));if(null!=i)return i}return this.weapons.splice(n,1),this.dispatchSignal(e?An.DeleteItem:An.DropItem),null},dropWornArmor:function(t,e){null==e&&(e=!1);var n=this.wornArmor.indexOf(t);if(!e){var i=this._shiftItem(t.armor,2,1,this.getAttachmentArray(this.wornArmor,n,"armor"));if(null!=i)return i}return this.wornArmor.splice(n,1),this.dispatchSignal(e?An.DeleteItem:An.DropItem),null},packEquipedShield:function(t){var e=this.shields.indexOf(t),n=this._shiftItem(t.shield,1,1);return null!=n?n:(this.shields.splice(e,1),this.dispatchSignal(An.PackItem),null)},packMiscItem:function(t){var e=this.equipedNonMeleeItems.indexOf(t),n=this._shiftItem(t.item,1,1,this.getAttachmentArray(this.equipedNonMeleeItems,e,"item"));return null!=n?n:(this.equipedNonMeleeItems.splice(e,1),this.dispatchSignal(An.PackItem),null)},packEquipedWeapon:function(t){var e=this.weapons.indexOf(t),n=this._shiftItem(t.weapon,1,1,this.getAttachmentArray(this.weapons,e,"weapon"));return null!=n?n:(this.weapons.splice(e,1),this.dispatchSignal(An.PackItem),null)},packWornArmor:function(t){var e=this.wornArmor.indexOf(t),n=this._shiftItem(t.armor,1,1,this.getAttachmentArray(this.wornArmor,e,"armor"));return null!=n?n:(this.wornArmor.splice(e,1),this.dispatchSignal(An.PackItem),null)},deletePacked:function(t){this.packed.delete(t),this.dispatchSignal(An.DeleteItem)},deleteDropped:function(t){this.dropped.delete(t),this.dispatchSignal(An.DeleteItem)},_unholdAllItems:function(t,e){var n,i,r;null==e&&(e=!1);for(var s=0,a=this.weapons.length;s<a;){var o=s++;0==(2&(n=this.weapons[o]).weapon.flags)&&(n.held&=~t,0!=(1&n.weapon.flags)&&3!=n.held&&(n.held=0))}for(var l=0,u=this.shields.length;l<u;){var c=l++;(i=this.shields[c]).held&=~t,(0==(2&i.shield.flags)||e)&&(i.held&=~t,0!=(1&i.shield.flags)&&3!=i.held&&(i.held=0))}for(var h=0,d=this.equipedNonMeleeItems.length;h<d;){var p=h++;0==(2&(r=this.equipedNonMeleeItems[p]).item.flags)&&(r.held&=~t,0!=(1&r.item.flags)&&3!=r.held&&(r.held=0))}},layeredWearingMaskWith:function(t,e,n){for(var i=0,r=this.wornArmor.length;i<r;){var s=i++,a=this.wornArmor[s].armor;if(a.name==e)return t.getCoverageMask(n)&a.getCoverageMask(n)}return 0},equipItem:function(t,e){var n=null;return D.__instanceof(t,on)?(n={attached:!1,key:Cn.UID_COUNT++,weapon:D.__instanceof(t,on)?t:null,held:0,unheld:0,unheldRemark:e,holding1H:!1},this.weapons.push(n)):D.__instanceof(t,Nn)?(n={key:Cn.UID_COUNT++,attached:!1,shield:D.__instanceof(t,Nn)?t:null,held:0,unheld:0,unheldRemark:e},this.shields.push(n)):D.__instanceof(t,en)?(n={key:Cn.UID_COUNT++,attached:!1,armor:D.__instanceof(t,en)?t:null,held:0,unheld:0,unheldRemark:e},this.wornArmor.push(n)):(n={key:Cn.UID_COUNT++,attached:!1,item:t,held:0,unheld:0,unheldRemark:e},this.equipedNonMeleeItems.push(n)),n},getEquipedAssignList:function(t){return"weapon"==t?this.weapons:"shield"==t?this.shields:"armor"==t?this.wornArmor:this.equipedNonMeleeItems},cleanupBeforeSerialize:function(){this.setSignaler(null)},postSerialization:function(){this.postSerialize_2(),this.postSerialize_3()},postSerialize_2:function(){if(!(null==this.version||this.version<2))return!1;this.version=2;for(var t,e=0,n=this.wornArmor.length;e<n;){var i=e++;null==this.wornArmor[i].armor.burdinadin&&(this.wornArmor[i].armor.burdinadin=null)}for(var r=0,s=this.dropped.list.length;r<s;){var a=r++,o=this.dropped.list[a].item;t=D.__instanceof(o,en)?o:null,D.__instanceof(o,on)?o:null,null!=t&&null==t.burdinadin&&(t.burdinadin=null)}for(var l=0,u=this.packed.list.length;l<u;){var c=l++,h=this.packed.list[c].item;t=D.__instanceof(h,en)?h:null,D.__instanceof(h,on)?h:null,null!=t&&null==t.burdinadin&&(t.burdinadin=null)}return!0},postSerialize_3:function(){if(!(null==this.version||this.version<3))return!1;this.version=3;for(var t=0,e=this.weapons.length;t<e;){var n=t++;null==this.weapons[n].holding1H&&(this.weapons[n].holding1H=!1)}return!0},__class__:Cn};var An=n["troshx.sos.core.InventorySignal"]={__ename__:["troshx","sos","core","InventorySignal"],__constructs__:["DeleteItem","PackItem","DropItem","EquipItem","HoldItem"]};An.DeleteItem=["DeleteItem",0],An.DeleteItem.toString=i,An.DeleteItem.__enum__=An,An.PackItem=["PackItem",1],An.PackItem.toString=i,An.PackItem.__enum__=An,An.DropItem=["DropItem",2],An.DropItem.toString=i,An.DropItem.__enum__=An,An.EquipItem=["EquipItem",3],An.EquipItem.toString=i,An.EquipItem.__enum__=An,An.HoldItem=["HoldItem",4],An.HoldItem.toString=i,An.HoldItem.__enum__=An;var xn=function(t,e){null==e&&(e=1),this.attachments=null,this.item=null!=t?t:new tn,this.qty=e};n["troshx.sos.core.ItemQty"]=xn,xn.__name__=["troshx","sos","core","ItemQty"],xn.__interfaces__=[st,rt,tt],xn.prototype={isValid:function(){return this.qty>0&&null!=this.item&&null!=this.item.name&&""!=m.trim(this.item.name)},getQtyCopy:function(t){var e=new xn(this.item,t);return e.attachments=this.attachments,e},getAttachmentsId:function(){for(var t="",e=0,n=this.attachments.length;e<n;){var i=e++;t+="+"+this.attachments[i].get_uid()}return t},getAttachmentsLabels:function(){for(var t="",e=0,n=this.attachments.length;e<n;){var i=e++;t+="+"+this.attachments[i].get_label()}return t},updateAgainst:function(t){this.qty+=t.qty},spliceAgainst:function(t){return this.qty-=t.qty,this.qty},get_uid:function(){return this.item.get_uid()+(null!=this.attachments?this.getAttachmentsId():"")},get_label:function(){return this.item.get_label()+(null!=this.attachments?this.getAttachmentsLabels():"")},__class__:xn};var In=function(){this.custom=null,this.spatulateTip=0,this.shock=0,this.multiHit_Y=0,this.multiHit=0,this.draw=0,this.crushing=0,this.chain=0,this.bleed=0,this.APThrust=0,this.APSwing=0};n["troshx.sos.core.MeleeSpecial"]=In,In.__name__=["troshx","sos","core","MeleeSpecial"],In.getLabelsOfFlags=function(t,e){null==e&&(e=0);var n=[];return 0!=e&&(0!=(1&e)&&n.push("Brace"),0!=(2&e)&&n.push("Calvary Sword"),0!=(4&e)&&n.push("Companion Weapon"),0!=(8&e)&&n.push("Couched Charge"),0!=(16&e)&&n.push("Fluid Thrusts"),0!=(32&e)&&n.push("Forward Swept"),0!=(64&e)&&n.push("Freakishly Large"),0!=(128&e)&&n.push("Hand Off"),0!=(256&e)&&n.push("Heavy Weapon"),0!=(512&e)&&n.push("Hook"),0!=(1024&e)&&n.push("Light Blade"),0!=(2048&e)&&n.push("Parrying Teeth"),0!=(4096&e)&&n.push("Swinging Slot"),0!=(8192&e)&&n.push("Thin Blade"),0!=(16384&e)&&n.push("Thrusting Slot"),0!=(32768&e)&&n.push("Tight Grip"),0!=(65536&e)&&n.push("Weapon Attachment")),null!=t&&(0!=t.APSwing&&n.push("AP Swing "+t.APSwing),0!=t.APThrust&&n.push("AP Thrust "+t.APThrust),0!=t.bleed&&n.push("Bleed "+t.bleed),0!=t.chain&&n.push("Chain "+t.chain),0!=t.crushing&&n.push("Crushing "+t.crushing),0!=t.draw&&n.push("Draw "+t.draw),0!=t.multiHit&&n.push("Multi Hit "+t.multiHit),0!=t.shock&&n.push("Shock "+t.shock),0!=t.spatulateTip&&n.push("Spatulate Tip "+t.spatulateTip)),n},In.getFlagVarLabels=function(){var t=[];return t.push("Brace"),t.push("Calvary Sword"),t.push("Companion Weapon"),t.push("Couched Charge"),t.push("Fluid Thrusts"),t.push("Forward Swept"),t.push("Freakishly Large"),t.push("Hand Off"),t.push("Heavy Weapon"),t.push("Hook"),t.push("Light Blade"),t.push("Parrying Teeth"),t.push("Swinging Slot"),t.push("Thin Blade"),t.push("Thrusting Slot"),t.push("Tight Grip"),t.push("Weapon Attachment"),t},In.getIntVarNames=function(){var t=[];return t.push("APSwing"),t.push("APThrust"),t.push("bleed"),t.push("chain"),t.push("crushing"),t.push("draw"),t.push("multiHit"),t.push("shock"),t.push("spatulateTip"),t},In.prototype={__class__:In};var kn=function(){this.custom=null,this.winged=0,this.shock=0,this.scatter_y=1,this.scatter=0,this.flaming=0,this.calvaryBow=0,this.bleed=0,this.AP=0};n["troshx.sos.core.MissileSpecial"]=kn,kn.__name__=["troshx","sos","core","MissileSpecial"],kn.getLabelsOfFlags=function(t,e){null==e&&(e=0);var n=[];return 0!=e&&(0!=(1&e)&&n.push("Bludgeon"),0!=(2&e)&&n.push("Narrow"),0!=(4&e)&&n.push("Shield Stick"),0!=(8&e)&&n.push("Ap First Hit Only"),0!=(16&e)&&n.push("Cheat Attachment")),null!=t&&(0!=t.AP&&n.push("AP "+t.AP),0!=t.bleed&&n.push("Bleed "+t.bleed),0!=t.calvaryBow&&n.push("Calvary Bow "+t.calvaryBow),0!=t.flaming&&n.push("Flaming "+t.flaming),0!=t.scatter&&n.push("Scatter "+t.scatter),0!=t.shock&&n.push("Shock "+t.shock),0!=t.winged&&n.push("Winged "+t.winged)),n},kn.getFlagVarNames=function(){var t=[];return t.push("BLUDGEON"),t.push("NARROW"),t.push("SHIELD_STICK"),t.push("AP_FIRST_HIT_ONLY"),t.push("CHEAT_ATTACHMENT"),t},kn.getFlagVarLabels=function(){var t=[];return t.push("Bludgeon"),t.push("Narrow"),t.push("Shield Stick"),t.push("Ap First Hit Only"),t.push("Cheat Attachment"),t},kn.getIntVarNames=function(){var t=[];return t.push("AP"),t.push("bleed"),t.push("calvaryBow"),t.push("flaming"),t.push("scatter"),t.push("shock"),t.push("winged"),t},kn.prototype={__class__:kn};var Tn=function(){};n["troshx.sos.core.Modifier"]=Tn,Tn.__name__=["troshx","sos","core","Modifier"],Tn.getStaticModifierSlots=function(){for(var t=[],e=0;e<21;){t[e++]=[]}return t},Tn.getSituationalModifierSlots=function(){for(var t=[],e=0;e<21;){t[e++]=[]}return t},Tn.prototype={__class__:Tn};var Ln=function(){};n["troshx.sos.core.StaticModifier"]=Ln,Ln.__name__=["troshx","sos","core","StaticModifier"],Ln.create=function(t,e,n,i){null==i&&(i=1);var r=new Ln;return r.name=e,r.index=t,r.multiply=i,r.add=n,r},Ln.prototype={_setIndex:function(t){this.index=t},getModifiedValueMultiply:function(t){return t*this.multiply},getModifiedValueAdd:function(t){return t+this.add},__class__:Ln};var Mn=function(){};n["troshx.sos.core.EventModifierBinding"]=Mn,Mn.__name__=["troshx","sos","core","EventModifierBinding"],Mn.create=function(t,e,n){var i=new Mn;return i.types=t,i.name=e,i.handler=n,i},Mn.prototype={__class__:Mn};var En=function(t,e){null==e&&(e=0),null==t&&(t=""),this.type=e,this.name=t};n["troshx.sos.core.Profeciency"]=En,En.__name__=["troshx","sos","core","Profeciency"],En.__interfaces__=[rt,tt],En.matchHandOffProfs=function(t){return 4==t?2:8==t?1:t},En.getCoreMelee=function(){return null!=En.CORE_MELEE?En.CORE_MELEE:En.CORE_MELEE=En.getNewCoreMelee()},En.getNewCoreMelee=function(){var t=[];return t[7]=new En("Wrestling",0),t[8]=new En("Pugilism",0),t[6]=new En("Dagger",0),t[0]=new En("1H Sword",0),t[1]=new En("1H Blunt",0),t[2]=new En("2H Blunt",0),t[3]=new En("2H Sword",0),t[4]=new En("Spear",0),t[5]=new En("Polearm",0),t},En.getCoreRanged=function(){return null!=En.CORE_RANGED?En.CORE_RANGED:En.CORE_RANGED=En.getNewCoreRanged()},En.getNewCoreRanged=function(){var t=[];return t[0]=new En("Bow",1),t[1]=new En("Sling",1),t[2]=new En("Crossbow",1),t[3]=new En("Firearm",1),t[4]=new En("Throwing",1),t},En.getProfsLabelsMelee=function(t){return En.getLabelsOfArrayProfs(En.getCoreMelee(),t)},En.getProfsLabelsRanged=function(t){return En.getLabelsOfArrayProfs(null!=En.CORE_RANGED?En.CORE_RANGED:En.CORE_RANGED=En.getNewCoreRanged(),t)},En.getProfsCountMelee=function(t){return En.getCountOfArrayProfs(En.getCoreMelee(),t)},En.getProfsCountRanged=function(t){return En.getCountOfArrayProfs(null!=En.CORE_RANGED?En.CORE_RANGED:En.CORE_RANGED=En.getNewCoreRanged(),t)},En.getCountOfArrayProfs=function(t,e){for(var n=0,i=0,r=t.length;i<r;){n+=0!=(e&1<<i++)?1:0}return n},En.getLabelsOfArrayProfs=function(t,e){for(var n=[],i=0,r=t.length;i<r;){var s=i++;0!=(e&1<<s)&&n.push(t[s].name)}return n},En.prototype={updateAgainst:function(t){},spliceAgainst:function(t){return 0},get_uid:function(){return this.name+En.SEPERATOR+this.type},__class__:En};var Pn=function(t){this.name=t,this.magic=!1};n["troshx.sos.core.Race"]=Pn,Pn.__name__=["troshx","sos","core","Race"],Pn.__interfaces__=[tt],Pn.prototype={get_uid:function(){return this.name},__class__:Pn};var Rn=function(t,e,n){null==n&&(n=0),null==e&&(e=0),null==t&&(t=""),this.costMoney=null,this.name=t,this.profLimit=e,this.costArc=n};n["troshx.sos.core.School"]=Rn,Rn.__name__=["troshx","sos","core","School"],Rn.getLevels=function(){return[1,1,1,1,2,2,2,2,3,3,3,3,3,6,6,6,6,8,10,10]},Rn.getTalentAdds=function(){return[1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0]},Rn.getSuperiorAdds=function(){return[0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1]},Rn.prototype={canAffordWith:function(t,e,n){if(null!=n&&(t+=n.costArc),null!=e&&null!=this.costMoney){var i=null!=n&&null!=n.costMoney?n.costMoney:Sn.ZERO;if(Sn.TEMP.matchWith(e).addAgainst(i).subtractAgainst(this.costMoney).cp<0)return!1}return t>=this.costArc},customRequire:function(t){return!0},getSchoolBonuses:function(t){return null},get_uid:function(){return this.name},__class__:Rn};var Bn=function(){};n["troshx.sos.core.SchoolBonuses"]=Bn,Bn.__name__=["troshx","sos","core","SchoolBonuses"],Bn.prototype={getUIFields:function(){return null},getTags:function(){return[]},__class__:Bn};var Nn=function(){this.strapType=0,this.durability=6,this.bashTN=0,this.blockTN=7,this.size=0,this.AV=1,tn.call(this)};n["troshx.sos.core.Shield"]=Nn,Nn.__name__=["troshx","sos","core","Shield"],Nn.getHighCoverage=function(){return[{upperHead:!0,lowerHead:!0,face:!0,neck:!0,shoulder:!0,upperArm:!1,elbow:!1,forearm:!1,hand:!1},{upperHead:!0,lowerHead:!0,face:!0,neck:!0,shoulder:!0,upperArm:!1,elbow:!1,forearm:!1,hand:!1,chest:!0},{upperHead:!0,lowerHead:!0,face:!0,neck:!0,shoulder:!0,upperArm:!0,elbow:!0,forearm:!0,hand:!0,chest:!0,belly:!0,side:!0}]},Nn.getLowCoverage=function(){return[{chest:!0,belly:!0,upperArm:!1,elbow:!1,forearm:!1,hand:!1},{chest:!0,belly:!0,side:!0,groin:!0,hip:!0,upperArm:!1,elbow:!1,forearm:!1,hand:!1,thigh:!0},{chest:!0,belly:!0,side:!0,groin:!0,hip:!0,neck:!0,upperArm:!1,elbow:!1,forearm:!1,hand:!1,knee:!0,thigh:!0}]},Nn.__super__=tn,Nn.prototype=r(tn.prototype,{addTagsToStrArr:function(t){tn.prototype.addTagsToStrArr.call(this,t),0!=(2&this.flags)&&t.push(0==this.strapType?"Arm-strap":"Shoulder-strap")},getTypeLabel:function(){return"Shield"},__class__:Nn});var Wn=function(){};n["troshx.sos.core.Skill"]=Wn,Wn.__name__=["troshx","sos","core","Skill"],Wn.isVarious=function(t){return 0!=(t&t-1)},Wn.specialisationName=function(t,e){return t+" ("+e+")"},Wn.getBaseFromSpecialisationNaive=function(t){var e=t.indexOf(" (");return e>0?t.substring(0,e):null},Wn.getBaseFromSpecialisation=function(t){var e=t.indexOf(" ("),n=" (".length+")".length;return e>0&&t.length>n&&")"==a.substr(t,t.length-")".length,null)?t.substring(0,e):null},Wn.getSplitFromSpecialisation=function(t){var e=t.indexOf(" ("),n=" (".length+")".length;return e>0&&t.length>n&&")"==a.substr(t,t.length-")".length,null)?[t.substring(0,e),t.substring(e+" (".length,t.length-")".length)]:null};var Fn=function(){};n["troshx.sos.core.SkillTable"]=Fn,Fn.__name__=["troshx","sos","core","SkillTable"],Fn.getNewEmptySkillTable=function(t){var e=new Fn;return e.skillHash={},null!=t?(e.requiresTrained=t.requiresTrained,e.requiresSpecialisation=t.requiresSpecialisation):(e.requiresTrained={},e.requiresSpecialisation={}),e},Fn.getDefaultSkillTable=function(){return null!=Fn.DEFAULT?Fn.DEFAULT:Fn.DEFAULT=Fn.getNewDefaultSkillTable()},Fn.getNewDefaultSkillTable=function(){var t=new Fn;return t.skillHash={Athletics:7,Chymistry:64,Climbing:4,Cooking:64,Crafting:64,Drill:16,Engineering:64,Etiquette:32,"Gather Information":256,Hunting:128,Intimidation:256,Knowledge:64,Navigation:128,Observation:128,Oration:256,Performance:256,Persuasion:256,Profession:16,Research:64,Riding:2,Sailing:32,Stealth:2,Strategy:64,Subterfuge:256,Surgery:64,Swimming:4,Tactics:64,Thievery:2},t.requiresTrained={Crafting:!0,Engineering:!0,History:!0,Navigation:!0,Swimming:!0,Tactics:!0,Strategy:!0,Etiquette:!0},t.requiresSpecialisation={Profession:!0,Knowledge:!0,Crafting:!0,Performance:!0},t},Fn.sortArrayMethod=function(t,e){var n=t.name.toLowerCase(),i=e.name.toLowerCase();return n<i?-1:n>i?1:0},Fn.prototype={getSpecialisationList:function(){for(var t=[],e=0,n=d.fields(this.requiresSpecialisation);e<n.length;){var i=n[e];++e,t.push(i)}return t},getSkillObjectsAsArray:function(t){null==t&&(t=!0);for(var e=[],n=0,i=d.fields(this.skillHash);n<i.length;){var r=i[n];++n,e.push({name:r,attribs:this.skillHash[r]})}return t&&e.sort(Fn.sortArrayMethod),e},matchRulesWith:function(t){this.requiresTrained=t.requiresTrained,this.requiresSpecialisation=t.requiresSpecialisation},requiresSpecification:function(t){return this.requiresSpecialisation[t]},clearAllSkills:function(t){if(t)this.skillHash={};else for(var e=0,n=d.fields(this.skillHash);e<n.length;){var i=n[e];++e,d.deleteField(this.skillHash,i)}},canAttemptUntrained:function(t){return!this.requiresTrained[t]},getSkillValue:function(t){return this.skillHash[t]},hasSkill:function(t){return Object.prototype.hasOwnProperty.call(this.skillHash,t)},setSkill:function(t,e){this.skillHash[t]=e},matchValuesWith:function(t){for(var e=0,n=d.fields(t.skillHash);e<n.length;){var i=n[e];++e;var r=t.skillHash[i];this.skillHash[i]=r}},addSpecialisationTo:function(t,e,n){if(null==n&&(n=0),Object.prototype.hasOwnProperty.call(this.skillHash,t))throw new V("No skill found for:"+t);var i;return i=t+" ("+e+")",this.skillHash[i]=0!=n?n:this.skillHash[t],i},removeSkill:function(t){return d.deleteField(this.skillHash,t)},getSubjects:function(){for(var t=[],e=0,n=d.fields(this.skillHash);e<n.length;){var i=n[e];++e;var r=Wn.getSplitFromSpecialisation(i);null!=r&&t.push(r[1])}return t},__class__:Fn};var On=function(t,e,n){this.wealthIndex=0,this.classIndex=0,this.name=t,this.money=e,this.wealth=n};n["troshx.sos.core.SocialClass"]=On,On.__name__=["troshx","sos","core","SocialClass"],On.prototype={__class__:On};var Hn=function(){this.level=0,this.name=""};n["troshx.sos.core.Talent"]=Hn,Hn.__name__=["troshx","sos","core","Talent"],Hn.__interfaces__=[tt],Hn.prototype={get_uid:function(){return this.name+"_"+this.level},get_label:function(){return this.name+(this.level>=1?"("+this.level+")":"")},__class__:Hn};var Vn=function(){this.description="",this.weightsTotal=0};n["troshx.sos.core.TargetZone"]=Vn,Vn.__name__=["troshx","sos","core","TargetZone"],Vn.create=function(t,e,n,i,r){null==r&&(r=""),null==i&&(i=0);var s=new Vn;return s.name=t,s.parts=n,s.partWeights=e,s.description=r,s.weightsTotal=i,0==i&&s.recalcWeightsTotal(),s},Vn.prototype={recalcWeightsTotal:function(){for(var t=0,e=this.partWeights.length;--e>-1;)t+=this.partWeights[e];this.weightsTotal=t},getBodyPart:function(t){t*=this.weightsTotal;for(var e=0,n=0,i=0,r=this.partWeights.length;i<r;){var s=i++;if(t<e)break;e+=this.partWeights[s],n=s}return this.parts[n]},getHitAreaMask:function(){for(var t=0,e=0,n=this.parts.length;e<n;){var i=e++;t|=1<<this.parts[i]}return t},__class__:Vn};var Dn=function(){this.original=null,this.name="",this.melee=null,this.meleeFlags=0};n["troshx.sos.core.WeaponCustomise"]=Dn,Dn.__name__=["troshx","sos","core","WeaponCustomise"],Dn.__interfaces__=[tt],Dn.prototype={addMeleeTagsToStrArr:function(t){var e=this.meleeFlags;if(0!=(1&e)&&t.push("*Custom Hilt"),0!=(2&e)&&t.push("*Ridiculously Sharp"),0!=(4&e)&&t.push("*Exquisite Decoration"),0!=(8&e)&&t.push("*Bizarre Gimmick"),null!=this.melee){var n=this.melee;0!=n.customGrip&&t.push("*Custom Grip "+n.customGrip),0!=n.fineForging&&t.push("*Fine Forging "+n.fineForging),0!=n.integratedPistol&&t.push("*Integrated Pistol "+n.integratedPistol)}},hasBizarreGimmick:function(){return 0!=(8&this.meleeFlags)},hasExquisiteDecoration:function(){return 0!=(4&this.meleeFlags)},isRidiculouslySharp:function(){return 0!=(2&this.meleeFlags)},get_uid:function(){return"_"+this.name+"_"+this.meleeFlags+(null!=this.melee?this.melee.getUID(this.meleeFlags):"")},__class__:Dn};var qn=function(){this.exquisiteDecorDesc="",this.bizarreGimmickDesc="",this.sharpened=!0,this.integratedPistol=0,this.fineForging=0,this.customGrip=0};n["troshx.sos.core.CustomMelee"]=qn,qn.__name__=["troshx","sos","core","CustomMelee"],qn.prototype={getUID:function(t){return"_"+this.customGrip+"_"+this.fineForging+"_"+this.integratedPistol},__class__:qn};var jn=function(t,e,n){this.age=0,this.uidSuffix="",this.flags=0,this.BL=0,this.pain=0,this.stun=0,this.leftSide=!1,this.damageType=0,this.level=0,this.locationId=t,this.level=e,this.damageType=n};n["troshx.sos.core.Wound"]=jn,jn.__name__=["troshx","sos","core","Wound"],jn.__interfaces__=[rt],jn.getNewFlagLabels=function(){var t=[];return t.push("Staunched"),t.push("Treated"),t},jn.getFlagLabels=function(){return null!=jn.FLAG_LABELS?jn.FLAG_LABELS:jn.FLAG_LABELS=jn.getNewFlagLabels()},jn.getNewEmptyAssign=function(){var t=new jn("",0,0);return t.notes="",t},jn.prototype={isNullified:function(){return 0==this.stun&&0==this.pain&&0==this.BL},getDescLabel:function(t,e){var n=this.damageType>=0&&this.damageType<e.length?" "+e[this.damageType]:"",i=t.getHitLocationById(this.locationId);return"Level "+this.level+n+" wound"+(""!=this.locationId?" on the "+(null!=i&&i.twoSided?this.leftSide?"Left ":"Right ":"")+t.getHitLocationLabelFromId(this.locationId):"")},updateAgainst:function(t){t.stun>this.stun&&(this.stun=t.stun),t.pain>this.pain&&(this.pain=t.pain),t.BL>this.BL&&(this.BL=t.BL),this.flags&=-4,this.age=0},spliceAgainst:function(t){return this.updateAgainst(t),-1},makeUnique:function(){this.uidSuffix="^"+jn.UNIQUE_COUNT},isTreated:function(){return 0!=(2&this.flags)},gotBloodLost:function(){return 0==(3&this.flags)},getUID:function(t){return this.locationId+"_"+this.level+"_"+this.damageType+(t.gotSideWithId(this.locationId)?this.leftSide?"l":"r":"")+this.uidSuffix},__class__:jn};var Gn=function(){this.totalSuccesses=null,this.rolls=null};n["troshx.sos.events.Challenge"]=Gn,Gn.__name__=["troshx","sos","events","Challenge"],Gn.prototype={isResolved:function(){return null!=this.totalSuccesses},__class__:Gn};var Un=n["troshx.sos.events.SOSEvent"]={__ename__:["troshx","sos","events","SOSEvent"],__constructs__:["FATIQUE_GAIN","MELEE_INITIATIVE_TEST","MISS_TARGET","HIT_TARGET","HIT_TARGET_ARMOR","DAMAGE_TARGET_RESOLVE","WOUND_INFLICT","MELEE_EXCHANGE_RESOLVE","MELEE_BOUT_RESOLVE","CHALLENGE_INIT","CHALLENGE_EXECUTE"]};Un.FATIQUE_GAIN=function(t,e){var n=["FATIQUE_GAIN",0,t,e];return n.__enum__=Un,n.toString=i,n},Un.MELEE_INITIATIVE_TEST=function(t,e){var n=["MELEE_INITIATIVE_TEST",1,t,e];return n.__enum__=Un,n.toString=i,n},Un.MISS_TARGET=function(t,e,n){var r=["MISS_TARGET",2,t,e,n];return r.__enum__=Un,r.toString=i,r},Un.HIT_TARGET=function(t,e,n){var r=["HIT_TARGET",3,t,e,n];return r.__enum__=Un,r.toString=i,r},Un.HIT_TARGET_ARMOR=function(t,e,n,r){var s=["HIT_TARGET_ARMOR",4,t,e,n,r];return s.__enum__=Un,s.toString=i,s},Un.DAMAGE_TARGET_RESOLVE=function(t,e,n,r){var s=["DAMAGE_TARGET_RESOLVE",5,t,e,n,r];return s.__enum__=Un,s.toString=i,s},Un.WOUND_INFLICT=function(t,e){var n=["WOUND_INFLICT",6,t,e];return n.__enum__=Un,n.toString=i,n},Un.MELEE_EXCHANGE_RESOLVE=["MELEE_EXCHANGE_RESOLVE",7],Un.MELEE_EXCHANGE_RESOLVE.toString=i,Un.MELEE_EXCHANGE_RESOLVE.__enum__=Un,Un.MELEE_BOUT_RESOLVE=["MELEE_BOUT_RESOLVE",8],Un.MELEE_BOUT_RESOLVE.toString=i,Un.MELEE_BOUT_RESOLVE.__enum__=Un,Un.CHALLENGE_INIT=function(t,e,n){var r=["CHALLENGE_INIT",9,t,e,n];return r.__enum__=Un,r.toString=i,r},Un.CHALLENGE_EXECUTE=function(t,e,n,r){var s=["CHALLENGE_EXECUTE",10,t,e,n,r];return s.__enum__=Un,s.toString=i,s};var $n=function(){};n["troshx.sos.macro.MacroUtil"]=$n,$n.__name__=["troshx","sos","macro","MacroUtil"];var zn=function(){};n["troshx.sos.races.Races"]=zn,zn.__name__=["troshx","sos","races","Races"],zn.getTiers=function(){return null!=zn.TIERS?zn.TIERS:zn.TIERS=zn.getNewTiers()},zn.getNewTiers=function(){return[[new Zn,new Qn],[new Yn,new Kn],[new Xn,new Jn],[new ti],[new ei,new ni,new ii,new ri]]};var Zn=function(){Pn.call(this,"Human")};n["troshx.sos.races.Human"]=Zn,Zn.__name__=["troshx","sos","races","Human"],Zn.__super__=Pn,Zn.prototype=r(Pn.prototype,{__class__:Zn});var Qn=function(){Pn.call(this,"Goblin");var t=Ln.create(0,"Goblin",-1);this.staticModifiers=t,t=(t=(t=(t=t.next=Ln.create(1,"Goblin",1)).next=Ln.create(7,"Goblin",1)).next=Ln.create(9,"Small",-2)).next=Ln.create(14,"Small",-2)};n["troshx.sos.races.Goblin"]=Qn,Qn.__name__=["troshx","sos","races","Goblin"],Qn.__super__=Pn,Qn.prototype=r(Pn.prototype,{__class__:Qn});var Yn=function(){Pn.call(this,"Dwarf");var t=Ln.create(2,"Dwarf",2);this.staticModifiers=t,t=(t=(t=(t=t.next=Ln.create(3,"Dwarf",1)).next=Ln.create(14,"Short and Stout",-1)).next=Ln.create(9,"Short and Stout",-2)).next=Ln.create(12,"Sturdy Build",1)};n["troshx.sos.races.Dwarf"]=Yn,Yn.__name__=["troshx","sos","races","Dwarf"],Yn.__super__=Pn,Yn.prototype=r(Pn.prototype,{__class__:Yn});var Kn=function(){Pn.call(this,"Zell");var t=Ln.create(1,"Zell",1);this.staticModifiers=t,t=t.next=Ln.create(7,"Zell",2)};n["troshx.sos.races.Zell"]=Kn,Kn.__name__=["troshx","sos","races","Zell"],Kn.__super__=Pn,Kn.prototype=r(Pn.prototype,{__class__:Kn});var Xn=function(){Pn.call(this,"Burdinadin");var t=Ln.create(6,"Burdinadin",1);this.staticModifiers=t,t=t.next=Ln.create(1,"Burdinadin",1)};n["troshx.sos.races.Burdinadin"]=Xn,Xn.__name__=["troshx","sos","races","Burdinadin"],Xn.__super__=Pn,Xn.prototype=r(Pn.prototype,{__class__:Xn});var Jn=function(){Pn.call(this,"Ohanedin");var t=Ln.create(0,"Ohanedin",1);this.staticModifiers=t,t=(t=t.next=Ln.create(1,"Ohanedin",1)).next=Ln.create(7,"Ohanedin",1)};n["troshx.sos.races.Ohanedin"]=Jn,Jn.__name__=["troshx","sos","races","Ohanedin"],Jn.__super__=Pn,Jn.prototype=r(Pn.prototype,{__class__:Jn});var ti=function(){Pn.call(this,"Orredin"),this.magic=!0};n["troshx.sos.races.Orredin"]=ti,ti.__name__=["troshx","sos","races","Orredin"],ti.__super__=Pn,ti.prototype=r(Pn.prototype,{__class__:ti});var ei=function(){Pn.call(this,"Star Vampire"),this.magic=!0};n["troshx.sos.races.StarVampire"]=ei,ei.__name__=["troshx","sos","races","StarVampire"],ei.__super__=Pn,ei.prototype=r(Pn.prototype,{__class__:ei});var ni=function(){Pn.call(this,"Saturi Chosen")};n["troshx.sos.races.SaturiChosen"]=ni,ni.__name__=["troshx","sos","races","SaturiChosen"],ni.__super__=Pn,ni.prototype=r(Pn.prototype,{__class__:ni});var ii=function(){Pn.call(this,"Genosian Paladin")};n["troshx.sos.races.GenosianPaladin"]=ii,ii.__name__=["troshx","sos","races","GenosianPaladin"],ii.__super__=Pn,ii.prototype=r(Pn.prototype,{__class__:ii});var ri=function(){Pn.call(this,"Dessian Silver Guard")};n["troshx.sos.races.DessianSilverGuard"]=ri,ri.__name__=["troshx","sos","races","DessianSilverGuard"],ri.__super__=Pn,ri.prototype=r(Pn.prototype,{__class__:ri});var si=function(){Rn.call(this,"Esoteric School",4,8)};n["troshx.sos.schools.EsotericSchool"]=si,si.__name__=["troshx","sos","schools","EsotericSchool"],si.__super__=Rn,si.prototype=r(Rn.prototype,{customRequire:function(t){var e=null!=si.TEST?si.TEST:si.TEST=new It,n=d.field(t.banes.hash,e.name);return null==n||0==n.rank},getSchoolBonuses:function(t){return new ai},__class__:si});var ai=function(){this.__hasUIFields__=!0,this.flags=3,Bn.call(this)};n["troshx.sos.schools.EsotericSchoolBonuses"]=ai,ai.__name__=["troshx","sos","schools","EsotericSchoolBonuses"],ai.__super__=Bn,ai.prototype=r(Bn.prototype,{getTags:function(){var t=[],e=this.flags;return 0!=(1&e)&&t.push("Simplicity"),0!=(2&e)&&t.push("Flowing Water"),0!=(4&e)&&t.push("Raging Flame"),0!=(8&e)&&t.push("Biting Wind"),0!=(16&e)&&t.push("Stoic Earth"),t},getUIFields:function(){return[{prop:"flags",type:"SingleSelection",label:"Choose Benefit(s)",labels:["Simplicity, Flowing Water","Raging Flame","Biting Wind","Stoic Earth"],values:[3,4,8,16]}]},__class__:ai});var oi=function(){Rn.call(this,"Noble",3,5),this.costMoney=Sn.create(15,0,0)};n["troshx.sos.schools.Noble"]=oi,oi.__name__=["troshx","sos","schools","Noble"],oi.__super__=Rn,oi.prototype=r(Rn.prototype,{getSchoolBonuses:function(t){return new li},__class__:oi});var li=function(){Bn.call(this)};n["troshx.sos.schools.NobleBonuses"]=li,li.__name__=["troshx","sos","schools","NobleBonuses"],li.__super__=Bn,li.prototype=r(Bn.prototype,{getTags:function(){return["Superior Instruction","Confidence"]},getUIFields:function(){return[]},__class__:li});var ui=function(){Rn.call(this,"Officer",4,3),this.costMoney=Sn.create(5,0,0)};n["troshx.sos.schools.Officer"]=ui,ui.__name__=["troshx","sos","schools","Officer"],ui.__super__=Rn,ui.prototype=r(Rn.prototype,{getSchoolBonuses:function(t){return new ci},__class__:ui});var ci=function(){this.__hasUIFields__=!0,this.choice2="Protect the Banner!",Bn.call(this)};n["troshx.sos.schools.OfficerBonuses"]=ci,ci.__name__=["troshx","sos","schools","OfficerBonuses"],ci.__super__=Bn,ci.prototype=r(Bn.prototype,{getTags:function(){return["By Example!",this.choice2]},getUIFields:function(){return[{prop:"choice2",type:"SingleSelectionStr",label:"Choose Benefit #2",labels:["Protect the Banner!","Ride to Ruin!"]}]},__class__:ci});var hi=function(){};n["troshx.sos.schools.Schools"]=hi,hi.__name__=["troshx","sos","schools","Schools"],hi.getList=function(){return null!=hi.LIST?hi.LIST:hi.LIST=hi.getNewList()},hi.getNewList=function(){return[new di,new gi,new ui,new oi,new fi,new vi,new si]};var di=function(){Rn.call(this,"Scrapper",4,0)};n["troshx.sos.schools.Scrapper"]=di,di.__name__=["troshx","sos","schools","Scrapper"],di.__super__=Rn,di.prototype=r(Rn.prototype,{getSchoolBonuses:function(t){return new pi},__class__:di});var pi=function(){Bn.call(this)};n["troshx.sos.schools.ScrapperBonuses"]=pi,pi.__name__=["troshx","sos","schools","ScrapperBonuses"],pi.__super__=Bn,pi.prototype=r(Bn.prototype,{getTags:function(){return["Dirty Trick","Grapple"]},getUIFields:function(){return[]},__class__:pi});var gi=function(){Rn.call(this,"Soldier",10,1),this.staticModifiers=Ln.create(20,"Warrior's Grit",2)};n["troshx.sos.schools.Soldier"]=gi,gi.__name__=["troshx","sos","schools","Soldier"],gi.__super__=Rn,gi.prototype=r(Rn.prototype,{getSchoolBonuses:function(t){return new mi},__class__:gi});var mi=function(){Bn.call(this)};n["troshx.sos.schools.SoldierBonuses"]=mi,mi.__name__=["troshx","sos","schools","SoldierBonuses"],mi.__super__=Bn,mi.prototype=r(Bn.prototype,{getTags:function(){return["Discipline","Warrior's Grit"]},getUIFields:function(){return[]},__class__:mi});var fi=function(){Rn.call(this,"Traditional Fencer",4,5),this.costMoney=Sn.create(10,0,0)};n["troshx.sos.schools.TraditionalFencer"]=fi,fi.__name__=["troshx","sos","schools","TraditionalFencer"],fi.__super__=Rn,fi.prototype=r(Rn.prototype,{getSchoolBonuses:function(t){return new _i},__class__:fi});var _i=function(){Bn.call(this)};n["troshx.sos.schools.TraditionalFencerBonuses"]=_i,_i.__name__=["troshx","sos","schools","TraditionalFencerBonuses"],_i.__super__=Bn,_i.prototype=r(Bn.prototype,{getTags:function(){return["Extreme Repetition","Centered"]},getUIFields:function(){return[]},__class__:_i});var vi=function(){Rn.call(this,"Unorthodox Fencer",6,5),this.costMoney=Sn.create(5,0,0)};n["troshx.sos.schools.UnorthodoxFencer"]=vi,vi.__name__=["troshx","sos","schools","UnorthodoxFencer"],vi.__super__=Rn,vi.prototype=r(Rn.prototype,{getSchoolBonuses:function(t){return new bi},__class__:vi});var bi=function(){Bn.call(this)};n["troshx.sos.schools.UnorthodoxFencerBonuses"]=bi,bi.__name__=["troshx","sos","schools","UnorthodoxFencerBonuses"],bi.__super__=Bn,bi.prototype=r(Bn.prototype,{getTags:function(){return["The Meisterhau","Treachery"]},getUIFields:function(){return[]},__class__:bi});var yi=function(){this.woundHash={},this.wounds=[],this.body=un.getInstance(),this.inventory=new Cn,this.arcFlaw="",this.arcGlory="",this.arcBelief="",this.arcEpic="",this.arcSaga="",this.arcSpent=0,this.arcPointsAccum=0,this.banes=new nt,this.boons=new nt,this.direPast=!1,this.talents=[],this.skills=Fn.getNewEmptySkillTable(Fn.getDefaultSkillTable()),this.wealthAssetAssignCount=0,this.wealthAssets=[],this.socialClass=new On("",new Sn,0),this.money=new Sn,this.situationalModifierTable=Tn.getSituationalModifierSlots(),this.staticModifierTable=Tn.getStaticModifierSlots(),this.ingame=!1,this.fatique=0,this.talentNotes=[],this.masteryManueverNotes=[],this.superiorManueverNotes=[],this.profsCustom=null,this.profsRanged=0,this.profsMelee=0,this.schoolLevel=0,this.schoolBonuses=null,this.school=null,this.gritAccum=0,this.prone=!1,this.healthLoss=0,this.version=2,this.perception=1,this.intelligence=1,this.wit=1,this.willpower=1,this.health=1,this.endurance=1,this.agility=1,this.strength=1,this.age=-1,this.leftHanded=!1,this.gender=0,this.race=null,this.title="",this.notes="",this.faction="",this.nickname="",this.name=""};n["troshx.sos.sheets.CharSheet"]=yi,yi.__name__=["troshx","sos","sheets","CharSheet"],yi.getTotalLiquidity=function(t,e){null==e&&(e=0);for(var n=0!=e?e:t.length,i=0;--n>-1;){var r=t[n];i+=r.liquidate?6*r.worth:0}return i},yi.dynSetField=function(t,e,n){t[e]=n},yi.dynDelField=function(t,e){d.deleteField(t,e)},yi.prototype={get_uid:function(){return(""!=this.title?this.title+" ":"")+this.name+(""!=this.nickname?' "'+this.nickname+'"':"")+(""!=this.faction?" of "+this.faction:"")},set_race:function(t){var e=this.race;if(e!=t){if(null!=e){var n=e.staticModifiers;if(null!=n)for(var i=this.staticModifierTable[n.index],r=(i.splice(i.indexOf(n),1),n.next);null!=r;)(i=this.staticModifierTable[r.index]).splice(i.indexOf(r),1),r=r.next;var s=e.situationalModifiers;if(null!=s)for(var a=this.situationalModifierTable[s.index],o=(a.splice(a.indexOf(s),1),s.next);null!=o;)(a=this.situationalModifierTable[o.index]).splice(a.indexOf(o),1),o=o.next}if(null!=t){var l=t.staticModifiers;if(null!=l){var u=this.staticModifierTable[l.index];u.push(l);for(var c=l.next;null!=c;)(u=this.staticModifierTable[c.index]).push(c),c=c.next}var h=t.situationalModifiers;if(null!=h){var d=this.situationalModifierTable[h.index];d.push(h);for(var p=h.next;null!=p;)(d=this.situationalModifierTable[p.index]).push(p),p=p.next}}this.race=t}return t},get_labelGender:function(){return 0==this.gender?"Male":"Female"},postSerialization:function(){this.postSerialize_2(),this.body=un.getInstance(),this.inventory.postSerialization()},postSerialize_2:function(){return(null==this.version||this.version<2)&&(this.version=2,this.ingame||(this.ingame=!0),null==this.healthLoss&&(this.healthLoss=0),null==this.prone&&(this.prone=!1),!0)},get_STR:function(){return this.clampIntZero(this.getModifiedValue(0,this.strength))},get_AGI:function(){return this.clampIntZero(this.getModifiedValue(1,this.agility))},get_END:function(){return this.clampIntZero(this.getModifiedValue(2,this.endurance))},get_HLT:function(){return Math.floor(this.getModifiedValue(3,this.health))-this.healthLoss},get_WIP:function(){return this.clampIntZero(this.getModifiedValue(4,this.willpower))},get_WIT:function(){return this.clampIntZero(this.getModifiedValue(5,this.wit))},get_INT:function(){return this.clampIntZero(this.getModifiedValue(6,this.intelligence))},get_PER:function(){return this.clampIntZero(this.getModifiedValue(7,this.perception))},set_school:function(t){var e=this.school;if(e!=t){if(null!=e){var n=e.staticModifiers;if(null!=n)for(var i=this.staticModifierTable[n.index],r=(i.splice(i.indexOf(n),1),n.next);null!=r;)(i=this.staticModifierTable[r.index]).splice(i.indexOf(r),1),r=r.next;var s=e.situationalModifiers;if(null!=s)for(var a=this.situationalModifierTable[s.index],o=(a.splice(a.indexOf(s),1),s.next);null!=o;)(a=this.situationalModifierTable[o.index]).splice(a.indexOf(o),1),o=o.next}if(null!=t){var l=t.staticModifiers;if(null!=l){var u=this.staticModifierTable[l.index];u.push(l);for(var c=l.next;null!=c;)(u=this.staticModifierTable[c.index]).push(c),c=c.next}var h=t.situationalModifiers;if(null!=h){var d=this.situationalModifierTable[h.index];d.push(h);for(var p=h.next;null!=p;)(d=this.situationalModifierTable[p.index]).push(p),p=p.next}}this.school=t}return t},set_schoolBonuses:function(t){var e=this.schoolBonuses;if(e!=t){if(null!=e){var n=e.situationalModifiers;if(null!=n)for(var i=this.situationalModifierTable[n.index],r=(i.splice(i.indexOf(n),1),n.next);null!=r;)(i=this.situationalModifierTable[r.index]).splice(i.indexOf(r),1),r=r.next}if(null!=t){var s=t.situationalModifiers;if(null!=s){var a=this.situationalModifierTable[s.index];a.push(s);for(var o=s.next;null!=o;)(a=this.situationalModifierTable[o.index]).push(o),o=o.next}}this.schoolBonuses=t}return t},get_assetWorth:function(){for(var t=this.wealthAssets.length,e=0;--t>-1;)e+=this.wealthAssets[t].worth;return e},getAssetsWithWorth:function(t){for(var e=[],n=0,i=this.wealthAssets.length;n<i;){var r=n++,s=this.wealthAssets[r];s.worth==t&&e.push(s)}return e},getEmptyWealthAssetAssign:function(t){var e={name:"",liquidate:!1,uid:this.wealthAssetAssignCount,worth:t};return this.wealthAssetAssignCount++,e},get_assetLiquidateTotal:function(){return yi.getTotalLiquidity(this.wealthAssets)},get_boonsArray:function(){return this.boons.list},addBoon:function(t){this.boons.add(t)},removeBoon:function(t){this.boons.delete(t)},get_banesArray:function(){return this.banes.list},addBane:function(t){this.banes.add(t)},removeBane:function(t){this.banes.delete(t)},mayRemoveBane:function(t){this.banes.contains(t)&&this.banes.delete(t)},boonRankUpdated:function(t,e,n){if(n>0){if(null!=t.boon.staticModifiers&&t.boon.staticModifiers.length>=n){var i=t.boon.staticModifiers[n-1];if(null!=i)for(var r=this.staticModifierTable[i.index],s=(r.splice(r.indexOf(i),1),i.next);null!=s;)(r=this.staticModifierTable[s.index]).splice(r.indexOf(s),1),s=s.next}if(null!=t.boon.situationalModifiers&&t.boon.situationalModifiers.length>=n){var a=t.boon.situationalModifiers[n-1];if(null!=a)for(var o=this.situationalModifierTable[a.index],l=(o.splice(o.indexOf(a),1),a.next);null!=l;)(o=this.situationalModifierTable[l.index]).splice(o.indexOf(l),1),l=l.next}if(null!=t.situationalModifiers&&t.situationalModifiers.length>=n){var u=t.situationalModifiers[n-1];if(null!=u)for(var c=this.situationalModifierTable[u.index],h=(c.splice(c.indexOf(u),1),u.next);null!=h;)(c=this.situationalModifierTable[h.index]).splice(c.indexOf(h),1),h=h.next}}if(e>0){if(null!=t.boon.staticModifiers&&t.boon.staticModifiers.length>=e){var d=t.boon.staticModifiers[e-1];if(null!=d){var p=this.staticModifierTable[d.index];p.push(d);for(var g=d.next;null!=g;)(p=this.staticModifierTable[g.index]).push(g),g=g.next}}if(null!=t.boon.situationalModifiers&&t.boon.situationalModifiers.length>=e){var m=t.boon.situationalModifiers[e-1];if(null!=m){var f=this.situationalModifierTable[m.index];f.push(m);for(var _=m.next;null!=_;)(f=this.situationalModifierTable[_.index]).push(_),_=_.next}}if(null!=t.situationalModifiers&&t.situationalModifiers.length>=e){var v=t.situationalModifiers[e-1];if(null!=v){var b=this.situationalModifierTable[v.index];b.push(v);for(var y=v.next;null!=y;)(b=this.situationalModifierTable[y.index]).push(y),y=y.next}}}},baneRankUpdated:function(t,e,n){if(n>0){if(null!=t.bane.staticModifiers&&t.bane.staticModifiers.length>=n){var i=t.bane.staticModifiers[n-1];if(null!=i)for(var r=this.staticModifierTable[i.index],s=(r.splice(r.indexOf(i),1),i.next);null!=s;)(r=this.staticModifierTable[s.index]).splice(r.indexOf(s),1),s=s.next}if(null!=t.bane.situationalModifiers&&t.bane.situationalModifiers.length>=n){var a=t.bane.situationalModifiers[n-1];if(null!=a)for(var o=this.situationalModifierTable[a.index],l=(o.splice(o.indexOf(a),1),a.next);null!=l;)(o=this.situationalModifierTable[l.index]).splice(o.indexOf(l),1),l=l.next}if(null!=t.situationalModifiers&&t.situationalModifiers.length>=n){var u=t.situationalModifiers[n-1];if(null!=u)for(var c=this.situationalModifierTable[u.index],h=(c.splice(c.indexOf(u),1),u.next);null!=h;)(c=this.situationalModifierTable[h.index]).splice(c.indexOf(h),1),h=h.next}}if(e>0){if(null!=t.bane.staticModifiers&&t.bane.staticModifiers.length>=e){var d=t.bane.staticModifiers[e-1];if(null!=d){var p=this.staticModifierTable[d.index];p.push(d);for(var g=d.next;null!=g;)(p=this.staticModifierTable[g.index]).push(g),g=g.next}}if(null!=t.bane.situationalModifiers&&t.bane.situationalModifiers.length>=e){var m=t.bane.situationalModifiers[e-1];if(null!=m){var f=this.situationalModifierTable[m.index];f.push(m);for(var _=m.next;null!=_;)(f=this.situationalModifierTable[_.index]).push(_),_=_.next}}if(null!=t.situationalModifiers&&t.situationalModifiers.length>=e){var v=t.situationalModifiers[e-1];if(null!=v){var b=this.situationalModifierTable[v.index];b.push(v);for(var y=v.next;null!=y;)(b=this.situationalModifierTable[y.index]).push(y),y=y.next}}}},boonRankCanceledChange:function(t,e,n){this.boonRankUpdated(t,e?0:t.rank,n?0:t.rank)},baneRankCanceledChange:function(t,e,n){this.baneRankUpdated(t,e?0:t.rank,n?0:t.rank)},boonAssignReplaced:function(t,e){if(null!=e.boon.staticModifiers&&e.boon.staticModifiers.length>=e.rank){var n=e.boon.staticModifiers[e.rank-1];if(null!=n)for(var i=this.staticModifierTable[n.index],r=(i.splice(i.indexOf(n),1),n.next);null!=r;)(i=this.staticModifierTable[r.index]).splice(i.indexOf(r),1),r=r.next}if(null!=e.boon.situationalModifiers&&e.boon.situationalModifiers.length>=e.rank){var s=e.boon.situationalModifiers[e.rank-1];if(null!=s)for(var a=this.situationalModifierTable[s.index],o=(a.splice(a.indexOf(s),1),s.next);null!=o;)(a=this.situationalModifierTable[o.index]).splice(a.indexOf(o),1),o=o.next}if(null!=e.situationalModifiers&&e.situationalModifiers.length>=e.rank){var l=e.situationalModifiers[e.rank-1];if(null!=l)for(var u=this.situationalModifierTable[l.index],c=(u.splice(u.indexOf(l),1),l.next);null!=c;)(u=this.situationalModifierTable[c.index]).splice(u.indexOf(c),1),c=c.next}if(null!=t.boon.staticModifiers&&t.boon.staticModifiers.length>=t.rank){var h=t.boon.staticModifiers[t.rank-1];if(null!=h){var d=this.staticModifierTable[h.index];d.push(h);for(var p=h.next;null!=p;)(d=this.staticModifierTable[p.index]).push(p),p=p.next}}if(null!=t.boon.situationalModifiers&&t.boon.situationalModifiers.length>=t.rank){var g=t.boon.situationalModifiers[t.rank-1];if(null!=g){var m=this.situationalModifierTable[g.index];m.push(g);for(var f=g.next;null!=f;)(m=this.situationalModifierTable[f.index]).push(f),f=f.next}}if(null!=t.situationalModifiers&&t.situationalModifiers.length>=t.rank){var _=t.situationalModifiers[t.rank-1];if(null!=_){var v=this.situationalModifierTable[_.index];v.push(_);for(var b=_.next;null!=b;)(v=this.situationalModifierTable[b.index]).push(b),b=b.next}}},removeStaticModifier:function(t){if(null!=t)for(var e=this.staticModifierTable[t.index],n=(e.splice(e.indexOf(t),1),t.next);null!=n;)(e=this.staticModifierTable[n.index]).splice(e.indexOf(n),1),n=n.next},removeSituationalModifier:function(t){if(null!=t)for(var e=this.situationalModifierTable[t.index],n=(e.splice(e.indexOf(t),1),t.next);null!=n;)(e=this.situationalModifierTable[n.index]).splice(e.indexOf(n),1),n=n.next},addStaticModifier:function(t){if(null!=t){var e=this.staticModifierTable[t.index];e.push(t);for(var n=t.next;null!=n;)(e=this.staticModifierTable[n.index]).push(n),n=n.next}},addSituationalModifier:function(t){if(null!=t){var e=this.situationalModifierTable[t.index];e.push(t);for(var n=t.next;null!=n;)(e=this.situationalModifierTable[n.index]).push(n),n=n.next}},getModifiedValue:function(t,e){for(var n=this.staticModifierTable[t],i=e,r=0,s=n.length;r<s;){i*=n[r++].multiply}for(var a=0,o=n.length;a<o;){i+=n[a++].add}for(var l=this.situationalModifierTable[t],u=0,c=l.length;u<c;){i=l[u++].getModifiedValueMultiply(this,e,i)}for(var h=0,d=l.length;h<d;){i=l[h++].getModifiedValueAdd(this,e,i)}return i},get_totalWeight:function(){return this.inventory.calculateTotalWeight()},applyWound:function(t){var e=t.getUID(this.body);Object.prototype.hasOwnProperty.call(this.woundHash,e)?this.woundHash[e].updateAgainst(t):(yi.dynSetField(this.woundHash,e,t),this.wounds.push(t))},hasWound:function(t){var e=t.getUID(this.body);return Object.prototype.hasOwnProperty.call(this.woundHash,e)},getWound:function(t){return this.woundHash[t.getUID(this.body)]},removeWound:function(t){var e=t.getUID(this.body);Object.prototype.hasOwnProperty.call(this.woundHash,e)?yi.dynDelField(this.woundHash,e):console.log("Warning: No wound found to be removed for uid:"+t.getUID(this.body));var n=this.wounds.indexOf(t);n>=0?this.wounds.splice(n,1):console.log("Warning: No wound found to be removed for array index:"+n)},wealthAssetsWorth:function(){for(var t=this.wealthAssets.length,e=0;--t>-1;)e+=this.wealthAssets[t].worth;return e},get_pain:function(){var t=this.get_totalPain()-(this.clampIntZero(this.getModifiedValue(20,this.willpower/2|0))+this.gritAccum|0);return t<0?0:t},get_totalPain:function(){for(var t=0,e=!1,n=0,i=this.wounds.length;n<i;){var r=n++,s=this.wounds[r];t+=0!=(2&s.flags)?Math.floor(.5*s.pain):s.pain,s.pain<0&&(e=!0)}return e?999999999:t},get_totalBloodLost:function(){for(var t=0,e=0,n=this.wounds.length;e<n;){var i=e++,r=this.wounds[i];t+=0==(3&r.flags)?r.BL:0}return t},get_adr:function(){return(this.get_AGI()+this.get_WIT())/2|0},get_mob:function(){return(this.get_STR()+this.get_AGI()+this.get_END())/2|0},get_car:function(){return this.get_STR()+this.get_END()},get_cha:function(){return(this.get_WIP()+this.get_WIT()+this.get_PER())/2|0},get_tou:function(){return 4},get_ADR:function(){return this.clampIntZero(this.getModifiedValue(8,(this.get_AGI()+this.get_WIT())/2|0))},get_MOB:function(){var t=this.get_encumbranceLvlRow();return t.mobMult*this.clampIntZero(this.getModifiedValue(9,(this.get_STR()+this.get_AGI()+this.get_END())/2|0)+t.mob+Si.getTable()[this.get_fatiqueLevel()].mob)},get_CAR:function(){return this.clampIntZero(this.getModifiedValue(10,this.clampIntZero(this.getModifiedValue(16,this.get_STR()+this.get_END()))))},get_CHA:function(){return this.clampIntZero(this.getModifiedValue(11,(this.get_WIP()+this.get_WIT()+this.get_PER())/2|0))},get_startingGrit:function(){return this.clampIntZero(this.getModifiedValue(20,this.willpower/2|0))},get_GRIT:function(){return this.clampIntZero(this.getModifiedValue(20,this.willpower/2|0))+this.gritAccum|0},get_baseGrit:function(){return this.willpower/2|0},clampIntZero:function(t){var e=0|t;return e<0?0:e},hasStaticModifier:function(t){return this.staticModifierTable[t.index].indexOf(t)>=0},hasSituationalCharModifier:function(t){return this.situationalModifierTable[t.index].indexOf(t)>=0},get_TOU:function(){return this.clampIntZero(this.getModifiedValue(12,4))},get_SDB:function(){return this.get_STR()/2|0},get_labelRace:function(){return null!=this.race?this.race.name:"Unspecified"},get_labelSchool:function(){return null!=this.school?this.school.name:""},get_labelSocialClass:function(){return null!=this.socialClass?this.socialClass.name:""},get_baseCP:function(){return(this.schoolLevel>=1?this.schoolLevel+4:0)+this.clampIntZero(this.getModifiedValue(8,(this.get_AGI()+this.get_WIT())/2|0))},get_CP:function(){var t=this.get_encumbranceLvlRow();return t.cpMult*this.clampIntZero(this.getModifiedValue(13,(this.schoolLevel>=1?this.schoolLevel+4:0)+this.clampIntZero(this.getModifiedValue(8,(this.get_AGI()+this.get_WIT())/2|0)))*(this.prone?.5:1)+t.cp+Si.getTable()[this.get_fatiqueLevel()].cp)},get_meleeCP:function(){var t=this.get_encumbranceLvlRow();return t.cpMult*this.clampIntZero(this.getModifiedValue(13,(this.schoolLevel>=1?this.schoolLevel+4:0)+this.clampIntZero(this.getModifiedValue(8,(this.get_AGI()+this.get_WIT())/2|0)))*(this.prone?.5:1)+t.cp+Si.getTable()[this.get_fatiqueLevel()].cp)-this.get_pain()},get_schoolCP:function(){return this.schoolLevel>=1?this.schoolLevel+4:0},get_arcPointsAvailable:function(){var t=this.arcPointsAccum-this.arcSpent;return t>=0?t:0},get_skillPenalty:function(){return this.get_encumbranceLvlRow().skill+Si.getTable()[this.get_fatiqueLevel()].skill},get_recoveryRate:function(){return this.clampIntZero(this.get_encumbranceLvlRow().recovery)},get_encumbranceLvlRow:function(){var t=wi.getTable();return t[Math.floor(this.inventory.calculateTotalWeight()/this.clampIntZero(this.getModifiedValue(10,this.clampIntZero(this.getModifiedValue(16,this.get_STR()+this.get_END())))))>=t.length?t.length-1:Math.floor(this.inventory.calculateTotalWeight()/this.clampIntZero(this.getModifiedValue(10,this.clampIntZero(this.getModifiedValue(16,this.get_STR()+this.get_END())))))<0?0:Math.floor(this.inventory.calculateTotalWeight()/this.clampIntZero(this.getModifiedValue(10,this.clampIntZero(this.getModifiedValue(16,this.get_STR()+this.get_END())))))]},get_encumbranceLvl:function(){return Math.floor(this.inventory.calculateTotalWeight()/this.clampIntZero(this.getModifiedValue(10,this.clampIntZero(this.getModifiedValue(16,this.get_STR()+this.get_END())))))},get_encumberedBeyond:function(){return Math.floor(this.inventory.calculateTotalWeight()/this.clampIntZero(this.getModifiedValue(10,this.clampIntZero(this.getModifiedValue(16,this.get_STR()+this.get_END())))))>=5},get_exhaustionRate:function(){return this.get_encumbranceLvlRow().exhaustion},get_fatiqueLevel:function(){var t=this.get_HLT();return t=t<0?0:t,Si.getFatiqueLevel(this.fatique,t)},get_fatiqueSkillPenalty:function(){return Si.getTable()[this.get_fatiqueLevel()].skill},get_fatiqueMobPenalty:function(){return Si.getTable()[this.get_fatiqueLevel()].mob},get_fatiqueCPPenalty:function(){return Si.getTable()[this.get_fatiqueLevel()].cp},__class__:yi};var wi=function(){};n["troshx.sos.sheets.EncumbranceTable"]=wi,wi.__name__=["troshx","sos","sheets","EncumbranceTable"],wi.getTable=function(){return null!=wi.TABLE?wi.TABLE:wi.TABLE=wi.getNewTable()},wi.getNewTable=function(){return[{name:"Unencumbered",cp:0,mob:0,skill:0,exhaustion:1,recovery:1,cpMult:1,mobMult:1},{name:"Light",cp:-1,mob:-2,skill:1,exhaustion:1.5,recovery:1,cpMult:1,mobMult:1},{name:"Medium",cp:-2,mob:-4,skill:2,exhaustion:2,recovery:.5,cpMult:1,mobMult:1},{name:"Heavy",cp:-3,mob:-6,skill:3,exhaustion:3,recovery:.25,cpMult:1,mobMult:1},{name:"Overloaded",cp:-4,mob:-8,skill:4,exhaustion:3.5,recovery:0,cpMult:1,mobMult:1},{name:"Beyond Overloaded!",cp:-4,mob:-8,skill:4,exhaustion:3.5,recovery:0,cpMult:0,mobMult:0}]};var Si=function(){};n["troshx.sos.sheets.FatiqueTable"]=Si,Si.__name__=["troshx","sos","sheets","FatiqueTable"],Si.getTable=function(){return null!=Si.TABLE?Si.TABLE:Si.TABLE=Si.getNewTable()},Si.getFatiqueLevel=function(t,e){var n=Math.ceil((t-5-e)/5);return n>=0?n<5?n:4:0},Si.getNewTable=function(){return[{name:"Fresh",cp:0,mob:0,skill:0},{name:"Winded",cp:-1,mob:-1,skill:-1},{name:"Tired",cp:-2,mob:-2,skill:-2},{name:"Very Tired",cp:-4,mob:-4,skill:-4},{name:"Exhausted",cp:-6,mob:-6,skill:-6}]};var Ci=function(){B.call(this),this.mixins=[Ii.getSampleInstance(),new Li(null)]};n["troshx.sos.vue.CharGen"]=Ci,Ci.__name__=["troshx","sos","vue","CharGen"],Ci.__super__=B,Ci.prototype=r(B.prototype,{Data:function(){return new Xe},Created:function(){this.$data.privateInit(),yi.dynSetField=Vue.set,yi.dynDeleteField=Vue.delete,Xe.dynSetField=Vue.set,Xe.dynDeleteField=Vue.delete,Xe.dynSetArray=Vue.set},setInventory:function(t){this.char.inventory=t},watch_maxBoonsSpendableLeft:function(t){for(var e=this.boonsArray,n=e.length;--n>-1;){e[n]._remainingCached=t}},watch_raceTier:function(t){if(this.selectedTierIndex>=t){var e=this.$data;e.selectedTierIndex=0,e.char.set_race(e.raceTierTable[0][0])}},watch_socialEitherMaxIndex:function(t){this.$data.constraintSocialWealth()},watch_wealthEitherMaxIndex:function(t){this.$data.constraintSocialWealth()},watch_syncSocialWealth:function(t){this.$data.constraintSocialWealth()},watch_socialClassIndex:function(t,e){this.$data.updateSocialToCharsheet()},watch_wealthIndex:function(t){this.$data.updateMoneyToCharsheet()},watch_socialBenefit1:function(t,e){this.$data.updateSocialBenefitsToBoon(t,e)},watch_socialBenefit2:function(t,e){this.$data.updateSocialBenefitsToBoon(t,e)},watch_socialBenefit3:function(t,e){this.$data.updateSocialBenefitsToBoon(t,e)},schoolSelectChangeHandler:function(t){var e=p.parseInt(t.value);if(e>=0){var n=this.schoolAssignList[e];this.$data.selectSchoolAssign(n)}else this.$data.selectSchoolAssign(null)},watch_validAffordCurrentSchool:function(t,e){if(!t){var n=this.schoolAssignList[0];this.$data.selectSchoolAssign(n)}},get_totalDraftedProfSlots:function(){return this.profCoreListRanged.length+this.profCoreListMelee.length},get_maxBuyableProfSlots:function(){var t=this.ProfPoints-this.schoolArcCost-this.levelsExpenditure,e=this.profArcCost;return t=e>0?t/e|0:this.totalAvailProfSlots,null!=this.char.school?t:0},get_excessDraftedSlots:function(){return this.totalDraftedProfSlots-this.maxBuyableProfSlots},watch_excessDraftedSlots:function(t,e){if(!(t<1)){for(var n=this.profCoreListRanged,i=[],r=0,s=n.length;r<s;){var a=r++;t>0&&0==n[a]?--t:i.push(n[a])}if(this.profCoreListRanged=i,!(t<1)){i=[];for(var o=0,l=(n=this.profCoreListMelee).length;o<l;){var u=o++;t>0&&0==n[u]?--t:i.push(n[u])}if(this.profCoreListMelee=i,!(t<1))for(n=this.profCoreListRanged;--t>=0&&n.length>0;)n.pop()}}},get_validAffordCurrentSchool:function(){return!this.hasSchool||!!this.char.school.canAffordWith(this.ProfPoints,this.moneyAvailable)&&this.char.school.customRequire(this.char)},get_notBankrupt:function(){return this.moneyLeft.cp>=0},isValidAll:function(t){var e;""==this.char.name&&t.push("Please enter a Character name!");var n=this.promptSettleRaceTier;n&&t.push("Race: Please Finalise Race tier by clicking on the button!");var i=this.promptSettleSocialTier;i&&t.push("Social Class: Please Finalise Social class tier by clicking on the button!");var r,s=(e=this.categoriesRemainingAssignable)>=0;null!=t&&(s&&e>0&&t.push("Categories: You still have PCP to spend on categories."),s||t.push("Categories: You are at a deficit of Character PCP usage!")),r=(e=this.remainingAttributePoints)>=0&&!this.negativeOrZeroStat,null!=t&&(r&&e>0&&t.push("Attributes: You still have Attribute points to spend."),r||(this.negativeOrZeroStat&&t.push("Attributes: You aren't allowed to checkout with zero or negative core stat!"),e<0&&t.push("Attributes: You are at a deficit of Attribute points!")));var a=(e=this.totalBnBScore)>=0;null!=t&&(a&&e>0&&t.push("Boons & Banes: You still have B&B points to spend."),a||t.push("Boons & Banes: You still have a deficit of B&B points!"));var o=this.notBankrupt;null!=t&&(o||t.push("Inventory: You have negative cash value!"));var l,u=(e=this.totalSkillPointsLeft)>=0;return null!=t&&(u&&e>0&&t.push("Skills: You still have skill points left to spend."),u||t.push("Skills: You are at a deficit of skill points!")),l=(e=this.profPointsLeft)>=0&&(0==this.ProfPoints||null!=this.char.school),null!=t&&(l&&(this.stillHaveProfSpend&&t.push("School: You can still spend profeciency points on school/school-levels."),this.profCoreListMelee.length<this.maxMeleeProfSlots&&t.push("Profeciencies: You still have have melee profeciency slots to use."),this.profCoreListRanged.length<this.maxRangedProfSlots&&t.push("Profeciencies: You still have have ranged profeciency slots to use.")),l||(e<0&&t.push("School & Profeciencies: You are at a deficit of Prof points!"),this.ProfPoints>0&&null==this.char.school&&t.push("School: You must select at least a school (eg. Scrapper) if you have at least 1 Prof point!"))),this.warningMsgs=t,!(!(""!=this.char.name&&s&&r&&a&&o&&u&&l)||n)&&!i},get_stillHaveProfSpend:function(){var t=this.profPointsLeft>0,e=this.$data.canStillSpendSchool(this.profPointsLeft);return!!t&&e},saveFinaliseAll:function(t){null==t&&(t=!1);var e=t?null:[];if(this.isValidAll(e)){if(null!=e&&e.length>0)return void this.$refs.finaliseWarning.open();this.$data.saveFinaliseCleanupChar(this.moneyLeft),this.char.ingame=!0;var n=this.saveCharToBox();null!=this.finaliseSaveCallback&&this.finaliseSaveCallback(n)}else null!=e&&e.length>0&&this.$refs.finaliseError.open()},saveCharToBox:function(){var t=new y;t.useCache=!0,t.serialize(this.char);var e=t.toString();return this.savedCharContents=e,e},executeCopyContents:function(){var t=this.$refs.savedTextArea;if(new s("/ipad|ipod|iphone","i").match(window.navigator.userAgent)){var e=t,n=e.contentEditable,i=e.readOnly;e.contentEditable="true",e.readOnly=!1;var r=window.document.createRange();r.selectNodeContents(e);var a=window.getSelection();a.removeAllRanges(),a.addRange(r),e.setSelectionRange(0,9999999),e.contentEditable=n,e.readOnly=i}else t.select();if(null!=window.document.execCommand("copy")){var o=this.$refs.copyNotify;o.style.display="inline-block",w.delay(function(){o.style.display="none"},3e3)}else q.alert("Sorry, failed to copy to clipboard!")},confirmFinaliseAll:function(){this.saveFinaliseAll(!0)},get_moneyLeft:function(){null==this.tempMoneyLeft&&(this.tempMoneyLeft=new Sn);var t=null!=this.char.school&&null!=this.char.school.costMoney?this.char.school.costMoney:Sn.ZERO;return this.tempMoneyLeft.matchWith(this.socialClassList[this.wealthIndex].socialClass.money).addValues(this.liquidity,0,0).subtractAgainst(t).subtractAgainst(this.inventoryCost).addValues(0,0,this.startingMoneyBonusCP).subtractValues(0,0,this.startingMoneyPenaltyCP)},get_moneyLeftStr:function(){return this.moneyLeft.changeToHighest().getLabel()},get_liquidity:function(){var t=this.$data,e=t.wealthAssets.length,n=t.get_maxWealthAssets(),i=e>=n?n:e;return yi.getTotalLiquidity(this.wealthAssets,i)},get_liquidityStr:function(){return Sn.getLabelWith(this.liquidity,0,0)},get_startingMoneyModifiedCP:function(){var t=null!=Ci.STARTING_MONEY_MOD?Ci.STARTING_MONEY_MOD:Ci.STARTING_MONEY_MOD=new Sn;t.sp=0,t.cp=0,t.gp=0;var e=this.moneyAvailable,n=240*e.gp+12*e.sp+e.cp,i=this.moneyAvailable;return(0|this.char.getModifiedValue(19,240*i.gp+12*i.sp+i.cp))-n},get_startingMoneyBonusCP:function(){return this.startingMoneyModifiedCP>0?this.startingMoneyModifiedCP:0},get_startingMoneyPenaltyCP:function(){return this.startingMoneyModifiedCP<0?-this.startingMoneyModifiedCP:0},get_inventoryCost:function(){return this.char.inventory.calculateTotalCost(!0)},get_moneyAvailable:function(){return this.socialClassList[this.wealthIndex].socialClass.money},get_moneyAvailableStr:function(){return this.moneyAvailable.getLabel()},get_checkoutBonuses:function(){return 0!=this.startingMoneyBonusCP?Sn.TEMP.matchWith(Sn.ZERO).matchWithValues(0,0,this.startingMoneyBonusCP).changeToHighest().getLabel():"0"},get_checkoutPenalties:function(){return 0!=this.startingMoneyPenaltyCP?Sn.TEMP.matchWith(Sn.ZERO).matchWithValues(0,0,this.startingMoneyPenaltyCP).changeToHighest().getLabel():"0"},get_checkoutSchool:function(){return null!=this.char.school&&null!=this.char.school.costMoney?this.char.school.costMoney.getLabel():"0"},get_checkoutInventory:function(){return this.inventoryCost.getLabel()},exitInventory:function(){var t=this;this.insideInventory=!1,Vue.nextTick(function(){var e=t.$refs.checkoutHeader;window.scroll({top:e.offsetTop})})},proceedToInventory:function(){var t=this;this.insideInventory=!0,Vue.nextTick(function(){var e=t.$refs.inventoryHolder;window.scroll({top:e.offsetTop})})},Components:function(){var t={};return t.CategoryPCPInput=new Qi,t.AttributeInput=new zi,t.SchoolLevelInput=new Ki,t.BoonBaneInput=new Zi,t["bb-apply"]=new wr,t.SchoolSheetDetails=new kr,t.SkillPacketInput=new Ji,t.SkillLibInput=new Xi,t.SkillSubjectCreator=new Lr,t.InputNameLabel=new Yi,t.ModifierList=new Ir,t.ArrayOf=new er,t.ArrayOfBits=new nr,t.inventory=new Ti,t},Template:function(){return'<div class="chargen" :class="{\'in-inventory\':insideInventory}">\r\n\t<h1>Song of Swords: Character Creation</h1>\r\n\t\r\n\t<div class="chargen__body" v-if="!insideInventory && !char.ingame">\r\n\t\t\r\n\t<sweet-modal ref="modifiersWindow" class="reset reset-tabs">\r\n\t\t<sweet-modal-tab :title="getModifierTabTitle(li)" :key="li" :id="li" v-for="(li, i) in modifierVars">\r\n\t\t\t<ul>\r\n\t\t\t\t<li v-for="(m, mi) in char.staticModifierTable[dynModifiers[li]]" :key="mi">{{ m.name }}: x{{m.multiply}}+{{m.add}}</li>\r\n\t\t\t\t<li v-for="(m, mi) in char.situationalModifierTable[dynModifiers[li]]" :key="\'s\'+mi">{{ m.name }}()</li>\r\n\t\t\t</ul>\r\n\t\t</sweet-modal-tab>\r\n\t</sweet-modal>\r\n\t\t\r\n\t\t<section class="gen-general" id="gen-general">\r\n\t\t\t<div><label>Name:<InputNameLabel :obj="char" prop="name"></InputNameLabel></label></div>\r\n\t\t\t<div><label>Title <i>(optional)</i>:<InputNameLabel :obj="char" prop="title"></InputNameLabel></label></div>\r\n\t\t\t<div><label>Nickname <i>(optional)</i>:<InputNameLabel :obj="char" prop="nickname"></InputNameLabel></label></div>\r\n\t\t\t<div><label>Faction/Assosiation <i>(optional)</i>:<InputNameLabel :obj="char" prop="faction"></InputNameLabel></label></div>\r\n\t\t\t<div><label>Gender:</label><select number v-model.number="char.gender"><option :value="0">Male</option><option :value="1">Female</option></select></div>\r\n\t\t\t<div><label>Left-handed?:<input type="checkbox" v-model="char.leftHanded"></input></label></div>\r\n\t\t\t<br/>\r\n\t\t\t<b>{{addressedAs}}</b>\r\n\t\t</section>\r\n\t\t\r\n\t\t<section class="gen-campaign-type">\r\n\t\t\t<h2>Campaign Power</h2>\r\n\t\t\t<div v-for="(li, i) in campaignPowerLevels">\r\n\t\t\t\t<label><input type="radio" name="campaign-power" v-on:click="campaignPowLevelIndex=i" :checked="campaignPowLevelIndex == i">{{li.name}} (<span class="num">{{li.pcp}}</span> PCP Total) (Max <span class="num">{{li.maxCategoryPCP}}</span> PCP per category) </input></label>\r\n\t\t\t</div>\r\n\t\t</section>\r\n\t\t\t\t\r\n\t\t<section class="gen-categories">\r\n\t\t\t<h2>Categories <span class="valuer" :class="{\'still-have\':categoriesRemainingAssignable>0}">({{ categoriesRemainingAssignable }} remaining PCP)</span> <span class="valid" v-show="categoriesRemainingAssignable==0" style="color:green">Ok!</span></h2>\r\n\t\t\t<div v-for="(li, i) in categories"><label>{{li.name}}: </label><CategoryPCPInput :obj="li" prop="pcp" :magic="li.magic" :remainingAssignable="categoriesRemainingAssignable" :maxPCPPerCategory="campaignPowLevel.maxCategoryPCP" />PCP &nbsp;&nbsp;|{{campaignPowLevel.maxCategoryPCP}}</div>\r\n\t\t</section>\r\n\t\t\t\r\n\t\t\t\r\n\t\t<hr/>\r\n\t\t\t\r\n\t\t\t\r\n\t\t\x3c!-- for each category --\x3e\r\n\t\t<section class="gen-race" id="gen-race">\r\n\t\t\t<h2>Race <span class="valuer">(Tier {{raceTier}}) </span> <span class="valid" v-show="!promptSettleRaceTier" style="color:green">Ready.</span></h2>\r\n\t\t\t<div class="gen-col">\r\n\t\t\t\t<div v-for="(tier, ti) in raceTierTable" :key="ti">\r\n\t\t\t\t\t<span class="index-num">{{ ti + 1 }}:</span> ({{pcpForTiers[ti]}} PCP)\r\n\t\t\t\t\t<label :class="{disabled:ti>=raceTier}" v-for="(race, ri) in tier"><input type="radio" :disabled="ti>=raceTier" name="race" :checked="race.name == selectedRaceName" v-on:click="selectRaceAt(ti, ri)" :key="ri"></input>{{ race.name }}</label>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div v-show="promptSettleRaceTier"><button style="margin-top:10px"  v-on:click="settleRaceTier()">Finalise Race/Tier!</button> <span class="invalid" style="color:red">&lt;&lt; Click this to confirm.</span>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</section>\r\n\t\t\t\r\n\t\t<hr/>\r\n\t\t\t\t\r\n\t\t\t\r\n\t\t<section class="gen-social-class"  id="gen-social-class">\r\n\t\t\t<h2>Social Class/Wealth <span class="valuer">({{categorySocialClassWealth.pcp}} PCP assigned)</span></h2>\r\n\t\t\t<div class="gen-col">\r\n\t\t\t\t<div class="socialclass-li">\r\n\t\t\t\t\t<span class="index-num"></span><span class="col-social-class" style="text-align:right;">Sync Wealth?</span><span class="col-wealth"><input type="checkbox" v-model="syncSocialWealth"></input><label v-show="!syncSocialWealth">&#128275;</label><label v-show="syncSocialWealth">&#128274;</label> <label>{{ socialClassIndex == wealthIndex ? "==" :  "!="}}</label></span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div v-for="(li, i) in socialClassList" class="socialclass-li">\r\n\t\t\t\t\t<span class="index-num">{{i+1}}:</span> <label class="col-social-class" :class="{disabled:socialEitherMaxIndex<i}"><input type="radio" v-on:click="setSocialClassIndex(i)" name="social-class" :checked="socialClassIndex==i"></input>{{ li.socialClass.name }}</label> <label class="col-wealth" :class="{disabled:wealthEitherMaxIndex<i}"><input type="radio" v-on:click="setWealthIndex(i)" name="wealth" :disabled="syncSocialWealth" :checked="wealthIndex==i"></input>{{ li.socialClass.money.getLabel() }}{{ li.socialClass.wealth!= 0 ? ", ["+li.socialClass.wealth+"W]" : "" }}</label>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class="gen-col">\r\n\t\t\t\t<div v-show="wealthIndex != socialClassIndex" class="custom-label"><label>Custom Label: <input type="text" :placeholder="socialClassPlaceHolderName" v-model="char.socialClass.name"></input></label></div>\r\n\t\t\t\t<div class="social-benefits">\r\n\t\t\t\t\t<div class="social-benefit"><label>Social Benefit #1: </label><select  v-on:change="socialBenefitSelectChangeHandler(1, $event.target.selectedIndex)"><option v-for="(li,i) in socialBenefitChoices" :disabled="socialBenefit2.name===li.name || (curSelectedSocialClass.maxBoons >= 3 && socialBenefit3.name===li.name)" :selected="li===socialBenefit1" :key="li.label">{{ li.label }}</option></select></div>\r\n\t\t\t\t\t<div class="social-benefit"  v-show="curSelectedSocialClass.maxBoons>= 2"><label>Social Benefit #2: </label><select v-on:change="socialBenefitSelectChangeHandler(2, $event.target.selectedIndex)" :disabled="curSelectedSocialClass.maxBoons<2"><option v-for="(li,i) in socialBenefitChoices" :disabled="socialBenefit1.name===li.name || (curSelectedSocialClass.maxBoons>=3 && socialBenefit3.name===li.name)" :selected="li===socialBenefit2" :key="li.label">{{ li.label }}</option></select></div>\r\n\t\t\t\t\t<div class="social-benefit"  v-show="curSelectedSocialClass.maxBoons>=3"><label>Social Benefit #3: </label><select v-on:change="socialBenefitSelectChangeHandler(3, $event.target.selectedIndex)" :disabled="curSelectedSocialClass.maxBoons<3"><option v-for="(li,i) in socialBenefitChoices" :disabled="socialBenefit1.name===li.name || (curSelectedSocialClass.maxBoons >=2 && socialBenefit2.name===li.name)" :selected="li===socialBenefit3" :key="li.label">{{ li.label }}</option></select></div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="modified-wealth-assets" v-show="availableWealthPointsBase!=availableWealthPoints" :class="[availableWealthPoints<availableWealthPointsBase ? \'lower\' : \'higher\']">\r\n\t\t\t\t\t<label>Modified Wealth: <b>{{ availableWealthPoints }}W</b></label>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="wealth-assets" v-show="availableWealthPoints > 0">\r\n\t\t\t\t\t<label>Your Wealth Assets: <span class="valuer" v-show="remainingWealthPoints>0" :class="{\'still-have\':remainingWealthPoints>0}">({{remainingWealthPoints}}  Wealth Point(s) remaining.)</span></label>\r\n\t\t\t\t\t<ArrayOf of="WealthAssetAssign" :defaultValue="getEmptyWealthAssign" :obj="$data" prop="wealthAssets" :minLength="0" :maxLength="maxWealthAssets" :remainingWealth="remainingWealthPoints" />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t\t\t\r\n\t\t\t<div v-show="promptSettleSocialTier"><button style="margin-top:10px"  v-on:click="settleSocialTier()">Finalise Social Class/Wealth!</button> <span class="invalid" style="color:red">&lt;&lt; Click this to confirm. </span><span v-show="!syncSocialWealth">( <b>{{socialPCPRequired }}</b> PCP instead. )</span>\r\n\t\t\t</div>\r\n\t\t</section>\r\n\t\t\t\r\n\t\t\r\n\t\t\r\n\t\t<hr/>\r\n\t\t\t\r\n\t\t<section class="gen-attributes" id="gen-attributes">\r\n\t\t\t<h2>Attributes <span class="valuer" :class="{\'still-have\':remainingAttributePoints>0 || negativeOrZeroStat}">({{remainingAttributePoints}}  Attribute Points remaining.)</span> <span class="valuer">(Available: {{availableAttributePoints}}) </span><span class="valid" v-show="remainingAttributePoints==0 && !negativeOrZeroStat" style="color:green">Ok!</span></h2>\r\n\t\t\t<div class="gen-col">\r\n\t\t\t\t<div><label>Strength:</label><AttributeInput :obj="char" prop="strength" :remainingAttributePoints="remainingAttributePoints" /><span class="modified-attribute" v-show="strength != STR" :class="[STR<strength ? \'lower\' : \'higher\', {\'zero-neg\':STR<=0} ]">{{STR}}</span></div>\r\n\t\t\t\t<div><label>Agility:</label><AttributeInput :obj="char" prop="agility" :remainingAttributePoints="remainingAttributePoints" /><span class="modified-attribute" v-show="agility != AGI" :class="[AGI<agility ? \'lower\' : \'higher\', {\'zero-neg\':AGI<=0}]">{{AGI}}</span></div>\r\n\t\t\t\t<div><label>Endurance:</label><AttributeInput :obj="char" prop="endurance" :remainingAttributePoints="remainingAttributePoints" /><span class="modified-attribute" v-show="endurance != END" :class="[END<endurance ? \'lower\' : \'higher\', {\'zero-neg\':END<=0}]">{{END}}</span></div>\r\n\t\t\t\t<div><label>Health:</label><AttributeInput :obj="char" prop="health" :remainingAttributePoints="remainingAttributePoints" /><span class="modified-attribute" v-show="health != HLT" :class="[HLT<health ? \'lower\' : \'higher\', {\'zero-neg\':HLT<=0}]">{{HLT}}</span></div>\r\n\t\t\t\t<div><label>Willpower:</label><AttributeInput :obj="char" prop="willpower" :remainingAttributePoints="remainingAttributePoints" /><span class="modified-attribute" v-show="willpower != WIP" :class="[WIP<willpower ? \'lower\' : \'higher\', {\'zero-neg\':WIP<=0}]">{{WIP}}</span></div>\r\n\t\t\t\t<div><label>Wit:</label><AttributeInput :obj="char" prop="wit" :remainingAttributePoints="remainingAttributePoints" /><span class="modified-attribute" v-show="wit != WIT" :class="[WIT<wit ? \'lower\' : \'higher\', {\'zero-neg\':WIT<=0}]">{{WIT}}</span></div>\r\n\t\t\t\t<div><label>Intelligence:</label><AttributeInput :obj="char" prop="intelligence" :remainingAttributePoints="remainingAttributePoints" /><span class="modified-attribute" v-show="intelligence != INT" :class="[INT<intelligence ? \'lower\' : \'higher\', {\'zero-neg\':INT<=0}]">{{INT}}</span></div>\r\n\t\t\t\t<div><label>Perception:</label><AttributeInput :obj="char" prop="perception" :remainingAttributePoints="remainingAttributePoints" /><span class="modified-attribute" v-show="perception != PER" :class="[PER<perception ? \'lower\' : \'higher\', {\'zero-neg\':PER<=0}]">{{PER}}</span></div>\r\n\t\t\t</div>\r\n\t\t\t<div class="gen-col">\r\n\t\t\t\t<div><b>ADR</b> (Adroitness): <span class="modified-attribute" :class="[ADR==adr ?\'base\' : ADR<adr ? \'lower\' : \'higher\']"><b>{{ADR}}</b></span><i v-show="adr!=ADR" class="baseshow">({{adr}})</i></div>\r\n\t\t\t\t<div><b>SDB</b> (Strength Damage Bonus): <span><b>{{SDB}}</b></span></div>\r\n\t\t\t\t<div><b>GRIT</b> (Grit): <span class="modified-attribute" :class="[baseGrit==GRIT ?\'base\' : GRIT<baseGrit ? \'lower\' : \'higher\']"><b>{{GRIT}}</b></span><i v-show="baseGrit!=GRIT" class="baseshow">({{baseGrit}})</i></div>\r\n\t\t\t\r\n\t\t\t\t<div><b>MOB</b> (Mobility): <span class="modified-attribute" :class="[MOB==mob ?\'base\' : MOB<mob ? \'lower\' : \'higher\']"><b>{{MOB}}</b></span><i v-show="mob!=MOB" class="baseshow">({{mob}})</i></div>\r\n\t\t\t\t<div><b>CAR</b> (Carry): <span class="modified-attribute" :class="[CAR==car ?\'base\' : CAR<car ? \'lower\' : \'higher\']"><b>{{CAR}}</b></span><i v-show="car!=CAR" class="baseshow">({{car}})</i></div>\r\n\t\t\t\t\r\n\t\t\t\t<div><b>CHA</b> (Charisma): <span class="modified-attribute" :class="[CHA==cha ?\'base\' : CHA<cha ? \'lower\' : \'higher\']"><b>{{CHA}}</b></span><i v-show="cha!=CHA" class="baseshow">({{cha}})</i></div>\r\n\t\t\t\t\r\n\t\t\t\t<div><i>TOU</i> (Toughness): <span class="modified-attribute" :class="[TOU==tou ?\'base\' : TOU<tou ? \'lower\' : \'higher\']"><b>{{TOU}}</b></span><i v-show="tou!=TOU" class="baseshow">({{tou}})</i></div>\r\n\t\t\t\t<hr/>\r\n\t\t\t\t<div>Weight/Carry: <b>{{inventoryWeightLbl}}</b> / <b :style="{fontWeight:encumbranceLvl>=1 ?\'normal\':\'bold\'}">{{CAR}}</b></div>\r\n\t\t\t\t<div>Master-hand: <span v-if="masterHandItem!=null"><b>{{masterHandItem.name}}</b> <span v-show="masterWeapon!=null"><span v-html="masterWeapon.ranged ? \'&#9678;\' : \'&#9876;\'"></span></span><span v-if="carriedShield!=null && carriedShield==masterHandItem"><span class="shield-icon-inv">☗</span><select v-model.number="char.inventory.shieldPosition" number><option :value="0">Low</option><option :value="1">High</option></select></span></span></div>\r\n\t\t\t\t<div>Off-hand: <span v-if="offHandItem!=null"><b>{{offHandItem.name}}</b> <span v-show="offhandWeapon!=null"><span v-html="offhandWeapon.ranged ? \'&#9678;\' : \'&#9876;\'"></span></span><span v-if="carriedShield!=null && carriedShield==offHandItem"><span class="shield-icon-inv">☗</span><select v-model.number="char.inventory.shieldPosition" number><option :value="0">Low</option><option :value="1">High</option></select></span></span></div>\r\n\t\t\t\t<div>Reach: <span class="modified-attribute" :class="[reachBase==reach ?\'base\' : reach<reachBase ? \'lower\' : \'higher\']"><b>{{reach}}</b></span><i v-show="reachBase!=reach" class="baseshow">({{reachBase}})</i></div>\r\n\t\t\t\t<div>Perception Penalty: <b>{{ perceptionPenalty }}</b><span v-show="perceptionPenalty > 0"> (<b>{{ perceptionPenalized }}</b> left.)</span></div>\r\n\t\t\t\t<div v-if="heldProfeciencies!=null">{{heldProfeciencyIcons}}: <b style="max-width:120px">{{heldProfeciencies}}</b></div>\r\n\t\t\t\t<div v-else>Defaulting&#9876;from:<br/><b style="max-width:120px">{{defaultProfs}}</b></div>\r\n\t\t\t</div>\r\n\t\t\t<div class="gen-col">\r\n\t\t\t\t<div>School Level: <b>{{char.schoolLevel}}</b></div>\r\n\t\t\t\t<div class="cp"><b>CP</b> (Melee Combat Pool): <span :class="[CP==baseCP ?\'base\' : CP<baseCP ? \'lower\' : \'higher\', {\'modified-attribute\':CP != baseCP}]"><b>{{CP}}</b></span><i v-show="CP!=baseCP" class="baseshow">({{baseCP}})</i>  (<i>{{CP-char.schoolLevel}}</i> CP without &#9876;)</div>\r\n\t\t\t\t\r\n\t\t\t\t<div><i>CP - Pain(<span v-show="totalPain>0" class="got-pain">{{totalPain}}</span>):</i> <b>{{meleeCP}}</b> (<i>{{meleeCP-char.schoolLevel}}</i> CP without &#9876;)</div>\r\n\t\t\t\t<br/>\r\n\t\t\t\t<div>Encumbrance Level: <span><b>{{encumbranceLvlRow.name}}</b>({{encumbranceLvl}})</span></div>\r\n\t\t\t\t<div>Skill Penalty: <span><b>{{skillPenalty}}</b></span></div>\r\n\t\t\t\t<div>Exhaustion Rate: <span><b>{{exhaustionRate}}x</b></span></div>\r\n\t\t\t\t<div>Recovery Amount: <span class="modified-attribute" :class="[recoveryRateAmount==recoveryRateAmountBase ?\'base\' : recoveryRateAmount<recoveryRateAmountBase ? \'lower\' : \'higher\']"><b>{{recoveryRateAmount}} <i>({{recoveryRate}}x)</i></b></span><i v-show="recoveryRateAmount!=recoveryRateAmountBase" class="baseshow">({{recoveryRateAmountBase}})</i></div>\r\n\t\t\t</div>\r\n\t\t\t<div class="gen-col">\r\n\t\t\t\t<button v-on:click="openModifiersWindow">&#128200;</button>\r\n\t\t\t</div>\r\n\t\t</section>\r\n\r\n\t\t<hr/>\r\n\t\t\r\n\t\t\t\r\n\t\t<section class="gen-bnb"  id="gen-bnb">\r\n\t\t\t<h2>Boons &amp; Banes <span class="valuer">(<span class="num">{{totalBnBScore }}</span> B&amp;B Points currently. (Pool: {{BnBpoints}} Points) ) </span>\r\n\t\t\t\r\n\t\t\t<span v-show="totalBnBScore<0" class="invalid"><span style="color:red">invalid!</span><i style="font-size:13px">(Need &gt;=0 B&amp;B points!<br/>Assign more PCP to \'Boons &amp; Banes\' or buy more Banes to pay off debt!)</i></span>\r\n\t\t\t<span v-show="totalBnBScore>=0" class="valid">\r\n\t\t\t\t<span style="color:green">Ok!</span><br/><span v-show="totalBnBScore>0" style="color:#ff4444;font-size:13px">(but you have additional {{ totalBnBScore }} B&amp;B Points!)</span>\r\n\t\t\t\t<div class="opencloselink"><a href="#" v-show="showBnBs" v-on:click.prevent="showBnBs=false">^ Hide</a><a href="#" v-show="!showBnBs" v-on:click.prevent="showBnBs=true">Open &gt;</a> &nbsp;&nbsp;<a style="font-size:12px;float:right" href="#gen-skills" class="jumplink">Skip to Skills..</a></div>\r\n\t\t\t</span>\r\n\t\t\t\r\n\t\t\t</h2>\r\n\t\t\t<div v-show="shouldShowBnBs">\r\n\t\t\t\t<h3>Choose Boons: -{{ totalBoonExpenditure }}   <span v-show="true" style="color:#aaaaaa">&nbsp;&nbsp;({{maxBoonsSpendableLeft }})</span></h3>\r\n\t\t\t\t<div class="boon-tags">\r\n\t\t\t\t\t<BoonBaneInput v-for="(li, i) in boonAssignList" :key="i" :obj="li" prop="rank" v-on:resetBB="resetBB" v-on:uncancel="uncancel" v-on:addBB="addBB" v-on:removeBB="removeBB"  :remaining="maxBoonsSpendableLeft" v-on:updateRankBB="updateRankBB" v-on:updateCanceledBB="updateCanceledBB" />\r\n\t\t\t\t</div>\t\r\n\t\t\t\t<h3>Choose Banes: +{{ totalBanePointsEarned }}, ~{{ totalBanePointsSpent }}</h3>\r\n\t\t\t\t<div class="bane-tags">\r\n\t\t\t\t\t<BoonBaneInput v-for="(li, i) in baneAssignList" :key="i" :obj="li" prop="rank" v-on:resetBB="resetBB" v-on:uncancel="uncancel"  v-on:addBB="addBB" v-on:removeBB="removeBB"  v-on:updateRankBB="updateRankBB" v-on:updateCanceledBB="updateCanceledBB" />\t\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t\t<br/>\r\n\t\t\t\t\r\n\t\t\t\t<div class="bb-details">\r\n\t\t\t\t<h3><span class="underline">Boon(s):</span><span class="header-liners"><a :href="li.__hasUIFields__ ? \'#\'+getBnBSlug(li.boon.name) : undefined" :class="{canceled:li._canceled}" v-for="li in boonsArray">{{li.boon.name}}</a></span></h3>\r\n\t\t\t\t<bb-apply v-for="(li,i) in boonsArray" :key="li.get_uid()" :assign="li" :remainingPoints="maxBoonsSpendableLeft" :ingame="char.ingame"></bb-apply>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="bb-details">\r\n\t\t\t\t\t<h3><span>Bane(s):</span><span class="header-liners"></span><span class="header-liners"><a :href="li.__hasUIFields__ ? \'#\'+getBnBSlug(li.bane.name) : undefined"  :class="{canceled:li._canceled}" v-for="li in banesArray">{{li.bane.name}}</a></span></h3>\r\n\t\t\t\t\t<bb-apply v-for="(li,i) in banesArray" :key="li.get_uid()" :assign="li" :ingame="char.ingame" v-on:callback="onBaneCallbackReceived"></bb-apply>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</section>\r\n\t\t\t\r\n\t\t<hr/>\r\n\t\t\t\r\n\t\t<section class="gen-skills"  id="gen-skills">\r\n\t\t\t<h2>Skills <span class="valuer" :class="{\'still-have\':totalSkillPointsLeft!=0}">({{totalSkillPointsLeft}} Skill Points remaining.) {{ individualSkillsRemaining }}</span> <span class="valuer">(Available: {{totalSkillPointsProvided}})</span><span class="formula">(PCP-1)*3+INT*2</span></h2>\r\n\t\t<h3>Skill(s):</h3>\r\n\t\t\t<div class="skill-lib">\r\n\t\t\t\t<SkillLibInput v-for="(skillObj, i) in skillObjs" v-if="!skillsTable.requiresSpecialisation[skillObj.name]" :index="i" :key="skillObj.name" :obj="skillValues" :prop="skillObj.name" :skillsTable="skillsTable" :skillLevelsPacket="skillPacketValues" :remaining="individualSkillsRemaining" :canDelete="i>=startingSkillObjsCount" v-on:change="onSkillIndividualChange" v-on:delete="deleteSkillInput" />\r\n\t\t\t</div>\r\n\t\t\t<div class="packet-selection-mode">\r\n\t\t\t\t<b>Buy Packets:</b> (cost 3 skill points each)\r\n\t\t\t\t<label><input type="radio" name="packetSelectionMode" :checked="!packetChoosy" v-on:click="packetChoosy = false"></input>Pennywise</label>\r\n\t\t\t\t<label><input type="radio" name="packetSelectionMode" :checked="packetChoosy" v-on:click="packetChoosy = true"></input>Pennywise and Choosy</label>\r\n\t\t\t</div>\r\n\t\t\t<div class="packet-list">\r\n\t\t\t\t<SkillPacketInput v-for="(packet,i) in skillPackets" v-on:change="onSkillPacketChange" :obj="packet" prop="qty" :labelMap="skillLabelMappings" :labelSchema="skillLabelMappingBases" :key="packet.name" :index="i" :skillPacketsRemaining="skillPacketsRemaining" :skillValues="skillPacketValues"  :packetChoosy="packetChoosy" :skillSubjectHash="skillSubjectHash"  />\r\n\t\t\t\t<SkillSubjectCreator :skillSubjects="skillSubjects" :skillValues="skillValues" :permaHash="skillSubjectsInitial" :skillList="specialisedSkills" :skillSubjectHash="skillSubjectHash" v-on:addSkill="addSkill" />\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t\t\r\n\t\t</section>\r\n\t\t\t\r\n\t\t<hr/>\r\n\t\t\r\n\t\t\r\n\t\r\n\t\t<section class="gen-schoolprofs"  id="gen-schoolprofs">\r\n\t\t\t<h2>School &amp; Profeciencies <span class="valuer" :class="{\'still-have\':stillHaveProfSpend }">( {{profPointsLeft}} Profeciency Points remaining. )</span> <span class="valuer">(Available: {{ProfPoints}}) </span></h2>\r\n\t\t\t<div class="select-school">\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<label class="lbl-school">School: <select number v-on:change="schoolSelectChangeHandler($event.target)"><option :value="-1" :selected="char.school==null"></option><option :value="i" v-for="(li, i) in schoolAssignList" :disabled="!li.school.canAffordWith(ProfPoints, moneyLeft, char.school) || !li.school.customRequire(char)" :selected="char.school==li.school">{{ li.school.name }} ({{ li.school.costArc }}) {{ li.school.costMoney != null ? " - "+li.school.costMoney.getLabel() : "" }}</option></select></label> <label class="lbl-level">Level:<SchoolLevelInput :obj="char" prop="schoolLevel" :levelCosts="schoolLevelCosts" :remainingArc="profPointsLeft" :disabled="char.school==null" /></label>\r\n\t\t\t\t</div>\r\n\t\r\n\t\t\t</div>\r\n\t\t\t<div class="school-info" v-if="hasSchool">\r\n\t\t\t\t<div>Max Profeciencies: {{ char.school.profLimit }}</div>\r\n\t\t\t\t<div class="cost-info">Learning Profeciency/Arc Point Cost: ( <span :class="{selected:isHuman}"><b class="color-free">Free</b> - Human</span>, &nbsp; <span :class="{selected:!isHuman}"><b>3 points</b> - Non-human)</span></div>\r\n\t\t\t</div>\r\n\t\t\t<div class="prof-list">\r\n\t\t\t\t<div class="gen-col">\r\n\t\t\t\t\t<h5>&#9876; Melee Profeciencies: <span class="valid ready" style="color:green" v-if="$data.profCoreListMelee.length>=maxMeleeProfSlots">{{ maxMeleeProfSlots > 0 ? "Full!" : "Not available." }}</span><span class="invalid" style="color:brown" v-else>Not Full!</span></h5>\r\n\t\t\t\t\t<ArrayOfBits :obj="$data" prop="profCoreListMelee" :labels="profCoreMeleeListNames" :bitmaskSetObj="char" bitmaskSetProp="profsMelee" :maxLength="maxMeleeProfSlots"  />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="gen-col">\r\n\t\t\t\t\t<h5>&#9678; Ranged Profeciencies: <span class="valid ready" style="color:green" v-if="$data.profCoreListRanged.length>=maxRangedProfSlots">{{ maxRangedProfSlots > 0 ? "Full!" : "Not available." }}</span><span class="invalid" style="color:brown" v-else>Not Full!</span></h5>\r\n\t\t\t\t\t<ArrayOfBits :obj="$data" prop="profCoreListRanged" :labels="profCoreRangedListNames" :bitmaskSetObj="char" bitmaskSetProp="profsRanged" :maxLength="maxRangedProfSlots"  />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class="manuever-list gen-col">\r\n\t\t\t\t<h5>Superior Manuevers: <span class="valid ready" style="color:green" v-show="char.superiorManueverNotes.length>=maxSuperiorSlots">{{ maxSuperiorSlots > 0 ? "Full!" : "Not available." }}</span><span class="invalid" style="color:brown" v-show="char.superiorManueverNotes.length<maxSuperiorSlots">Not Full!</span></h5>\r\n\t\t\t\t<ArrayOf of="String" defaultValue="" :obj="char" prop="superiorManueverNotes"  :maxLength="maxSuperiorSlots"/>\r\n\t\t\t\t<h5>Mastery Manuever: <span class="valid ready" style="color:green" v-show="char.masteryManueverNotes.length>=maxMasterySlots">{{ maxMasterySlots > 0 ? "Full!" : "Not available." }}</span><span class="invalid" style="color:brown" v-show="char.masteryManueverNotes.length<maxMasterySlots">Not Full!</span></h5>\r\n\t\t\t\t<ArrayOf of="String" defaultValue="" :obj="char" prop="masteryManueverNotes" :maxLength="maxMasterySlots"  />\r\n\t\t\t</div>\r\n\t\t\t<div class="talent-list gen-col">\r\n\t\t\t\t<h5>Talents: <span class="valid ready" style="color:green" v-show="char.talentNotes.length>=maxTalentSlots">{{maxTalentSlots > 0 ? "Full!" : "Not available." }}</span><span class="invalid" style="color:brown" v-show="char.talentNotes.length<maxTalentSlots">Not Full!</span></h5>\r\n\t\t\t\t<ArrayOf of="String" defaultValue="" :obj="char" prop="talentNotes" :maxLength="maxTalentSlots" />\r\n\t\t\t</div>\t\t\r\n\t\t\t<div class="school-benefits gen-col" v-if="char.schoolBonuses != null">\r\n\t\t\t\t<h5>Benefits: <span class="tag" v-for="li in schoolTags" :key="li">{{li}}</span></h5>\r\n\t\t\t\t<SchoolSheetDetails :bonuses="char.schoolBonuses" />\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t</section>\r\n\t\t\t\r\n\t\t<hr/>\r\n\t\t\t\r\n\t\t<section class="gen-checkout" ref="checkoutHeader">\r\n\t\t\t<h2>Checkout <span class="legend valuer">( &#128167;Liquidity&nbsp;&nbsp; &#9650;Bonuses &#10060;Penalties&nbsp;&nbsp; &#9876;School&nbsp;&nbsp; &#10064;Inventory&nbsp;&nbsp; [Remaining] )</span><span class="valid" v-show="notBankrupt" style="color:green"> &nbsp;Ready.</span><span class="invalid" v-show="!notBankrupt" style="color:red"> &nbsp;Bankrupt!</span></h2>\r\n\t\t\t<div class="checkout">\r\n\t\t\t\t<div class="cash">Money Remaining: ({{ moneyAvailableStr }})  + &#128167;({{liquidity}}) + &#9650;({{checkoutBonuses}}) &nbsp; - &#10060;({{checkoutPenalties}}) - &#9876;({{checkoutSchool}}) - &#10064;({{checkoutInventory}}) = [{{ moneyLeftStr }}]</div>\r\n\t\t\t\t<div class="carry">Carry: <b :class="{encumbered:encumbered}">{{inventoryWeightLbl}}</b> / <span class="modified-attribute" :class="[CAR==car ?\'base\' : CAR<car ? \'lower\' : \'higher\']"><b>{{CAR}}</b></span></div>\r\n\t\t\t</div>\r\n\t\t\t<div class="inventory-section">\r\n\t\t\t\t<button v-on:click="proceedToInventory()" v-show="!insideInventory">&#10064; Proceed to Inventory &gt;&gt;</button>\r\n\t\t\t</div>\r\n\t\t</section>\r\n\t\t<hr/>\r\n\t</div>\r\n\t\t\t\r\n\t<div class="chargen__footer" v-if="!insideInventory && !char.ingame">\r\n\t\t<section class="arcs">\r\n\t\t\t<h2>Arcs</h2>\r\n\t\t\t<div><label>Saga:</label><textarea v-model="char.arcSaga" class="notes"></textarea></div>\r\n\t\t\t<div><label>Epic:</label><textarea v-model="char.arcEpic" class="notes"></textarea></div>\r\n\t\t\t<div><label>Belief:</label><textarea v-model="char.arcBelief" class="notes"></textarea></div>\r\n\t\t\t<div><label>Glory:</label><textarea v-model="char.arcGlory" class="notes"></textarea></div>\r\n\t\t\t<div><label>Flaw:</label><textarea :disabled="!isHuman" v-model="char.arcFlaw" class="notes"></textarea></div>\r\n\t\t</section>\r\n\t\t<hr/>\r\n\t\t\r\n\t\t<button :disabled="char.ingame" v-on:click="saveFinaliseAll()">Save Character!</button>\r\n\t</div>\r\n\t\t\t\t\r\n\t<div class="chargen__done" v-if="char.ingame">\r\n\t\t<p>Congratulations <b>{{addressedAs}}</b>. Your character has been created. Copy the loadable serialized stream text contents below to clipboard, and paste it somewhere else for saving it manually!</p>\r\n\t\t<div><textarea character-set="UTF-8"  readonly="readonly" ref="savedTextArea" v-model="savedCharContents">\r\n\t\t</textarea><button v-on:click="executeCopyContents()" ref="copyButton">Copy</button><i class="copy-notify" ref="copyNotify" style="display:none">copied!</i></div>\r\n\t\t<div v-if="exitBtnCallback!=null">\r\n\t\t\t<i>You character\'s loadable contents is also listed on exit.</i>\r\n\t\t</div>\r\n\t\t<button v-if="exitBtnCallback!=null" v-on:click="exitBtnCallback()">Exit</button>\r\n\t\t\r\n\t\t<hr/>\r\n\t\tConsider pasting the copied serialized data content into a Gingko card,<br/>and storing all your data (for free) in a Gingko tree which {{ exitBtnCallback!=null ? "is" : "will be"}} loadable online by {{exitBtnCallback!=null ? "the" : "an upcoming" }} integrated suite\'s file browser!<br/>\r\n\t\t(eg. <a href="https://gingkoapp.com/sos-weapons-and-armour" target="_blank">https://gingkoapp.com/sos-weapons-and-armour</a> ).<br/> Create a Gingko account now and {{ exitBtnCallback!=null? "start sharing your creations!" : "prepare your creations to be viewable through combined inventory/character sheets coming your way." }} \r\n\t</div>\r\n\t\r\n\t<div ref="inventoryHolder">\r\n\t\t<inventory v-if="insideInventory" :backBtnCallback="exitInventory" v-on:loadSheet="loadSheet" :inventory="char.inventory" :maxCostCopper="moneyLeft.getCPValue()" :maxWeight="CAR" :includeDroppedCost="true" />\t\r\n\t</div>\r\n\t\t\r\n\t<sweet-modal ref="finaliseWarning">\r\n\t\t<div class="finalise-form finalise-warning">\r\n\t\t\t<h3>Warning!</h3>\r\n\t\t\t<p>You may have missed out some things.</p>\r\n\t\t\t<ul>\r\n\t\t\t\t<li v-for="li in warningMsgs" v-show="li.charAt(li.length-1)!=\'!\'">{{li}}</li>\r\n\t\t\t</ul>\r\n\t\t\t<button v-on:click="$refs.finaliseWarning.close()">&lt; Back</button>\r\n\t\t\t<br/><br/>\r\n\t\t\t<i>You still sure you want to proceed with build?</i><br/>\r\n\t\t\t<button v-on:click="$refs.finaliseWarning.close(); saveFinaliseAll(true)">Proceed with Build</button>\r\n\t\t</div>\r\n\t</sweet-modal>\r\n\t<sweet-modal ref="finaliseError">\r\n\t\t<div class="finalise-form finalise-errors">\t\r\n\t\t\t<h3>Invalid!</h3>\r\n\t\t\t<p>You can\'t save this character yet and would need to rectify the following:</p>\r\n\t\t\t<ul>\r\n\t\t\t\t<li v-for="li in warningMsgs" v-show="li.charAt(li.length-1)==\'!\'">{{li}}</li>\r\n\t\t\t</ul>\r\n\t\t\t<button v-on:click="$refs.finaliseError.close()">&lt; Back</button>\r\n\t\t</div>\r\n\t</sweet-modal>\r\n</div>\r\n'},get_placeholder:function(){return"[placeholder]"},get_shouldShowBnBs:function(){return this.$data.get_shouldShowBnBs()},privateInit:function(){this.$data.privateInit()},get_campaignPowLevel:function(){var t=this.$data;return t.campaignPowerLevels[t.campaignPowLevelIndex]},get_categoryRace:function(){return this.$data.categories[0]},get_categoryAttributes:function(){return this.$data.categories[1]},get_categorySocialClassWealth:function(){return this.$data.categories[4]},get_categoriesRemainingAssignable:function(){return this.$data.get_categoriesRemainingAssignable()},get_isValidCategories:function(){return this.$data.get_isValidCategories()},checkWarningCategories:function(){return this.$data.checkWarningCategories()},get_isHuman:function(){var t=this.$data;return"Human"==(null!=t.char.race?t.char.race.name:"")},get_selectedRaceName:function(){var t=this.$data;return null!=t.char.race?t.char.race.name:""},resetToHuman:function(){var t=this.$data;t.selectedTierIndex=0,t.char.set_race(t.raceTierTable[0][0])},selectRaceAt:function(t,e){var n=this.$data;n.selectedTierIndex=t,n.char.set_race(n.raceTierTable[t][e])},settleRaceTier:function(){var t=this.$data;t.categories[0].pcp=t.pcpForTiers[t.selectedTierIndex]},get_promptSettleRaceTier:function(){return this.$data.get_promptSettleRaceTier()},get_raceTier:function(){return this.$data.get_raceTier()},getRaceTierFromPCP:function(t){return this.$data.getRaceTierFromPCP(t)},get_totalAttributePointsSpent:function(){return this.$data.get_totalAttributePointsSpent()},get_remainingAttributePoints:function(){return this.$data.get_remainingAttributePoints()},get_availableAttributePoints:function(){return this.$data.get_availableAttributePoints()},canBuyMoreAttributeLevels:function(){return this.$data.canBuyMoreAttributeLevels()},checkWarningAttributes:function(){return this.$data.checkWarningAttributes()},updateSocialBenefitsToBoon:function(t,e){this.$data.updateSocialBenefitsToBoon(t,e)},validateSocialBenefitsWithClass:function(t){this.$data.validateSocialBenefitsWithClass(t)},socialBenefitSelectChangeHandler:function(t,e){this.$data.socialBenefitSelectChangeHandler(t,e)},get_availableWealthPointsBase:function(){var t=this.$data;return t.socialClassList[t.wealthIndex].socialClass.wealth},get_availableWealthPoints:function(){var t=this.$data,e=Math.floor(t.char.getModifiedValue(18,t.socialClassList[t.wealthIndex].socialClass.wealth));return e<0&&(e=0),e},get_remainingWealthPointsFull:function(){var t=this.$data,e=Math.floor(t.char.getModifiedValue(18,t.socialClassList[t.wealthIndex].socialClass.wealth));return e<0&&(e=0),e-t.wealthAssetsWorthFullArray()},get_remainingWealthPoints:function(){var t=this.$data,e=Math.floor(t.char.getModifiedValue(18,t.socialClassList[t.wealthIndex].socialClass.wealth));return e<0&&(e=0),e-t.wealthAssetsWorth()},wealthAssetsWorthLen:function(){var t=this.$data,e=t.wealthAssets.length,n=t.get_maxWealthAssets();return e>=n?n:e},wealthAssetsWorth:function(){return this.$data.wealthAssetsWorth()},get_socialBenefitChoices:function(){var t=this.$data;return t.socialClassList[t.socialClassIndex].boons},get_curSelectedSocialClass:function(){var t=this.$data;return t.socialClassList[t.socialClassIndex]},get_maxSocialClassIndex:function(){return this.$data.categories[4].pcp-1},constraintSocialWealth:function(){this.$data.constraintSocialWealth()},get_socialEitherMaxIndex:function(){return this.$data.get_socialEitherMaxIndex()},get_wealthEitherMaxIndex:function(){return this.$data.get_wealthEitherMaxIndex()},get_socialClassPlaceHolderName:function(){return this.$data.get_socialClassPlaceHolderName()},get_promptSettleSocialTier:function(){var t=this.$data;return(t.socialClassIndex!=t.wealthIndex?t.get_unevenSocialPCPRequired():t.socialClassIndex+1)!=t.categories[4].pcp},get_socialPCPRequired:function(){var t=this.$data;return t.socialClassIndex!=t.wealthIndex?t.get_unevenSocialPCPRequired():t.socialClassIndex+1},settleSocialTier:function(){this.$data.settleSocialTier()},get_unevenSocialPCPRequired:function(){return this.$data.get_unevenSocialPCPRequired()},get_unevenMaxSocialClassIndex:function(){return this.$data.get_unevenMaxSocialClassIndex()},get_unevenMaxWealthIndex:function(){return this.$data.get_unevenMaxWealthIndex()},setSocialClassIndex:function(t){this.$data.setSocialClassIndex(t)},setWealthIndex:function(t){this.$data.setWealthIndex(t)},updateSocialToCharsheet:function(){this.$data.updateSocialToCharsheet()},get_maxWealthAssets:function(){return this.$data.get_maxWealthAssets()},updateMoneyToCharsheet:function(){this.$data.updateMoneyToCharsheet()},saveFinaliseSocial:function(t){this.$data.saveFinaliseSocial(t)},get_totalBaneExpenditure:function(){return this.$data.get_totalBaneExpenditure()},get_maxBanePointsEarnable:function(){var t=this.$data;return t.get_BnBpoints()<0?15-t.get_BnBpoints():15},get_totalBanePointsEarned:function(){return this.$data.get_totalBanePointsEarned()},get_totalBanePointsSpent:function(){return this.$data.get_totalBanePointsSpent()},get_totalBoonExpenditure:function(){return this.$data.get_totalBoonExpenditure()},get_boonsArray:function(){return this.$data.char.boons.list},get_banesArray:function(){return this.$data.char.banes.list},get_BnBpoints:function(){return this.$data.get_BnBpoints()},get_totalBnBScore:function(){return this.$data.get_totalBnBScore()},get_maxBoonsSpendable:function(){return this.$data.get_maxBoonsSpendable()},get_maxBoonsSpendableLeft:function(){return this.$data.get_maxBoonsSpendableLeft()},get_maxBanesSpendable:function(){return this.$data.get_maxBanesSpendable()},get_maxBanesSpendableLeft:function(){return this.$data.get_maxBanesSpendableLeft()},addSkill:function(t,e){this.$data.addSkill(t,e)},deleteSkillInput:function(t){this.$data.deleteSkillInput(t)},onSkillPacketChange:function(t,e,n){this.$data.onSkillPacketChange(t,e,n)},onSkillIndividualChange:function(t){this.$data.onSkillIndividualChange(t)},saveFinaliseSkillsFromPackets:function(){this.$data.saveFinaliseSkillsFromPackets()},clampSkillValue:function(t){this.$data;return t>=5?5:t},isSkillLabelBinded:function(t){this.$data;return"~"==t.charAt(0)},get_SkillPoints:function(){return this.$data.get_SkillPoints()},get_individualSkillsSpent:function(){return this.$data.get_individualSkillsSpent()},get_maxSkillPacketsAllowed:function(){return this.$data.get_maxSkillPacketsAllowed()},get_maxIndividualSkillsSpendable:function(){return this.$data.get_maxIndividualSkillsSpendable()},get_individualSkillsRemaining:function(){return this.$data.get_individualSkillsRemaining()},get_totalSkillPointsProvided:function(){return this.$data.get_totalSkillPointsProvided()},get_skillPacketsRemaining:function(){return this.$data.get_skillPacketsRemaining()},get_skillPacketsBought:function(){return this.$data.get_skillPacketsBought()},get_totalSkillPointsLeft:function(){return this.$data.get_totalSkillPointsLeft()},selectSchoolAssign:function(t){this.$data.selectSchoolAssign(t)},canStillSpendSchool:function(t){return this.$data.canStillSpendSchool(t)},get_hasSchool:function(){return null!=this.$data.char.school},get_schoolProfLevel:function(){var t=this.$data;return null!=t.char.school?t.char.schoolLevel:0},get_ProfPoints:function(){return 3*(this.$data.categories[5].pcp-1)},get_totalAvailProfSlots:function(){var t=this.$data;return null!=t.char.school?t.char.school.profLimit:0},get_profArcCost:function(){var t=this.$data;return"Human"==(null!=t.char.race?t.char.race.name:"")?0:3},get_schoolArcCost:function(){var t=this.$data;return null!=t.char.school?t.char.school.costArc:0},get_profExpenditure:function(){return this.$data.get_profExpenditure()},get_totalProfSlotExpenditure:function(){var t=this.$data,e="Human"==(null!=t.char.race?t.char.race.name:"")?0:3;return e*t.profCoreListRanged.length+e*t.profCoreListMelee.length},get_maxAvailableProfSlots:function(){var t=this.$data;return null!=t.char.school?t.char.school.profLimit:0},get_maxMeleeProfSlots:function(){return this.$data.get_maxMeleeProfSlots()},get_maxRangedProfSlots:function(){return this.$data.get_maxRangedProfSlots()},get_maxTalentSlots:function(){return this.$data.get_maxTalentSlots()},get_maxSuperiorSlots:function(){return this.$data.get_maxSuperiorSlots()},get_maxMasterySlots:function(){return this.$data.get_maxMasterySlots()},get_totalProfecienciesBought:function(){return this.$data.get_totalProfecienciesBought()},get_maxClampedMeleeProfs:function(){var t=this.$data,e=t.get_maxMeleeProfSlots(),n=t.profCoreListMelee.length;return e<n?e:n},get_maxClampedRangedProfs:function(){var t=this.$data,e=t.get_maxRangedProfSlots(),n=t.profCoreListRanged.length;return e<n?e:n},get_levelsExpenditure:function(){var t=this.$data;return null!=t.char.school&&t.char.schoolLevel>0?t.schoolLevelCosts[t.char.schoolLevel-1]:0},get_totalProfArcExpenditure:function(){var t=this.$data;return t.get_totalProfecienciesBought()*("Human"==(null!=t.char.race?t.char.race.name:"")?0:3)},get_profPointsLeft:function(){var t=this.$data;return 3*(t.categories[5].pcp-1)-t.get_totalProfecienciesBought()*("Human"==(null!=t.char.race?t.char.race.name:"")?0:3)-(null!=t.char.school?t.char.school.costArc:0)-(null!=t.char.school&&t.char.schoolLevel>0?t.schoolLevelCosts[t.char.schoolLevel-1]:0)},get_traceProfCoreRangedCurrent:function(){return this.$data.get_traceProfCoreRangedCurrent()},get_traceProfCoreMeleeCurrent:function(){return this.$data.get_traceProfCoreMeleeCurrent()},get_traceProfCoreRangedCount:function(){return this.$data.get_traceProfCoreRangedCount()},get_traceProfCoreMeleeCount:function(){return this.$data.get_traceProfCoreMeleeCount()},saveFinaliseCleanupChar:function(t){this.$data.saveFinaliseCleanupChar(t)},_Init:function(){var t=Ci.prototype;this.data=t.Data,this.created=t.Created,this.components=this.Components(),this.template=this.Template(),this.computed={validAffordCurrentSchool:t.get_validAffordCurrentSchool,moneyLeft:t.get_moneyLeft,moneyLeftStr:t.get_moneyLeftStr,liquidity:t.get_liquidity,liquidityStr:t.get_liquidityStr,startingMoneyModifiedCP:t.get_startingMoneyModifiedCP,startingMoneyBonusCP:t.get_startingMoneyBonusCP,startingMoneyPenaltyCP:t.get_startingMoneyPenaltyCP,inventoryCost:t.get_inventoryCost,moneyAvailable:t.get_moneyAvailable,moneyAvailableStr:t.get_moneyAvailableStr,checkoutBonuses:t.get_checkoutBonuses,checkoutPenalties:t.get_checkoutPenalties,checkoutSchool:t.get_checkoutSchool,checkoutInventory:t.get_checkoutInventory,shouldShowBnBs:t.get_shouldShowBnBs,campaignPowLevel:t.get_campaignPowLevel,categoryRace:t.get_categoryRace,categoryAttributes:t.get_categoryAttributes,categorySocialClassWealth:t.get_categorySocialClassWealth,categoriesRemainingAssignable:t.get_categoriesRemainingAssignable,isValidCategories:t.get_isValidCategories,isHuman:t.get_isHuman,selectedRaceName:t.get_selectedRaceName,promptSettleRaceTier:t.get_promptSettleRaceTier,raceTier:t.get_raceTier,totalAttributePointsSpent:t.get_totalAttributePointsSpent,remainingAttributePoints:t.get_remainingAttributePoints,availableAttributePoints:t.get_availableAttributePoints,availableWealthPointsBase:t.get_availableWealthPointsBase,availableWealthPoints:t.get_availableWealthPoints,remainingWealthPointsFull:t.get_remainingWealthPointsFull,remainingWealthPoints:t.get_remainingWealthPoints,socialBenefitChoices:t.get_socialBenefitChoices,curSelectedSocialClass:t.get_curSelectedSocialClass,maxSocialClassIndex:t.get_maxSocialClassIndex,socialEitherMaxIndex:t.get_socialEitherMaxIndex,wealthEitherMaxIndex:t.get_wealthEitherMaxIndex,socialClassPlaceHolderName:t.get_socialClassPlaceHolderName,promptSettleSocialTier:t.get_promptSettleSocialTier,socialPCPRequired:t.get_socialPCPRequired,unevenSocialPCPRequired:t.get_unevenSocialPCPRequired,unevenMaxSocialClassIndex:t.get_unevenMaxSocialClassIndex,unevenMaxWealthIndex:t.get_unevenMaxWealthIndex,maxWealthAssets:t.get_maxWealthAssets,totalBaneExpenditure:t.get_totalBaneExpenditure,maxBanePointsEarnable:t.get_maxBanePointsEarnable,totalBanePointsEarned:t.get_totalBanePointsEarned,totalBanePointsSpent:t.get_totalBanePointsSpent,totalBoonExpenditure:t.get_totalBoonExpenditure,boonsArray:t.get_boonsArray,banesArray:t.get_banesArray,BnBpoints:t.get_BnBpoints,totalBnBScore:t.get_totalBnBScore,maxBoonsSpendable:t.get_maxBoonsSpendable,maxBoonsSpendableLeft:t.get_maxBoonsSpendableLeft,maxBanesSpendable:t.get_maxBanesSpendable,maxBanesSpendableLeft:t.get_maxBanesSpendableLeft,SkillPoints:t.get_SkillPoints,individualSkillsSpent:t.get_individualSkillsSpent,maxSkillPacketsAllowed:t.get_maxSkillPacketsAllowed,maxIndividualSkillsSpendable:t.get_maxIndividualSkillsSpendable,individualSkillsRemaining:t.get_individualSkillsRemaining,totalSkillPointsProvided:t.get_totalSkillPointsProvided,skillPacketsRemaining:t.get_skillPacketsRemaining,skillPacketsBought:t.get_skillPacketsBought,totalSkillPointsLeft:t.get_totalSkillPointsLeft,hasSchool:t.get_hasSchool,schoolProfLevel:t.get_schoolProfLevel,ProfPoints:t.get_ProfPoints,totalAvailProfSlots:t.get_totalAvailProfSlots,profArcCost:t.get_profArcCost,schoolArcCost:t.get_schoolArcCost,profExpenditure:t.get_profExpenditure,totalProfSlotExpenditure:t.get_totalProfSlotExpenditure,maxAvailableProfSlots:t.get_maxAvailableProfSlots,maxMeleeProfSlots:t.get_maxMeleeProfSlots,maxRangedProfSlots:t.get_maxRangedProfSlots,maxTalentSlots:t.get_maxTalentSlots,maxSuperiorSlots:t.get_maxSuperiorSlots,maxMasterySlots:t.get_maxMasterySlots,totalProfecienciesBought:t.get_totalProfecienciesBought,maxClampedMeleeProfs:t.get_maxClampedMeleeProfs,maxClampedRangedProfs:t.get_maxClampedRangedProfs,levelsExpenditure:t.get_levelsExpenditure,totalProfArcExpenditure:t.get_totalProfArcExpenditure,profPointsLeft:t.get_profPointsLeft,traceProfCoreRangedCurrent:t.get_traceProfCoreRangedCurrent,traceProfCoreMeleeCurrent:t.get_traceProfCoreMeleeCurrent,traceProfCoreRangedCount:t.get_traceProfCoreRangedCount,traceProfCoreMeleeCount:t.get_traceProfCoreMeleeCount,totalDraftedProfSlots:t.get_totalDraftedProfSlots,maxBuyableProfSlots:t.get_maxBuyableProfSlots,excessDraftedSlots:t.get_excessDraftedSlots,notBankrupt:t.get_notBankrupt,stillHaveProfSpend:t.get_stillHaveProfSpend,placeholder:t.get_placeholder},this.methods={setInventory:t.setInventory,watch_maxBoonsSpendableLeft:t.watch_maxBoonsSpendableLeft,watch_raceTier:t.watch_raceTier,watch_socialEitherMaxIndex:t.watch_socialEitherMaxIndex,watch_wealthEitherMaxIndex:t.watch_wealthEitherMaxIndex,watch_syncSocialWealth:t.watch_syncSocialWealth,watch_socialClassIndex:t.watch_socialClassIndex,watch_wealthIndex:t.watch_wealthIndex,watch_socialBenefit1:t.watch_socialBenefit1,watch_socialBenefit2:t.watch_socialBenefit2,watch_socialBenefit3:t.watch_socialBenefit3,schoolSelectChangeHandler:t.schoolSelectChangeHandler,watch_validAffordCurrentSchool:t.watch_validAffordCurrentSchool,get_totalDraftedProfSlots:t.get_totalDraftedProfSlots,get_maxBuyableProfSlots:t.get_maxBuyableProfSlots,get_excessDraftedSlots:t.get_excessDraftedSlots,watch_excessDraftedSlots:t.watch_excessDraftedSlots,get_validAffordCurrentSchool:t.get_validAffordCurrentSchool,get_notBankrupt:t.get_notBankrupt,isValidAll:t.isValidAll,get_stillHaveProfSpend:t.get_stillHaveProfSpend,saveFinaliseAll:t.saveFinaliseAll,saveCharToBox:t.saveCharToBox,executeCopyContents:t.executeCopyContents,confirmFinaliseAll:t.confirmFinaliseAll,get_moneyLeft:t.get_moneyLeft,get_moneyLeftStr:t.get_moneyLeftStr,get_liquidity:t.get_liquidity,get_liquidityStr:t.get_liquidityStr,get_startingMoneyModifiedCP:t.get_startingMoneyModifiedCP,get_startingMoneyBonusCP:t.get_startingMoneyBonusCP,get_startingMoneyPenaltyCP:t.get_startingMoneyPenaltyCP,get_inventoryCost:t.get_inventoryCost,get_moneyAvailable:t.get_moneyAvailable,get_moneyAvailableStr:t.get_moneyAvailableStr,get_checkoutBonuses:t.get_checkoutBonuses,get_checkoutPenalties:t.get_checkoutPenalties,get_checkoutSchool:t.get_checkoutSchool,get_checkoutInventory:t.get_checkoutInventory,exitInventory:t.exitInventory,proceedToInventory:t.proceedToInventory,get_placeholder:t.get_placeholder,get_shouldShowBnBs:t.get_shouldShowBnBs,privateInit:t.privateInit,get_campaignPowLevel:t.get_campaignPowLevel,get_categoryRace:t.get_categoryRace,get_categoryAttributes:t.get_categoryAttributes,get_categorySocialClassWealth:t.get_categorySocialClassWealth,get_categoriesRemainingAssignable:t.get_categoriesRemainingAssignable,get_isValidCategories:t.get_isValidCategories,checkWarningCategories:t.checkWarningCategories,get_isHuman:t.get_isHuman,get_selectedRaceName:t.get_selectedRaceName,resetToHuman:t.resetToHuman,selectRaceAt:t.selectRaceAt,settleRaceTier:t.settleRaceTier,get_promptSettleRaceTier:t.get_promptSettleRaceTier,get_raceTier:t.get_raceTier,getRaceTierFromPCP:t.getRaceTierFromPCP,get_totalAttributePointsSpent:t.get_totalAttributePointsSpent,get_remainingAttributePoints:t.get_remainingAttributePoints,get_availableAttributePoints:t.get_availableAttributePoints,canBuyMoreAttributeLevels:t.canBuyMoreAttributeLevels,checkWarningAttributes:t.checkWarningAttributes,updateSocialBenefitsToBoon:t.updateSocialBenefitsToBoon,validateSocialBenefitsWithClass:t.validateSocialBenefitsWithClass,socialBenefitSelectChangeHandler:t.socialBenefitSelectChangeHandler,get_availableWealthPointsBase:t.get_availableWealthPointsBase,get_availableWealthPoints:t.get_availableWealthPoints,get_remainingWealthPointsFull:t.get_remainingWealthPointsFull,get_remainingWealthPoints:t.get_remainingWealthPoints,wealthAssetsWorthLen:t.wealthAssetsWorthLen,wealthAssetsWorth:t.wealthAssetsWorth,get_socialBenefitChoices:t.get_socialBenefitChoices,get_curSelectedSocialClass:t.get_curSelectedSocialClass,get_maxSocialClassIndex:t.get_maxSocialClassIndex,constraintSocialWealth:t.constraintSocialWealth,get_socialEitherMaxIndex:t.get_socialEitherMaxIndex,get_wealthEitherMaxIndex:t.get_wealthEitherMaxIndex,get_socialClassPlaceHolderName:t.get_socialClassPlaceHolderName,get_promptSettleSocialTier:t.get_promptSettleSocialTier,get_socialPCPRequired:t.get_socialPCPRequired,settleSocialTier:t.settleSocialTier,get_unevenSocialPCPRequired:t.get_unevenSocialPCPRequired,get_unevenMaxSocialClassIndex:t.get_unevenMaxSocialClassIndex,get_unevenMaxWealthIndex:t.get_unevenMaxWealthIndex,setSocialClassIndex:t.setSocialClassIndex,setWealthIndex:t.setWealthIndex,updateSocialToCharsheet:t.updateSocialToCharsheet,get_maxWealthAssets:t.get_maxWealthAssets,updateMoneyToCharsheet:t.updateMoneyToCharsheet,saveFinaliseSocial:t.saveFinaliseSocial,get_totalBaneExpenditure:t.get_totalBaneExpenditure,get_maxBanePointsEarnable:t.get_maxBanePointsEarnable,get_totalBanePointsEarned:t.get_totalBanePointsEarned,get_totalBanePointsSpent:t.get_totalBanePointsSpent,get_totalBoonExpenditure:t.get_totalBoonExpenditure,get_boonsArray:t.get_boonsArray,get_banesArray:t.get_banesArray,get_BnBpoints:t.get_BnBpoints,get_totalBnBScore:t.get_totalBnBScore,get_maxBoonsSpendable:t.get_maxBoonsSpendable,get_maxBoonsSpendableLeft:t.get_maxBoonsSpendableLeft,get_maxBanesSpendable:t.get_maxBanesSpendable,get_maxBanesSpendableLeft:t.get_maxBanesSpendableLeft,addSkill:t.addSkill,deleteSkillInput:t.deleteSkillInput,onSkillPacketChange:t.onSkillPacketChange,onSkillIndividualChange:t.onSkillIndividualChange,saveFinaliseSkillsFromPackets:t.saveFinaliseSkillsFromPackets,clampSkillValue:t.clampSkillValue,isSkillLabelBinded:t.isSkillLabelBinded,get_SkillPoints:t.get_SkillPoints,get_individualSkillsSpent:t.get_individualSkillsSpent,get_maxSkillPacketsAllowed:t.get_maxSkillPacketsAllowed,get_maxIndividualSkillsSpendable:t.get_maxIndividualSkillsSpendable,get_individualSkillsRemaining:t.get_individualSkillsRemaining,get_totalSkillPointsProvided:t.get_totalSkillPointsProvided,get_skillPacketsRemaining:t.get_skillPacketsRemaining,get_skillPacketsBought:t.get_skillPacketsBought,get_totalSkillPointsLeft:t.get_totalSkillPointsLeft,selectSchoolAssign:t.selectSchoolAssign,canStillSpendSchool:t.canStillSpendSchool,get_hasSchool:t.get_hasSchool,get_schoolProfLevel:t.get_schoolProfLevel,get_ProfPoints:t.get_ProfPoints,get_totalAvailProfSlots:t.get_totalAvailProfSlots,get_profArcCost:t.get_profArcCost,get_schoolArcCost:t.get_schoolArcCost,get_profExpenditure:t.get_profExpenditure,get_totalProfSlotExpenditure:t.get_totalProfSlotExpenditure,get_maxAvailableProfSlots:t.get_maxAvailableProfSlots,get_maxMeleeProfSlots:t.get_maxMeleeProfSlots,get_maxRangedProfSlots:t.get_maxRangedProfSlots,get_maxTalentSlots:t.get_maxTalentSlots,get_maxSuperiorSlots:t.get_maxSuperiorSlots,get_maxMasterySlots:t.get_maxMasterySlots,get_totalProfecienciesBought:t.get_totalProfecienciesBought,get_maxClampedMeleeProfs:t.get_maxClampedMeleeProfs,get_maxClampedRangedProfs:t.get_maxClampedRangedProfs,get_levelsExpenditure:t.get_levelsExpenditure,get_totalProfArcExpenditure:t.get_totalProfArcExpenditure,get_profPointsLeft:t.get_profPointsLeft,get_traceProfCoreRangedCurrent:t.get_traceProfCoreRangedCurrent,get_traceProfCoreMeleeCurrent:t.get_traceProfCoreMeleeCurrent,get_traceProfCoreRangedCount:t.get_traceProfCoreRangedCount,get_traceProfCoreMeleeCount:t.get_traceProfCoreMeleeCount,saveFinaliseCleanupChar:t.saveFinaliseCleanupChar},this.props={exitBtnCallback:{required:!1,type:Function},finaliseSaveCallback:{required:!1,type:Function}},this.watch={maxBoonsSpendableLeft:t.watch_maxBoonsSpendableLeft,raceTier:t.watch_raceTier,socialEitherMaxIndex:t.watch_socialEitherMaxIndex,wealthEitherMaxIndex:t.watch_wealthEitherMaxIndex,syncSocialWealth:t.watch_syncSocialWealth,socialClassIndex:t.watch_socialClassIndex,wealthIndex:t.watch_wealthIndex,socialBenefit1:t.watch_socialBenefit1,socialBenefit2:t.watch_socialBenefit2,socialBenefit3:t.watch_socialBenefit3,validAffordCurrentSchool:t.watch_validAffordCurrentSchool,excessDraftedSlots:t.watch_excessDraftedSlots}},__class__:Ci});var Ai=function(){B.call(this),this.mixins=[Ii.getSampleInstance(),Ui.getInstance(),new Li(null)]};n["troshx.sos.vue.CharSheetVue"]=Ai,Ai.__name__=["troshx","sos","vue","CharSheetVue"],Ai.__super__=B,Ai.prototype=r(B.prototype,{setInventory:function(t){this.char.inventory=t},get_domainId:function(){return ki.DOMAIN_CHARACTER},Mounted:function(){null!=this.autoLoadChar&&this.openTreeBrowser()},recoverFatique:function(t){this.char.fatique-=t,this.char.fatique<0&&(this.char.fatique=0)},Data:function(){return new xi(this.injectChar)},Created:function(){yi.dynSetField=Vue.set,yi.dynDeleteField=Vue.delete},Components:function(){var t={};return t.BoonBaneInput=new Zi,t["bb-apply"]=new wr,t.SkillLibInput=new Xi,t.SkillSubjectCreator=new Lr,t.InputNameLabel=new Yi,t.ArrayOf=new er,t.ArrayOfBits=new nr,t.Bitmask=new rr,t.Money=new pr,t.ModifierList=new Ir,t.inventory=new Mi,t["inventory-manager"]=new Ti,t["tree-browser"]=new Sr,t},openTreeBrowser:function(){var t=this;this.treeBrowserInited||(this.treeBrowserInited=!0),Vue.nextTick(function(){t.$refs.treeBrowser.open()})},openClipboardWindow:function(){this.clipboardLoadContents="",this.$refs.clipboardWindow.open()},openFromTreeBrowser:function(t,e,n){this.loadCharContents(t)&&(this.$refs.treeBrowser.close(),this.setWindowTitleWithCharUID()),this.autoLoadChar=null},setWindowTitleWithCharUID:function(){var t=this.char.get_uid();""!=t&&(window.document.title=t,this.theWindowTitle=t)},get_availableTypes:function(){return{"troshx.sos.sheets.CharSheet":!0}},get_hasSampleWound:function(){return this.char.hasWound(this.sampleWound)},get_sampleWoundGotSide:function(){return this.char.body.gotSideWithId(this.sampleWound.locationId)},deleteWound:function(t){this.char.removeWound(t)},checkConfirmDeleteWound:function(t){this.woundMayDelete=t,this.$refs.confirmDeleteWoundWindow.open()},confirmDeleteWound:function(){this.deleteWound(this.woundMayDelete),this.$refs.confirmDeleteWoundWindow.close()},confirmAddWound:function(){var t=this.sampleWound;this.forceNewSampleWound&&t.makeUnique(),this.sampleWound=null,this.char.applyWound(t),this.$refs.addWoundWindow.close()},get_woundFlagLabels:function(){return jn.getFlagLabels()},get_damageTypeLabels:function(){return fn.getFlagLabels()},matchExistingSampleWound:function(){var t=this.sampleWound,e=this.char,n=e.woundHash[t.getUID(e.body)];t.pain=n.pain,t.BL=n.BL,t.stun=n.stun},openAddNewWound:function(){this.sampleWound=jn.getNewEmptyAssign(),this.forceNewSampleWound=!1,this.$refs.addWoundWindow.open()},exitInventory:function(){var t=this;this.insideInventory=!1,Vue.nextTick(function(){var e=t.$refs.inventoryHolder;window.scroll({top:e.offsetTop})})},proceedToInventory:function(){var t=this;this.insideInventory=!0,Vue.nextTick(function(){var e=t.$refs.inventoryHolder;window.scroll({top:e.offsetTop})})},saveFinaliseSkills:function(){this.char.skills.clearAllSkills(!0);for(var t=0,e=this.skillObjs.length;t<e;){var n=t++,i=this.skillObjs[n],r=this.skillValues[i.name];r>0&&(this.char.skills.skillHash[i.name]=r)}},loadCharacter:function(){this.loadCharContents(this.savedCharContents)},loadCharacterClipboardWindow:function(){this.loadCharContents(this.clipboardLoadContents)&&this.$refs.clipboardWindow.close()},loadCharContents:function(t){var e;try{e=new C(t).unserialize()}catch(t){return t instanceof V&&(t=t.val),console.log(t),q.alert("Sorry, failed to unserialize save-content string!"),!1}if(!D.__instanceof(e,yi))return console.log(e),q.alert("Sorry, unserialized type isn't CharSeet!"),!1;var n=D.__instanceof(e,yi)?e:null;return this.charIsSerializing=!0,n.postSerialization(),this.char=n,!0},saveCharacter:function(){this.saveFinaliseSkills(),this.saveFinaliseCleanupChar(),this.saveCharToBox()},saveFinaliseCleanupChar:function(){this.char.boons.filter(function(t){return!t._canceled}),this.char.banes.filter(function(t){return!t._canceled}),this.char.inventory.cleanupBeforeSerialize()},deleteStaticModifierAt:function(t,e){this.char.staticModifierTable[e].splice(t,1)},deleteSituationalCharModifierAt:function(t,e){this.char.situationalModifierTable[e].splice(t,1)},executeCopyContents:function(){var t=this.$refs.savedCharTextArea;if(new s("/ipad|ipod|iphone","i").match(window.navigator.userAgent)){var e=t,n=e.contentEditable,i=e.readOnly;e.contentEditable="true",e.readOnly=!1;var r=window.document.createRange();r.selectNodeContents(e);var a=window.getSelection();a.removeAllRanges(),a.addRange(r),e.setSelectionRange(0,9999999),e.contentEditable=n,e.readOnly=i}else t.select();if(window.document.execCommand("copy")){var o=this.$refs.copyNotify;o.style.display="inline-block",w.delay(function(){o.style.display="none"},3e3)}else q.alert("Sorry, failed to copy to clipboard!")},saveCharToBox:function(){var t=new y;t.useCache=!0,t.serialize(this.char);var e=t.toString();return this.savedCharContents=e,e},get_maxAvailableProfSlots:function(){return null!=this.char.school?this.char.school.profLimit:0},get_maxMeleeProfSlots:function(){var t=this.maxAvailableProfSlots-this.profCoreListRanged.length;return null!=this.char.school?t<0?0:t:0},get_maxRangedProfSlots:function(){var t=this.maxAvailableProfSlots-this.profCoreListMelee.length;return null!=this.char.school?t<0?0:t:0},get_talentsAvailable:function(){return Xe.getTalentsAvailable()},get_superiorsAvailable:function(){return Xe.getSuperiorsAvailable()},get_maxTalentSlots:function(){var t=this.char.schoolLevel>0?this.talentsAvailable[this.char.schoolLevel-1]:0;return null!=this.char.school?t:0},get_maxSuperiorSlots:function(){var t=this.char.schoolLevel>0?this.superiorsAvailable[this.char.schoolLevel-1]:0;return null!=this.char.school?t:0},addSkill:function(t,e){var n,i;null==(n=this.skillSubjectHash[t])&&(n=[],Vue.set(this.skillSubjectHash,t,n)),null==(i=this.skillSubjectHash[e])&&(i=[],Vue.set(this.skillSubjectHash,e,i)),n.push(e),i.push(t);var r=t+" ("+e+")";Vue.set(this.skillValues,r,0),this.skillObjs.push({name:r,attribs:0})},setModifierTabIndex:function(t){var e=Tn;this.customModifier.index=e[t]},openModifiersWindow:function(){this.customModifier=Ln.create(null!=this.customModifier?this.customModifier.index:0,"",0,1),this.customModifier.custom=!0,this.$refs.modifiersWindow.open()},addCustomModifier:function(){var t=this.customModifier;this.customModifier=Ln.create(null!=this.customModifier?this.customModifier.index:0,"",0,1),this.customModifier.custom=!0;var e=this.char;if(null!=t){var n=e.staticModifierTable[t.index];n.push(t);for(var i=t.next;null!=i;)(n=e.staticModifierTable[i.index]).push(i),i=i.next}},deleteSkillInput:function(t){var e=this.skillObjs[t],n=Wn.getSplitFromSpecialisation(e.name),i=n[0],r=n[1],s=this.skillSubjectHash[i],a=this.skillSubjectHash[r];s.splice(s.indexOf(r),1),a.splice(s.indexOf(i),1),Xe.dynDeleteField(this.skillValues,e.name),this.skillObjs.splice(t,1)},Template:function(){return'<div class="chargen">\r\n\t<br/>\r\n\t<h1>Song of Swords: Character Sheet &nbsp;&nbsp;<button v-on:click="openTreeBrowser" v-show="!insideInventory">&#127759;</button> <button  v-show="!insideInventory" v-on:click="$refs.clipboardWindow.open()">&#128203;</button></h1>\r\n\t\r\n\t<sweet-modal ref="treeBrowser" :class="{reset:true}" v-if="treeBrowserInited" >\t\t\r\n\t\t<tree-browser :availableTypes="availableTypes" v-on:open="openFromTreeBrowser" :initialDomain="domainId" :autoLoad="autoLoadChar" />\r\n\t</sweet-modal>\r\n\t\r\n\t<sweet-modal ref="confirmDeleteWoundWindow" >\r\n\t\t<h3>Delete Wound?</h3>\r\n\t\t<button v-on:click="confirmDeleteWound">Confirm</button>\r\n\t</sweet-modal>\r\n\t\r\n\t<sweet-modal ref="modifiersWindow" class="reset reset-tabs">\r\n\t\t<sweet-modal-tab :title="getModifierTabTitle(li)" :key="li" :id="li" v-for="(li, i) in modifierVars" v-on:click.native="setModifierTabIndex(li)">\r\n\t\t\t<ul>\r\n\t\t\t\t<li v-for="(m, mi) in char.staticModifierTable[dynModifiers[li]]" :key="mi">{{ m.name }}: x{{m.multiply}}+{{m.add}}<span v-show="false"> [<a href="javascript:;" v-on:click="deleteStaticModifierAt(mi,i)">x</a>]</span><span v-show="m.custom">&nbsp;<a href="javascript:;" v-on:click="deleteStaticModifierAt(mi, i)">[x]</a></span></li>\r\n\t\t\t\t<li v-for="(m, mi) in char.situationalModifierTable[dynModifiers[li]]" :key="\'s\'+mi">{{ m.name }}()}}<span v-show="true">&nbsp;[<a href="javascript:;" v-on:click="deleteSituationalCharModifierAt(mi, i)">x</a>]</span></li>\r\n\t\t\t</ul>\r\n\t\t\t<div v-if="customModifier!=null">\r\n\t\t\t\t<h4>Add Custom Modifier</h4>\r\n\t\t\t\t<div><label>Name: <InputString :obj="customModifier" prop="name"></InputString></label></div>\r\n\t\t\t\t<div><label>x</label><InputNumber :obj="customModifier" prop="multiply" :step="0.5" :min="0" /> <label>+<InputInt :obj="customModifier" prop="add" /></label></div>\r\n\t\t\t\t<div><button v-on:click="addCustomModifier" :disabled="customModifier.name==\'\'">Add</button></div>\r\n\t\t\t</div>\r\n\t\t</sweet-modal-tab>\r\n\t</sweet-modal>\r\n\t\r\n\t<sweet-modal ref="addWoundWindow" >\r\n\t\t<div v-if="sampleWound!=null">\r\n\t\t\t<h3>Add/Apply Wound</h3>\r\n\t\t\t<div>Location: \r\n\t\t\t<select v-model="sampleWound.locationId">\r\n\t\t\t\t<option value="" :key=""></option>\r\n\t\t\t\t<option v-for="(li, i) in char.body.hitLocations" :value="li.get_uid()" :key="li.get_uid()">{{li.name}}</option>\r\n\t\t\t</select> <span :style="!sampleWoundGotSide ? {\'pointer-events\':\'none\',\'opacity\':.17} : undefined"><label>L<input type="radio" :checked="sampleWound.leftSide" v-on:click="sampleWound.leftSide=true"></input></label><label>R<input type="radio" v-on:click="sampleWound.leftSide=false" :checked="!sampleWound.leftSide"></input></label></span></div>\r\n\t\t\t<div>Level: <InputInt :obj="sampleWound" prop="level" :min="0" /></div>\r\n\t\t\t<div>Damage Type: \r\n\t\t\t<select v-model.number="sampleWound.damageType" number>\r\n\t\t\t\t<option :value="-1" :key="-1"></option>\r\n\t\t\t\t<option v-for="(label, index) in damageTypeLabels" :key="index" :value="index">{{ label }}</option>\r\n\t\t\t</select></div>\r\n\t\t\t<div :style="{opacity: (!hasSampleWound ? .5 : 1), \'pointer-events\': (!hasSampleWound ? \'none\':\'auto\') }"><label>Force New? <input type="checkbox" v-model="forceNewSampleWound"></input></label></div>\r\n\t\t\t<div><button v-on:click="confirmAddWound">Confirm {{ !hasSampleWound || forceNewSampleWound ? \'Add\' : \'Re-inflict\' }}</button></div>\r\n\t\t\t<hr/>\r\n\t\t\t<div>-<i>Inflict stats</i>-<button v-show="hasSampleWound" v-on:click="matchExistingSampleWound()">Set Existing</button></div>\r\n\t\t\t<div>Stun: <InputInt :obj="sampleWound" prop="stun" :min="-1" /> <i v-show="sampleWound.stun<0">Infinite!</i></div>\r\n\t\t\t<div>Pain: <InputInt :obj="sampleWound" prop="pain" :min="-1" /> <i v-show="sampleWound.pain<0">Infinite!</i></div>\r\n\t\t\t<div>BloodLost (BL): <InputInt :obj="sampleWound" prop="BL" :min="0" /></div>\r\n\t\t</div>\r\n\t</sweet-modal>\r\n\t\r\n\t<sweet-modal ref="clipboardWindow" :class="{reset:true}" >\t\t\r\n\t\t<div>\r\n\t\t\tYou can manually paste saved text stream into text-area and click on Load Character to open a new character!\r\n\t\t\t<div>\r\n\t\t\t\t<textarea ref="savedCharTextArea" character-set="UTF-8" v-model="clipboardLoadContents" style="min-height:60px;"></textarea>\t\r\n\t\t\t</div>\r\n\t\t\t<div><button v-on:click="loadCharacterClipboardWindow()">Load Character</button></div>\r\n\t\t</div>\r\n\t</sweet-modal>\r\n\t\r\n\t<div class="chargen__body" v-if="char!=null && !insideInventory && !charIsSerializing">\r\n\t\t\r\n\t\t<sweet-modal ref="awardArcWindow" v-if="false">\r\n\t\t\t<div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\tHow much arc to AWARD?\r\n\t\t\t\t</div>\r\n\t\t\t\t<br/>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<InputInt :obj="$data" prop="arcAwardQty" :min="1" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<br/>\r\n\t\t\t\t<button slot="button" v-on:click="awardArc(arcAwardQty)">Award</button>\r\n\t\t\t</div>\r\n\t\t</sweet-modal>\r\n\t\t\r\n\t\t<sweet-modal ref="spendArcWindow" v-if="false">\r\n\t\t\t<div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\tHow much arc to spend?\r\n\t\t\t\t</div>\r\n\t\t\t\t<br/>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<InputInt :obj="$data" prop="arcSpendQty" :min="minArcSpendable" :max="maxArcSpendable" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<br/>\r\n\t\t\t\t<button slot="button" v-on:click="spendArc(arcSpendQty)">Award</button>\r\n\t\t\t</div>\r\n\t\t</sweet-modal>\r\n\t\t\t\r\n\t\t\t\r\n\t\t\r\n\t\t<section class="gen-general" id="gen-general">\r\n\t\t\t<div class="gen-col">\r\n\t\t\t\t<div><label>Name:<InputNameLabel :obj="char" prop="name"></InputNameLabel></label></div>\r\n\t\t\t\t<div><label>Title <i>(optional)</i>:<InputNameLabel :obj="char" prop="title"></InputNameLabel></label></div>\r\n\t\t\t\t<div><label>Nickname <i>(optional)</i>:<InputNameLabel :obj="char" prop="nickname"></InputNameLabel></label></div>\r\n\t\t\t\t<div><label>Faction/Assosiation <i>(optional)</i>:<InputNameLabel :obj="char" prop="faction"></InputNameLabel></label></div>\r\n\t\t\t\t<div><label>Gender:</label><select number v-model.number="char.gender"><option :value="0">Male</option><option :value="1">Female</option></select></div>\r\n\t\t\t\t<div><label>Left-handed?:<input type="checkbox" v-model="char.leftHanded"></input></label></div>\r\n\t\t\t\t<br/>\r\n\t\t\t\tKnown as: <b>{{addressedAs}}</b> &nbsp;&nbsp;&nbsp;&nbsp;<button class="inherit" v-on:click="setWindowTitleWithCharUID" v-show="addressedAs!=\'\' && addressedAs!=theWindowTitle">Set as Window Title</button>\r\n\t\t\t\t<div>Race: <b>{{raceName}}</b></div>\r\n\t\t\t\t<div>Social Class/Wealth: <b>{{char.socialClass.name}} / {{char.socialClass.wealth}}</b> <label>&#128274;</label><input type="checkbox" v-model="lockWealth"></input></div>\r\n\t\t\t\t<div><Money :obj="char" prop="money" :readonly="lockWealth"></Money></div>\r\n\t\t\t\t<div class="wealth-assets">\r\n\t\t\t\t\t<label>Your Wealth Assets:</label>\r\n\t\t\t\t\t<ArrayOf of="WealthAssetAssign" :defaultValue="getEmptyWealthAssign" :obj="char" prop="wealthAssets" :minLength="0" :readonly="lockWealth" />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class="gen-col">\r\n\t\t\t\t<label style="vertical-align:top">Notes:</label><textarea v-model="char.notes"  class="notes"></textarea>\r\n\t\t\t</div>\r\n\t\t</section>\r\n\t\r\n\t\t<hr/>\r\n\t\t\t\r\n\t\t<section class="gen-attributes" id="gen-attributes">\r\n\t\t\t<h2>Attributes &amp; Stats <span class="valuer"><label>&#128274;</label><input type="checkbox" v-model="lockAttributes"></input></span></h2>\r\n\t\t\t<div class="gen-col">\r\n\t\t\t\t<div><label>Strength:</label><InputInt :obj="char" prop="strength" :min="1" :readonly="lockAttributes" /><span class="modified-attribute" v-show="strength != STR" :class="[STR<strength ? \'lower\' : \'higher\', {\'zero-neg\':STR<=0} ]">{{STR}}</span></div>\r\n\t\t\t\t<div><label>Agility:</label><InputInt :obj="char" prop="agility" :min="1" :readonly="lockAttributes" /><span class="modified-attribute" v-show="agility != AGI" :class="[AGI<agility ? \'lower\' : \'higher\', {\'zero-neg\':AGI<=0}]">{{AGI}}</span></div>\r\n\t\t\t\t<div><label>Endurance:</label><InputInt :obj="char" prop="endurance" :min="1" :readonly="lockAttributes" /><span class="modified-attribute" v-show="endurance != END" :class="[END<endurance ? \'lower\' : \'higher\', {\'zero-neg\':END<=0}]">{{END}}</span></div>\r\n\t\t\t\t<div><label>Health:</label><InputInt :obj="char" prop="health" :min="1" :readonly="lockAttributes" /><span class="modified-attribute" v-show="health != HLT" :class="[HLT<health ? \'lower\' : \'higher\', {\'zero-neg\':HLT<=0}]">{{HLT}}</span></div>\r\n\t\t\t\t<div><label>Willpower:</label><InputInt :obj="char" prop="willpower" :min="1" :readonly="lockAttributes" /><span class="modified-attribute" v-show="willpower != WIP" :class="[WIP<willpower ? \'lower\' : \'higher\', {\'zero-neg\':WIP<=0}]">{{WIP}}</span></div>\r\n\t\t\t\t<div><label>Wit:</label><InputInt :obj="char" prop="wit" :min="1" :readonly="lockAttributes" /><span class="modified-attribute" v-show="wit != WIT" :class="[WIT<wit ? \'lower\' : \'higher\', {\'zero-neg\':WIT<=0}]">{{WIT}}</span></div>\r\n\t\t\t\t<div><label>Intelligence:</label><InputInt :obj="char" prop="intelligence" :min="1" :readonly="lockAttributes" /><span class="modified-attribute" v-show="intelligence != INT" :class="[INT<intelligence ? \'lower\' : \'higher\', {\'zero-neg\':INT<=0}]">{{INT}}</span></div>\r\n\t\t\t\t<div><label>Perception:</label><InputInt :obj="char" prop="perception" :min="1" :readonly="lockAttributes" /><span class="modified-attribute" v-show="perception != PER" :class="[PER<perception ? \'lower\' : \'higher\', {\'zero-neg\':PER<=0}]">{{PER}}</span></div>\r\n\t\t\t\t<div><label>Grit Accum:</label><InputInt :obj="char" prop="gritAccum" :min="0" :readonly="lockAttributes" /></div>\r\n\t\t\t</div>\r\n\t\t\t<div class="gen-col">\r\n\t\t\t\t<div><b>ADR</b> (Adroitness): <span class="modified-attribute" :class="[ADR==adr ?\'base\' : ADR<adr ? \'lower\' : \'higher\']"><b>{{ADR}}</b></span><i v-show="adr!=ADR" class="baseshow">({{adr}})</i></div>\r\n\t\t\t\t<div><b>SDB</b> (Strength Damage Bonus): <span><b>{{SDB}}</b></span></div>\r\n\t\t\t\t<div><b>GRIT</b> (Grit): <span class="modified-attribute" :class="[baseGrit==GRIT ?\'base\' : GRIT<baseGrit ? \'lower\' : \'higher\']"><b>{{GRIT}}</b></span><i v-show="baseGrit!=GRIT" class="baseshow">({{baseGrit}})</i></div>\r\n\t\t\t\r\n\t\t\t\t<div><b>MOB</b> (Mobility): <span class="modified-attribute" :class="[MOB==mob ?\'base\' : MOB<mob ? \'lower\' : \'higher\']"><b>{{MOB}}</b></span><i v-show="mob!=MOB" class="baseshow">({{mob}})</i></div>\r\n\t\t\t\t<div><b>CAR</b> (Carry): <span class="modified-attribute" :class="[CAR==car ?\'base\' : CAR<car ? \'lower\' : \'higher\']"><b>{{CAR}}</b></span><i v-show="car!=CAR" class="baseshow">({{car}})</i></div>\r\n\t\t\t\t\r\n\t\t\t\t<div><b>CHA</b> (Charisma): <span class="modified-attribute" :class="[CHA==cha ?\'base\' : CHA<cha ? \'lower\' : \'higher\']"><b>{{CHA}}</b></span><i v-show="cha!=CHA" class="baseshow">({{cha}})</i></div>\r\n\t\t\t\t\r\n\t\t\t\t<div><i>TOU</i> (Toughness): <span class="modified-attribute" :class="[TOU==tou ?\'base\' : TOU<tou ? \'lower\' : \'higher\']"><b>{{TOU}}</b></span><i v-show="tou!=TOU" class="baseshow">({{tou}})</i></div>\r\n\t\t\t\t<hr/>\r\n\t\t\t\t<div>Weight/Carry: <b>{{inventoryWeightLbl}}</b> / <b :style="{fontWeight:encumbranceLvl>=1 ?\'normal\':\'bold\'}">{{CAR}}</b></div>\r\n\t\t\t\t<div>Master-hand: <span v-if="masterHandItem!=null"><b>{{masterHandItem.name}}</b> <span v-show="masterWeapon!=null"><span v-html="masterWeapon.ranged ? \'&#9678;\' : \'&#9876;\'"></span></span><span v-if="carriedShield!=null && carriedShield==masterHandItem"><span class="shield-icon-inv">☗</span><select v-model.number="char.inventory.shieldPosition" number><option :value="0">Low</option><option :value="1">High</option></select></span></span></div>\r\n\t\t\t\t<div>Off-hand: <span v-if="offHandItem==null && masterHandItem!=null && masterHandItem.get_twoHanded()">-</span><span v-if="offHandItem!=null"><b>{{offHandItem.name}}</b> <span v-show="offhandWeapon!=null"><span v-html="offhandWeapon.ranged ? \'&#9678;\' : \'&#9876;\'"></span></span><span v-if="carriedShield!=null && carriedShield==offHandItem"><span class="shield-icon-inv">☗</span><select v-model.number="char.inventory.shieldPosition" number><option :value="0">Low</option><option :value="1">High</option></select></span></span></div>\r\n\t\t\t\t<div>Reach: <span class="modified-attribute" :class="[reachBase==reach ?\'base\' : reach<reachBase ? \'lower\' : \'higher\']"><b>{{reach}}</b></span><i v-show="reachBase!=reach" class="baseshow">({{reachBase}})</i></div>\r\n\t\t\t\t<div>Perception Penalty: <b>{{ perceptionPenalty }}</b><span v-show="perceptionPenalty > 0"> (<b>{{perceptionPenalized }}</b> left.)</span></div>\r\n\t\t\t\t<div v-if="heldProfeciencies!=null">{{heldProfeciencyIcons}}: <b style="max-width:120px">{{heldProfeciencies}}</b></div>\r\n\t\t\t\t<div v-else>Defaulting&#9876;from:<br/><b style="max-width:120px">{{defaultProfs}}</b></div>\r\n\t\t\t</div>\r\n\t\t\t<div class="gen-col">\r\n\t\t\t\t<div>School Level: <b>{{char.schoolLevel}}</b></div>\r\n\t\t\t\t<div class="cp"><b>CP</b> (Melee Combat Pool): <span :class="[CP==baseCP ?\'base\' : CP<baseCP ? \'lower\' : \'higher\', {\'modified-attribute\':CP != baseCP}]"><b>{{CP}}</b></span><i v-show="CP!=baseCP" class="baseshow">({{baseCP}})</i>  (<i>{{CP-char.schoolLevel}}</i> CP without &#9876;)</div>\r\n\t\t\t\t\r\n\t\t\t\t<div><i>CP - Pain(<span v-show="pain>0" class="got-pain">{{pain}}</span>):</i> <b>{{meleeCP}}</b> (<i>{{meleeCP-char.schoolLevel}}</i> CP without &#9876;)</div>\r\n\t\t\t\t<br/>\r\n\t\t\t\t<div>Encumbrance Level: <span><b :style="{fontWeight:encumbranceLvl>=1 ?\'bold\':\'normal\'}">{{encumbranceLvlRow.name}}</b>({{encumbranceLvl}})</span></div>\r\n\t\t\t\t<div>Skill Penalty: <span><b>{{skillPenalty}}</b></span></div>\r\n\t\t\t\t<div>Exhaustion Rate: <span><b>{{exhaustionRate}}x</b></span></div>\r\n\t\t\t\t<div>Recovery Amount: <span class="modified-attribute" :class="[recoveryRateAmount==recoveryRateAmountBase ?\'base\' : recoveryRateAmount<recoveryRateAmountBase ? \'lower\' : \'higher\']"><b>{{recoveryRateAmount}} <i>({{recoveryRate}}x)</i></b></span><i v-show="recoveryRateAmount!=recoveryRateAmountBase" class="baseshow">({{recoveryRateAmountBase}})</i><a v-show="char.fatique > 0" href="javascript:;" v-on:click="recoverFatique(recoveryRateAmount)">[+]</a></div>\r\n\t\t\t\t<hr/>\r\n\t\t\t\t<div><b>Fatique Points:</b><InputInt :min="0" :obj="char" prop="fatique" /> {{fatiqueLevel}}:<b :style="{fontWeight:fatiqueLevel>=1 ?\'bold\':\'normal\'}">{{curFatiqueRow.name}}</b></div>\r\n\t\t\t\t<div><label><input type="checkbox" v-model="char.prone"></input>Prone?</label></div>\r\n\t\t\t\t<hr/>\r\n\t\t\t\t<div><b>Health Lost:</b><InputInt :min="0" :obj="char" prop="healthLoss" /></div>\r\n\t\t\t</div>\r\n\t\t\t<div class="gen-col">\r\n\t\t\t\t<button v-on:click="openModifiersWindow">&#128200;</button>\r\n\t\t\t\t<ul v-if="customModifierListings.length > 0">\r\n\t\t\t\t\t<li v-for="(li, i) in customModifierListings">{{li}}</li>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t</section>\r\n\r\n\t\t<hr/>\r\n\t\t\t\t\r\n\t\t<section class="gen-wounds" id="gen-wounds">\r\n\t\t\t<h2>Wounds <span class="valuer"><label>&#128274;</label><input type="checkbox" v-model="lockWounds"></input></span> <span class="valuer"><button v-on:click="openAddNewWound()">Add/Apply Wound</button></span></h2>\r\n\t\t\t<ul v-if="char.wounds.length > 0" class="wounds">\r\n\t\t\t\t<li v-for="(li, i) in char.wounds" :key="li.getUID(char.body)">{{li.getDescLabel(char.body, damageTypeLabels)}} <span class="stats"><span><label>Stun:<InputInt :readonly="lockWounds" :min="-1" :obj="li" prop="stun" /></label><i v-show="li.stun<0">infinite!</i></span> <span><label>Pain:<InputInt :readonly="lockWounds" :min="-1" :obj="li" prop="pain" /></label><i v-show="li.pain<0">infinite!</i></span> <span><label>BL:<InputInt :readonly="lockWounds" :min="0" prop="BL" :obj="li"  /></label></span> <Bitmask :obj="li" prop="flags" :labels="woundFlagLabels" /> <span><label>Notes:<InputString :min="0" prop="notes" :obj="li" class="notes"  /></label></span> <span><label>Age:<InputNumber :min="0" prop="age" :obj="li"  /></label></span> <a href="javascript:;" v-on:click="checkConfirmDeleteWound(li)">[x]</a></span></li>\r\n\t\t\t</ul>\r\n\t\t\t<div>\r\n\t\t\t\t<div>Total Pain: <b>{{totalPain}}</b></div>\r\n\t\t\t\t<div>Pain() felt: <b>{{pain}}</b></div>\r\n\t\t\t\t<div>Total Blood Lost (BL): <b>{{totalBloodLost}}</b></div>\r\n\t\t\t</div>\r\n\t\t</section>\r\n\t\t\t\t\r\n\t\t<hr/>\r\n\t\t\t\r\n\t\t<section class="gen-bnb"  id="gen-bnb">\r\n\t\t\t<h2>Boons &amp; Banes</h2>\r\n\t\t\t<h3><span class="underline">Boons (if any):</span><span class="header-liners"><a :href="li.__hasUIFields__ ? \'javascript:;\' : undefined" :class="{canceled:li._canceled}" v-for="li in boonsArray"><span v-if="li.__hasUIFields__" v-on:click="$refs[\'bb_\'+li.get_uid()][0].open()">{{li.boon.name}} {{getBracketLabelBnB(li)}}</span><span v-else>{{li.boon.name}} {{getBracketLabelBnB(li)}}</span></a></span></h3>\r\n\t\t\t<h3><span>Banes (if any):</span><span class="header-liners"></span><span class="header-liners"><a :href="li.__hasUIFields__ ? \'javascript:;\' : undefined"  :class="{canceled:li._canceled}" v-for="li in banesArray"><span v-if="li.__hasUIFields__" v-on:click="$refs[\'bb_\'+li.get_uid()][0].open()">{{li.bane.name}} {{getBracketLabelBnB(li)}}</span><span v-else>{{li.bane.name}} {{getBracketLabelBnB(li)}}</span></a></span></h3>\r\n\t\t\t<div class="opencloselink"><a href="#" v-show="showBnBs" v-on:click.prevent="showBnBs=false">^ Hide</a><a href="#" v-show="!showBnBs" v-on:click.prevent="showBnBs=true">Show More &gt;</a> &nbsp;&nbsp;</div>\r\n\t\t\t<div v-show="showBnBs">\r\n\t\t\t\t<div class="new-bnbs">\r\n\t\t\t\t\t<h3>Choose Boons <span class="valuer"><label>&#128274;</label><input type="checkbox" v-model="lockBoons"></input></span></h3>\r\n\t\t\t\t\t<div class="boon-tags">\r\n\t\t\t\t\t\t<BoonBaneInput v-for="(li, i) in boonAssignList" :key="i" :obj="li" :readonly="lockBoons" prop="rank" v-on:resetBB="resetBB" v-on:uncancel="uncancel" v-on:addBB="addBB" v-on:removeBB="removeBB"  v-on:updateRankBB="updateRankBB" v-on:updateCanceledBB="updateCanceledBB" />\r\n\t\t\t\t\t</div>\t\r\n\t\t\t\t\t<h3>Choose Banes <span class="valuer"><label>&#128274;</label><input type="checkbox" v-model="lockBanes"></input></span></h3>\r\n\t\t\t\t\t<div class="bane-tags">\r\n\t\t\t\t\t\t<BoonBaneInput v-for="(li, i) in baneAssignList" :key="i" :obj="li" :readonly="lockBanes" prop="rank" v-on:resetBB="resetBB" v-on:uncancel="uncancel"  v-on:addBB="addBB" v-on:removeBB="removeBB"  v-on:updateRankBB="updateRankBB" v-on:updateCanceledBB="updateCanceledBB" />\t\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\r\n\t\t\t<sweet-modal v-for="(li,i) in boonsArray" :key="\'bb_\'+li.get_uid()" :ref="\'bb_\'+li.get_uid()"  >\t\t\r\n\t\t\t\t<bb-apply :assign="li" :remainingPoints="maxBoonsSpendableLeft" :ingame="char.ingame"></bb-apply>\r\n\t\t\t</sweet-modal>\r\n\r\n\t\t\t\r\n\t\t\t<sweet-modal v-for="(li,i) in banesArray" :key="\'bb_\'+li.get_uid()" :ref="\'bb_\'+li.get_uid()"  >\r\n\t\t\t\t<bb-apply :assign="li" :ingame="char.ingame" v-on:callback="onBaneCallbackReceived"></bb-apply>\r\n\t\t\t</sweet-modal>\r\n\t\t\r\n\t\t</section>\r\n\t\t<hr/>\r\n\t\t\t\r\n\t\t<section class="gen-skills"  id="gen-skills">\r\n\t\t\t<h2>Skills</h2>\r\n\t\t\t<h3>Skill(s): <span class="header-liners"><span v-for="(skillObj, i) in skillObjs" :key="skillObj.name" v-if="skillValues[skillObj.name]>0">{{ skillObj.name }}:<b>{{skillValues[skillObj.name]}}</b></span></span></h3>\r\n\t\t\t<div class="opencloselink"><a href="#" v-show="showEditSkills" v-on:click.prevent="showEditSkills=false">^ Hide</a><a href="#" v-show="!showEditSkills" v-on:click.prevent="showEditSkills=true">Show More &gt;</a> &nbsp;&nbsp;</div>\r\n\t\t\t<div v-show="showEditSkills">\r\n\t\t\t\t<div class="new-skills">\r\n\t\t\t\t\t<div class="skill-lib">\r\n\t\t\t\t\t\t<SkillLibInput v-for="(skillObj, i) in skillObjs" v-if="!skillsTable.requiresSpecialisation[skillObj.name]" :index="i" :key="skillObj.name" :obj="skillValues" :prop="skillObj.name" :skillsTable="skillsTable" :canDelete="i>=startingSkillObjsCount"  v-on:delete="deleteSkillInput" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<SkillSubjectCreator :skillSubjects="skillSubjects" :skillValues="skillValues" :skillList="specialisedSkills" :skillSubjectHash="skillSubjectHash" v-on:addSkill="addSkill"  />\t\t\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</section>\r\n\t\t\t\r\n\t\t<hr/>\r\n\r\n\t\t<section class="gen-schoolprofs"  id="gen-schoolprofs">\r\n\t\t\t<h2>School &amp; Profeciencies <span class="valuer"><label>&#128274;</label><input type="checkbox" v-model="lockProfs"></input></span></h2></h2>\r\n\t\t\t<div class="select-school">\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<label class="lbl-school">School:</label> <span v-if="char.school!=null">{{char.school.name}}</span><b v-show="char.school==null">-</b> , <label class="lbl-level">Level:<InputInt :obj="char" prop="schoolLevel" :readonly="lockProfs" /></label>\r\n\t\t\t\t</div>\r\n\t\r\n\t\t\t</div>\r\n\t\t\t<div class="school-info" v-if="char.school != null">\r\n\t\t\t\t<div>Max Profeciencies: {{ char.school.profLimit }}</div>\r\n\t\t\t\t<div class="cost-info">Learning Profeciency/Arc Point Cost: ( <span :class="{selected:isHuman}"><b class="color-free">Free</b> - Human</span>, &nbsp; <span :class="{selected:!isHuman}"><b>3 points</b> - Non-human)</span></div>\r\n\t\t\t</div>\r\n\t\t\t<div class="prof-list">\r\n\t\t\t\t<div class="gen-col">\r\n\t\t\t\t\t<h5>&#9876; Melee Profeciencies:</h5>\r\n\t\t\t\t\t<ArrayOfBits :obj="$data" prop="profCoreListMelee" :labels="profCoreMeleeListNames" :bitmaskSetObj="char" bitmaskSetProp="profsMelee" :maxLength="char.school!=null ? maxMeleeProfSlots : undefined" :readonly="lockProfs" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="gen-col">\r\n\t\t\t\t\t<h5>&#9678; Ranged Profeciencies:</h5>\r\n\t\t\t\t\t<ArrayOfBits :obj="$data" prop="profCoreListRanged" :labels="profCoreRangedListNames" :bitmaskSetObj="char" bitmaskSetProp="profsRanged" :maxLength="char.school!=null ? maxRangedProfSlots : undefined" :readonly="lockProfs"  />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class="manuever-list gen-col">\r\n\t\t\t\t<h5>Superior Manuevers:</h5>\r\n\t\t\t\t<ArrayOf of="String" defaultValue="" :obj="char" prop="superiorManueverNotes"  :maxLength="char.school!=null ? maxSuperiorSlots : undefined" :readonly="lockProfs" />\r\n\t\t\t\t<h5>Mastery Manuever:</h5>\r\n\t\t\t\t<ArrayOf of="String" defaultValue="" :obj="char" prop="masteryManueverNotes" :maxLength="char.school!=null ? maxMasterySlots : undefined" :readonly="lockProfs" />\r\n\t\t\t</div>\r\n\t\t\t<div class="talent-list gen-col">\r\n\t\t\t\t<h5>Talents:</h5>\r\n\t\t\t\t<ArrayOf of="String" defaultValue="" :obj="char" prop="talentNotes" :maxLength="char.school!=null ? maxTalentSlots : undefined" :readonly="lockProfs" />\r\n\t\t\t</div>\t\t\r\n\t\t\t<div class="school-benefits gen-col" v-if="char.schoolBonuses != null">\r\n\t\t\t\t<h5>Benefits: <span class="tag" v-for="li in schoolTags" :key="li">{{li}}</span></h5>\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t</section>\r\n\t\t\r\n\t\t<hr/>\r\n\t\r\n\t\t<div ref="inventoryHolder">\r\n\t\t\t\r\n\t\t\t<inventory :inventory="char.inventory" :maxWeight="CAR" :injectWeight="inventoryWeight" v-on:loadSheet="loadSheet">\t\r\n\t\t\t\t<span slot="titleAfter">&nbsp;&nbsp;<button v-on:click="proceedToInventory">&#10064;</button></span>\r\n\t\t\t\t<span slot="weightAfter"><span><b :style="{fontWeight:encumbranceLvl>=1 ?\'bold\':\'normal\'}">{{encumbranceLvlRow.name}}</b>({{encumbranceLvl}})</span></span>\r\n\t\t\t</inventory>\r\n\t\t</div>\r\n\t\r\n\t\t<hr/>\r\n\t</div>\r\n\t\t\t\r\n\t<div class="chargen__footer" v-if="char!=null && !insideInventory">\r\n\t\t\t\r\n\t\t<div class="sect-arc">\r\n\t\t\t<h2>Arcs <span class="valuer"><label>&#128274;</label><input type="checkbox" v-model="lockArc"></input></span></h2>\r\n\t\t\t<div><label>Arc awarded: <InputInt :obj="char" :min="0" prop="arcPointsAccum" :readonly="lockArc" /></label></div>\r\n\t\t\t<div><label>Arc spent: <InputInt :obj="char" :min="0" prop="arcSpent" :readonly="lockArc" :max="char.arcPointsAccum" /></label></div>\r\n\t\t\t<div>Loaded (spent/awarded): <i>{{loadedArcSpent}}</i>/<i>{{loadedArcAccum}}</i></div>\r\n\t\t\t<br/>\r\n\t\t\t<div><label>Saga:</label><textarea v-model="char.arcSaga" class="notes"></textarea></div>\r\n\t\t\t<div><label>Epic:</label><textarea v-model="char.arcEpic" class="notes"></textarea></div>\r\n\t\t\t<div><label>Belief:</label><textarea v-model="char.arcBelief" class="notes"></textarea></div>\r\n\t\t\t<div><label>Glory:</label><textarea v-model="char.arcGlory" class="notes"></textarea></div>\r\n\t\t\t<div><label>Flaw:</label><textarea :disabled="!isHuman" v-model="char.arcFlaw" class="notes"></textarea></div>\r\n\t\t</div>\r\n\t\t\t\r\n\t\t<hr/>\r\n\t\t\t\r\n\t\t<div><button v-on:click="saveCharacter()">Save Character</button></div>\r\n\t\t<div><textarea ref="savedCharTextArea" character-set="UTF-8" v-model="savedCharContents" style="min-height:60px;">\r\n\t\t\t\r\n\t\t</textarea><button v-on:click="executeCopyContents()" ref="copyButton">Copy</button><i class="copy-notify" ref="copyNotify" style="display:none">copied!</i></div>\r\n\t\t<div><button v-on:click="loadCharacter()">Load Character!</button></div>\t\r\n\t</div>\r\n\r\n\t<div ref="inventoryHolder" v-if="char!=null">\r\n\t\t<inventory-manager v-if="insideInventory" :backBtnCallback="exitInventory" :inventory="char.inventory" :maxWeight="CAR" v-on:loadSheet="loadSheet">\r\n\t\t\t<span slot="weightAfter"><span><b :style="{fontWeight:encumbranceLvl>=1 ?\'bold\':\'normal\'}">{{encumbranceLvlRow.name}}</b>({{encumbranceLvl}})</span></span>\r\n\t\t</inventory-manager>\r\n\t</div>\r\n</div>\r\n'},get_placeholder:function(){return"[placeholder]"},watch_injectChar:function(t,e){this.char=t},watch_char:function(t){this.$data.initNewChar(),Vue.nextTick(Zr(this,this.postCharChange))},postCharChange:function(){this.charIsSerializing=!1},_Init:function(){var t=Ai.prototype;this.mounted=t.Mounted,this.data=t.Data,this.created=t.Created,this.components=this.Components(),this.template=this.Template(),this.computed={maxAvailableProfSlots:t.get_maxAvailableProfSlots,maxMeleeProfSlots:t.get_maxMeleeProfSlots,maxRangedProfSlots:t.get_maxRangedProfSlots,maxTalentSlots:t.get_maxTalentSlots,maxSuperiorSlots:t.get_maxSuperiorSlots,domainId:t.get_domainId,availableTypes:t.get_availableTypes,hasSampleWound:t.get_hasSampleWound,sampleWoundGotSide:t.get_sampleWoundGotSide,woundFlagLabels:t.get_woundFlagLabels,damageTypeLabels:t.get_damageTypeLabels,talentsAvailable:t.get_talentsAvailable,superiorsAvailable:t.get_superiorsAvailable,placeholder:t.get_placeholder},this.methods={setInventory:t.setInventory,get_domainId:t.get_domainId,recoverFatique:t.recoverFatique,openTreeBrowser:t.openTreeBrowser,openClipboardWindow:t.openClipboardWindow,openFromTreeBrowser:t.openFromTreeBrowser,setWindowTitleWithCharUID:t.setWindowTitleWithCharUID,get_availableTypes:t.get_availableTypes,get_hasSampleWound:t.get_hasSampleWound,get_sampleWoundGotSide:t.get_sampleWoundGotSide,deleteWound:t.deleteWound,checkConfirmDeleteWound:t.checkConfirmDeleteWound,confirmDeleteWound:t.confirmDeleteWound,confirmAddWound:t.confirmAddWound,get_woundFlagLabels:t.get_woundFlagLabels,get_damageTypeLabels:t.get_damageTypeLabels,matchExistingSampleWound:t.matchExistingSampleWound,openAddNewWound:t.openAddNewWound,exitInventory:t.exitInventory,proceedToInventory:t.proceedToInventory,saveFinaliseSkills:t.saveFinaliseSkills,loadCharacter:t.loadCharacter,loadCharacterClipboardWindow:t.loadCharacterClipboardWindow,loadCharContents:t.loadCharContents,saveCharacter:t.saveCharacter,saveFinaliseCleanupChar:t.saveFinaliseCleanupChar,deleteStaticModifierAt:t.deleteStaticModifierAt,deleteSituationalCharModifierAt:t.deleteSituationalCharModifierAt,executeCopyContents:t.executeCopyContents,saveCharToBox:t.saveCharToBox,get_maxAvailableProfSlots:t.get_maxAvailableProfSlots,get_maxMeleeProfSlots:t.get_maxMeleeProfSlots,get_maxRangedProfSlots:t.get_maxRangedProfSlots,get_talentsAvailable:t.get_talentsAvailable,get_superiorsAvailable:t.get_superiorsAvailable,get_maxTalentSlots:t.get_maxTalentSlots,get_maxSuperiorSlots:t.get_maxSuperiorSlots,addSkill:t.addSkill,setModifierTabIndex:t.setModifierTabIndex,openModifiersWindow:t.openModifiersWindow,addCustomModifier:t.addCustomModifier,deleteSkillInput:t.deleteSkillInput,get_placeholder:t.get_placeholder,watch_injectChar:t.watch_injectChar,watch_char:t.watch_char,postCharChange:t.postCharChange},this.props={exitBtnCallback:{required:!1,type:Function},injectChar:{required:!1,type:Object},finaliseSaveCallback:{required:!1,type:Function}},this.watch={injectChar:t.watch_injectChar,char:t.watch_char}},__class__:Ai});var xi=function(t){this.theWindowTitle="",this.arcSpendQty=0,this.arcAwardQty=0,this.forceNewSampleWound=!1,this.savedCharContents="",this.charIsSerializing=!1,this.clipboardLoadContents="",this.showEditSkills=!1,this.showBnBs=!1,this.customModifier=null,this.treeBrowserInited=!1,this.lockWounds=!0,this.lockArc=!0,this.lockWealth=!0,this.lockProfs=!0,this.lockBanes=!0,this.lockBoons=!0,this.lockAttributes=!0,this.char=null==t?new yi:t,this.autoLoadChar=ki.AUTO_LOAD,this.initNewChar()};n["troshx.sos.vue.CharSheetVueData"]=xi,xi.__name__=["troshx","sos","vue","CharSheetVueData"],xi.prototype={initNewChar:function(){this.sampleWound=null,this.woundMayDelete=null,this.profCoreListMelee=[],this.profCoreListRanged=[],this.sessionArcSpent=0,this.sessionArcAwarded=0,this.insideInventory=!1,this.loadedArcAccum=this.char.arcPointsAccum,this.loadedArcSpent=this.char.arcSpent,this.initBoons(),this.initSkills(),this.initProfs()},initProfs:function(){for(var t=0;t<31;){var e=t++;0!=(this.char.profsMelee&1<<e)&&this.profCoreListMelee.push(1<<e)}for(var n=0;n<31;){var i=n++;0!=(this.char.profsRanged&1<<i)&&this.profCoreListRanged.push(1<<i)}},initBoons:function(){var t,e=Ut.getList();this.boonAssignList=[],this.baneAssignList=[];for(var n=0,i=e.length;n<i;){var r=n++;t=e[r];var s=d.field(this.char.boons.hash,t.name);if(null!=s)this.boonAssignList.push(s);else{if(0!=(1&t.flags))continue;var a=this.boonAssignList;s=e[r].getAssign(0,this.char),a.push(s)}s._remainingCached=999}for(var o=_t.getList(),l=0,u=o.length;l<u;){var c=l++;t=o[c];var h=d.field(this.char.banes.hash,t.name);if(null!=h)this.baneAssignList.push(h);else{if(0!=(1&t.flags))continue;var p=this.baneAssignList;h=o[c].getAssign(0,this.char),p.push(h)}}},initSkills:function(){this.skillsTable=Fn.getNewDefaultSkillTable(),this.skillsTable.matchValuesWith(this.char.skills),this.skillObjs=this.skillsTable.getSkillObjectsAsArray(!0),this.specialisedSkills=this.skillsTable.getSpecialisationList(),this.setupEmptyMappings(),this.skillSubjectHash={};for(var t=0,e=d.fields(this.skillValues);t<e.length;){var n=e[t];++t;var i=Wn.getSplitFromSpecialisation(n);if(null!=i){var r,s,a=i[0],o=i[1];null==(r=this.skillSubjectHash[a])&&(r=[],this.skillSubjectHash[a]=r),null==(s=this.skillSubjectHash[o])&&(s=[],this.skillSubjectHash[o]=s),r.push(o),s.push(a)}}this.startingSkillObjsCount=this.skillObjs.length},setupEmptyMappings:function(){var t=[];this.skillValues={};for(var e=0,n=d.fields(this.skillsTable.skillHash);e<n.length;){var i=n[e];if(++e,!this.skillsTable.requiresSpecialisation[i]){var r=this.char.skills.skillHash[i];this.skillValues[i]=null!=r?r:0}}t.sort(Fn.sortArrayMethod),this.skillObjs=this.skillObjs.concat(t),this.skillSubjects=this.char.skills.getSubjects();for(var s={},a=0,o=this.skillSubjects.length;a<o;){var l=a++;s[this.skillSubjects[l]]=!0}this.skillSubjectsInitial=s},__class__:xi};var Ii=function(){B.call(this)};n["troshx.sos.vue.CharVueMixin"]=Ii,Ii.__name__=["troshx","sos","vue","CharVueMixin"],Ii.getSampleInstance=function(){return null!=Ii.INSTANCE?Ii.INSTANCE:Ii.INSTANCE=new Ii},Ii.__super__=B,Ii.prototype=r(B.prototype,{Data:function(){return{}},get_encumbered:function(){return this.totalWeight>=this.CAR},get_totalWeight:function(){return this.char.inventory.calculateTotalWeight()},get_encumbranceLvl:function(){var t=this.char;return Math.floor(t.inventory.calculateTotalWeight()/t.clampIntZero(t.getModifiedValue(10,t.clampIntZero(t.getModifiedValue(16,t.get_STR()+t.get_END())))))},get_offhandWeapon:function(){return this.char.inventory.getOffhandWeapon()},get_masterWeapon:function(){return this.char.inventory.getMasterWeapon()},get_reachBase:function(){var t=this.offhandWeapon,e=this.masterWeapon;return jr.maxI(null!=t?t.reach:1,null!=e?e.reach:1)},get_reach:function(){return 0|this.char.getModifiedValue(14,this.reachBase)},get_adr:function(){var t=this.char;return(t.get_AGI()+t.get_WIT())/2|0},get_mob:function(){var t=this.char;return(t.get_STR()+t.get_AGI()+t.get_END())/2|0},get_car:function(){var t=this.char;return t.get_STR()+t.get_END()},get_cha:function(){var t=this.char;return(t.get_WIP()+t.get_WIT()+t.get_PER())/2|0},get_tou:function(){this.char;return 4},get_totalPain:function(){return this.char.get_totalPain()},get_pain:function(){var t=this.totalPain-this.GRIT;return t<0?0:t},get_totalBloodLost:function(){return this.char.get_totalBloodLost()},get_ADR:function(){var t=this.char;return t.clampIntZero(t.getModifiedValue(8,(t.get_AGI()+t.get_WIT())/2|0))},get_MOB:function(){var t=this.char,e=t.get_encumbranceLvlRow();return e.mobMult*t.clampIntZero(t.getModifiedValue(9,(t.get_STR()+t.get_AGI()+t.get_END())/2|0)+e.mob+Si.getTable()[t.get_fatiqueLevel()].mob)},get_CAR:function(){var t=this.char;return t.clampIntZero(t.getModifiedValue(10,t.clampIntZero(t.getModifiedValue(16,t.get_STR()+t.get_END()))))},get_CHA:function(){var t=this.char;return t.clampIntZero(t.getModifiedValue(11,(t.get_WIP()+t.get_WIT()+t.get_PER())/2|0))},get_startingGrit:function(){var t=this.char;return t.clampIntZero(t.getModifiedValue(20,t.willpower/2|0))},get_TOU:function(){var t=this.char;return t.clampIntZero(t.getModifiedValue(12,4))},get_GRIT:function(){var t=this.char;return t.clampIntZero(t.getModifiedValue(20,t.willpower/2|0))+t.gritAccum|0},get_baseGrit:function(){return this.char.willpower/2|0},get_STR:function(){return this.char.get_STR()},get_AGI:function(){return this.char.get_AGI()},get_END:function(){return this.char.get_END()},get_HLT:function(){return this.char.get_HLT()},get_WIP:function(){return this.char.get_WIP()},get_WIT:function(){return this.char.get_WIT()},get_INT:function(){return this.char.get_INT()},get_PER:function(){return this.char.get_PER()},get_perceptionPenalized:function(){var t=this.PER-this.perceptionPenalty;return t>=0?t:0},get_negativeOrZeroStat:function(){return this.STR<=0||this.AGI<=0||this.END<=0||this.AGI<=0||this.HLT<=0||this.WIP<=0||this.WIT<=0||this.INT<=0||this.PER<=0},get_strength:function(){return this.char.strength},get_agility:function(){return this.char.agility},get_endurance:function(){return this.char.endurance},get_health:function(){return this.char.health},get_willpower:function(){return this.char.willpower},get_wit:function(){return this.char.wit},get_intelligence:function(){return this.char.intelligence},get_perception:function(){return this.char.perception},get_raceName:function(){var t=this.char;return null!=t.race?t.race.name:"Unspecified"},get_schoolName:function(){var t=this.char;return null!=t.school?t.school.name:""},get_socialClassName:function(){var t=this.char;return null!=t.socialClass?t.socialClass.name:""},get_perceptionPenalty:function(){return this.char.inventory.getPerceptionPenalty()},get_carriedShield:function(){return this.char.inventory.findHeldShield()},get_masterHandItem:function(){return this.char.inventory.findMasterHandItem()},get_offHandItem:function(){return this.char.inventory.findOffHandItem()},get_inventoryWeight:function(){return this.char.inventory.calculateTotalWeight()},get_inventoryWeightLbl:function(){return parseFloat(this.inventoryWeight.toFixed(2))},get_dynModifiers:function(){return Tn},get_customModifierListings:function(){for(var t=this.char.staticModifierTable,e=Tn,n=[],i=this.modifierVars,r=0,s=i.length;r<s;)for(var a=r++,o=e[i[a]],l="("+this.getModifierTabTitle(i[a],!0)+") ",u=t[o],c=0,h=u.length;c<h;){var d=u[c++];d.custom&&n.push(l+d.name+": x"+d.multiply+"+"+d.add)}return n},getModifierTabTitle:function(t,e){null==e&&(e=!1);var n=Tn[t],i=this.char.staticModifierTable[n],r=this.char.situationalModifierTable[n],s=e?0:i.length+r.length,o="CMP_"==a.substr(t,0,4)?a.substr(t,4,null):"ATTR_"==a.substr(t,0,5)?a.substr(t,5,null):t;return s>0?o+"("+s+")":o},get_modifierVars:function(){var t=[];return t.push("ATTR_STR"),t.push("ATTR_AGI"),t.push("ATTR_END"),t.push("ATTR_HLT"),t.push("ATTR_WIL"),t.push("ATTR_WIT"),t.push("ATTR_INT"),t.push("ATTR_PER"),t.push("CMP_ADR"),t.push("CMP_MOB"),t.push("CMP_CAR"),t.push("CMP_CHA"),t.push("CMP_TOU"),t.push("CP"),t.push("REACH"),t.push("MP"),t.push("CAR_END"),t.push("FATIQUE_END"),t},openModifiersWindow:function(){this.$refs.modifiersWindow.open()},get_defaultProfs:function(){var t=this.masterWeapon,e=this.offhandWeapon,n=(this.char.profsMelee,this.char.profsRanged,this.ambidextrous);if(n?null==t&&null==e:null==t)return"Pugilism\\Wrestling";var i="";if(null!=t){var r=t.ranged;r||(i+=En.getLabelsOfArrayProfs(r?null!=En.CORE_RANGED?En.CORE_RANGED:En.CORE_RANGED=En.getNewCoreRanged():En.getCoreMelee(),t.profs).join(","))}if(n&&null!=e){i+="/";var s=e.ranged;s||(i+=En.getLabelsOfArrayProfs(s?null!=En.CORE_RANGED?En.CORE_RANGED:En.CORE_RANGED=En.getNewCoreRanged():En.getCoreMelee(),e.profs).join(","))}return""!=i?i:"(ranged)"},get_heldProfeciencies:function(){var t=this.masterWeapon,e=this.offhandWeapon,n="",i=this.char.profsMelee,r=this.char.profsRanged,s=this.ambidextrous;if(s?null==t&&null==e:null==t)return"\\"!=(n=(0!=(256&i)?"Pugilism":"")+"\\"+(0!=(128&i)?"Wrestling":""))?n:null;if(null!=t){var a=t.ranged;n+=En.getLabelsOfArrayProfs(a?null!=En.CORE_RANGED?En.CORE_RANGED:En.CORE_RANGED=En.getNewCoreRanged():En.getCoreMelee(),t.profs&(a?r:i)).join(",")}if(s&&null!=e){n+="/";var o=e.ranged;n+=En.getLabelsOfArrayProfs(o?null!=En.CORE_RANGED?En.CORE_RANGED:En.CORE_RANGED=En.getNewCoreRanged():En.getCoreMelee(),e.profs&(o?r:i)).join(",")}return""!=n?n:null},get_heldProfeciencyIcons:function(){var t=this.masterWeapon,e=this.offhandWeapon,n="",i=this.char.profsMelee,r=this.char.profsRanged,s=this.ambidextrous;if(s?null==t&&null==e:null==t)return"⚔";if(null!=t){var a=t.ranged;n+=0!=(t.profs&(a?r:i))?a?"◎":"⚔":""}if(s&&null!=e){var o=e.ranged;n+=0!=(e.profs&(o?r:i))?"/"+(o?"◎":"⚔"):"/"}return n},get_ambidextrousId:function(){return(new zt).name},get_ambidextrous:function(){return Object.prototype.hasOwnProperty.call(this.char.boons.hash,this.ambidextrousId)},get_SDB:function(){return this.char.get_STR()/2|0},get_labelRace:function(){var t=this.char;return null!=t.race?t.race.name:"Unspecified"},get_labelSchool:function(){var t=this.char;return null!=t.school?t.school.name:""},get_baseCP:function(){var t=this.char;return(t.schoolLevel>=1?t.schoolLevel+4:0)+t.clampIntZero(t.getModifiedValue(8,(t.get_AGI()+t.get_WIT())/2|0))},get_CP:function(){var t=this.char,e=t.get_encumbranceLvlRow();return e.cpMult*t.clampIntZero(t.getModifiedValue(13,(t.schoolLevel>=1?t.schoolLevel+4:0)+t.clampIntZero(t.getModifiedValue(8,(t.get_AGI()+t.get_WIT())/2|0)))*(t.prone?.5:1)+e.cp+Si.getTable()[t.get_fatiqueLevel()].cp)},get_meleeCP:function(){var t=this.char,e=t.get_encumbranceLvlRow();return e.cpMult*t.clampIntZero(t.getModifiedValue(13,(t.schoolLevel>=1?t.schoolLevel+4:0)+t.clampIntZero(t.getModifiedValue(8,(t.get_AGI()+t.get_WIT())/2|0)))*(t.prone?.5:1)+e.cp+Si.getTable()[t.get_fatiqueLevel()].cp)-t.get_pain()},get_schoolCP:function(){var t=this.char;return t.schoolLevel>=1?t.schoolLevel+4:0},get_arcPointsAvailable:function(){return this.char.get_arcPointsAvailable()},get_encumbranceLvlRow:function(){return this.char.get_encumbranceLvlRow()},get_encumberedBeyond:function(){var t=this.char;return Math.floor(t.inventory.calculateTotalWeight()/t.clampIntZero(t.getModifiedValue(10,t.clampIntZero(t.getModifiedValue(16,t.get_STR()+t.get_END())))))>=5},get_skillPenalty:function(){return this.char.get_skillPenalty()},get_recoveryRate:function(){return this.char.get_recoveryRate()},get_recoveryRateAmountBase:function(){return this.recoveryRate*this.END},get_recoveryRateAmount:function(){return this.char.clampIntZero(this.recoveryRate*this.char.getModifiedValue(17,this.END))},get_exhaustionRate:function(){return this.char.get_exhaustionRate()},get_fatiqueLevel:function(){return this.char.get_fatiqueLevel()},get_curFatiqueRow:function(){return Si.getTable()[this.fatiqueLevel]},get_fatiqueSkillPenalty:function(){return this.curFatiqueRow.skill},get_fatiqueMobPenalty:function(){return this.curFatiqueRow.mob},get_fatiqueCPPenalty:function(){return this.curFatiqueRow.cp},get_addressedAs:function(){return this.char.get_uid()},get_profCoreMeleeListNames:function(){return En.getLabelsOfArrayProfs(En.getCoreMelee(),2147483647)},get_profCoreRangedListNames:function(){return En.getLabelsOfArrayProfs(null!=En.CORE_RANGED?En.CORE_RANGED:En.CORE_RANGED=En.getNewCoreRanged(),2147483647)},get_hasSchool:function(){return null!=this.char.school},get_schoolProfLevel:function(){return this.hasSchool?this.char.schoolLevel:0},get_schoolTags:function(){return this.hasSchool&&null!=this.char.schoolBonuses?this.char.schoolBonuses.getTags():[]},get_maxMasterySlots:function(){var t=this.char.schoolLevel>=20?1:0;return this.hasSchool?t:0},get_boonsArray:function(){return this.char.boons.list},get_banesArray:function(){return this.char.banes.list},get_maxBoonsSpendableLeft:function(){return 999},consoleLog:function(t){console.log(t)},getBracketLabelBnB:function(t){var e=t.getBoonOrBane(),n=t.getQty(),i=e.costs==lt.COSTLESS_ARRAY;return(i?"x":"(")+(i?n>1?n+"":"":e.clampRank?null!=t._costCached?t._costCached+"":""+t.getCost(t.rank):this.getRomanDigit(t.rank))+(i?"":")")},getRomanDigit:function(t){switch(t){case 0:return"0";case 1:return"i";case 2:return"ii";case 3:return"iii";case 4:return"iv";case 5:return"v";case 6:return"vi";case 7:return"vii";case 8:return"viii";case 9:return"ix";case 10:return"x";default:return">x"}},getBnBSlug:function(t){return"bb-detail-"+t.split(" ").join("-").toLowerCase()},getEmptyWealthAssign:function(){return this.char.getEmptyWealthAssetAssign(1)},get_isHuman:function(){var t=this.char;return"Human"==(null!=t.race?t.race.name:"Unspecified")},restoreAnyBnBWithMask:function(t,e){var n=this.baneAssignList,i=this.boonAssignList,r=null,s=null;t|=e;for(var a=0,o=n.length;a<o;){var l=n[a++];l._canceled&&0!=(l.bane.channels&t)&&(l._canceled=!1,l.rank>0&&null==r&&(r=l))}null!=r&&(t&=~(r.bane.channels|r.bane.superChannels));for(var u=0,c=i.length;u<c;){var h=i[u++];h._canceled&&0!=(h.boon.channels&t)&&(h._canceled=!1,h.rank>0&&null==s&&(s=h))}null!=s?this.checkBoonAgainstOthers(s):null!=r&&this.checkBaneAgainstOthers(r)},resetBB:function(t,e){if(e){var n,i=t.getBoonOrBane(),r=this.baneAssignList.indexOf(t);(n=i.getAssign(0,this.char))._costCached=i.costs[0],n._forcePermanent=t._forcePermanent,n.discount=t.discount,n._minRequired=t._minRequired,n._canceled=t._canceled,Vue.set(this.baneAssignList,r,n)}else{var s,a=t,o=a.boon,l=this.boonAssignList.indexOf(t);if((s=o.getAssign(0,this.char)).discount=a.discount,s.rank=t._minRequired,s._remainingCached=this.maxBoonsSpendableLeft,s._costCached=o.costs[0],s._forcePermanent=t._forcePermanent,s._minRequired=t._minRequired,s._canceled=t._canceled,Vue.set(this.boonAssignList,l,s),s.rank>0){l=this.char.boons.list.indexOf(a);var u=this.char.boons.list[l];Vue.set(this.char.boons.list,l,s),this.char.boonAssignReplaced(s,u)}}},findBaneAssignIndexById:function(t){for(var e=this.baneAssignList.length;--e>-1;)if(this.baneAssignList[e].get_uid()==t)return e;return-1},assignBrainDamage:function(t){for(var e=t.baneQueue,n=0,i=e.length;n<i;){var r,s=e[n++],a=s.get_uid(),o=this.findBaneAssignIndexById(a);if(!(o>=0))throw new V("Something went wrong, couldn't find brain damage assign bane: "+s.get_uid());Xe.dynSetArray(this.baneAssignList,o,s);var l=d.field(this.char.banes.hash,a);null==l?this.char.banes.add(s):l!=s&&(r=this.char.banes.list.indexOf(l),Xe.dynSetArray(this.char.banes.list,r,s))}},onBaneCallbackReceived:function(t){D.__instanceof(t,me)&&this.assignBrainDamage(t)},checkBaneAgainstOthers:function(t){var e=this.baneAssignList,n=this.boonAssignList;t._canceled=!1;var i=t.bane.channels|t.bane.superChannels;if(0!=i){for(var r=0,s=e.length;r<s;){var a=e[r++];a!=t&&0!=(a.bane.channels&i)&&(a._canceled=!0)}for(var o=0,l=n.length;o<l;){var u=n[o++];0!=(u.boon.channels&i)&&(u._canceled=!0)}}},checkBoonAgainstOthers:function(t){var e=this.baneAssignList,n=this.boonAssignList;t._canceled=!1;var i=t.boon.channels|t.boon.superChannels;if(0!=i){for(var r=0,s=e.length;r<s;){var a=e[r++];0!=(a.bane.channels&i)&&(a._canceled=!0)}for(var o=0,l=n.length;o<l;){var u=n[o++];u!=t&&0!=(u.boon.channels&i)&&(u._canceled=!0)}}},uncancel:function(t,e){t._canceled=!1,e?this.checkBaneAgainstOthers(t):this.checkBoonAgainstOthers(t)},addBB:function(t,e){e?(this.char.banes.add(t),this.checkBaneAgainstOthers(t)):(this.char.boons.add(t),this.checkBoonAgainstOthers(t))},removeBB:function(t,e){if(e){var n=t;this.char.banes.delete(n),0!=(n.bane.channels|n.bane.superChannels)&&this.restoreAnyBnBWithMask(n.bane.channels,n.bane.superChannels)}else{var i=t;this.char.boons.delete(i),0!=(i.boon.channels|i.boon.superChannels)&&this.restoreAnyBnBWithMask(i.boon.channels,i.boon.superChannels)}},updateRankBB:function(t,e,n,i){e?this.char.baneRankUpdated(t,n,i):this.char.boonRankUpdated(t,n,i)},updateCanceledBB:function(t,e,n,i){e?this.char.baneRankCanceledChange(t,n,i):this.char.boonRankCanceledChange(t,n,i)},_Init:function(){var t=Ii.prototype;this.data=t.Data,this.computed={recoveryRateAmountBase:t.get_recoveryRateAmountBase,recoveryRateAmount:t.get_recoveryRateAmount,profCoreMeleeListNames:t.get_profCoreMeleeListNames,profCoreRangedListNames:t.get_profCoreRangedListNames,hasSchool:t.get_hasSchool,schoolProfLevel:t.get_schoolProfLevel,schoolTags:t.get_schoolTags,maxMasterySlots:t.get_maxMasterySlots,boonsArray:t.get_boonsArray,banesArray:t.get_banesArray,isHuman:t.get_isHuman,encumbered:t.get_encumbered,totalWeight:t.get_totalWeight,encumbranceLvl:t.get_encumbranceLvl,offhandWeapon:t.get_offhandWeapon,masterWeapon:t.get_masterWeapon,reachBase:t.get_reachBase,reach:t.get_reach,adr:t.get_adr,mob:t.get_mob,car:t.get_car,cha:t.get_cha,tou:t.get_tou,totalPain:t.get_totalPain,pain:t.get_pain,totalBloodLost:t.get_totalBloodLost,ADR:t.get_ADR,MOB:t.get_MOB,CAR:t.get_CAR,CHA:t.get_CHA,startingGrit:t.get_startingGrit,TOU:t.get_TOU,GRIT:t.get_GRIT,baseGrit:t.get_baseGrit,STR:t.get_STR,AGI:t.get_AGI,END:t.get_END,HLT:t.get_HLT,WIP:t.get_WIP,WIT:t.get_WIT,INT:t.get_INT,PER:t.get_PER,perceptionPenalized:t.get_perceptionPenalized,negativeOrZeroStat:t.get_negativeOrZeroStat,strength:t.get_strength,agility:t.get_agility,endurance:t.get_endurance,health:t.get_health,willpower:t.get_willpower,wit:t.get_wit,intelligence:t.get_intelligence,perception:t.get_perception,raceName:t.get_raceName,schoolName:t.get_schoolName,socialClassName:t.get_socialClassName,perceptionPenalty:t.get_perceptionPenalty,carriedShield:t.get_carriedShield,masterHandItem:t.get_masterHandItem,offHandItem:t.get_offHandItem,inventoryWeight:t.get_inventoryWeight,inventoryWeightLbl:t.get_inventoryWeightLbl,dynModifiers:t.get_dynModifiers,customModifierListings:t.get_customModifierListings,modifierVars:t.get_modifierVars,defaultProfs:t.get_defaultProfs,heldProfeciencies:t.get_heldProfeciencies,heldProfeciencyIcons:t.get_heldProfeciencyIcons,ambidextrousId:t.get_ambidextrousId,ambidextrous:t.get_ambidextrous,SDB:t.get_SDB,labelRace:t.get_labelRace,labelSchool:t.get_labelSchool,baseCP:t.get_baseCP,CP:t.get_CP,meleeCP:t.get_meleeCP,schoolCP:t.get_schoolCP,arcPointsAvailable:t.get_arcPointsAvailable,encumbranceLvlRow:t.get_encumbranceLvlRow,encumberedBeyond:t.get_encumberedBeyond,skillPenalty:t.get_skillPenalty,recoveryRate:t.get_recoveryRate,exhaustionRate:t.get_exhaustionRate,fatiqueLevel:t.get_fatiqueLevel,curFatiqueRow:t.get_curFatiqueRow,fatiqueSkillPenalty:t.get_fatiqueSkillPenalty,fatiqueMobPenalty:t.get_fatiqueMobPenalty,fatiqueCPPenalty:t.get_fatiqueCPPenalty,addressedAs:t.get_addressedAs,maxBoonsSpendableLeft:t.get_maxBoonsSpendableLeft},this.methods={get_encumbered:t.get_encumbered,get_totalWeight:t.get_totalWeight,get_encumbranceLvl:t.get_encumbranceLvl,get_offhandWeapon:t.get_offhandWeapon,get_masterWeapon:t.get_masterWeapon,get_reachBase:t.get_reachBase,get_reach:t.get_reach,get_adr:t.get_adr,get_mob:t.get_mob,get_car:t.get_car,get_cha:t.get_cha,get_tou:t.get_tou,get_totalPain:t.get_totalPain,get_pain:t.get_pain,get_totalBloodLost:t.get_totalBloodLost,get_ADR:t.get_ADR,get_MOB:t.get_MOB,get_CAR:t.get_CAR,get_CHA:t.get_CHA,get_startingGrit:t.get_startingGrit,get_TOU:t.get_TOU,get_GRIT:t.get_GRIT,get_baseGrit:t.get_baseGrit,get_STR:t.get_STR,get_AGI:t.get_AGI,get_END:t.get_END,get_HLT:t.get_HLT,get_WIP:t.get_WIP,get_WIT:t.get_WIT,get_INT:t.get_INT,get_PER:t.get_PER,get_perceptionPenalized:t.get_perceptionPenalized,get_negativeOrZeroStat:t.get_negativeOrZeroStat,get_strength:t.get_strength,get_agility:t.get_agility,get_endurance:t.get_endurance,get_health:t.get_health,get_willpower:t.get_willpower,get_wit:t.get_wit,get_intelligence:t.get_intelligence,get_perception:t.get_perception,get_raceName:t.get_raceName,get_schoolName:t.get_schoolName,get_socialClassName:t.get_socialClassName,get_perceptionPenalty:t.get_perceptionPenalty,get_carriedShield:t.get_carriedShield,get_masterHandItem:t.get_masterHandItem,get_offHandItem:t.get_offHandItem,get_inventoryWeight:t.get_inventoryWeight,get_inventoryWeightLbl:t.get_inventoryWeightLbl,get_dynModifiers:t.get_dynModifiers,get_customModifierListings:t.get_customModifierListings,getModifierTabTitle:t.getModifierTabTitle,get_modifierVars:t.get_modifierVars,openModifiersWindow:t.openModifiersWindow,get_defaultProfs:t.get_defaultProfs,get_heldProfeciencies:t.get_heldProfeciencies,get_heldProfeciencyIcons:t.get_heldProfeciencyIcons,get_ambidextrousId:t.get_ambidextrousId,get_ambidextrous:t.get_ambidextrous,get_SDB:t.get_SDB,get_labelRace:t.get_labelRace,get_labelSchool:t.get_labelSchool,get_baseCP:t.get_baseCP,get_CP:t.get_CP,get_meleeCP:t.get_meleeCP,get_schoolCP:t.get_schoolCP,get_arcPointsAvailable:t.get_arcPointsAvailable,get_encumbranceLvlRow:t.get_encumbranceLvlRow,get_encumberedBeyond:t.get_encumberedBeyond,get_skillPenalty:t.get_skillPenalty,get_recoveryRate:t.get_recoveryRate,get_recoveryRateAmountBase:t.get_recoveryRateAmountBase,get_recoveryRateAmount:t.get_recoveryRateAmount,get_exhaustionRate:t.get_exhaustionRate,get_fatiqueLevel:t.get_fatiqueLevel,get_curFatiqueRow:t.get_curFatiqueRow,get_fatiqueSkillPenalty:t.get_fatiqueSkillPenalty,get_fatiqueMobPenalty:t.get_fatiqueMobPenalty,get_fatiqueCPPenalty:t.get_fatiqueCPPenalty,get_addressedAs:t.get_addressedAs,get_profCoreMeleeListNames:t.get_profCoreMeleeListNames,get_profCoreRangedListNames:t.get_profCoreRangedListNames,get_hasSchool:t.get_hasSchool,get_schoolProfLevel:t.get_schoolProfLevel,get_schoolTags:t.get_schoolTags,get_maxMasterySlots:t.get_maxMasterySlots,get_boonsArray:t.get_boonsArray,get_banesArray:t.get_banesArray,get_maxBoonsSpendableLeft:t.get_maxBoonsSpendableLeft,consoleLog:t.consoleLog,getBracketLabelBnB:t.getBracketLabelBnB,getRomanDigit:t.getRomanDigit,getBnBSlug:t.getBnBSlug,getEmptyWealthAssign:t.getEmptyWealthAssign,get_isHuman:t.get_isHuman,restoreAnyBnBWithMask:t.restoreAnyBnBWithMask,resetBB:t.resetBB,findBaneAssignIndexById:t.findBaneAssignIndexById,assignBrainDamage:t.assignBrainDamage,onBaneCallbackReceived:t.onBaneCallbackReceived,checkBaneAgainstOthers:t.checkBaneAgainstOthers,checkBoonAgainstOthers:t.checkBoonAgainstOthers,uncancel:t.uncancel,addBB:t.addBB,removeBB:t.removeBB,updateRankBB:t.updateRankBB,updateCanceledBB:t.updateCanceledBB}},__class__:Ii});var ki=function(){};n["troshx.sos.vue.Globals"]=ki,ki.__name__=["troshx","sos","vue","Globals"];var Ti=function(){B.call(this),this.inheritAttrs=!1};n["troshx.sos.vue.InventoryManager"]=Ti,Ti.__name__=["troshx","sos","vue","InventoryManager"],Ti.__super__=B,Ti.prototype=r(B.prototype,{Data:function(){return{extraInventories:[],clipboardContents:"",curInventoryIndex:0,newTabCounter:0,showBrowser:null!=this.autoLoad}},Components:function(){var t={};return t.comp=new Mi,t["tree-browser"]=new Sr,t},loadSheet:function(t){this.$emit("loadSheet",t)},closeBtnClick:function(){if(this.curInventoryIndex>0){var t=this.curInventoryIndex-1;this.extraInventories.splice(t,1),this.curInventoryIndex>this.extraInventories.length&&this.curInventoryIndex--}},openFromTreeBrowser:function(t,e,n){this.loadNewTab(t,e)},watch_inventory:function(t){for(var e=0,n=this.extraInventories.length;e<n;){var i=e++;this.extraInventories[i].inventory.setNewDroppedList(t.dropped)}},get_tabs:function(){return[{inventory:this.inventory,tabName:this.firstTabName}].concat(this.extraInventories)},get_availableTypes:function(){return{"troshx.sos.core.Inventory":!0}},getNewInventory:function(t){var e;try{e=new C(t).unserialize()}catch(t){return t instanceof V&&(t=t.val),console.log(t),q.alert("Sorry, failed to unserialize save-content string!"),null}return D.__instanceof(e,Cn)?D.__instanceof(e,Cn)?e:null:(console.log(e),q.alert("Sorry, unserialized type isn't Inventory!"),null)},loadNewTabClick:function(){this.loadNewTab()},loadNewTab:function(t,e){null==t&&(t=this.clipboardContents);var n=this.getNewInventory(t);null!=n&&(n.setNewDroppedList(this.inventory.dropped),this.extraInventories.push({inventory:n,tabName:null!=e?this.validateTabName(e):"New Tab ("+ ++this.newTabCounter+")"}),this.curInventoryIndex=this.extraInventories.length)},validateTabName:function(t){for(var e=this.tabs,n=0,i=e.length;n<i;){if(e[n++].tabName==t)return t+" ("+ ++this.newTabCounter+")"}return t},Template:function(){return'<div>\r\n\t<br/>\r\n\t<br/>\r\n\t<tree-browser :availableTypes="availableTypes" v-on:open="openFromTreeBrowser" v-if="showBrowser" :autoLoad="autoLoad" />\r\n\t<hr/>\r\n\t\r\n\t<comp :inventory="tabs[curInventoryIndex].inventory" :inventoryLabel="tabs[curInventoryIndex].tabName" v-on:loadSheet="loadSheet" :loadAvailable="curInventoryIndex==0 && loadAvailable" v-bind="$attrs" :maxCostCopper="curInventoryIndex == 0 ? maxCostCopper : null" :maxWeight="curInventoryIndex == 0 ? maxWeight : null">\r\n\t\t<span slot="weightAfter"><slot name="weightAfter"></slot></span>\r\n\t\t\r\n\t\t<button class="exit-btn" slot="exitBtn" v-if="backBtnCallback!=null" v-on:click="backBtnCallback()">&lt;&lt; Back</button>\r\n\t\t\r\n\t\t<div class="open-new-tab-zone" slot="loadNewTabZone">\r\n\t\t\t<div>\r\n\t\t\t\t<div class="show-browser-cta"><label><input type="checkbox" v-model="showBrowser"></input>View a Catalog? ^</label></div>\r\n\t\t\t\t<textarea class="openbox" character-set="UTF-8" v-model="clipboardContents"></textarea>\r\n\t\t\t\t<div><button v-on:click="loadNewTabClick">Load Inventory in New Tab</button><i><br/>(excludes drop zone)</i></div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t\r\n\t\t<div v-for="" class="tab-list" slot="tabList">\r\n\t\t\t<label :class="{selected:curInventoryIndex==i}" v-for="(li, i) in tabs"><input type="radio" v-on:click="curInventoryIndex=i" name="tabname" :checked="curInventoryIndex==i"></input>{{li.tabName}}</label>\r\n\t\t\t<button class="close-btn" v-show="curInventoryIndex!=0" v-on:click="closeBtnClick">[X] Close</button>\r\n\t\t</div>\r\n\r\n\t</comp>\r\n</div>'},_Init:function(){var t=Ti.prototype;this.data=t.Data,this.components=this.Components(),this.template=this.Template(),this.computed={tabs:t.get_tabs,availableTypes:t.get_availableTypes},this.methods={loadSheet:t.loadSheet,closeBtnClick:t.closeBtnClick,openFromTreeBrowser:t.openFromTreeBrowser,watch_inventory:t.watch_inventory,get_tabs:t.get_tabs,get_availableTypes:t.get_availableTypes,getNewInventory:t.getNewInventory,loadNewTabClick:t.loadNewTabClick,loadNewTab:t.loadNewTab,validateTabName:t.validateTabName},this.props={inventory:{required:!0,type:Object},maxWeight:{required:!1,type:Number},maxCostCopper:{required:!1,type:Number},autoLoad:{required:!1,type:String},firstTabName:{required:!1,default:"Current",type:String},loadAvailable:{required:!1,default:!0,type:Boolean},backBtnCallback:{required:!1,type:Function}},this.watch={inventory:t.watch_inventory}},__class__:Ti});var Li=function(t){B.call(this),null!=t?this.components={comp:t}:d.deleteField(this,"data")};n["troshx.sos.vue.InventoryStandalone"]=Li,Li.__name__=["troshx","sos","vue","InventoryStandalone"],Li.__super__=B,Li.prototype=r(B.prototype,{getNewInventory:function(t){var e;try{e=new C(t).unserialize()}catch(t){return t instanceof V&&(t=t.val),console.log(t),q.alert("Sorry, failed to unserialize save-content string!"),null}return D.__instanceof(e,Cn)?D.__instanceof(e,Cn)?e:null:(console.log(e),q.alert("Sorry, unserialized type isn't Inventory!"),null)},setInventory:function(t){this.inventory=t},loadSheet:function(t){var e=this.getNewInventory(t);null!=e&&this.setInventory(e)},Data:function(){return{inventory:new Cn,autoLoad:ki.AUTO_LOAD}},Template:function(){return'<comp :inventory="inventory" v-on:loadSheet="loadSheet" :autoLoad="autoLoad"></comp>'},_Init:function(){var t=Li.prototype;this.data=t.Data,this.template=this.Template(),this.methods={getNewInventory:t.getNewInventory,setInventory:t.setInventory,loadSheet:t.loadSheet}},__class__:Li});var Mi=t.troshx.sos.vue.InventoryVue=function(){B.call(this),this.mixins=[Ui.getInstance()]};n["troshx.sos.vue.InventoryVue"]=Mi,Mi.__name__=["troshx","sos","vue","InventoryVue"],Mi.__super__=B,Mi.prototype=r(B.prototype,{Data:function(){return new Ei},Components:function(){var t={};return t["td-prof"]=new Vi,t["td-hands"]=new Oi,t["td-widget"]=new Di,t["td-unheld"]=new Hi,t["input-name"]=new Cr,t["input-name-qty"]=new Ar,t["select-held"]=new Tr,t["w-ammunition"]=new Pr,t["w-coverage"]=new Rr,t["w-melee-atk"]=new Nr,t["w-melee-def"]=new Wr,t["w-missile-atk"]=new Fr,t["w-prof"]=new Or,t["w-span-tools"]=new Vr,t["w-tags"]=new Dr,t["w-ammo-spawner"]=new Er,t},Created:function(){var t=this.inventory;(null!=t.signaler?t.signaler:t.signaler=t.createSignaler()).add(Zr(this,this.onInventorySignalReceived))},get_copperMaxToPieces:function(){return null==this.privateData.money&&(this.privateData.money=new Sn),this.privateData.money.matchWithValues(0,0,this.maxCostCopper).changeToHighest()},get_moneyLeft:function(){return null==this.privateData.moneyLeft&&(this.privateData.moneyLeft=new Sn),this.privateData.moneyLeft.matchWith(this.copperMaxToPieces).subtractAgainst(this.totalCostMoney)},get_moneyLeftStr:function(){return this.moneyLeft.getLabel()},get_exceededCost:function(){return this.moneyLeft.cp<0},get_weightRemaining:function(){return this.maxWeight-this.totalWeight},get_weightRemainingLbl:function(){return parseFloat(this.weightRemaining.toFixed(2))},get_exceededWeight:function(){return this.weightRemaining<=0},get_maxCostGP:function(){return this.copperMaxToPieces.gp},get_maxCostSP:function(){return this.copperMaxToPieces.sp},get_maxCostCP:function(){return this.copperMaxToPieces.cp},onInventorySignalReceived:function(t){0==t[1]?(this.itemTransitionName="",Vue.nextTick(Zr(this,this.resetItemTransitionName))):this.itemTransitionName="fade"},loadSheet:function(){this.$emit("loadSheet",this.copyToClipboard)},watch_inventory:function(t,e){(null!=e.signaler?e.signaler:e.signaler=e.createSignaler()).removeAll(),(null!=t.signaler?t.signaler:t.signaler=t.createSignaler()).add(Zr(this,this.onInventorySignalReceived)),this.itemTransitionName="",Vue.nextTick(Zr(this,this.resetItemTransitionName))},saveSheet:function(){this.inventory.normalizeAllItems();var t=new y;t.useCache=!0;var e=this.inventory,n=null!=e.signaler?e.signaler:e.signaler=e.createSignaler();this.inventory.setSignaler(null),t.serialize(this.inventory);var i=t.toString();return this.copyToClipboard=i,this.inventory.setSignaler(n),i},loadDropList:function(t){this.inventory.normalizeDroppedItems(),null==t&&(t=this.copyToClipboardDropList);var e=this.inventory;(null!=e.signaler?e.signaler:e.signaler=e.createSignaler()).removeAll();var n=new C(t),i=null,r=!0;try{i=n.unserialize()}catch(t){t instanceof V&&(t=t.val),console.log(t),q.alert("Sorry, failed to unserialize string to dropped zone!"),r=!1}r&&(D.__instanceof(i,it)||(console.log(i),q.alert("Sorry, unserialized object isn't of dropped zone IDMatchArray type!"),r=!1)),r&&this.inventory.setNewDroppedList(i);var s=this.inventory;(null!=s.signaler?s.signaler:s.signaler=s.createSignaler()).add(Zr(this,this.onInventorySignalReceived))},saveDropList:function(){var t=new y;t.useCache=!0,t.serialize(this.inventory.dropped);var e=t.toString();return this.copyToClipboardDropList=e,e},resetItemTransitionName:function(){this.itemTransitionName="fade"},onBaseInventoryClick:function(t){this.curWidgetRequest.type="",this.curWidgetRequest.index=0,this.focusValueText=""},confirmOverwriteItem:function(){var t=this.itemToOverwriteToPacked?this.inventory.packed:this.inventory.dropped;t.add(this.itemToOverwriteWith);var e=t.getMatchingItem(this.itemToOverwriteWith);(e.item=this.itemToOverwriteWith.item,e.attachments=this.itemToOverwriteWith.attachments,null!=this.privateData.dynArray)?this.privateData.dynArray.splice(this.privateData.dynArray.indexOf(this.privateData.dynAssign),1):(this.itemToOverwriteToPacked?this.inventory.dropped:this.inventory.packed).splicedAgainst(this.privateData.origQtyItem);this.itemToOverwriteWith=null,this.privateData.dynArray=null,this.privateData.origQtyItem=null,this.$refs.overwriteItemWarning.close()},confirmQtyMultipleSend:function(){this.itemToOverwriteToPacked?this.packItemEntryFromGround(this.itemQtyMultiple,this.itemQtyMultiple.qty):this.dropItemEntryFromPack(this.itemQtyMultiple,this.itemQtyMultiple.qty),this.itemQtyMultiple=null,this.$refs.itemQtyMultipleModal.close()},closeMultipleQtyItem:function(t){null==t&&(t=!1),this.itemQtyMultiple=null},closeOverwriteModal:function(t){null==t&&(t=!1),this.itemToOverwriteWith=null,t||(this.privateData.dynArray=null,this.privateData.origQtyItem=null)},watch_itemToOverwriteWith:function(t){null!=t?(this.itemToOverwriteWithChecked=!1,this.$refs.overwriteItemWarning.open()):this.$refs.overwriteItemWarning.close()},watch_itemQtyMultiple:function(t){null!=t?this.$refs.itemQtyMultipleModal.open():this.$refs.itemQtyMultipleModal.close()},packItemEntryFromGround:function(t,e){if(null==e&&(e=0),this.itemToOverwriteToPacked=!0,0==e&&t.qty>1)return this.itemQtyMultipleMax=t.qty,void(this.itemQtyMultiple=t.getQtyCopy(t.qty));this.itemToOverwriteWith=this.inventory.packItemEntryFromGround(t,e),null!=this.itemToOverwriteWith&&(this.privateData.origQtyItem=t,this.privateData.dynArray=null)},dropItemEntryFromPack:function(t,e){if(null==e&&(e=0),this.itemToOverwriteToPacked=!1,0==e&&t.qty>1)return this.itemQtyMultipleMax=t.qty,void(this.itemQtyMultiple=t.getQtyCopy(t.qty));this.itemToOverwriteWith=this.inventory.dropItemEntryFromPack(t,e),null!=this.itemToOverwriteWith&&(this.privateData.origQtyItem=t,this.privateData.dynArray=null)},dropEquipedShield:function(t,e){null==e&&(e=!1),this.itemToOverwriteWith=this.inventory.dropEquipedShield(t,e),this.itemToOverwriteToPacked=!1,null!=this.itemToOverwriteWith&&(this.privateData.origQtyItem=null,this.privateData.dynArray=this.inventory.shields,this.privateData.dynAssign=t)},dropMiscItem:function(t,e){null==e&&(e=!1),this.itemToOverwriteWith=this.inventory.dropMiscItem(t,e),this.itemToOverwriteToPacked=!1,null!=this.itemToOverwriteWith&&(this.privateData.origQtyItem=null,this.privateData.dynArray=this.inventory.equipedNonMeleeItems,this.privateData.dynAssign=t)},dropEquipedWeapon:function(t,e){null==e&&(e=!1),this.itemToOverwriteWith=this.inventory.dropEquipedWeapon(t,e),this.itemToOverwriteToPacked=!1,null!=this.itemToOverwriteWith&&(this.privateData.origQtyItem=null,this.privateData.dynArray=this.inventory.weapons,this.privateData.dynAssign=t)},dropWornArmor:function(t,e){null==e&&(e=!1),this.itemToOverwriteWith=this.inventory.dropWornArmor(t,e),this.itemToOverwriteToPacked=!1,null!=this.itemToOverwriteWith&&(this.privateData.origQtyItem=null,this.privateData.dynArray=this.inventory.wornArmor,this.privateData.dynAssign=t)},packEquipedShield:function(t){this.itemToOverwriteWith=this.inventory.packEquipedShield(t),this.itemToOverwriteToPacked=!0,null!=this.itemToOverwriteWith&&(this.privateData.origQtyItem=null,this.privateData.dynArray=this.inventory.shields,this.privateData.dynAssign=t)},packMiscItem:function(t){this.itemToOverwriteWith=this.inventory.packMiscItem(t),this.itemToOverwriteToPacked=!0,null!=this.itemToOverwriteWith&&(this.privateData.origQtyItem=null,this.privateData.dynArray=this.inventory.equipedNonMeleeItems,this.privateData.dynAssign=t)},packEquipedWeapon:function(t){this.itemToOverwriteWith=this.inventory.packEquipedWeapon(t),this.itemToOverwriteToPacked=!0,null!=this.itemToOverwriteWith&&(this.privateData.origQtyItem=null,this.privateData.dynArray=this.inventory.weapons)},packWornArmor:function(t){this.itemToOverwriteWith=this.inventory.packWornArmor(t),this.itemToOverwriteToPacked=!0,null!=this.itemToOverwriteWith&&(this.privateData.origQtyItem=null,this.privateData.dynArray=this.inventory.wornArmor,this.privateData.dynAssign=t)},getSuperscriptNum:function(t,e){for(var n=null==e?"null":""+e,i=e>=0?"⁺":"⁻",r=e<0?1:0,s=n.length;r<s;){var a=r++;i+=t.charAt(p.parseInt(n.charAt(a)))}return i},getCoverage:function(t,e){var n=t.coverage,i=null!=t.customise&&null!=t.customise.hitLocationAllAVModifiers,r=i?t.customise.hitLocationAllAVModifiers:null;null==e&&(e=un.getInstance());for(var s=[],a=e.hitLocations,o=(d.fields(n),0),l=a.length;o<l;){var u=o++,c=a[u].id,h=n[c];if(null!=h){var p=i&&null!=r[c]?this.getSuperscriptNum("⁰¹²³⁴⁵⁶⁷⁸⁹",r[c]):"";s.push(u+1+(0!=(1&h)?"ϕ":"")+(0!=(4&h)?"t":"")+(0!=(2&h)?"*":"")+p)}}return s.join("-")},getTags:function(t,e){var n=[];return null!=e&&e.holding1H&&null!=e.weapon.variant?(e.weapon._showCustomTags=!1,e.weapon.variant.addTagsToStrArr(n),e.weapon._showCustomTags=!0,null!=e.weapon.customise&&e.weapon.customise.addMeleeTagsToStrArr(n)):t.addTagsToStrArr(n),n.join(", ")},getDefGuard:function(t,e){return null!=e&&e.holding1H&&null!=e.weapon.variant&&(t=e.weapon.variant),t.dtn+"("+t.guard+")"},getSwingAtkStr:function(t,e){return null!=e&&e.holding1H&&null!=e.weapon.variant&&(t=e.weapon.variant),t.atnS+"("+t.damageS+this.damageTypeSuffixes[t.damageTypeS]+")"},getThrustAtkStr:function(t,e){return null!=e&&e.holding1H&&null!=e.weapon.variant&&(t=e.weapon.variant),t.atnT+"("+t.damageT+this.damageTypeSuffixes[t.damageTypeT]+")"},getMissileAtkStr:function(t){return t.atnM+"("+t.damageM+this.damageTypeSuffixes[t.damageTypeM]+")"},getAmmunitions:function(t){return t.getAmmunitionsStrArr().join(", ")},getSpanTools:function(t){return t.getSpanningToolsStrArr().join(", ")},clearWidgets:function(){this.curWidgetRequest.type="",this.curWidgetRequest.index=0,this.focusValueText=""},stopPropagation:function(t){t.stopPropagation()},setCurWidgetSection:function(t,e){e.stopPropagation(),this.curWidgetRequest.section=t},requestCurWidget:function(t,e){this.curWidgetRequest.type=t,this.curWidgetRequest.index=e},isVisibleWidget:function(t,e,n){return this.curWidgetRequest.section==t&&this.curWidgetRequest.type==e&&this.curWidgetRequest.index==n},openPopup:function(t){this.popupIndex=t},closePopup:function(){this.popupIndex=-1},getValidName:function(t,e){return""!=t&&null!=t?t:e},onInputNameUpdated:function(){this.itemTransitionName="",Vue.nextTick(Zr(this,this.resetItemTransitionName))},get_coverageHitLocations:function(){return this.body.hitLocations},get_hitLocationZeroAVValues:function(){for(var t=this.coverageHitLocations,e={},n=0,i=t.length;n<i;){e[t[n++].id]={avp:0,avc:0,avb:0}}return e},get_shouldCalcMeleeAiming:function(){return!this.calcArmorMissile&&this.calcArmorMeleeTargeting},get_shouldCalcRangedAiming:function(){return!!this.calcArmorMissile&&this.selectedMissileTargetZoneIndex>=0},get_targetingZoneMask:function(){var t=this.calcMeleeTargetingZoneIndex;return this.shouldCalcMeleeAiming?1<<t:0},get_hasArmorResultProtecting:function(){return 0!=this.calcArmorResults.armorsProtectable.length},get_hasArmorResultLayers:function(){return!!this.hasArmorResultProtecting&&0!=this.calcArmorResults.armorsLayer.length},get_hasArmorCrushables:function(){return 0!=this.calcArmorResults.armorsCrushable.length},get_showTargetingZoneIndex:function(){return this.shouldCalcMeleeAiming?this.calcMeleeTargetingZoneIndex:this.shouldCalcRangedAiming?this.missileHitTargetZones[this.selectedMissileTargetZoneIndex].index:-1},isDisabledHitLocation:function(t){return!(!this.shouldCalcMeleeAiming&&!this.shouldCalcRangedAiming)&&0==(1<<t&this.targetZoneHitAreaMasks[this.showTargetingZoneIndex])},get_targetZoneHitAreaMasks:function(){return this.body.getTargetZoneHitAreaMasks()},get_isYourInventory:function(){return"Your"==this.inventoryLabel},get_whoseInventoryPrefix:function(){return null!=this.inventoryLabel?"Your"!=this.inventoryLabel?this.inventoryLabel+(this.includeOwnerSlash?"'s ":" "):"Your ":""},get_hitLocationArmorValues:function(){for(var t=this.inventory.wornArmor,e=this.hitLocationZeroAVValues,n=this.coverageHitLocations,i=this.body,r=this.targetingZoneMask,s=this.calcArmorMissile&&!this.calcArmorFirearm,a=0,o=n.length;a<o;){var l=e[n[a++].id];l.avc=0,l.avp=0,l.avb=0}for(var u=0,c=t.length;u<c;){var h=t[u++].armor,d=0;null!=h.special&&null!=h.special.wornWith&&""!=h.special.wornWith.name&&(d=this.inventory.layeredWearingMaskWith(h,h.special.wornWith.name,i)),h.writeAVVAluesTo(e,i,d,s,r)}return e},get_missileHitTargetZones:function(){for(var t=this.body,e=t.missileHitLocations,n=t.targetZones,i=[],r=1,s=e.length;r<s;){var a=r++;i.push({tz:n[e[a]],index:e[a]})}return i},get_missileTargetHitZone:function(){var t=this.missileHitTargetZones;return this.selectedMissileTargetZoneIndex>=0?t[this.selectedMissileTargetZoneIndex].tz:null},sortArmorLayers:function(t,e){return t.layer<e.layer?-1:t.layer>e.layer?1:0},calcAVColumnRowIndex:function(t,e){this.calcAVColumn=t,this.calcAVRowIndex=e;var n=this.hitLocationArmorValues,i=this.coverageHitLocations[e].id,r=1<<e,s=n[i],a=this.calcArmorResults;a.damageType=t-1,a.hitLocationIndex=e,a.layer=0,a.av=1==t?s.avc:2==t?s.avp:s.avb,a.armorsLayer=[],a.armorsProtectable=[],a.armorsCrushable=[];var o=Mi.SAMPLE_AV,l=this.inventory.wornArmor,u=this.body,c=this.targetingZoneMask,h=this.calcArmorMissile&&!this.calcArmorFirearm;if(0!=a.av){for(var d=[],p=0,g=l.length;p<g;){var m=l[p++].armor;if(null!=m.coverage[i]){var f=0;if(null!=m.special&&null!=m.special.wornWith&&""!=m.special.wornWith.name&&(f=this.inventory.layeredWearingMaskWith(m,m.special.wornWith.name,u)),d.push(f),m.writeAVsAtLocation(u,i,r,o,f,h,c,!0))(1==t?o.avc:2==t?o.avp:o.avb)==a.av&&a.armorsProtectable.push(m)}else d.push(0)}if(0!=a.armorsProtectable.length){for(var _=[],v=0,b=l.length;v<b;){var y=v++,w=l[y].armor;if(null!=w.coverage[i]){var S=null!=w.special&&0!=w.special.layer?(0==w.special.layerCoverage||0!=(w.special.layerCoverage&r)?1:0)*w.special.layer:0;0!=d[y]&&w.special.wornWith.layer>0&&w.special.wornWith.layer>S&&(S=w.special.wornWith.layer);var C=S;C>0&&_.push({armor:w,layer:C})}}if(_.length>0&&(A.sort(_,Zr(this,this.sortArmorLayers)),1==a.armorsProtectable.length&&a.armorsProtectable[0]==_[_.length-1].armor&&_.pop(),_.length>0)){a.layer=_[_.length-1].layer;for(var x,I=_.length;--I>-1;)_[I].layer==a.layer&&a.armorsLayer.push(_[I].armor);1==a.armorsProtectable.length&&(x=a.armorsLayer.indexOf(a.armorsProtectable[0]))>=0&&_.splice(x,1),a.armorsProtectable.length>=2&&1==a.armorsLayer.length&&(x=a.armorsProtectable.indexOf(a.armorsLayer[0]))>=0&&a.armorsProtectable.splice(x,1)}}}if(this.calcArmorCrushing){for(var k,T=0,L=[],M=0,E=l.length;M<E;){var P=l[M++].armor;if(0!=(2&P.specialFlags)&&null!=P.coverage[i]&&((null==P.customise||null==P.customise.hitLocationAllAVModifiers||!P.checkFubarCrushed(u,c,t-1))&&P.writeAVsAtLocation(u,i,r,o,0,!1,c,!1))){var R=1==t?o.avc:2==t?o.avp:o.avb;L.push({layer:R,armor:P})}}if(L.length>0)for(A.sort(L,Zr(this,this.sortArmorLayers)),T=L[L.length-1].layer,k=L.length;--k>-1;)T==L[k].layer&&a.armorsCrushable.push(L[k].armor)}},get_shieldAVHigherOrEqual:function(){var t=0!=this.calcAVColumn,e=this.carriedShield,n=this.calcArmorResults.layer+this.calcArmorResults.av;return!(!t||null==e)&&e.AV>n},focusOutAVColumnRowIndex:function(t,e){var n=this;w.delay(function(){n.calcAVColumn==t&&n.calcAVRowIndex==e&&(n.calcAVColumn=0)},0)},test:function(){console.log("TEST")},focusOutRowField:function(t,e){w.delay(function(){t.focusedFlags&=~e},0)},focusInRowField:function(t,e){t.focusedFlags=e,e<20&&(this.curWidgetRequest.type="",this.curWidgetRequest.index=0,this.focusValueText="")},focusWidgetValue:function(t){this.focusValueText=t},executeQtyEntry:function(t,e){return!!t.isValid()&&(e.add(t.e),t.reset(),this.itemTransitionName="fade",!0)},validateQtyName:function(t,e,n){var i=n?this.inventory.packed:this.inventory.dropped,r=e.item,s=r.name;r.name=t;var a=e.get_uid();r.name=s;for(var o=0,l=i.list.length;o<l;){var u=o++,c=i.list[u];if(c!=e&&c.get_uid()==a)return!1}return!0},validateQtyNamePacked:function(t,e){return this.validateQtyName(t,e,!0)},validateQtyNameDropped:function(t,e){return this.validateQtyName(t,e,!1)},executeEquipEntry:function(t,e){if(t.isValid()){var n=this.inventory.getEquipedAssignList(e),i=t.getWeapon();n.push(t.e);var r=Cn.getEmptyReadyAssign(e);t.reset(r);var s=t.getWeapon();return null!=i&&null!=s&&(s.profs=i.profs,s.ranged=i.ranged,s.isAmmo=i.isAmmo,s.ranged&&0!=(4&s.profs)&&(s.crossbow=new gn),s.ranged&&0!=(8&s.profs)&&(s.firearm=new _n)),this.itemTransitionName="fade",!0}return!1},addAmmo:function(t){this.inventory.weapons.push(Cn.getReadyAssignOf(t))},getHitLocationMaskNameOf:function(t){return""},Template:function(){return'<div class="inventory" v-on:click="onBaseInventoryClick">\r\n\r\n\t<h2>{{whoseInventoryPrefix}}Inventory<slot name="titleAfter"></slot></h2>\r\n\t\r\n\t<div class="tally-zone">\r\n\t\t<div>\r\n\t\t\t<div class="tallycta"><label><input type="checkbox" v-model="userShowTally"></input><i>Tally?</i></label></div>\r\n\t\t</div>\r\n\t\t<div class="checkout" v-if="showTally">\r\n\t\t\t<div><b>Tally:</b> <i>(excluding dropped)</i></div>\r\n\t\t\t<div>Total Cost: <b>{{ totalCostGP }}gp  {{ totalCostSP }}sp {{ totalCostCP }}cp</b></div>\r\n\t\t\t<div v-if="maxCostCopper!=null" :class="{exceeded:exceededCost}">Max Cost: <b>{{ maxCostGP }}gp  {{ maxCostSP }}sp {{ maxCostCP }}cp</b> ({{moneyLeftStr}} remaining)</div>\r\n\t\t\t<div>Total Weight: <b>{{ totalWeightLbl }}</b></div>\r\n\t\t\t<div v-if="maxWeight!=null" :class="{exceeded:exceededWeight}">Weight Threshold: <b>{{ totalWeightLbl }}</b> / <b>{{ maxWeight }}</b> (~~{{weightRemainingLbl}}) <slot name="weightAfter"></slot></div>\r\n\t\t\t\r\n\t\t</div>\r\n\t\t<slot name="exitBtn"></slot>\r\n\t</div>\t\r\n\t\t\r\n\t<div class="manage-multi-zone">\r\n\t\t<slot name="loadNewTabZone"></slot>\r\n\t\t<div class="save-drop-zone">\r\n\t\t\t<div>\r\n\t\t\t\t<div><button v-on:click="saveDropList()">Save Dropped Zone</button></div>\r\n\t\t\t\t<textarea class="savebox" character-set="UTF-8" v-model="copyToClipboardDropList"></textarea>\r\n\t\t\t\t<div><button v-on:click="loadDropList()">Load Dropped Zone</button></div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\t\r\n\t<div style="clear:both"></div>\t\r\n\t\t\t\r\n\t<sweet-modal ref="overwriteItemWarning">\r\n\t\t<div  v-if="itemToOverwriteWith!=null" v-on:close="closeOverwriteModal()">\r\n\t\t\t<div>\r\n\t\t\tThe item{{itemToOverwriteWith.qty > 1 ? "s":""}} <b>"{{ itemToOverwriteWith.get_uid()}}"</b><b v-show="itemToOverwriteWith.qty>1">({{itemToOverwriteWith.qty}})</b> you intend to {{ itemToOverwriteToPacked ? "pack" : "drop" }} might be <b>different</b> from existing item(s) already {{  itemToOverwriteToPacked ? "in "+(isYourInventory ? "your" : "the")+" pack" : "on the ground" }} with the same label! Either confirm to overwrite the existing item(s) {{  itemToOverwriteToPacked ? "in "+(isYourInventory ? "your" : "the")+" pack" : "on the ground" }}, or re-name the item to something else before {{  itemToOverwriteToPacked ? "packing" : "dropping" }} it.\r\n\t\t\t</div>\r\n\t\t\t<br/>\r\n\t\t\t<div>\r\n\t\t\t\t<div><label><input type="checkbox" v-model="itemToOverwriteWithChecked"></input> <i>Confirm Overwrite?</i></label></div>\r\n\t\t\t\t<br/>\r\n\t\t\t\t<button slot="button" :disabled="!itemToOverwriteWithChecked" v-on:click="confirmOverwriteItem()">Confirm Overwrite</button>\r\n\t\t\t\t<br/>\r\n\t\t\t\t<button slot="button" v-on:click="closeOverwriteModal(true)">Cancel</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</sweet-modal>\r\n\t\t\t\r\n\t<sweet-modal ref="itemQtyMultipleModal" v-on:close="closeMultipleQtyItem()">\r\n\t\t<div v-if="itemQtyMultiple!=null">\r\n\t\t\t<div>\r\n\t\t\t\tHow much of <b>{{itemQtyMultiple.get_uid()}}</b><b>({{itemQtyMultipleMax}})</b> do you wish to {{ itemToOverwriteToPacked ? "pack" : "drop" }}?\r\n\t\t\t</div>\r\n\t\t\t<br/>\r\n\t\t\t<div>\r\n\t\t\t\t<InputInt :obj="itemQtyMultiple" prop="qty" :min="1" :max="itemQtyMultipleMax" />\r\n\t\t\t</div>\r\n\t\t\t<br/>\r\n\t\t\t<button slot="button" v-on:click="confirmQtyMultipleSend()">Confirm</button>\r\n\t\t\t<button slot="button" v-on:click="closeMultipleQtyItem(true)">Cancel</button>\r\n\t\t</div>\r\n\t</sweet-modal>\r\n\t\r\n\t\r\n\t<h4>Dropped:</h4>\r\n\t<table border="1">\r\n\t\t<thead>\r\n\t\t\t<tr>\r\n\t\t\t\t<td>Item Name</td>\r\n\t\t\t\t<td class="qty">Qty</td>\r\n\t\t\t\t<td class="weight">Weight</td>\r\n\t\t\t\t<td class="munition-type">Type</td>\r\n\t\t\t\t<td class="actions"><i>Actions</i></td>\r\n\t\t\t</tr>\r\n\t\t</thead>\r\n\t\t<tbody :name="itemTransitionName" is="transition-group" v-on:mousedown.native="setCurWidgetSection(\'dropped\', $event)" v-on:touchstart.native="setCurWidgetSection(\'dropped\', $event)">\r\n\t\t\t\r\n\t\t\t<tr v-for="(entry,i) in inventory.dropped.list" :key="entry.item.get_uid()">\r\n\t\t\t\t<td><input-name-qty :itemQty="entry" v-on:updated="onInputNameUpdated" :customValidateName="validateQtyNameDropped" /></td>\r\n\t\t\t\t<td><InputInt :obj="entry" prop="qty" :min="1"></InputInt></td>\r\n\t\t\t\t<td><InputNumber :floating="true" :step="0.5" :obj="entry.item" prop="weight" :min="0"></InputNumber></td>\r\n\t\t\t\t<td>{{ entry.item.getTypeLabel() }}</td>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<a href="javascript:;" v-on:click="packItemEntryFromGround(entry)">Pack</a>\r\n\t\t\t\t\t<a href="javascript:;" v-on:click="inventory.equipItemEntryFromGround(entry)">Equip</a>\r\n\t\t\t\t\t<a href="javascript:;" v-on:click="inventory.deleteDropped(entry)">Delete</a>\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t<tr class="entry-row" :key="-1">\r\n\t\t\t\t<td><input type="text" v-model="droppedEntry.e.item.name" required v-on:focus="focusInRowField(droppedEntry, 1)" v-on:blur="focusOutRowField(droppedEntry, 1)"></input></td>\r\n\t\t\t\t<td><InputInt :obj="droppedEntry.e" prop="qty" :min="1" v-on:focus.native="focusInRowField(droppedEntry, 2)" v-on:blur.native="focusOutRowField(droppedEntry, 2)"></InputInt></td>\r\n\t\t\t\t<td><InputNumber :step="0.5" :obj="droppedEntry.e" prop="weight" :min="0" v-on:focus.native="focusInRowField(droppedEntry, 4)" v-on:blur.native="focusOutRowField(droppedEntry, 4)"></InputNumber></td>\r\n\t\t\t\t<td>\r\n\t\t\t\t\tMiscItem\r\n\t\t\t\t</td>\r\n\t\t\t\t\r\n\t\t\t</tr>\r\n\t\t\r\n\t\t\t\r\n\t\t</tbody>\r\n\t</table>\r\n\t\r\n\t<hr/>\r\n\t\t\t\t\r\n\t<slot name="tabList"></slot>\r\n\t\t\t\r\n\t<h4>Packed: <label style="font-size:10px">Drop?<input type="checkbox" v-model="inventory.dropPack"></input></label></h4>\t\t\t\t\r\n\t\r\n\t\r\n\t<table border="1" style="display:inline-block">\r\n\t\t<thead>\r\n\t\t\t<tr>\r\n\t\t\t\t<td>Item Name</td>\r\n\t\t\t\t<td class="qty">Qty</td>\r\n\t\t\t\t<td class="weight">Weight</td>\r\n\t\t\t\t<td class="munition-type">Type</td>\r\n\t\t\t\t<td class="actions"><i>Actions</i></td>\r\n\t\t\t</tr>\r\n\t\t</thead>\r\n\t\t<tbody :name="itemTransitionName" is="transition-group" v-on:mousedown.native="setCurWidgetSection(\'packed\', $event)" v-on:touchstart.native="setCurWidgetSection(\'packed\', $event)">\r\n\t\t\t<tr v-for="(entry,i) in inventory.packed.list" :key="entry.item.get_uid()">\r\n\t\t\t\t<td><input-name-qty :itemQty="entry" v-on:updated="onInputNameUpdated" :customValidateName="validateQtyNamePacked" /></td>\r\n\t\t\t\t<td><InputInt :obj="entry" prop="qty" :min="1"></InputInt></td>\r\n\t\t\t\t<td><InputNumber :floating="true" :step="0.5" :obj="entry.item" prop="weight" :min="0"></InputNumber></td>\r\n\t\t\t\t<td>{{ entry.item.getTypeLabel() }}</td>\r\n\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<a href="javascript:;" v-on:click="dropItemEntryFromPack(entry)">Drop</a>\r\n\t\t\t\t\t<a href="javascript:;" v-on:click="inventory.equipItemEntryFromPack(entry)">Equip</a>\r\n\t\t\t\t\t<a href="javascript:;" v-on:click="inventory.deletePacked(entry)">Delete</a>\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t\t<tr class="entry-row" :key="-1">\r\n\t\t\t\t<td><input type="text" v-model="packedEntry.e.item.name" required v-on:focus="focusInRowField(packedEntry, 1)" v-on:blur="focusOutRowField(packedEntry, 1)"></input></td>\r\n\t\t\t\t<td><InputInt :obj="packedEntry.e" prop="qty" :min="1" v-on:focus.native="focusInRowField(packedEntry, 2)" v-on:blur.native="focusOutRowField(packedEntry, 2)"></InputInt></td>\r\n\t\t\t\t<td><InputNumber :step="0.5" :obj="packedEntry.e" prop="weight" :min="0" v-on:focus.native="focusInRowField(packedEntry, 4)" v-on:blur.native="focusOutRowField(packedEntry, 4)"></InputNumber></td>\r\n\t\t\t\t<td>MiscItem</td>\r\n\t\t\t</tr>\r\n\t\t</tbody>\r\n\t</table>\r\n\t\t\t\t\r\n\t<h3>Equipment details</h3>\r\n\t\r\n\t\r\n\t<h4>Shields:</h4>\r\n\t<table border="1">\r\n\t\t<thead>\r\n\t\t\t<tr>\r\n\t\t\t\t<td style="width:155px">Shield Name</td>\r\n\t\t\t\t<td style="width:35px">AV</td>\r\n\t\t\t\t<td style="width:35px">Block</td>\r\n\t\t\t\t<td style="width:45px">Weight</td>\r\n\t\t\t\t<td style="width:67px">Size</td>\r\n\t\t\t\t<td class="tags">Tags</td>\r\n\t\t\t\t<td style="width:130px">Kept at?</td>\r\n\t\t\t\t<td class="held">Held?</td>\r\n\t\t\t\t<td class="actions"><i>Actions</i></td>\r\n\t\t\t</tr>\r\n\t\t</thead>\r\n\t\t<tbody :name="itemTransitionName" is="transition-group" v-on:mousedown.native="setCurWidgetSection(\'shield\',$event)" v-on:touchstart.native="setCurWidgetSection(\'shield\',$event)">\r\n\t\t\t<tr :key="entry.key" v-for="(entry,i) in inventory.shields">\r\n\t\t\t\t<td><input-name :item="entry.shield" v-on:updated="onInputNameUpdated" /></td>\r\n\t\t\t\t<td><InputInt :obj="entry.shield" prop="AV" :min="1"></InputInt></td>\r\n\t\t\t\t<td><InputInt :obj="entry.shield" prop="blockTN" :min="0"></InputInt></td>\r\n\t\t\t\t<td><InputNumber :step="0.5" :obj="entry.shield" prop="weight" :min="0"></InputNumber></td>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<select number v-model.number="entry.shield.size ">\r\n\t\t\t\t\t\t<option :value="0">Small</option>\r\n\t\t\t\t\t\t<option :value="1">Medium</option>\r\n\t\t\t\t\t\t<option :value="2">Large</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</td>\r\n\t\t\t\t<td-widget v-on:focus-widget-value="focusWidgetValue" widgetName="tags" widgetTagName="w-tags" :value="getTags(entry.shield)" :index="i" :showWidget="isVisibleWidget(\'shield\',\'tags\', i)" :entry="entry" :requestCurWidget="requestCurWidget" />\r\n\t\t\t\t<td-unheld :entry="entry" :requestCurWidget="requestCurWidget" :index="i" :showWidget="isVisibleWidget(\'shield\', \'td-unheld\', i)" />\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<select-held :entry="entry" :inventory="inventory" />\r\n\t\t\t\t</td>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<a href="javascript:;" v-on:click="packEquipedShield(entry)">Pack</a>\r\n\t\t\t\t\t<a href="javascript:;" v-on:click="dropEquipedShield(entry)">Drop</a>\r\n\t\t\t\t\t<a href="javascript:;" v-on:click="dropEquipedShield(entry, true)">Delete</a>\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t\t<tr class="entry-row" :key="-1">\r\n\t\t\t\t<td><input type="text" v-on:focus="focusInRowField(shieldEntry, 1)" v-on:blur="focusOutRowField(shieldEntry, 1)" v-model="shieldEntry.e.shield.name" required></input></td>\r\n\t\t\t\t<td><InputInt v-on:focus.native="focusInRowField(shieldEntry, 2)" v-on:blur.native="focusOutRowField(shieldEntry, 2)" :obj="shieldEntry.e.shield" prop="AV" :min="1"></InputInt></td>\r\n\t\t\t\t<td><InputInt v-on:focus.native="focusInRowField(shieldEntry, 4)" v-on:blur.native="focusOutRowField(shieldEntry, 4)" :obj="shieldEntry.e.shield" prop="blockTN" :min="0"></InputInt></td>\r\n\t\t\t\t<td><InputInt v-on:focus.native="focusInRowField(shieldEntry, 8)" v-on:blur.native="focusOutRowField(shieldEntry, 8)" :obj="shieldEntry.e.shield" prop="weight" :min="0"></InputInt></td>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<select v-model.number="shieldEntry.e.shield.size" v-on:focus="focusInRowField(shieldEntry, 16)" v-on:blur="focusOutRowField(shieldEntry, 16)">\r\n\t\t\t\t\t\t<option :value="0">Small</option>\r\n\t\t\t\t\t\t<option :value="1">Medium</option>\r\n\t\t\t\t\t\t<option :value="2">Large</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</td>\r\n\t\t\t\t<td-widget v-on:focus-widget-value="focusWidgetValue" widgetName="tags" widgetTagName="w-tags" :value="getTags(shieldEntry.e.shield)" :index="-1" :showWidget="(shieldEntry.focusedFlags & (32|(1<<21))) !=0" :entry="shieldEntry.e" :requestCurWidget="requestCurWidget"\r\n\t\t\t\tv-on:focus-in-row="focusInRowField(shieldEntry, 32)" v-on:focus-out-row="focusOutRowField(shieldEntry, 32)" v-on:focus-widget="focusInRowField(shieldEntry, (1<<21))" />\r\n\t\t\t\t<td><input type="text" v-model="shieldEntry.e.unheldRemark" v-on:focus="focusInRowField(shieldEntry,64)" v-on:blur="focusOutRowField(shieldEntry,64)"></input></td>\t\r\n\t\t\t\t\r\n\t\t\t</tr>\r\n\t\t</tbody>\r\n\t</table>\r\n\t\r\n\t<h4>Munitions:</h4>\r\n\t<table border="1">\r\n\t\t<thead>\r\n\t\t\t<tr>\r\n\t\t\t\t<td>Melee Weap name</td>\r\n\t\t\t\t<td class="munition-type">Type</td>\r\n\t\t\t\t<td class="hands">Hands</td>\r\n\t\t\t\t<td class="reach">Reach</td>\r\n\t\t\t\t<td style="width:65px">Swing</td>\r\n\t\t\t\t<td style="width:65px">Thrust</td>\r\n\t\t\t\t<td style="width:35px">DTN(G)</td>\r\n\t\t\t\t<td class="tags">Tags</td>\r\n\t\t\t\t<td class="weight">Weight</td>\r\n\t\t\t\t<td class="keptat">Kept at?</td>\r\n\t\t\t\t<td class="held">Held?</td>\r\n\t\t\t\t<td class="actions"><i>Actions</i></td>\r\n\t\t\t</tr>\r\n\t\t</thead>\r\n\t\t<tbody :name="itemTransitionName" is="transition-group" v-on:mousedown.native="setCurWidgetSection(\'meleeWeap\', $event)" v-on:touchstart.native="setCurWidgetSection(\'meleeWeap\', $event)">\r\n\t\t\t<tr v-for="(entry,itemIndex) in filteredMelee" :key="entry.key">\r\n\t\t\t\t<td><input-name :item="entry.weapon" v-on:updated="onInputNameUpdated" :weaponHeldOff="entry.holding1H && entry.weapon.variant!=null" /></td>\r\n\t\t\t\t<td-prof :entry="entry" :weaponAssign="entry" :curWidgetRequest="curWidgetRequest" :isVisibleWidget="isVisibleWidget" :weapon="entry.holding1H && entry.weapon.variant!=null ? entry.weapon.variant : entry.weapon" section="meleeWeap" :index="itemIndex"  :meleeProfs="coreMeleeProfs" :rangedProfs="coreRangedProfs"  />\r\n\t\t\t\t<td-hands :entry="entry" />\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<select number v-model.number="entry.weapon.reach" v-if="!entry.holding1H || entry.weapon.variant==null">\r\n\t\t\t\t\t\t<option :value="1">HA</option>\r\n\t\t\t\t\t\t<option :value="2">H</option>\r\n\t\t\t\t\t\t<option :value="3">S</option>\r\n\t\t\t\t\t\t<option :value="4">M</option>\r\n\t\t\t\t\t\t<option :value="5">L</option>\r\n\t\t\t\t\t\t<option :value="6">VL</option>\r\n\t\t\t\t\t\t<option :value="7">EL</option>\r\n\t\t\t\t\t\t<option :value="8">LL</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t\t\t<select number v-model.number="entry.weapon.variant.reach" v-else>\r\n\t\t\t\t\t\t<option :value="1">HA</option>\r\n\t\t\t\t\t\t<option :value="2">H</option>\r\n\t\t\t\t\t\t<option :value="3">S</option>\r\n\t\t\t\t\t\t<option :value="4">M</option>\r\n\t\t\t\t\t\t<option :value="5">L</option>\r\n\t\t\t\t\t\t<option :value="6">VL</option>\r\n\t\t\t\t\t\t<option :value="7">EL</option>\r\n\t\t\t\t\t\t<option :value="8">LL</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</td>\r\n\t\t\t\t<td-widget v-on:focus-widget-value="focusWidgetValue" widgetName="melee-atk" widgetTagName="w-melee-atk" :widgetProps="{thrusting:false}" :value="getSwingAtkStr(entry.weapon, entry)" :index="itemIndex" :showWidget="isVisibleWidget(\'meleeWeap\',\'melee-atk\', itemIndex)" :entry="entry" :requestCurWidget="requestCurWidget" :weaponAssign="entry" />\r\n\t\t\t\t<td-widget v-on:focus-widget-value="focusWidgetValue" widgetName="melee-atk2" widgetTagName="w-melee-atk" :widgetProps="{thrusting:true}" :value="getThrustAtkStr(entry.weapon, entry)" :index="itemIndex" :showWidget="isVisibleWidget(\'meleeWeap\',\'melee-atk2\', itemIndex)" :entry="entry" :requestCurWidget="requestCurWidget"  :weaponAssign="entry" />\r\n\t\t\t\t<td-widget v-on:focus-widget-value="focusWidgetValue" widgetName="melee-def" widgetTagName="w-melee-def" :value="getDefGuard(entry.weapon, entry)" :index="itemIndex" :showWidget="isVisibleWidget(\'meleeWeap\',\'melee-def\', itemIndex)" :entry="entry" :requestCurWidget="requestCurWidget"  :weaponAssign="entry" />\r\n\t\t\t\t<td-widget v-on:focus-widget-value="focusWidgetValue" widgetName="tags" :weaponAssign="entry" widgetTagName="w-tags" :value="getTags(entry.weapon, entry)" :index="itemIndex" :showWidget="isVisibleWidget(\'meleeWeap\',\'tags\', itemIndex)" :entry="entry" :requestCurWidget="requestCurWidget"  />\r\n\t\t\t\t<td><InputNumber :min="0" :step="0.5" :obj="entry.weapon" prop="weight"></InputNumber></td>\r\n\t\t\t\t<td-unheld :entry="entry" :requestCurWidget="requestCurWidget" :index="itemIndex" :showWidget="isVisibleWidget(\'meleeWeap\', \'td-unheld\', itemIndex)" />\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<select-held :entry="entry" :inventory="inventory" :weaponAssign="entry" />\r\n\t\t\t\t</td>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<a href="javascript:;" v-on:click="packEquipedWeapon(entry)">Pack</a>\r\n\t\t\t\t\t<a href="javascript:;" v-on:click="dropEquipedWeapon(entry)">Drop</a>\r\n\t\t\t\t\t<a href="javascript:;" v-on:click="dropEquipedWeapon(entry, true)">Delete</a>\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t\t<tr class="entry-row" v-if="weaponEntry.e.weapon.isMelee()" :key="-1">\r\n\t\t\t\t<td><input type="text" v-model="weaponEntry.e.weapon.name" v-on:focus="focusInRowField(weaponEntry,1)" v-on:blur="focusOutRowField(weaponEntry,1)"></input></td>\r\n\t\t\t\t<td-prof :curWidgetRequest="curWidgetRequest" :isVisibleWidget="isVisibleWidget" :entry="weaponEntry.e" :weapon="weaponEntry.e.weapon" section="meleeWeap" :index="-1" v-on:focus-widget="focusInRowField(weaponEntry,(1<<20))" v-on:focus-in-row="focusInRowField(weaponEntry, 2)" v-on:focus-out-row="focusOutRowField(weaponEntry,2)" :meleeProfs="coreMeleeProfs" :rangedProfs="coreRangedProfs"  />\r\n\t\t\t\t<td-hands :entry="weaponEntry.e"  v-on:focus-in-row="focusInRowField(weaponEntry, 4)" v-on:focus-out-row="focusOutRowField(weaponEntry,4)" />\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<select number v-model.number="weaponEntry.e.weapon.reach"  v-on:focus="focusInRowField(weaponEntry,8)" v-on:blur="focusOutRowField(weaponEntry,8)">\r\n\t\t\t\t\t\t<option value="1">HA</option>\r\n\t\t\t\t\t\t<option value="2">H</option>\r\n\t\t\t\t\t\t<option value="3">S</option>\r\n\t\t\t\t\t\t<option value="4">M</option>\r\n\t\t\t\t\t\t<option value="5">L</option>\r\n\t\t\t\t\t\t<option value="6">VL</option>\r\n\t\t\t\t\t\t<option value="7">EL</option>\r\n\t\t\t\t\t\t<option value="8">LL</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</td>\t\r\n\t\t\t\t<td-widget v-on:focus-widget-value="focusWidgetValue" widgetName="melee-atk" widgetTagName="w-melee-atk" :widgetProps="{thrusting:false}" :value="getSwingAtkStr(weaponEntry.e.weapon)" :index="-1" :showWidget="(weaponEntry.focusedFlags & (16|(1<<21))) !=0" :entry="weaponEntry.e" :requestCurWidget="requestCurWidget" v-on:focus-widget="focusInRowField(weaponEntry,(1<<21))" v-on:focus-in-row="focusInRowField(weaponEntry,16)" v-on:focus-out-row="focusOutRowField(weaponEntry,16)" />\r\n\t\t\t\t\t\r\n\t\t\t\t<td-widget v-on:focus-widget-value="focusWidgetValue" widgetName="melee-atk2" widgetTagName="w-melee-atk" :widgetProps="{thrusting:true}" :value="getThrustAtkStr(weaponEntry.e.weapon)" :index="-1" :showWidget="(weaponEntry.focusedFlags & (32|(1<<22))) !=0" :entry="weaponEntry.e" :requestCurWidget="requestCurWidget"  v-on:focus-widget="focusInRowField(weaponEntry,(1<<22))" v-on:focus-in-row="focusInRowField(weaponEntry,32)" v-on:focus-out-row="focusOutRowField(weaponEntry,32)" />\t\r\n\t\t\t\t\t\r\n\t\t\t\t<td-widget v-on:focus-widget-value="focusWidgetValue" widgetName="melee-def" widgetTagName="w-melee-def" :value="getDefGuard(weaponEntry.e.weapon)" :index="-1" :showWidget="(weaponEntry.focusedFlags & (64|(1<<23))) !=0" :entry="weaponEntry.e" :requestCurWidget="requestCurWidget" v-on:focus-widget="focusInRowField(weaponEntry,(1<<23))" v-on:focus-in-row="focusInRowField(weaponEntry,64)" v-on:focus-out-row="focusOutRowField(weaponEntry,64)" />\r\n\t\t\t\t\t\r\n\t\t\t\t\t<td-widget v-on:focus-widget-value="focusWidgetValue" widgetName="tags" widgetTagName="w-tags" :value="getTags(weaponEntry.e.weapon)" :index="-1" :showWidget="(weaponEntry.focusedFlags & (128|(1<<24))) !=0" :entry="weaponEntry.e" :requestCurWidget="requestCurWidget" v-on:focus-widget="focusInRowField(weaponEntry,(1<<24))" v-on:focus-in-row="focusInRowField(weaponEntry,128)" v-on:focus-out-row="focusOutRowField(weaponEntry,128)" />\r\n\t\t\t\t\t\t\r\n\t\t\t\t<td><InputNumber :min="0" :step="0.5" :obj="weaponEntry.e.weapon" prop="weight" v-on:focus.native="focusInRowField(weaponEntry,256)" v-on:blur.native="focusOutRowField(weaponEntry,256)"></InputNumber></td>\r\n\t\t\t\t<td><input type="text" v-model="weaponEntry.e.unheldRemark"v-on:focus="focusInRowField(weaponEntry,512)" v-on:blur="focusOutRowField(weaponEntry,512)"></input></td>\r\n\t\t\t</tr>\r\n\t\t</tbody>\r\n\t\t<thead v-on:mousedown="setCurWidgetSection(\'bowheader\', $event)" v-on:touchstart="setCurWidgetSection(\'bowheader\', $event)">\r\n\t\t\t<tr>\r\n\t\t\t\t<td>Bow name</td>\r\n\t\t\t\t<td class="munition-type">Type</td>\r\n\t\t\t\t<td class="hands">Hands</td>\r\n\t\t\t\t<td>Range</td>\r\n\t\t\t\t<td>TN(dmg)</td>\r\n\t\t\t\t<td>Req STR</td>\r\n\t\t\t\t<td class="voidna focus gotbtn w-holder w-ammo-spawner" v-on:click.stop="">\r\n\t\t\t\t\t<button v-on:click="requestCurWidget(\'ammo-spawner\',-1)">&#8610;</button>\r\n\t\t\t\t\t<div class="pop-widget"  v-if="isVisibleWidget(\'bowheader\', \'ammo-spawner\', -1)">\r\n\t\t\t\t\t\t<w-ammo-spawner :mask="bowSlingAndCrossbowMask" :addAmmo="addAmmo" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</td>\r\n\t\t\t\t<td class="tags">Tags</td>\r\n\t\t\t\t<td class="weight">Weight</td>\r\n\t\t\t\t<td class="keptat">Kept at?</td>\r\n\t\t\t\t<td class="held">Held?</td>\r\n\t\t\t\t<td class="actions"><i>Actions</i></td>\r\n\t\t\t</tr>\r\n\t\t</thead>\r\n\t\t<tbody :name="itemTransitionName" is="transition-group" v-on:mousedown.native="setCurWidgetSection(\'bow\', $event)" v-on:touchstart.native="setCurWidgetSection(\'bow\', $event)">\r\n\t\t\t<tr v-for="(entry, itemIndex) in filteredBow" :key="entry.key">\r\n\t\t\t\t<td><input-name :item="entry.weapon" v-on:updated="onInputNameUpdated" /></td>\r\n\t\t\t\t<td-prof :curWidgetRequest="curWidgetRequest" :isVisibleWidget="isVisibleWidget" :entry="entry" :weapon="entry.weapon" section="bow" :index="itemIndex"  :meleeProfs="coreMeleeProfs" :rangedProfs="coreRangedProfs" :profMask="bowMask" />\r\n\t\t\t\t<td-hands :entry="entry" />\r\n\t\t\t\t<td><InputInt :obj="entry.weapon" prop="range" /></td>\r\n\t\t\t\t<td-widget v-on:focus-widget-value="focusWidgetValue" widgetName="missile-atk" widgetTagName="w-missile-atk" :value="getMissileAtkStr(entry.weapon)" :index="itemIndex" :showWidget="isVisibleWidget(\'bow\',\'missile-atk\', itemIndex)" :entry="entry" :requestCurWidget="requestCurWidget" />\r\n\t\t\t\t<td><InputInt :obj="entry.weapon" prop="requiredStr"></InputInt></td>\r\n\t\t\t\t<td class="voidna"></td>\r\n\t\t\t\t<td-widget v-on:focus-widget-value="focusWidgetValue" widgetName="tags" widgetTagName="w-tags" :value="getTags(entry.weapon)" :index="itemIndex" :showWidget="isVisibleWidget(\'bow\',\'tags\', itemIndex)" :entry="entry" :requestCurWidget="requestCurWidget" />\r\n\t\t\t\t<td><InputNumber :min="0" :step="0.5" :obj="entry.weapon" prop="weight"></InputNumber></td>\r\n\t\t\t\t<td-unheld :entry="entry" :requestCurWidget="requestCurWidget" :index="itemIndex" :showWidget="isVisibleWidget(\'bow\', \'td-unheld\', itemIndex)" />\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<select-held :entry="entry" :inventory="inventory" />\r\n\t\t\t\t</td>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<a href="javascript:;" v-on:click="packEquipedWeapon(entry)">Pack</a>\r\n\t\t\t\t\t<a href="javascript:;" v-on:click="dropEquipedWeapon(entry)">Drop</a>\r\n\t\t\t\t\t<a href="javascript:;" v-on:click="dropEquipedWeapon(entry, true)">Delete</a>\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t\t<tr class="entry-row" v-if="weaponEntry.e.weapon.isBow()" :key="-2">\r\n\t\t\t\t<td><input type="text" v-model="weaponEntry.e.weapon.name" v-on:focus="focusInRowField(weaponEntry,1)" v-on:blur="focusOutRowField(weaponEntry,1)"></input></td>\r\n\t\t\t\t<td-prof :entry="weaponEntry.e"  :curWidgetRequest="curWidgetRequest" :isVisibleWidget="isVisibleWidget" :weapon="weaponEntry.e.weapon" section="bow" :index="-1" v-on:focus-widget="focusInRowField(weaponEntry,(1<<20))" v-on:focus-in-row="focusInRowField(weaponEntry, 2)" v-on:focus-out-row="focusOutRowField(weaponEntry,2)" :meleeProfs="coreMeleeProfs" :rangedProfs="coreRangedProfs" :profMask="bowMask" />\r\n\t\t\t\t<td-hands :entry="weaponEntry.e"  v-on:focus-in-row="focusInRowField(weaponEntry, 4)" v-on:focus-out-row="focusOutRowField(weaponEntry, 4)" />\r\n\t\t\t\t<td><InputInt :min="0" :obj="weaponEntry.e.weapon" prop="range" v-on:focus.native="focusInRowField(weaponEntry,8)" v-on:blur.native="focusOutRowField(weaponEntry,8)"  /></td>\r\n\t\t\t\t<td-widget v-on:focus-widget-value="focusWidgetValue" widgetName="missile-atk" widgetTagName="w-missile-atk" :value="getMissileAtkStr(weaponEntry.e.weapon)" :index="-1" :showWidget="(weaponEntry.focusedFlags & (16|(1<<21))) !=0" :entry="weaponEntry.e" :requestCurWidget="requestCurWidget" v-on:focus-widget="focusInRowField(weaponEntry,(1<<21))" v-on:focus-in-row="focusInRowField(weaponEntry,16)" v-on:focus-out-row="focusOutRowField(weaponEntry,16)" />\r\n\t\t\t\t<td><InputInt :step="1" :obj="weaponEntry.e.weapon" prop="requiredStr" v-on:focus.native="focusInRowField(weaponEntry,32)" v-on:blur.native="focusOutRowField(weaponEntry,32)"></InputInt></td>\r\n\t\t\t\t<td class="voidna"></td>\r\n\t\t\t\t<td-widget v-on:focus-widget-value="focusWidgetValue" widgetName="tags" widgetTagName="w-tags" :value="getTags(weaponEntry.e.weapon)" :index="-1" :showWidget="(weaponEntry.focusedFlags & (128|(1<<24))) !=0" :entry="weaponEntry.e" :requestCurWidget="requestCurWidget" v-on:focus-widget="focusInRowField(weaponEntry,(1<<24))" v-on:focus-in-row="focusInRowField(weaponEntry,128)" v-on:focus-out-row="focusOutRowField(weaponEntry,128)" />\r\n\t\t\t\t<td><InputNumber :min="0" :step="0.5" :obj="weaponEntry.e.weapon" prop="weight" v-on:focus.native="focusInRowField(weaponEntry,256)" v-on:blur.native="focusOutRowField(weaponEntry,256)"></InputNumber></td>\r\n\t\t\t\t<td><input type="text" v-model="weaponEntry.e.unheldRemark"v-on:focus="focusInRowField(weaponEntry,512)" v-on:blur="focusOutRowField(weaponEntry,512)"></input></td>\r\n\t\t\t</tr>\r\n\t\t</tbody>\r\n\t\t<thead>\r\n\t\t\t<tr>\r\n\t\t\t\t<td>Crossbow name</td>\r\n\t\t\t\t<td class="munition-type">Type</td>\r\n\t\t\t\t<td class="hands">Hands</td>\r\n\t\t\t\t<td>Range</td>\r\n\t\t\t\t<td>TN(dmg)</td>\r\n\t\t\t\t<td>Span</td>\r\n\t\t\t\t<td>SpanTool</td>\r\n\t\t\t\t<td class="tags">Tags</td>\r\n\t\t\t\t<td class="weight">Weight</td>\r\n\t\t\t\t<td class="keptat">Kept at?</td>\r\n\t\t\t\t<td class="held">Held?</td>\r\n\t\t\t\t<td class="actions"><i>Actions</i></td>\r\n\t\t\t</tr>\r\n\t\t</thead>\r\n\t\t<tbody :name="itemTransitionName" is="transition-group" v-on:mousedown.native="setCurWidgetSection(\'crossbow\', $event)" v-on:touchstart.native="setCurWidgetSection(\'crossbow\', $event)">\r\n\t\t\t<tr v-for="(entry, itemIndex) in filteredCrossbow" :key="entry.key">\r\n\t\t\t\t<td><input-name :item="entry.weapon" v-on:updated="onInputNameUpdated" /></td>\r\n\t\t\t\t<td-prof :curWidgetRequest="curWidgetRequest" :isVisibleWidget="isVisibleWidget" :entry="entry" :weapon="entry.weapon" section="crossbow" :index="itemIndex"  :meleeProfs="coreMeleeProfs" :rangedProfs="coreRangedProfs" :profMask="crossbowMask" />\r\n\t\t\t\t<td-hands :entry="entry" />\r\n\t\t\t\t<td><InputInt :min="0" :obj="entry.weapon" prop="range" /></td>\r\n\t\t\t\t<td-widget v-on:focus-widget-value="focusWidgetValue" widgetName="missile-atk" widgetTagName="w-missile-atk" :value="getMissileAtkStr(entry.weapon)" :index="itemIndex" :showWidget="isVisibleWidget(\'crossbow\',\'missile-atk\', itemIndex)" :entry="entry" :requestCurWidget="requestCurWidget" />\r\n\t\t\t\t<td><InputInt :min="0" :obj="entry.weapon.crossbow" prop="span"></InputInt></td>\r\n\t\t\t\t<td-widget v-on:focus-widget-value="focusWidgetValue" widgetName="span-tools" widgetTagName="w-span-tools" :value="getSpanTools(entry.weapon.crossbow)" :index="itemIndex" :showWidget="isVisibleWidget(\'crossbow\',\'span-tools\', itemIndex)" :entry="entry" :requestCurWidget="requestCurWidget" />\r\n\t\t\t\t<td-widget v-on:focus-widget-value="focusWidgetValue" widgetName="tags" widgetTagName="w-tags" :value="getTags(entry.weapon)" :index="itemIndex" :showWidget="isVisibleWidget(\'crossbow\',\'tags\', itemIndex)" :entry="entry" :requestCurWidget="requestCurWidget" />\r\n\t\t\t\t<td><InputNumber :min="0" :step="0.5" :obj="entry.weapon" prop="weight"></InputNumber></td>\r\n\t\t\t\t<td-unheld :entry="entry" :requestCurWidget="requestCurWidget" :index="itemIndex" :showWidget="isVisibleWidget(\'crossbow\', \'td-unheld\', itemIndex)" />\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<select-held :entry="entry" :inventory="inventory" />\r\n\t\t\t\t</td>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<a href="javascript:;" v-on:click="packEquipedWeapon(entry)">Pack</a>\r\n\t\t\t\t\t<a href="javascript:;" v-on:click="dropEquipedWeapon(entry)">Drop</a>\r\n\t\t\t\t\t<a href="javascript:;" v-on:click="dropEquipedWeapon(entry, true)">Delete</a>\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t\t<tr class="entry-row" :key="-3" v-if="weaponEntry.e.weapon.isCrossbow()">\r\n\t\t\t\t<td><input type="text" v-model="weaponEntry.e.weapon.name" v-on:focus="focusInRowField(weaponEntry,1)" v-on:blur="focusOutRowField(weaponEntry,1)"></input></td>\r\n\t\t\t\t<td-prof  :curWidgetRequest="curWidgetRequest" :isVisibleWidget="isVisibleWidget" :entry="weaponEntry.e" :weapon="weaponEntry.e.weapon" section="crossbow" :index="-1" v-on:focus-widget="focusInRowField(weaponEntry,(1<<20))" v-on:focus-in-row="focusInRowField(weaponEntry, 2)" v-on:focus-out-row="focusOutRowField(weaponEntry,2)" :meleeProfs="coreMeleeProfs" :rangedProfs="coreRangedProfs" :profMask="crossbowMask" />\r\n\t\t\t\t<td-hands :entry="weaponEntry.e" v-on:focus-in-row="focusInRowField(weaponEntry, 4)" v-on:focus-out-row="focusOutRowField(weaponEntry,4)" />\t\r\n\t\t\t\t<td><InputInt :min="0" :obj="weaponEntry.e.weapon" prop="range" v-on:focus.native="focusInRowField(weaponEntry,8)" v-on:blur.native="focusOutRowField(weaponEntry,8)"  /></td>\r\n\t\t\t\t<td-widget v-on:focus-widget-value="focusWidgetValue" widgetName="missile-atk" widgetTagName="w-missile-atk" :value="getMissileAtkStr(weaponEntry.e.weapon)" :index="-1" :showWidget="(weaponEntry.focusedFlags & (16|(1<<21))) !=0" :entry="weaponEntry.e" :requestCurWidget="requestCurWidget" v-on:focus-widget="focusInRowField(weaponEntry,(1<<21))" v-on:focus-in-row="focusInRowField(weaponEntry,16)" v-on:focus-out-row="focusOutRowField(weaponEntry,16)" />\r\n\t\t\t\t<td><InputInt :min="0" :obj="weaponEntry.e.weapon.crossbow" prop="span"  v-on:focus.native="focusInRowField(weaponEntry,32)" v-on:blur.native="focusOutRowField(weaponEntry,32)"></InputInt></td>\r\n\t\t\t\t<td-widget v-on:focus-widget-value="focusWidgetValue" widgetName="span-tools" widgetTagName="w-span-tools" :value="getSpanTools(weaponEntry.e.weapon.crossbow)" :index="-1" :showWidget="(weaponEntry.focusedFlags & (64|(1<<22))) !=0" :entry="weaponEntry.e" :requestCurWidget="requestCurWidget" v-on:focus-widget="focusInRowField(weaponEntry,(1<<22))" v-on:focus-in-row="focusInRowField(weaponEntry,64)" v-on:focus-out-row="focusOutRowField(weaponEntry,64)" />\t\r\n\t\t\t\t<td-widget v-on:focus-widget-value="focusWidgetValue" widgetName="tags" widgetTagName="w-tags" :value="getTags(weaponEntry.e.weapon)" :index="-1" :showWidget="(weaponEntry.focusedFlags & (128|(1<<24))) !=0" :entry="weaponEntry.e" :requestCurWidget="requestCurWidget" v-on:focus-widget="focusInRowField(weaponEntry,(1<<24))" v-on:focus-in-row="focusInRowField(weaponEntry,128)" v-on:focus-out-row="focusOutRowField(weaponEntry,128)" />\r\n\t\t\t\t<td><InputNumber :min="0" :step="0.5" :obj="weaponEntry.e.weapon" prop="weight" v-on:focus.native="focusInRowField(weaponEntry,256)" v-on:blur.native="focusOutRowField(weaponEntry,256)"></InputNumber></td>\r\n\t\t\t\t<td><input type="text" v-model="weaponEntry.e.unheldRemark"v-on:focus="focusInRowField(weaponEntry,512)" v-on:blur="focusOutRowField(weaponEntry,512)"></input></td>\r\n\t\t\t</tr>\r\n\t\t</tbody>\r\n\t\t<thead v-on:mousedown="setCurWidgetSection(\'firearmheader\', $event)" v-on:touchstart="setCurWidgetSection(\'firearmheader\', $event)">\r\n\t\t\t<tr>\r\n\t\t\t\t<td>Firearm name</td>\r\n\t\t\t\t<td class="munition-type">Type</td>\r\n\t\t\t\t<td class="hands">Hands</td>\r\n\t\t\t\t<td>Range</td>\r\n\t\t\t\t<td>TN(dmg)</td>\r\n\t\t\t\t<td>Load</td>\r\n\t\t\t\t<td class="w-holder w-ammo-spawner" v-on:click.stop="">\r\n\t\t\t\t\t<a href="javascript:;" v-on:click="requestCurWidget(\'ammo-spawner\',-1)">Ammunition</a>\r\n\t\t\t\t\t<div class="pop-widget"  v-if="isVisibleWidget(\'firearmheader\', \'ammo-spawner\', -1)">\r\n\t\t\t\t\t\t<w-ammo-spawner :mask="firearmMask" :addAmmo="addAmmo" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</td>\r\n\t\t\t\t<td class="tags">Tags</td>\r\n\t\t\t\t<td class="weight">Weight</td>\r\n\t\t\t\t<td class="keptat">Kept at?</td>\r\n\t\t\t\t<td class="held">Held?</td>\r\n\t\t\t\t<td class="actions"><i>Actions</i></td>\r\n\t\t\t</tr>\r\n\t\t</thead>\r\n\t\t<tbody :name="itemTransitionName" is="transition-group" v-on:mousedown.native="setCurWidgetSection(\'firearm\', $event)" v-on:touchstart.native="setCurWidgetSection(\'firearm\', $event)">\r\n\t\t\t<tr v-for="(entry, itemIndex) in filteredFirearm" :key="entry.key">\r\n\t\t\t\t<td-widget v-on:focus-widget-value="focusWidgetValue" widgetName="firearm-name" widgetTagName="w-firearm-name" :value="entry.weapon.get_label()" :index="itemIndex" :showWidget="isVisibleWidget(\'firearm\',\'firearm-name\', itemIndex)" :entry="entry" :requestCurWidget="requestCurWidget" />\r\n\t\t\t\t<td-prof :curWidgetRequest="curWidgetRequest" :isVisibleWidget="isVisibleWidget"  :entry="entry" :weapon="entry.weapon" section="firearm" :index="itemIndex"  :meleeProfs="coreMeleeProfs" :rangedProfs="coreRangedProfs" :profMask="firearmMask"  />\r\n\t\t\t\t<td-hands :entry="entry" />\r\n\t\t\t\t<td><InputInt :step="1" :min="0" :obj="entry.weapon" prop="range" /></td>\r\n\t\t\t\t<td-widget v-on:focus-widget-value="focusWidgetValue" widgetName="missile-atk" widgetTagName="w-missile-atk" :value="getMissileAtkStr(entry.weapon)" :index="itemIndex" :showWidget="isVisibleWidget(\'firearm\',\'missile-atk\', itemIndex)" :entry="entry" :requestCurWidget="requestCurWidget" />\r\n\t\t\t\t<td><InputInt :min="0" :obj="entry.weapon.firearm" prop="load"></InputInt></td>\r\n\t\t\t\t<td-widget v-on:focus-widget-value="focusWidgetValue" widgetName="ammunition" widgetTagName="w-ammunition" :value="getAmmunitions(entry.weapon.firearm)" :index="itemIndex" :showWidget="isVisibleWidget(\'firearm\',\'ammunition\', itemIndex)" :entry="entry" :requestCurWidget="requestCurWidget" :addAmmo="addAmmo" />\r\n\t\t\t\t<td-widget v-on:focus-widget-value="focusWidgetValue" widgetName="tags" widgetTagName="w-tags" :value="getTags(entry.weapon)" :index="itemIndex" :showWidget="isVisibleWidget(\'firearm\',\'tags\', itemIndex)" :entry="entry" :requestCurWidget="requestCurWidget" />\r\n\t\t\t\t<td><InputNumber :min="0" :step="0.5" :obj="entry.weapon" prop="weight"></InputNumber></td>\r\n\t\t\t\t<td-unheld :entry="entry" :requestCurWidget="requestCurWidget" :index="itemIndex" :showWidget="isVisibleWidget(\'firearm\', \'td-unheld\', itemIndex)" />\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<select-held :entry="entry" :inventory="inventory" />\r\n\t\t\t\t</td>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<a href="javascript:;" v-on:click="packEquipedWeapon(entry)">Pack</a>\r\n\t\t\t\t\t<a href="javascript:;" v-on:click="dropEquipedWeapon(entry)">Drop</a>\r\n\t\t\t\t\t<a href="javascript:;" v-on:click="dropEquipedWeapon(entry, true)">Delete</a>\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t\t<tr class="entry-row" :key="-4" v-if="weaponEntry.e.weapon.isFirearm()">\r\n\t\t\t\t<td-widget v-on:focus-widget-value="focusWidgetValue" widgetName="firearm-name" widgetTagName="w-firearm-name" :value="weaponEntry.e.weapon.get_label()" :index="-1" :showWidget="(weaponEntry.focusedFlags & (1|(1<<25))) !=0" :entry="weaponEntry.e" :requestCurWidget="requestCurWidget" v-on:focus-widget="focusInRowField(weaponEntry,(1<<25))" v-on:focus-in-row="focusInRowField(weaponEntry,1)" v-on:focus-out-row="focusOutRowField(weaponEntry,1)" />\r\n\t\t\t\t\t\r\n\t\t\t\t<td-prof :curWidgetRequest="curWidgetRequest" :isVisibleWidget="isVisibleWidget" :entry="weaponEntry.e" :weapon="weaponEntry.e.weapon" section="firearm" :index="-1" v-on:focus-widget="focusInRowField(weaponEntry,(1<<20))" v-on:focus-in-row="focusInRowField(weaponEntry, 2)" v-on:focus-out-row="focusOutRowField(weaponEntry,2)" :meleeProfs="coreMeleeProfs" :rangedProfs="coreRangedProfs" :profMask="firearmMask" />\r\n\t\t\t\t<td-hands :entry="weaponEntry.e" v-on:focus-in-row="focusInRowField(weaponEntry, 4)" v-on:focus-out-row="focusOutRowField(weaponEntry,4)" />\r\n\t\t\t\t<td><InputInt :min="0" :obj="weaponEntry.e.weapon" prop="range" v-on:focus.native="focusInRowField(weaponEntry,8)" v-on:blur.native="focusOutRowField(weaponEntry,8)"  /></td>\r\n\t\t\t\t<td-widget v-on:focus-widget-value="focusWidgetValue" widgetName="missile-atk" widgetTagName="w-missile-atk" :value="getMissileAtkStr(weaponEntry.e.weapon)" :index="-1" :showWidget="(weaponEntry.focusedFlags & (16|(1<<21))) !=0" :entry="weaponEntry.e" :requestCurWidget="requestCurWidget" v-on:focus-widget="focusInRowField(weaponEntry,(1<<21))" v-on:focus-in-row="focusInRowField(weaponEntry,16)" v-on:focus-out-row="focusOutRowField(weaponEntry,16)" />\t\r\n\t\t\t\t<td><InputInt :obj="weaponEntry.e.weapon.firearm" prop="load" v-on:focus.native="focusInRowField(weaponEntry,32)" v-on:blur.native="focusOutRowField(weaponEntry,32)"></InputInt></td>\r\n\t\t\t\t\t\r\n\t\t\t\t<td-widget v-on:focus-widget-value="focusWidgetValue" widgetName="ammunition" widgetTagName="w-ammunition" :value="getAmmunitions(weaponEntry.e.weapon.firearm)" :index="-1" :showWidget="(weaponEntry.focusedFlags & (64|(1<<22))) !=0" :entry="weaponEntry.e" :requestCurWidget="requestCurWidget" v-on:focus-widget="focusInRowField(weaponEntry,(1<<22))" v-on:focus-in-row="focusInRowField(weaponEntry,64)" v-on:focus-out-row="focusOutRowField(weaponEntry,64)" :addAmmo="addAmmo" />\t\r\n\t\t\t\t\t\r\n\t\t\t\t<td-widget v-on:focus-widget-value="focusWidgetValue" widgetName="tags" widgetTagName="w-tags" :value="getTags(weaponEntry.e.weapon)" :index="-1" :showWidget="(weaponEntry.focusedFlags & (128|(1<<24))) !=0" :entry="weaponEntry.e" :requestCurWidget="requestCurWidget" v-on:focus-widget="focusInRowField(weaponEntry,(1<<24))" v-on:focus-in-row="focusInRowField(weaponEntry,128)" v-on:focus-out-row="focusOutRowField(weaponEntry,128)" />\r\n\t\t\t\t<td><InputNumber :min="0" :step="0.5" :obj="weaponEntry.e.weapon" prop="weight" v-on:focus.native="focusInRowField(weaponEntry,256)" v-on:blur.native="focusOutRowField(weaponEntry,256)"></InputNumber></td>\r\n\t\t\t\t<td><input type="text" v-model="weaponEntry.e.unheldRemark"v-on:focus="focusInRowField(weaponEntry,512)" v-on:blur="focusOutRowField(weaponEntry,512)"></input></td>\r\n\t\t\t</tr>\r\n\t\t</tbody>\r\n\t\t<thead>\r\n\t\t\t<tr>\r\n\t\t\t\t<td>Throwing/Sling name</td>\r\n\t\t\t\t<td class="munition-type">Type</td>\r\n\t\t\t\t<td class="hands">Hands</td>\r\n\t\t\t\t<td>Range</td>\r\n\t\t\t\t<td>TN(dmg)</td>\r\n\t\t\t\t<td class="d10">Stuck</td>\r\n\t\t\t\t<td class="voidna"></td>\r\n\t\t\t\t<td class="tags">Tags</td>\r\n\t\t\t\t<td class="weight">Weight</td>\r\n\t\t\t\t<td class="keptat">Kept at?</td>\r\n\t\t\t\t<td class="held">Held?</td>\r\n\t\t\t\t<td class="actions"><i>Actions</i></td>\r\n\t\t\t</tr>\r\n\t\t</thead>\r\n\t\t<tbody :name="itemTransitionName" is="transition-group" v-on:mousedown.native="setCurWidgetSection(\'throwing\', $event)" v-on:touchstart.native="setCurWidgetSection(\'throwing\', $event)">\r\n\t\t\t<tr v-for="(entry, itemIndex) in filteredThrowing" :key="entry.key">\r\n\t\t\t\t<td><input-name :item="entry.weapon" v-on:updated="onInputNameUpdated" /></td>\r\n\t\t\t\t<td-prof :entry="entry" :curWidgetRequest="curWidgetRequest" :isVisibleWidget="isVisibleWidget" :weapon="entry.weapon" section="throwing" :index="itemIndex"  :meleeProfs="coreMeleeProfs" :rangedProfs="coreRangedProfs" :profMask="throwMask" />\r\n\t\t\t\t<td-hands :entry="entry" />\r\n\t\t\t\t<td><InputInt :obj="entry.weapon" prop="range" /></td>\r\n\t\t\t\t<td-widget v-on:focus-widget-value="focusWidgetValue" widgetName="missile-atk" widgetTagName="w-missile-atk" :value="getMissileAtkStr(entry.weapon)" :index="itemIndex" :showWidget="isVisibleWidget(\'throwing\',\'missile-atk\', itemIndex)" :entry="entry" :requestCurWidget="requestCurWidget" />\r\n\t\t\t\t<td><InputInt :min="0" :max="10" :obj="entry.weapon" prop="stuckChance"></InputInt></td>\r\n\t\t\t\t<td class="voidna"></td>\r\n\t\t\t\t<td-widget v-on:focus-widget-value="focusWidgetValue" widgetName="tags" widgetTagName="w-tags" :value="getTags(entry.weapon)" :index="itemIndex" :showWidget="isVisibleWidget(\'throwing\',\'tags\', itemIndex)" :entry="entry" :requestCurWidget="requestCurWidget" />\r\n\t\t\t\t<td><InputNumber :min="0" :step="0.5" :obj="entry.weapon" prop="weight"></InputNumber></td>\r\n\t\t\t\t<td-unheld :entry="entry" :requestCurWidget="requestCurWidget" :index="itemIndex" :showWidget="isVisibleWidget(\'throwing\', \'td-unheld\', itemIndex)" />\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<select-held :entry="entry" :inventory="inventory" />\r\n\t\t\t\t</td>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<a href="javascript:;" v-on:click="packEquipedWeapon(entry)">Pack</a>\r\n\t\t\t\t\t<a href="javascript:;" v-on:click="dropEquipedWeapon(entry)">Drop</a>\r\n\t\t\t\t\t<a href="javascript:;" v-on:click="dropEquipedWeapon(entry, true)">Delete</a>\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t\t<tr class="entry-row" :key="-5" v-if="weaponEntry.e.weapon.isThrowing() || weaponEntry.e.weapon.isSling()">\r\n\t\t\t\t<td><input type="text" v-model="weaponEntry.e.weapon.name" v-on:focus="focusInRowField(weaponEntry,1)" v-on:blur="focusOutRowField(weaponEntry,1)"></input></td>\r\n\t\t\t\t<td-prof :entry="weaponEntry.e" :curWidgetRequest="curWidgetRequest" :isVisibleWidget="isVisibleWidget" :weapon="weaponEntry.e.weapon" section="throwing" :index="-1" v-on:focus-widget="focusInRowField(weaponEntry,(1<<20))" v-on:focus-in-row="focusInRowField(weaponEntry, 2)" v-on:focus-out-row="focusOutRowField(weaponEntry,2)" :meleeProfs="coreMeleeProfs" :rangedProfs="coreRangedProfs" :profMask="throwMask" />\r\n\t\t\t\t<td-hands :entry="weaponEntry.e" v-on:focus-in-row="focusInRowField(weaponEntry, 4)" v-on:focus-out-row="focusOutRowField(weaponEntry,4)" />\r\n\t\t\t\t<td><InputInt :step="1" :obj="weaponEntry.e.weapon" prop="range" v-on:focus.native="focusInRowField(weaponEntry,8)" v-on:blur.native="focusOutRowField(weaponEntry,8)"  /></td>\r\n\t\t\t\t<td-widget v-on:focus-widget-value="focusWidgetValue" widgetName="missile-atk" widgetTagName="w-missile-atk" :value="getMissileAtkStr(weaponEntry.e.weapon)" :index="-1" :showWidget="(weaponEntry.focusedFlags & (16|(1<<21))) !=0" :entry="weaponEntry.e" :requestCurWidget="requestCurWidget" v-on:focus-widget="focusInRowField(weaponEntry,(1<<21))" v-on:focus-in-row="focusInRowField(weaponEntry,16)" v-on:focus-out-row="focusOutRowField(weaponEntry,16)" />\r\n\t\t\t\t<td><InputInt :min="0" :max="10" :obj="weaponEntry.e.weapon" prop="stuckChance" v-on:focus.native="focusInRowField(weaponEntry,32)" v-on:blur.native="focusOutRowField(weaponEntry,32)"></InputInt></td>\r\n\t\t\t\t<td class="voidna"></td>\r\n\t\t\t\t<td-widget v-on:focus-widget-value="focusWidgetValue" widgetName="tags" widgetTagName="w-tags" :value="getTags(weaponEntry.e.weapon)" :index="-1" :showWidget="(weaponEntry.focusedFlags & (128|(1<<24))) !=0" :entry="weaponEntry.e" :requestCurWidget="requestCurWidget" v-on:focus-widget="focusInRowField(weaponEntry,(1<<24))" v-on:focus-in-row="focusInRowField(weaponEntry,128)" v-on:focus-out-row="focusOutRowField(weaponEntry,128)" />\r\n\t\t\t\t<td><InputNumber :min="0" :step="0.5" :obj="weaponEntry.e.weapon" prop="weight" v-on:focus.native="focusInRowField(weaponEntry,256)" v-on:blur.native="focusOutRowField(weaponEntry,256)"></InputNumber></td>\r\n\t\t\t\t<td><input type="text" v-model="weaponEntry.e.unheldRemark"v-on:focus="focusInRowField(weaponEntry,512)" v-on:blur="focusOutRowField(weaponEntry,512)"></input></td>\r\n\t\t\t</tr>\r\n\t\t</tbody>\r\n\t\t<thead>\r\n\t\t\t<tr>\r\n\t\t\t\t<td class="gotbtn focus">Ammo name</td>\r\n\t\t\t\t<td class="munition-type">Type</td>\r\n\t\t\t\t<td class="voidna"></td>\r\n\t\t\t\t<td>Range</td>\r\n\t\t\t\t<td>TN(dmg)</td>\r\n\t\t\t\t<td class="d10">Catch</td>\r\n\t\t\t\t<td class="voidna"></td>\r\n\t\t\t\t<td class="tags">Tags</td>\r\n\t\t\t\t<td class="weight">Weight</td>\r\n\t\t\t\t<td class="keptat">Kept at?</td>\r\n\t\t\t\t<td class="voidna"></td>\r\n\t\t\t\t<td class="actions"><i>Actions</i></td>\r\n\t\t\t</tr>\r\n\t\t</thead>\r\n\t\t<tbody :name="itemTransitionName" is="transition-group" v-on:mousedown.native="setCurWidgetSection(\'ammo\', $event)" v-on:touchstart.native="setCurWidgetSection(\'ammo\', $event)">\r\n\t\t\t<tr v-for="(entry, itemIndex) in filteredAmmo" :key="entry.key">\r\n\t\t\t\t<td><input-name :item="entry.weapon" v-on:updated="onInputNameUpdated"  /></td>\r\n\t\t\t\t<td-prof :entry="entry" :curWidgetRequest="curWidgetRequest" :isVisibleWidget="isVisibleWidget" :weapon="entry.weapon" section="ammo" :index="itemIndex"  :meleeProfs="coreMeleeProfs" :rangedProfs="coreRangedProfs"  />\r\n\t\t\t\t<td class="voidna"></td>\r\n\t\t\t\t<td><InputInt :obj="entry.weapon" prop="range" /></td>\r\n\t\t\t\t<td-widget v-on:focus-widget-value="focusWidgetValue" widgetName="missile-atk" widgetTagName="w-missile-atk" :value="getMissileAtkStr(entry.weapon)" :index="itemIndex" :showWidget="isVisibleWidget(\'ammo\',\'missile-atk\', itemIndex)" :entry="entry" :requestCurWidget="requestCurWidget" />\r\n\t\t\t\t<td><InputInt :min="0" :max="10" :obj="entry.weapon" prop="stuckChance"></InputInt></td>\r\n\t\t\t\t<td class="voidna"></td>\r\n\t\t\t\t<td-widget v-on:focus-widget-value="focusWidgetValue" widgetName="tags" widgetTagName="w-tags" :value="getTags(entry.weapon)" :index="itemIndex" :showWidget="isVisibleWidget(\'ammo\',\'tags\', itemIndex)" :entry="entry" :requestCurWidget="requestCurWidget" />\r\n\t\t\t\t<td><InputNumber :min="0" :step="0.5" :obj="entry.weapon" prop="weight"></InputNumber></td>\r\n\t\t\t\t<td-unheld :entry="entry" :requestCurWidget="requestCurWidget" :index="itemIndex" :showWidget="isVisibleWidget(\'ammo\', \'td-unheld\', itemIndex)" />\r\n\t\t\t\t<td class="voidna"></td>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<a href="javascript:;" v-on:click="packEquipedWeapon(entry)">Pack</a>\r\n\t\t\t\t\t<a href="javascript:;" v-on:click="dropEquipedWeapon(entry)">Drop</a>\r\n\t\t\t\t\t<a href="javascript:;" v-on:click="dropEquipedWeapon(entry, true)">Delete</a>\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t\t<tr class="entry-row" :key="-6" v-if="weaponEntry.e.weapon.isAmmunition()">\r\n\t\t\t\t<td><input type="text" v-model="weaponEntry.e.weapon.name" v-on:focus="focusInRowField(weaponEntry,1)" v-on:blur="focusOutRowField(weaponEntry,1)"></input></td>\r\n\t\t\t\t<td-prof :entry="weaponEntry.e" :curWidgetRequest="curWidgetRequest" :isVisibleWidget="isVisibleWidget" :weapon="weaponEntry.e.weapon" section="ammo" :index="-1" v-on:focus-widget="focusInRowField(weaponEntry,(1<<20))" v-on:focus-in-row="focusInRowField(weaponEntry, 2)" v-on:focus-out-row="focusOutRowField(weaponEntry,2)" :meleeProfs="coreMeleeProfs" :rangedProfs="coreRangedProfs" :profMask="-1" />\r\n\t\t\t\t<td class="voidna"></td>\r\n\t\t\t\t<td><InputInt :obj="weaponEntry.e.weapon" prop="range" v-on:focus.native="focusInRowField(weaponEntry,8)" v-on:blur.native="focusOutRowField(weaponEntry,8)"  /></td>\r\n\t\t\t\t<td-widget v-on:focus-widget-value="focusWidgetValue" widgetName="missile-atk" widgetTagName="w-missile-atk" :value="getMissileAtkStr(weaponEntry.e.weapon)" :index="-1" :showWidget="(weaponEntry.focusedFlags & (16|(1<<21))) !=0" :entry="weaponEntry.e" :requestCurWidget="requestCurWidget" v-on:focus-widget="focusInRowField(weaponEntry,(1<<21))" v-on:focus-in-row="focusInRowField(weaponEntry,16)" v-on:focus-out-row="focusOutRowField(weaponEntry,16)" />\r\n\t\t\t\t<td><InputInt :min="0" :max="10" :obj="weaponEntry.e.weapon" prop="stuckChance" v-on:focus.native="focusInRowField(weaponEntry,32)" v-on:blur.native="focusOutRowField(weaponEntry,32)"></InputInt></td>\r\n\t\t\t\t<td class="voidna"></td>\r\n\t\t\t\t<td-widget v-on:focus-widget-value="focusWidgetValue" widgetName="tags" widgetTagName="w-tags" :value="getTags(weaponEntry.e.weapon)" :index="-1" :showWidget="(weaponEntry.focusedFlags & (128|(1<<24))) !=0" :entry="weaponEntry.e" :requestCurWidget="requestCurWidget" v-on:focus-widget="focusInRowField(weaponEntry,(1<<24))" v-on:focus-in-row="focusInRowField(weaponEntry,128)" v-on:focus-out-row="focusOutRowField(weaponEntry,128)" />\r\n\t\t\t\t<td><InputNumber :min="0" :step="0.5" :obj="weaponEntry.e.weapon" prop="weight" v-on:focus.native="focusInRowField(weaponEntry,256)" v-on:blur.native="focusOutRowField(weaponEntry,256)"></InputNumber></td>\r\n\t\t\t\t<td><input type="text" v-model="weaponEntry.e.unheldRemark"v-on:focus="focusInRowField(weaponEntry,512)" v-on:blur="focusOutRowField(weaponEntry,512)"></input></td>\r\n\t\t\t</tr>\r\n\t\t</tbody>\r\n\t\t\t\r\n\t</table>\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t<h4>MiscItems:</h4>\r\n\t<table border="1">\r\n\t\t<thead>\r\n\t\t\t<tr>\r\n\t\t\t\t<td>MiscItem Name</td>\r\n\t\t\t\t<td class="tags">Tags</td>\r\n\t\t\t\t<td class="weight">Weight</td>\r\n\t\t\t\t<td class="keptat">Kept at?</td>\r\n\t\t\t\t<td class="held">Held?</td>\r\n\t\t\t\t<td class="actions"><i>Actions</i></td>\r\n\t\t\t</tr>\r\n\t\t</thead>\r\n\t\t<tbody :name="itemTransitionName" is="transition-group" v-on:mousedown.native="setCurWidgetSection(\'miscItem\', $event)" v-on:touchstart.native="setCurWidgetSection(\'miscItem\', $event)">\r\n\t\t\t<tr v-for="(entry,i) in inventory.equipedNonMeleeItems" :key="entry.key">\r\n\t\t\t\t<td><input-name :item="entry.item" v-on:updated="onInputNameUpdated" /></td>\r\n\t\t\t\t<td-widget v-on:focus-widget-value="focusWidgetValue" widgetName="tags" widgetTagName="w-tags" :value="getTags(entry.item)" :index="i" :showWidget="isVisibleWidget(\'miscItem\',\'tags\', i)" :entry="entry" :requestCurWidget="requestCurWidget" />\r\n\t\t\t\t<td><InputNumber :min="0" :step="0.5" :obj="entry.item" prop="weight"></InputNumber></td>\r\n\t\t\t\t<td-unheld :entry="entry" :requestCurWidget="requestCurWidget" :index="i" :showWidget="isVisibleWidget(\'miscItem\', \'td-unheld\', i)" />\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<select-held :entry="entry" :inventory="inventory" />\r\n\t\t\t\t</td>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<a href="javascript:;" v-on:click="packMiscItem(entry)">Pack</a>\r\n\t\t\t\t\t<a href="javascript:;" v-on:click="dropMiscItem(entry)">Drop</a>\r\n\t\t\t\t\t<a href="javascript:;" v-on:click="dropMiscItem(entry, true)">Delete</a>\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t\t<tr class="entry-row" :key="-1">\r\n\t\t\t\t<td><input type="text" v-model="miscItemEntry.e.item.name" v-on:focus="focusInRowField(miscItemEntry,1)" v-on:blur="focusOutRowField(miscItemEntry,1)"></input></td>\r\n\t\t\t\t<td-widget v-on:focus-widget-value="focusWidgetValue" widgetName="tags" widgetTagName="w-tags" :value="getTags(miscItemEntry.e.item)" :index="-1" :showWidget="(miscItemEntry.focusedFlags & (2|(1<<21))) !=0" :entry="miscItemEntry.e" :requestCurWidget="requestCurWidget" v-on:focus-widget="focusInRowField(miscItemEntry,(1<<21))" v-on:focus-in-row="focusInRowField(miscItemEntry,2)" v-on:focus-out-row="focusOutRowField(miscItemEntry,2)" />\r\n\t\t\t\t<td><InputNumber :min="0" :step="0.5" :obj="miscItemEntry.e.item" prop="weight" v-on:focus.native="focusInRowField(miscItemEntry,4)" v-on:blur.native="focusOutRowField(miscItemEntry,4)"></InputNumber></td>\r\n\t\t\t\t<td><input type="text" v-model="miscItemEntry.e.unheldRemark" v-on:focus="focusInRowField(miscItemEntry,8)" v-on:blur="focusOutRowField(miscItemEntry,8)"></input></td>\t\r\n\t\t\t</tr>\r\n\t\t</tbody>\r\n\t</table>\t\t\r\n\t\t\r\n\t\r\n\t<h4>Armor:</h4>\r\n\t<table border="1">\r\n\t\t<thead>\r\n\t\t\t<tr>\r\n\t\t\t\t<td>Armor Name</td>\r\n\t\t\t\t<td>AVC</td>\r\n\t\t\t\t<td>AVP</td>\r\n\t\t\t\t<td>AVB</td>\r\n\t\t\t\t<td>Coverage</td>\r\n\t\t\t\t<td class="weight">Weight</td>\r\n\t\t\t\t<td class="tags">Tags</td>\r\n\t\t\t\t<td class="actions"><i>Actions</i></td>\r\n\t\t\t</tr>\r\n\t\t</thead>\r\n\t\t<tbody :name="itemTransitionName" is="transition-group" v-on:mousedown.native="setCurWidgetSection(\'armor\', $event)"  v-on:touchstart.native="setCurWidgetSection(\'armor\', $event)">\r\n\t\t\t<tr v-for="(entry, i) in inventory.wornArmor" :key="i">\r\n\t\t\t\t<td><input-name :item="entry.armor" v-on:updated="onInputNameUpdated" /></td>\r\n\t\t\t\t<td><InputInt :min="0" :obj="entry.armor" prop="AVC"></InputInt></td>\r\n\t\t\t\t<td><InputInt :min="0" :obj="entry.armor" prop="AVP"></InputInt></td>\r\n\t\t\t\t<td><InputInt :min="0" :obj="entry.armor" prop="AVB"></InputInt></td>\t\t\t\r\n\t\t\t\t<td-widget v-on:focus-widget-value="focusWidgetValue" widgetName="coverage" widgetTagName="w-coverage" :value="getCoverage(entry.armor)" :index="i" :showWidget="isVisibleWidget(\'armor\',\'coverage\', i)" :entry="entry" :requestCurWidget="requestCurWidget" />\r\n\t\t\t\t<td><InputNumber :min="0" :step="0.5" :obj="entry.armor" prop="weight"></InputNumber></td>\r\n\t\t\t\t<td-widget v-on:focus-widget-value="focusWidgetValue" widgetName="tags" widgetTagName="w-tags" :value="getTags(entry.armor)" :index="i" :showWidget="isVisibleWidget(\'armor\',\'tags\', i)" :entry="entry" :requestCurWidget="requestCurWidget" />\r\n\t\t\t\t\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<a href="javascript:;" v-on:click="packWornArmor(entry)">Pack</a>\r\n\t\t\t\t\t<a href="javascript:;" v-on:click="dropWornArmor(entry)">Drop</a>\r\n\t\t\t\t\t<a href="javascript:;" v-on:click="dropWornArmor(entry, true)">Delete</a>\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t\t<tr class="entry-row" :key="-1">\r\n\t\t\t\t<td><input type="text" v-model="armorEntry.e.armor.name" v-on:focus="focusInRowField(armorEntry,1)" v-on:blur="focusOutRowField(armorEntry,1)"></input></td>\r\n\t\t\t\t<td><InputInt :min="0" :obj="armorEntry.e.armor" prop="AVC" v-on:focus.native="focusInRowField(armorEntry,2)" v-on:blur.native="focusOutRowField(armorEntry,2)"></InputInt></td>\r\n\t\t\t\t<td><InputInt :min="0" :obj="armorEntry.e.armor" prop="AVP" v-on:focus.native="focusInRowField(armorEntry,4)" v-on:blur.native="focusOutRowField(armorEntry,4)"></InputInt></td>\r\n\t\t\t\t<td><InputInt :min="0" :obj="armorEntry.e.armor" prop="AVB" v-on:focus.native="focusInRowField(armorEntry,8)" v-on:blur.native="focusOutRowField(armorEntry,8)"></InputInt></td>\r\n\t\t\t\t<td-widget v-on:focus-widget-value="focusWidgetValue" widgetName="coverage" widgetTagName="w-coverage" :value="getCoverage(armorEntry.e.armor)" :index="-1" :showWidget="(armorEntry.focusedFlags & (16|(1<<20))) !=0" :entry="armorEntry.e.armor" :requestCurWidget="requestCurWidget"\r\n\t\t\t\t\tv-on:focus-in-row="focusInRowField(armorEntry, 16)" v-on:focus-out-row="focusOutRowField(armorEntry, 16)" v-on:focus-widget="focusInRowField(armorEntry, (1<<20))" />\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t<td><InputNumber :min="0" :step="0.5" :obj="armorEntry.e.armor" prop="weight" v-on:focus.native="focusInRowField(armorEntry,32)" v-on:blur.native="focusOutRowField(armorEntry,32)"></InputNumber></td>\r\n\t\t\t\t<td-widget v-on:focus-widget-value="focusWidgetValue" widgetName="tags" widgetTagName="w-tags" :value="getTags(armorEntry.e.armor)" :index="-1" :showWidget="(armorEntry.focusedFlags & (64|(1<<21))) !=0" :entry="armorEntry.e.armor" :requestCurWidget="requestCurWidget"\r\n\t\t\t\tv-on:focus-in-row="focusInRowField(armorEntry, 64)" v-on:focus-out-row="focusOutRowField(armorEntry, 64)" v-on:focus-widget="focusInRowField(armorEntry, (1<<21))" />\r\n\t\t\t\t<td><input type="text" readonly class="focusable" v-on:focus="focusInRowField(armorEntry,64)" v-on:blur="focusOutRowField(armorEntry,64)"></input></td>\r\n\t\t\t</tr>\r\n\t\t</tbody>\r\n\t</table>\t\t\r\n\t\r\n\t\r\n\t<hr/>\r\n\t\t\r\n\t\t<div class="overall-armor-coverage" v-if="showArmorCoverage">\r\n\t\t\t<h4>Overall Armor Coverage:</h4>\t\r\n\t\t\t<div v-if="carriedShield!=null">Held Shield: <b>{{carriedShield.name}}</b> <span class="shield-icon-inv">☗</span></div>\r\n\t\t\t<div v-if="carriedShield!=null">Size: <b>{{shieldSizeLabels[carriedShield.size]}}</b></div>\r\n\t\t\t<div><label>Prefered Shield Position:\r\n\t\t\t\t<select v-model.number="inventory.shieldPosition" number>\r\n\t\t\t\t\t<option :value="0">Low</option>\r\n\t\t\t\t\t<option :value="1">High</option>\r\n\t\t\t\t</select>\t\r\n\t\t\t</label> <span v-show="carriedShield==null"> (if held)</span></div>\r\n\t\t\t<div style="display:inline-block;vertical-align:top;">\r\n\t\t\t\t<table border="1" class="table-coverage">\r\n\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<td></td>\r\n\t\t\t\t\t\t\t<td></td>\r\n\t\t\t\t\t\t\t<td>AVC</td>\r\n\t\t\t\t\t\t\t<td>AVP<span v-show="calcArmorMissile"> ↢</span></td>\r\n\t\t\t\t\t\t\t<td>AVB</td>\r\n\t\t\t\t\t\t\t<td v-if="carriedShield !=null">sAV\t<span class="shield-icon-inv">☗</span></td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</thead>\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t<tr v-for="(li, i) in coverageHitLocations">\r\n\t\t\t\t\t\t\t<td><i>{{getHitLocationMaskNameOf(i)}}</i></td>\r\n\t\t\t\t\t\t\t<td>{{i+1}}. {{li.name}}</td>\r\n\t\t\t\t\t\t\t<td><input type="number" readonly :value="hitLocationArmorValues[li.id].avc" :disabled="isDisabledHitLocation(i)" v-on:focus="calcAVColumnRowIndex(1, i)" v-on:blur="focusOutAVColumnRowIndex(1,i)"></input></td>\r\n\t\t\t\t\t\t\t<td><input type="number" readonly :value="hitLocationArmorValues[li.id].avp" :disabled="isDisabledHitLocation(i)" v-on:focus="calcAVColumnRowIndex(2, i)" v-on:blur="focusOutAVColumnRowIndex(2,i)"></input></td>\r\n\t\t\t\t\t\t\t<td><input type="number" readonly :value="hitLocationArmorValues[li.id].avb" :disabled="isDisabledHitLocation(i)" v-on:focus="calcAVColumnRowIndex(3, i)" v-on:blur="focusOutAVColumnRowIndex(3,i)"></input></td>\r\n\t\t\t\t\t\t\t<td v-if="carriedShield!=null" v-show="shieldCoverage[li.id]!=null" class="td-shield" :class="{active:calcAVRowIndex==i && shieldAVHigherOrEqual }">{{ shieldCoverage[li.id] ===false ? "~" : ""}}{{ carriedShield.AV }}</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t\t<div style="display:inline-block;vertical-align:top;margin-left:8px;">\r\n\t\t\t\t<div><i class="consider">Consider against:</i></div>\r\n\t\t\t\t<br/>\r\n\t\t\t\t<div><label><input type="checkbox" v-model="calcArmorCrushing"></input>Crushing attack</label></div>\r\n\t\t\t\t<div><label><input type="checkbox" v-model="calcArmorMissile"></input>Missile attack ↢</label> <label :class="{disabled:!calcArmorMissile}" :style="{\'pointer-events\':!calcArmorMissile ? \'none\': \'auto\'}"><input type="checkbox" v-model="calcArmorFirearm"></input><i>Firearm?</i></label> Hit at:<select number v-model.number="selectedMissileTargetZoneIndex"><option :value="-1"></option><option :value="i" v-for="(li, i) in missileHitTargetZones" :key="i">{{i+2}}:{{li.tz.name}}</option></select> <a v-on:click="selectedMissileTargetZoneIndex=-1" href="javascript:;" v-show="selectedMissileTargetZoneIndex>=0">[x]</a></div>\r\n\t\t\t\t<div><label :class="{disabled:calcArmorMissile}" :style="{\'pointer-events\':calcArmorMissile ? \'none\': \'auto\'}"><input type="checkbox" v-model="calcArmorMeleeTargeting"></input> <span :class="{disabled:!shouldCalcMeleeAiming}">Melee Targeting:</span> </label><select number :disabled="!shouldCalcMeleeAiming" v-model.number="calcMeleeTargetingZoneIndex">\r\n\t\t\t\t\t<option :value="i" v-for="(li, i) in body.targetZones">{{ body.getDescLabelTargetZone(i) }}</option>\r\n\t\t\t\t</select></div>\r\n\t\t\t\t<div style="margin-top:5px" v-show="calcArmorMeleeTargeting && shouldCalcMeleeAiming">{{ calcMeleeTZProbabilities }}</div>\r\n\t\t\t\t<div style="margin-top:5px" v-show="calcArmorMissile && selectedMissileTargetZoneIndex>=0">{{ calcRangedTZProbabilities }}</div>\r\n\t\t\t\t<br/>\r\n\t\t\t\t<div><i>Result: </i><b>{{ calcArmorResults.av + calcArmorResults.layer }} AV</b></div>\r\n\t\t\t\t<i class="cta" v-show="calcAVColumn==0">&lt;- Focus-click on table cells to inspect result.</i>\r\n\t\t\t\t<br/>\r\n\t\t\t\t<div v-show="calcAVColumn!=0">\r\n\t\t\t\t\t<div><span class="outline-dominant">AV Armor protecting: <b>{{ calcArmorResults.av }} AV</b></span></div>\r\n\t\t\t\t\t<ul v-show="hasArmorResultProtecting">\r\n\t\t\t\t\t\t<li v-for="li in calcArmorResults.armorsProtectable">{{ li.name }}</li>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t\t<br v-show="!hasArmorResultProtecting" />\r\n\t\t\t\t\t<div><span class="outline-layer">Layer protecting: <b>+{{ calcArmorResults.layer }} AV</b></span></div>\r\n\t\t\t\t\t<ul v-show="hasArmorResultLayers">\r\n\t\t\t\t\t\t<li v-for="li in calcArmorResults.armorsLayer">{{ li.name }}</li>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t\t<br v-show="!hasArmorResultLayers" />\r\n\t\t\t\t\t<div v-show="calcArmorCrushing">\r\n\t\t\t\t\t\t<div><span class="outline-crushed">Crushable Hard Armor: <b><span v-show="!hasArmorCrushables"> <i>none</i></span></b></span></div>\r\n\t\t\t\t\t\t<ul v-show="hasArmorCrushables">\r\n\t\t\t\t\t\t\t<li v-for="li in calcArmorResults.armorsCrushable">{{ li.name }}</li>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t<hr/>\r\n\t<div v-show="saveAvailable"><button v-on:click="saveSheet()">Save Inventory</button> <i>(also includes Dropped zone)</i></div>\r\n\t\r\n\t<div v-show="saveAvailable || loadAvailable">\r\n\t\t<br/>\r\n\t\t<textarea class="savebox" character-set="UTF-8" v-model="copyToClipboard" ref="savedTextArea" :readonly="!loadAvailable"></textarea><button v-on:click="executeCopyContents()" ref="copyButton">Copy</button><i class="copy-notify" ref="copyNotify" style="display:none">copied!</i>\r\n\t</div>\r\n\t\t\t\t\r\n\t<div v-show="loadAvailable"><button v-on:click="loadSheet()">Load Inventory</button> <i>(also replaces Dropped zone)</i></div>\r\n\t\t\t\r\n\t\t\t\r\n\t<div class="focus-value-bar"><input type="text" :value="focusValueText" readonly></input></div>\r\n</div>'},shiftIndex:function(t){return 1<<t},get_hasPopup:function(){var t=this.popupIndex>=0;return""!=this.curWidgetRequest.type||t},get_isValidDroppedEntry:function(){return this.droppedEntry.isValid()},get_isValidPackedEntry:function(){return this.packedEntry.isValid()},get_crossbowMask:function(){return 4},get_bowMask:function(){return 3},get_bowSlingAndCrossbowMask:function(){return 7},get_firearmMask:function(){return 8},get_throwMask:function(){return 18},get_droppedEntryGotFocus:function(){var t=this.hasPopup;return 0!=this.droppedEntry.focusedFlags||t},get_packedEntryGotFocus:function(){var t=this.hasPopup;return 0!=this.packedEntry.focusedFlags||t},get_miscEntryGotFocus:function(){var t=this.hasPopup;return 0!=this.miscItemEntry.focusedFlags||t},get_weaponEntryGotFocus:function(){var t=this.hasPopup;return 0!=this.weaponEntry.focusedFlags||t},get_shieldEntryGotFocus:function(){var t=this.hasPopup;return 0!=this.shieldEntry.focusedFlags||t},get_calcMeleeTZProbabilities:function(){for(var t=this.body,e=t.targetZones[this.calcMeleeTargetingZoneIndex],n="",i=0,r=0,s=e.partWeights.length;r<s;){var a=r++;n+="["+t.hitLocations[e.parts[a]].name+": ",n+=++i;for(var o=1,l=0|e.partWeights[a];o<l;){o++;n+=","+ ++i}n+="] "}return n},get_calcRangedTZProbabilities:function(){var t=this.body,e=this.selectedMissileTargetZoneIndex>=0?this.missileHitTargetZones[this.selectedMissileTargetZoneIndex].tz:null;if(null==e)return"";for(var n="",i=0,r=0,s=e.partWeights.length;r<s;){var a=r++;n+="["+t.hitLocations[e.parts[a]].name+": ",n+=++i;for(var o=1,l=0|e.partWeights[a];o<l;){o++;n+=","+ ++i}n+="] "}return n},get_armorEntryGotFocus:function(){var t=this.hasPopup;return 0!=this.armorEntry.focusedFlags||t},get_carriedShield:function(){return this.inventory.findHeldShield()},get_shieldSizeLabels:function(){var t=[];return t.push("Small"),t.push("Medium"),t.push("Large"),t},get_shieldCoverage:function(){var t=this.carriedShield,e=null!=t?t.size:0;return 1==this.inventory.shieldPosition?this.shieldHighProfiles[e]:this.shieldLowProfiles[e]},get_totalCostMoney:function(){return this.inventory.calculateTotalCost(this.includeDroppedCost)},get_totalCostGP:function(){return this.totalCostMoney.gp},get_totalCostSP:function(){return this.totalCostMoney.sp},get_totalCostCP:function(){return this.totalCostMoney.cp},executeCopyContents:function(){var t=this.$refs.savedTextArea;if(new s("/ipad|ipod|iphone","i").match(window.navigator.userAgent)){var e=t,n=e.contentEditable,i=e.readOnly;e.contentEditable="true",e.readOnly=!1;var r=window.document.createRange();r.selectNodeContents(e);var a=window.getSelection();a.removeAllRanges(),a.addRange(r),e.setSelectionRange(0,9999999),e.contentEditable=n,e.readOnly=i}else t.select();if(null!=window.document.execCommand("copy")){var o=this.$refs.copyNotify;o.style.display="inline-block",w.delay(function(){o.style.display="none"},3e3)}else q.alert("Sorry, failed to copy to clipboard!")},get_totalWeight:function(){return null!=this.injectWeight?this.injectWeight:this.inventory.calculateTotalWeight()},get_totalWeightLbl:function(){return parseFloat(this.totalWeight.toFixed(2))},get_showTally:function(){return this.userShowTally},get_body:function(){return null!=this.bodyChar?this.bodyChar:un.getInstance()},get_filteredMelee:function(){return this.inventory.getWeildableWeaponsTypeFiltered(!1)},get_filteredCrossbow:function(){return this.inventory.getWeildableWeaponsTypeFiltered(!0,4)},get_filteredFirearm:function(){return this.inventory.getWeildableWeaponsTypeFiltered(!0,8)},get_filteredBow:function(){return this.inventory.getWeildableWeaponsTypeFiltered(!0,1)},get_filteredThrowing:function(){return this.inventory.getWeildableWeaponsTypeFiltered(!0,18)},get_filteredAmmo:function(){return this.inventory.get_ammoFiltered()},on_packedEntryGotFocus:function(t,e){t||this.executeQtyEntry(this.packedEntry,this.inventory.packed)},on_droppedEntryGotFocus:function(t,e){t||this.executeQtyEntry(this.droppedEntry,this.inventory.dropped)},on_shieldEntryGotFocus:function(t,e){t||this.executeEquipEntry(this.shieldEntry,"shield")},on_weaponEntryGotFocus:function(t,e){t||this.executeEquipEntry(this.weaponEntry,"weapon")},on_miscEntryGotFocus:function(t,e){t||this.executeEquipEntry(this.miscItemEntry,"item")},on_armorEntryGotFocus:function(t,e){t||this.executeEquipEntry(this.armorEntry,"armor")},_Init:function(){var t=Mi.prototype;this.data=t.Data,this.components=this.Components(),this.created=t.Created,this.template=this.Template(),this.computed={copperMaxToPieces:t.get_copperMaxToPieces,moneyLeft:t.get_moneyLeft,moneyLeftStr:t.get_moneyLeftStr,exceededCost:t.get_exceededCost,weightRemaining:t.get_weightRemaining,weightRemainingLbl:t.get_weightRemainingLbl,exceededWeight:t.get_exceededWeight,maxCostGP:t.get_maxCostGP,maxCostSP:t.get_maxCostSP,maxCostCP:t.get_maxCostCP,coverageHitLocations:t.get_coverageHitLocations,hitLocationZeroAVValues:t.get_hitLocationZeroAVValues,shouldCalcMeleeAiming:t.get_shouldCalcMeleeAiming,shouldCalcRangedAiming:t.get_shouldCalcRangedAiming,targetingZoneMask:t.get_targetingZoneMask,hasArmorResultProtecting:t.get_hasArmorResultProtecting,hasArmorResultLayers:t.get_hasArmorResultLayers,hasArmorCrushables:t.get_hasArmorCrushables,showTargetingZoneIndex:t.get_showTargetingZoneIndex,targetZoneHitAreaMasks:t.get_targetZoneHitAreaMasks,isYourInventory:t.get_isYourInventory,whoseInventoryPrefix:t.get_whoseInventoryPrefix,hitLocationArmorValues:t.get_hitLocationArmorValues,missileHitTargetZones:t.get_missileHitTargetZones,missileTargetHitZone:t.get_missileTargetHitZone,shieldAVHigherOrEqual:t.get_shieldAVHigherOrEqual,hasPopup:t.get_hasPopup,isValidDroppedEntry:t.get_isValidDroppedEntry,isValidPackedEntry:t.get_isValidPackedEntry,crossbowMask:t.get_crossbowMask,bowMask:t.get_bowMask,bowSlingAndCrossbowMask:t.get_bowSlingAndCrossbowMask,firearmMask:t.get_firearmMask,throwMask:t.get_throwMask,droppedEntryGotFocus:t.get_droppedEntryGotFocus,packedEntryGotFocus:t.get_packedEntryGotFocus,miscEntryGotFocus:t.get_miscEntryGotFocus,weaponEntryGotFocus:t.get_weaponEntryGotFocus,shieldEntryGotFocus:t.get_shieldEntryGotFocus,calcMeleeTZProbabilities:t.get_calcMeleeTZProbabilities,calcRangedTZProbabilities:t.get_calcRangedTZProbabilities,armorEntryGotFocus:t.get_armorEntryGotFocus,carriedShield:t.get_carriedShield,shieldSizeLabels:t.get_shieldSizeLabels,shieldCoverage:t.get_shieldCoverage,totalCostMoney:t.get_totalCostMoney,totalCostGP:t.get_totalCostGP,totalCostSP:t.get_totalCostSP,totalCostCP:t.get_totalCostCP,totalWeight:t.get_totalWeight,totalWeightLbl:t.get_totalWeightLbl,showTally:t.get_showTally,body:t.get_body,filteredMelee:t.get_filteredMelee,filteredCrossbow:t.get_filteredCrossbow,filteredFirearm:t.get_filteredFirearm,filteredBow:t.get_filteredBow,filteredThrowing:t.get_filteredThrowing,filteredAmmo:t.get_filteredAmmo},this.methods={get_copperMaxToPieces:t.get_copperMaxToPieces,get_moneyLeft:t.get_moneyLeft,get_moneyLeftStr:t.get_moneyLeftStr,get_exceededCost:t.get_exceededCost,get_weightRemaining:t.get_weightRemaining,get_weightRemainingLbl:t.get_weightRemainingLbl,get_exceededWeight:t.get_exceededWeight,get_maxCostGP:t.get_maxCostGP,get_maxCostSP:t.get_maxCostSP,get_maxCostCP:t.get_maxCostCP,onInventorySignalReceived:t.onInventorySignalReceived,loadSheet:t.loadSheet,watch_inventory:t.watch_inventory,saveSheet:t.saveSheet,loadDropList:t.loadDropList,saveDropList:t.saveDropList,resetItemTransitionName:t.resetItemTransitionName,onBaseInventoryClick:t.onBaseInventoryClick,confirmOverwriteItem:t.confirmOverwriteItem,confirmQtyMultipleSend:t.confirmQtyMultipleSend,closeMultipleQtyItem:t.closeMultipleQtyItem,closeOverwriteModal:t.closeOverwriteModal,watch_itemToOverwriteWith:t.watch_itemToOverwriteWith,watch_itemQtyMultiple:t.watch_itemQtyMultiple,packItemEntryFromGround:t.packItemEntryFromGround,dropItemEntryFromPack:t.dropItemEntryFromPack,dropEquipedShield:t.dropEquipedShield,dropMiscItem:t.dropMiscItem,dropEquipedWeapon:t.dropEquipedWeapon,dropWornArmor:t.dropWornArmor,packEquipedShield:t.packEquipedShield,packMiscItem:t.packMiscItem,packEquipedWeapon:t.packEquipedWeapon,packWornArmor:t.packWornArmor,getSuperscriptNum:t.getSuperscriptNum,getCoverage:t.getCoverage,getTags:t.getTags,getDefGuard:t.getDefGuard,getSwingAtkStr:t.getSwingAtkStr,getThrustAtkStr:t.getThrustAtkStr,getMissileAtkStr:t.getMissileAtkStr,getAmmunitions:t.getAmmunitions,getSpanTools:t.getSpanTools,clearWidgets:t.clearWidgets,stopPropagation:t.stopPropagation,setCurWidgetSection:t.setCurWidgetSection,requestCurWidget:t.requestCurWidget,isVisibleWidget:t.isVisibleWidget,openPopup:t.openPopup,closePopup:t.closePopup,getValidName:t.getValidName,onInputNameUpdated:t.onInputNameUpdated,get_coverageHitLocations:t.get_coverageHitLocations,get_hitLocationZeroAVValues:t.get_hitLocationZeroAVValues,get_shouldCalcMeleeAiming:t.get_shouldCalcMeleeAiming,get_shouldCalcRangedAiming:t.get_shouldCalcRangedAiming,get_targetingZoneMask:t.get_targetingZoneMask,get_hasArmorResultProtecting:t.get_hasArmorResultProtecting,get_hasArmorResultLayers:t.get_hasArmorResultLayers,get_hasArmorCrushables:t.get_hasArmorCrushables,get_showTargetingZoneIndex:t.get_showTargetingZoneIndex,isDisabledHitLocation:t.isDisabledHitLocation,get_targetZoneHitAreaMasks:t.get_targetZoneHitAreaMasks,get_isYourInventory:t.get_isYourInventory,get_whoseInventoryPrefix:t.get_whoseInventoryPrefix,get_hitLocationArmorValues:t.get_hitLocationArmorValues,get_missileHitTargetZones:t.get_missileHitTargetZones,get_missileTargetHitZone:t.get_missileTargetHitZone,sortArmorLayers:t.sortArmorLayers,calcAVColumnRowIndex:t.calcAVColumnRowIndex,get_shieldAVHigherOrEqual:t.get_shieldAVHigherOrEqual,focusOutAVColumnRowIndex:t.focusOutAVColumnRowIndex,test:t.test,focusOutRowField:t.focusOutRowField,focusInRowField:t.focusInRowField,focusWidgetValue:t.focusWidgetValue,executeQtyEntry:t.executeQtyEntry,validateQtyName:t.validateQtyName,validateQtyNamePacked:t.validateQtyNamePacked,validateQtyNameDropped:t.validateQtyNameDropped,executeEquipEntry:t.executeEquipEntry,addAmmo:t.addAmmo,getHitLocationMaskNameOf:t.getHitLocationMaskNameOf,shiftIndex:t.shiftIndex,get_hasPopup:t.get_hasPopup,get_isValidDroppedEntry:t.get_isValidDroppedEntry,get_isValidPackedEntry:t.get_isValidPackedEntry,get_crossbowMask:t.get_crossbowMask,get_bowMask:t.get_bowMask,get_bowSlingAndCrossbowMask:t.get_bowSlingAndCrossbowMask,get_firearmMask:t.get_firearmMask,get_throwMask:t.get_throwMask,get_droppedEntryGotFocus:t.get_droppedEntryGotFocus,get_packedEntryGotFocus:t.get_packedEntryGotFocus,get_miscEntryGotFocus:t.get_miscEntryGotFocus,get_weaponEntryGotFocus:t.get_weaponEntryGotFocus,get_shieldEntryGotFocus:t.get_shieldEntryGotFocus,get_calcMeleeTZProbabilities:t.get_calcMeleeTZProbabilities,get_calcRangedTZProbabilities:t.get_calcRangedTZProbabilities,get_armorEntryGotFocus:t.get_armorEntryGotFocus,get_carriedShield:t.get_carriedShield,get_shieldSizeLabels:t.get_shieldSizeLabels,get_shieldCoverage:t.get_shieldCoverage,get_totalCostMoney:t.get_totalCostMoney,get_totalCostGP:t.get_totalCostGP,get_totalCostSP:t.get_totalCostSP,get_totalCostCP:t.get_totalCostCP,executeCopyContents:t.executeCopyContents,get_totalWeight:t.get_totalWeight,get_totalWeightLbl:t.get_totalWeightLbl,get_showTally:t.get_showTally,get_body:t.get_body,get_filteredMelee:t.get_filteredMelee,get_filteredCrossbow:t.get_filteredCrossbow,get_filteredFirearm:t.get_filteredFirearm,get_filteredBow:t.get_filteredBow,get_filteredThrowing:t.get_filteredThrowing,get_filteredAmmo:t.get_filteredAmmo,on_packedEntryGotFocus:t.on_packedEntryGotFocus,on_droppedEntryGotFocus:t.on_droppedEntryGotFocus,on_shieldEntryGotFocus:t.on_shieldEntryGotFocus,on_weaponEntryGotFocus:t.on_weaponEntryGotFocus,on_miscEntryGotFocus:t.on_miscEntryGotFocus,on_armorEntryGotFocus:t.on_armorEntryGotFocus},this.props={injectWeight:{required:!1,type:Number},inventory:{required:!0,type:Object},maxWeight:{required:!1,type:Number},maxCostCopper:{required:!1,type:Number},includeDroppedCost:{required:!1,default:!1,type:Boolean},includeOwnerSlash:{required:!1,default:!1,type:Boolean},saveAvailable:{required:!1,default:!0,type:Boolean},showArmorCoverage:{required:!1,default:!0,type:Boolean},bodyChar:{required:!1,type:Object},loadAvailable:{required:!1,default:!0,type:Boolean},inventoryLabel:{required:!1,type:String}},this.watch={inventory:t.watch_inventory,itemToOverwriteWith:t.watch_itemToOverwriteWith,itemQtyMultiple:t.watch_itemQtyMultiple,packedEntryGotFocus:t.on_packedEntryGotFocus,droppedEntryGotFocus:t.on_droppedEntryGotFocus,shieldEntryGotFocus:t.on_shieldEntryGotFocus,weaponEntryGotFocus:t.on_weaponEntryGotFocus,miscEntryGotFocus:t.on_miscEntryGotFocus,armorEntryGotFocus:t.on_armorEntryGotFocus}},__class__:Mi});var Ei=function(){this.calcArmorResults={hitLocationIndex:0,damageType:0,layer:0,av:0,armorsProtectable:[],armorsLayer:[],armorsCrushable:[]},this.calcAVRowIndex=0,this.calcAVColumn=0,this.calcMeleeTargetingZoneIndex=0,this.calcArmorMeleeTargeting=!1,this.calcArmorCrushing=!1,this.calcArmorMissile=!1,this.calcArmorFirearm=!1,this.focusValueText="",this.itemTransitionName="fade",this.curWidgetRequest={section:"",type:"",index:0},this.damageTypeSuffixes=fn.getFlagVarNames(),this.shieldHighProfiles=Nn.getHighCoverage(),this.shieldLowProfiles=Nn.getLowCoverage(),this.popupIndex=-1,this.coreRangedProfs=null!=En.CORE_RANGED?En.CORE_RANGED:En.CORE_RANGED=En.getNewCoreRanged(),this.coreMeleeProfs=En.getCoreMelee(),this.copyToClipboardDropList="",this.copyToClipboard="",this.armorEntry=new Ri(Cn.getEmptyReadyAssign("armor")),this.userShowTally=!0,this.miscItemEntry=new Ri(Cn.getEmptyReadyAssign("item")),this.weaponEntry=new Ri(Cn.getEmptyReadyAssign("weapon")),this.shieldEntry=new Ri(Cn.getEmptyReadyAssign("shield")),this.privateData={},this.selectedMissileTargetZoneIndex=-1,this.itemQtyMultipleMax=1,this.itemQtyMultiple=null,this.itemToOverwriteWithChecked=!1,this.itemToOverwriteToPacked=!1,this.itemToOverwriteWith=null,this.packedEntry=new Fi,this.droppedEntry=new Fi};n["troshx.sos.vue.InventoryVueData"]=Ei,Ei.__name__=["troshx","sos","vue","InventoryVueData"],Ei.prototype={__class__:Ei};var Pi=function(){};n["troshx.sos.vue.IFocusFlags"]=Pi,Pi.__name__=["troshx","sos","vue","IFocusFlags"],Pi.prototype={__class__:Pi};var Ri=function(t){this.focusedFlags=0,this.reset(t)};n["troshx.sos.vue.RowReadyEntry"]=Ri,Ri.__name__=["troshx","sos","vue","RowReadyEntry"],Ri.__interfaces__=[Pi,st],Ri.prototype={reset:function(t){this.itemToValidate=null,this.e=t},setupValidable:function(){if(Object.prototype.hasOwnProperty.call(this.e,"weapon")){var t=d.field(this.e,"weapon");this.itemToValidate=D.__instanceof(t,on)?t:null}else if(Object.prototype.hasOwnProperty.call(this.e,"shield")){var e=d.field(this.e,"shield");this.itemToValidate=D.__instanceof(e,Nn)?e:null}else if(Object.prototype.hasOwnProperty.call(this.e,"armor")){var n=d.field(this.e,"armor");this.itemToValidate=D.__instanceof(n,en)?n:null}else{if(!Object.prototype.hasOwnProperty.call(this.e,"item"))throw new V("Could not resolve RowReadyEntry reflect type!");var i=d.field(this.e,"item");this.itemToValidate=D.__instanceof(i,tn)?i:null}if(null==this.itemToValidate)throw new V("Could not resolve item to validate to Item type:"+p.string(this.e))},getWeapon:function(){if(Object.prototype.hasOwnProperty.call(this.e,"weapon")){var t=d.field(this.e,"weapon");return D.__instanceof(t,on)?t:null}return null},isValid:function(){return null==this.itemToValidate&&this.setupValidable(),null!=this.itemToValidate.name&&""!=m.trim(this.itemToValidate.name)},__class__:Ri};var Bi=function(){Mi.call(this)};n["troshx.sos.vue.InventoryVueArmor"]=Bi,Bi.__name__=["troshx","sos","vue","InventoryVueArmor"],Bi.__super__=Mi,Bi.prototype=r(Mi.prototype,{Template:function(){return'<div class="inventory" v-on:click="onBaseInventoryClick">\r\n\t\r\n\t<h4>Dropped:</h4>\r\n\t<table border="1">\r\n\t\t<thead>\r\n\t\t\t<tr>\r\n\t\t\t\t<td>Item Name</td>\r\n\t\t\t\t<td class="qty">Qty</td>\r\n\t\t\t\t<td class="weight">Weight</td>\r\n\t\t\t\t<td class="munition-type">Type</td>\r\n\t\t\t\t<td class="actions"><i>Actions</i></td>\r\n\t\t\t</tr>\r\n\t\t</thead>\r\n\t\t<tbody :name="itemTransitionName" is="transition-group" v-on:mousedown.native="setCurWidgetSection(\'dropped\', $event)" v-on:touchstart.native="setCurWidgetSection(\'dropped\', $event)">\r\n\t\t\t\r\n\t\t\t<tr v-for="(entry,i) in inventory.dropped.list" :key="entry.item.get_uid()">\r\n\t\t\t\t<td><input-name-qty :itemQty="entry" v-on:updated="onInputNameUpdated" :customValidateName="validateQtyNameDropped" /></td>\r\n\t\t\t\t<td><InputInt :obj="entry" prop="qty" :min="1"></InputInt></td>\r\n\t\t\t\t<td><InputNumber :floating="true" :step="0.5" :obj="entry.item" prop="weight" :min="0"></InputNumber></td>\r\n\t\t\t\t<td>{{ entry.item.getTypeLabel() }}</td>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<a href="javascript:;" v-on:click="inventory.equipItemEntryFromGround(entry)">Equip</a>\r\n\t\t\t\t\t<a href="javascript:;" v-on:click="inventory.deleteDropped(entry)">Delete</a>\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\t\r\n\t\t</tbody>\r\n\t</table>\r\n\r\n\t<h4>Shields:</h4>\r\n\t<table border="1">\r\n\t\t<thead>\r\n\t\t\t<tr>\r\n\t\t\t\t<td style="width:155px">Shield Name</td>\r\n\t\t\t\t<td style="width:35px">AV</td>\r\n\t\t\t\t<td style="width:35px">Block</td>\r\n\t\t\t\t<td style="width:45px">Weight</td>\r\n\t\t\t\t<td style="width:67px">Size</td>\r\n\t\t\t\t<td class="tags">Tags</td>\r\n\t\t\t\t<td style="width:130px">Kept at?</td>\r\n\t\t\t\t<td class="held">Held?</td>\r\n\t\t\t\t<td class="actions"><i>Actions</i></td>\r\n\t\t\t</tr>\r\n\t\t</thead>\r\n\t\t<tbody :name="itemTransitionName" is="transition-group" v-on:mousedown.native="setCurWidgetSection(\'shield\',$event)" v-on:touchstart.native="setCurWidgetSection(\'shield\',$event)">\r\n\t\t\t<tr :key="entry.key" v-for="(entry,i) in inventory.shields">\r\n\t\t\t\t<td><input-name :item="entry.shield" v-on:updated="onInputNameUpdated" /></td>\r\n\t\t\t\t<td><InputInt :obj="entry.shield" prop="AV" :min="1"></InputInt></td>\r\n\t\t\t\t<td><InputInt :obj="entry.shield" prop="blockTN" :min="0"></InputInt></td>\r\n\t\t\t\t<td><InputNumber :step="0.5" :obj="entry.shield" prop="weight" :min="0"></InputNumber></td>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<select number v-model.number="entry.shield.size ">\r\n\t\t\t\t\t\t<option :value="0">Small</option>\r\n\t\t\t\t\t\t<option :value="1">Medium</option>\r\n\t\t\t\t\t\t<option :value="2">Large</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</td>\r\n\t\t\t\t<td-widget v-on:focus-widget-value="focusWidgetValue" widgetName="tags" widgetTagName="w-tags" :value="getTags(entry.shield)" :index="i" :showWidget="isVisibleWidget(\'shield\',\'tags\', i)" :entry="entry" :requestCurWidget="requestCurWidget" />\r\n\t\t\t\t<td-unheld :entry="entry" :requestCurWidget="requestCurWidget" :index="i" :showWidget="isVisibleWidget(\'shield\', \'td-unheld\', i)" />\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<select-held :entry="entry" :inventory="inventory" />\r\n\t\t\t\t</td>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<a href="javascript:;" v-on:click="dropEquipedShield(entry)">Drop</a>\r\n\t\t\t\t\t<a href="javascript:;" v-on:click="dropEquipedShield(entry, true)">Delete</a>\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t\t<tr class="entry-row" :key="-1">\r\n\t\t\t\t<td><input type="text" v-on:focus="focusInRowField(shieldEntry, 1)" v-on:blur="focusOutRowField(shieldEntry, 1)" v-model="shieldEntry.e.shield.name" required></input></td>\r\n\t\t\t\t<td><InputInt v-on:focus.native="focusInRowField(shieldEntry, 2)" v-on:blur.native="focusOutRowField(shieldEntry, 2)" :obj="shieldEntry.e.shield" prop="AV" :min="1"></InputInt></td>\r\n\t\t\t\t<td><InputInt v-on:focus.native="focusInRowField(shieldEntry, 4)" v-on:blur.native="focusOutRowField(shieldEntry, 4)" :obj="shieldEntry.e.shield" prop="blockTN" :min="0"></InputInt></td>\r\n\t\t\t\t<td><InputInt v-on:focus.native="focusInRowField(shieldEntry, 8)" v-on:blur.native="focusOutRowField(shieldEntry, 8)" :obj="shieldEntry.e.shield" prop="weight" :min="0"></InputInt></td>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<select v-model.number="shieldEntry.e.shield.size" v-on:focus="focusInRowField(shieldEntry, 16)" v-on:blur="focusOutRowField(shieldEntry, 16)">\r\n\t\t\t\t\t\t<option :value="0">Small</option>\r\n\t\t\t\t\t\t<option :value="1">Medium</option>\r\n\t\t\t\t\t\t<option :value="2">Large</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</td>\r\n\t\t\t\t<td-widget v-on:focus-widget-value="focusWidgetValue" widgetName="tags" widgetTagName="w-tags" :value="getTags(shieldEntry.e.shield)" :index="-1" :showWidget="(shieldEntry.focusedFlags & (32|(1<<21))) !=0" :entry="shieldEntry.e" :requestCurWidget="requestCurWidget"\r\n\t\t\t\tv-on:focus-in-row="focusInRowField(shieldEntry, 32)" v-on:focus-out-row="focusOutRowField(shieldEntry, 32)" v-on:focus-widget="focusInRowField(shieldEntry, (1<<21))" />\r\n\t\t\t\t<td><input type="text" v-model="shieldEntry.e.unheldRemark" v-on:focus="focusInRowField(shieldEntry,64)" v-on:blur="focusOutRowField(shieldEntry,64)"></input></td>\t\r\n\t\t\t\t\r\n\t\t\t</tr>\r\n\t\t</tbody>\r\n\t</table>\r\n\t\r\n\t<h4>Armor:</h4>\r\n\t<table border="1">\r\n\t\t<thead>\r\n\t\t\t<tr>\r\n\t\t\t\t<td>Armor Name</td>\r\n\t\t\t\t<td>AVC</td>\r\n\t\t\t\t<td>AVP</td>\r\n\t\t\t\t<td>AVB</td>\r\n\t\t\t\t<td>Coverage</td>\r\n\t\t\t\t<td class="weight">Weight</td>\r\n\t\t\t\t<td class="tags">Tags</td>\r\n\t\t\t\t<td class="actions"><i>Actions</i></td>\r\n\t\t\t</tr>\r\n\t\t</thead>\r\n\t\t<tbody :name="itemTransitionName" is="transition-group" v-on:mousedown.native="setCurWidgetSection(\'armor\', $event)"  v-on:touchstart.native="setCurWidgetSection(\'armor\', $event)">\r\n\t\t\t<tr v-for="(entry, i) in inventory.wornArmor" :key="i">\r\n\t\t\t\t<td><input-name :item="entry.armor" v-on:updated="onInputNameUpdated" /></td>\r\n\t\t\t\t<td><InputInt :min="0" :obj="entry.armor" prop="AVC"></InputInt></td>\r\n\t\t\t\t<td><InputInt :min="0" :obj="entry.armor" prop="AVP"></InputInt></td>\r\n\t\t\t\t<td><InputInt :min="0" :obj="entry.armor" prop="AVB"></InputInt></td>\t\t\t\r\n\t\t\t\t<td-widget v-on:focus-widget-value="focusWidgetValue" widgetName="coverage" widgetTagName="w-coverage" :value="getCoverage(entry.armor)" :index="i" :showWidget="isVisibleWidget(\'armor\',\'coverage\', i)" :entry="entry" :requestCurWidget="requestCurWidget" />\r\n\t\t\t\t<td><InputNumber :min="0" :step="0.5" :obj="entry.armor" prop="weight"></InputNumber></td>\r\n\t\t\t\t<td-widget v-on:focus-widget-value="focusWidgetValue" widgetName="tags" widgetTagName="w-tags" :value="getTags(entry.armor)" :index="i" :showWidget="isVisibleWidget(\'armor\',\'tags\', i)" :entry="entry" :requestCurWidget="requestCurWidget" />\r\n\t\t\t\t\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<a href="javascript:;" v-on:click="dropWornArmor(entry)">Drop</a>\r\n\t\t\t\t\t<a href="javascript:;" v-on:click="dropWornArmor(entry, true)">Delete</a>\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t\t<tr class="entry-row" :key="-1">\r\n\t\t\t\t<td><input type="text" v-model="armorEntry.e.armor.name" v-on:focus="focusInRowField(armorEntry,1)" v-on:blur="focusOutRowField(armorEntry,1)"></input></td>\r\n\t\t\t\t<td><InputInt :min="0" :obj="armorEntry.e.armor" prop="AVC" v-on:focus.native="focusInRowField(armorEntry,2)" v-on:blur.native="focusOutRowField(armorEntry,2)"></InputInt></td>\r\n\t\t\t\t<td><InputInt :min="0" :obj="armorEntry.e.armor" prop="AVP" v-on:focus.native="focusInRowField(armorEntry,4)" v-on:blur.native="focusOutRowField(armorEntry,4)"></InputInt></td>\r\n\t\t\t\t<td><InputInt :min="0" :obj="armorEntry.e.armor" prop="AVB" v-on:focus.native="focusInRowField(armorEntry,8)" v-on:blur.native="focusOutRowField(armorEntry,8)"></InputInt></td>\r\n\t\t\t\t<td-widget v-on:focus-widget-value="focusWidgetValue" widgetName="coverage" widgetTagName="w-coverage" :value="getCoverage(armorEntry.e.armor)" :index="-1" :showWidget="(armorEntry.focusedFlags & (16|(1<<20))) !=0" :entry="armorEntry.e.armor" :requestCurWidget="requestCurWidget"\r\n\t\t\t\t\tv-on:focus-in-row="focusInRowField(armorEntry, 16)" v-on:focus-out-row="focusOutRowField(armorEntry, 16)" v-on:focus-widget="focusInRowField(armorEntry, (1<<20))" />\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t<td><InputNumber :min="0" :step="0.5" :obj="armorEntry.e.armor" prop="weight" v-on:focus.native="focusInRowField(armorEntry,32)" v-on:blur.native="focusOutRowField(armorEntry,32)"></InputNumber></td>\r\n\t\t\t\t<td-widget v-on:focus-widget-value="focusWidgetValue" widgetName="tags" widgetTagName="w-tags" :value="getTags(armorEntry.e.armor)" :index="-1" :showWidget="(armorEntry.focusedFlags & (64|(1<<21))) !=0" :entry="armorEntry.e.armor" :requestCurWidget="requestCurWidget"\r\n\t\t\t\tv-on:focus-in-row="focusInRowField(armorEntry, 64)" v-on:focus-out-row="focusOutRowField(armorEntry, 64)" v-on:focus-widget="focusInRowField(armorEntry, (1<<21))" />\r\n\t\t\t\t<td><input type="text" readonly class="focusable" v-on:focus="focusInRowField(armorEntry,64)" v-on:blur="focusOutRowField(armorEntry,64)"></input></td>\r\n\t\t\t</tr>\r\n\t\t</tbody>\r\n\t</table>\t\t\r\n\t\r\n\t\r\n\t<hr/>\r\n\t\t\r\n\t\t<div class="overall-armor-coverage" v-if="showArmorCoverage">\r\n\t\t\t<h4>Overall Armor Coverage:</h4>\t\r\n\t\t\t<div v-if="carriedShield!=null">Held Shield: <b>{{carriedShield.name}}</b> <span class="shield-icon-inv">☗</span></div>\r\n\t\t\t<div v-if="carriedShield!=null">Size: <b>{{shieldSizeLabels[carriedShield.size]}}</b></div>\r\n\t\t\t<div><label>Prefered Shield Position:\r\n\t\t\t\t<select v-model.number="inventory.shieldPosition" number>\r\n\t\t\t\t\t<option :value="0">Low</option>\r\n\t\t\t\t\t<option :value="1">High</option>\r\n\t\t\t\t</select>\t\r\n\t\t\t</label> <span v-show="carriedShield==null"> (if held)</span></div>\r\n\t\t\t<div style="display:inline-block;vertical-align:top;">\r\n\t\t\t\t<table border="1" class="table-coverage">\r\n\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<td></td>\r\n\t\t\t\t\t\t\t<td></td>\r\n\t\t\t\t\t\t\t<td>AVC</td>\r\n\t\t\t\t\t\t\t<td>AVP<span v-show="calcArmorMissile"> ↢</span></td>\r\n\t\t\t\t\t\t\t<td>AVB</td>\r\n\t\t\t\t\t\t\t<td v-if="carriedShield !=null">sAV\t<span class="shield-icon-inv">☗</span></td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</thead>\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t<tr v-for="(li, i) in coverageHitLocations">\r\n\t\t\t\t\t\t\t<td><i>{{getHitLocationMaskNameOf(i)}}</i></td>\r\n\t\t\t\t\t\t\t<td>{{i+1}}. {{li.name}}</td>\r\n\t\t\t\t\t\t\t<td><input type="number" readonly :value="hitLocationArmorValues[li.id].avc" :disabled="isDisabledHitLocation(i)" v-on:focus="calcAVColumnRowIndex(1, i)" v-on:blur="focusOutAVColumnRowIndex(1,i)"></input></td>\r\n\t\t\t\t\t\t\t<td><input type="number" readonly :value="hitLocationArmorValues[li.id].avp" :disabled="isDisabledHitLocation(i)" v-on:focus="calcAVColumnRowIndex(2, i)" v-on:blur="focusOutAVColumnRowIndex(2,i)"></input></td>\r\n\t\t\t\t\t\t\t<td><input type="number" readonly :value="hitLocationArmorValues[li.id].avb" :disabled="isDisabledHitLocation(i)" v-on:focus="calcAVColumnRowIndex(3, i)" v-on:blur="focusOutAVColumnRowIndex(3,i)"></input></td>\r\n\t\t\t\t\t\t\t<td v-if="carriedShield!=null" v-show="shieldCoverage[li.id]!=null" class="td-shield" :class="{active:calcAVRowIndex==i && shieldAVHigherOrEqual }">{{ shieldCoverage[li.id] ===false ? "~" : ""}}{{ carriedShield.AV }}</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t\t<div style="display:inline-block;vertical-align:top;margin-left:8px;">\r\n\t\t\t\t<div><i class="consider">Consider against:</i></div>\r\n\t\t\t\t<br/>\r\n\t\t\t\t<div><label><input type="checkbox" v-model="calcArmorCrushing"></input>Crushing attack</label></div>\r\n\t\t\t\t<div><label><input type="checkbox" v-model="calcArmorMissile"></input>Missile attack ↢</label> <label :class="{disabled:!calcArmorMissile}" :style="{\'pointer-events\':!calcArmorMissile ? \'none\': \'auto\'}"><input type="checkbox" v-model="calcArmorFirearm"></input><i>Firearm?</i></label> Hit at:<select number v-model.number="selectedMissileTargetZoneIndex"><option :value="-1"></option><option :value="i" v-for="(li, i) in missileHitTargetZones" :key="i">{{i+2}}:{{li.tz.name}}</option></select> <a v-on:click="selectedMissileTargetZoneIndex=-1" href="javascript:;" v-show="selectedMissileTargetZoneIndex>=0">[x]</a></div>\r\n\t\t\t\t<div><label :class="{disabled:calcArmorMissile}" :style="{\'pointer-events\':calcArmorMissile ? \'none\': \'auto\'}"><input type="checkbox" v-model="calcArmorMeleeTargeting"></input> <span :class="{disabled:!shouldCalcMeleeAiming}">Melee Targeting:</span> </label><select number :disabled="!shouldCalcMeleeAiming" v-model.number="calcMeleeTargetingZoneIndex">\r\n\t\t\t\t\t<option :value="i" v-for="(li, i) in body.targetZones">{{ body.getDescLabelTargetZone(i) }}</option>\r\n\t\t\t\t</select></div>\r\n\t\t\t\t<div style="margin-top:5px" v-show="calcArmorMeleeTargeting && shouldCalcMeleeAiming">{{ calcMeleeTZProbabilities }}</div>\r\n\t\t\t\t<div style="margin-top:5px" v-show="calcArmorMissile && selectedMissileTargetZoneIndex>=0">{{ calcRangedTZProbabilities }}</div>\r\n\t\t\t\t<br/>\r\n\t\t\t\t<div><i>Result: </i><b>{{ calcArmorResults.av + calcArmorResults.layer }} AV</b></div>\r\n\t\t\t\t<i class="cta" v-show="calcAVColumn==0">&lt;- Focus-click on table cells to inspect result.</i>\r\n\t\t\t\t<br/>\r\n\t\t\t\t<div v-show="calcAVColumn!=0">\r\n\t\t\t\t\t<div><span class="outline-dominant">AV Armor protecting: <b>{{ calcArmorResults.av }} AV</b></span></div>\r\n\t\t\t\t\t<ul v-show="hasArmorResultProtecting">\r\n\t\t\t\t\t\t<li v-for="li in calcArmorResults.armorsProtectable">{{ li.name }}</li>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t\t<br v-show="!hasArmorResultProtecting" />\r\n\t\t\t\t\t<div><span class="outline-layer">Layer protecting: <b>+{{ calcArmorResults.layer }} AV</b></span></div>\r\n\t\t\t\t\t<ul v-show="hasArmorResultLayers">\r\n\t\t\t\t\t\t<li v-for="li in calcArmorResults.armorsLayer">{{ li.name }}</li>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t\t<br v-show="!hasArmorResultLayers" />\r\n\t\t\t\t\t<div v-show="calcArmorCrushing">\r\n\t\t\t\t\t\t<div><span class="outline-crushed">Crushable Hard Armor: <b><span v-show="!hasArmorCrushables"> <i>none</i></span></b></span></div>\r\n\t\t\t\t\t\t<ul v-show="hasArmorCrushables">\r\n\t\t\t\t\t\t\t<li v-for="li in calcArmorResults.armorsCrushable">{{ li.name }}</li>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\r\n\t<div class="focus-value-bar"><input type="text" :value="focusValueText" readonly></input></div>\r\n</div>'},_Init:function(){Mi.prototype._Init.call(this),this.template=this.Template()},__class__:Bi});var Ni=function(){B.call(this),this.mixins=[Ui.getInstance()]};n["troshx.sos.vue.RangeCalculator"]=Ni,Ni.__name__=["troshx","sos","vue","RangeCalculator"],Ni.__super__=B,Ni.prototype=r(B.prototype,{Data:function(){return new Wi},Components:function(){var t={};return t.inventory=new Bi,t["tree-browser"]=new Sr,t},get_chanceToAtLeastGraze:function(){return Gr.getAtLeastXSuccessesProb(this.shooterTotalMP,this.shooterTN,this.targetTotalRS)},get_chanceToAtLeastGrazeAtLeastOnce:function(){var t=this.chanceToAtLeastGraze,e=this.chanceToAtLeastGraze;return t+e-t*e},get_chanceToAtLeastGrazeTwice:function(){return this.chanceToAtLeastGraze*this.chanceToAtLeastGraze},roundPerc:function(t){return Math.round(100*t)},get_chanceToHitFully:function(){return Gr.getAtLeastXSuccessesProb(this.shooterTotalMP,this.shooterTN,this.targetTotalRS+1)},get_chanceToHitFullyAtLeastOnce:function(){var t=this.chanceToHitFully,e=this.chanceToHitFully;return t+e-t*e},get_chanceToHitFullyTwice:function(){return this.chanceToHitFully*this.chanceToHitFully},get_grazePercMargin:function(){return this.roundPerc(this.chanceToAtLeastGraze)-this.roundPerc(this.chanceToHitFully)},get_lowShieldCoverage:function(){return Nn.getLowCoverage()},get_highShieldCoverage:function(){return Nn.getHighCoverage()},get_coverageHitLocations:function(){return un.getInstance().hitLocations},get_hitLocationZeroAVValues:function(){for(var t=this.coverageHitLocations,e={},n=0,i=t.length;n<i;){e[t[n++].id]={avp:0,avc:0,avb:0}}return e},get_hitLocationArmorValues:function(){for(var t=this.targetInventory,e=t.wornArmor,n=this.hitLocationZeroAVValues,i=un.getInstance(),r=i.hitLocations,s=!this.shooterFirearm,a=0,o=r.length;a<o;){var l=n[r[a++].id];l.avc=0,l.avp=0,l.avb=0}for(var u=0,c=e.length;u<c;){var h=e[u++].armor,d=0;null!=h.special&&null!=h.special.wornWith&&""!=h.special.wornWith.name&&(d=t.layeredWearingMaskWith(h,h.special.wornWith.name,i)),h.writeAVVAluesTo(n,i,d,s,0)}return n},pierceAV:function(t,e){return(t-=e)<0?0:t},getArmorRS:function(t,e,n){return t+(e>n?0:1+n-e)},get_rangedOutfitChanceToBreach:function(){for(var t=this.hitLocationArmorValues,e=d.fields(t),n=999999999,i=0,r=e.length;i<r;){var s=t[e[i++]].avp;s<n&&(n=s)}var a=this.shooterAP;999999999==n&&(n=0);for(var o=this.targetInventory,l=o.findHeldShield(),u=null!=l?l.size+1:0,c=0==u?0:u-1,h=1!=(null!=l?o.shieldPosition:0)?this.lowShieldCoverage[c]:this.highShieldCoverage[c],p=this.shooterTotalMP,g=this.shooterTN,m=this.targetTotalRS,f=this.shooterDamage,_=un.getInstance(),v=_.targetZones,b=Math.floor(.5*(n+this.avValueToOvercome)),y=((b-=this.shooterAP)<0?0:b)+4,w=Gr.getAtLeastXSuccessesProb(p,g,m+(f>y?0:1+y-f)),S=1,C=_.missileHitLocations.length;S<C;)for(var A=v[S++],x=0,I=A.parts.length;x<I;){var k=x++,T=A.partWeights[k]/A.weightsTotal,L=A.parts[k],M=_.hitLocations[L],E=null!=l&&null!=h[M.id],P=E?l.AV:0,R=t[M.id],B=null!=R?R.avp:0,N=0!=B?this.getLayerValue(B,L,M.id):0;if(E&&!h[M.id]){var W=T*=.5,F=N+B+this.avValueToOvercome+P,O=((F-=a)<0?0:F)+4;T=W*Gr.getAtLeastXSuccessesProb(p,g,m+(f>O?0:1+O-f));var H=N+B+this.avValueToOvercome,V=((H-=a)<0?0:H)+4;T+=W*Gr.getAtLeastXSuccessesProb(p,g,m+(f>V?0:1+V-f))}else{var D=N+B+this.avValueToOvercome+P,q=((D-=a)<0?0:D)+4;T*=Gr.getAtLeastXSuccessesProb(p,g,m+(f>q?0:1+q-f))}w+=T}return w/_.missileHitLocations.length},get_chanceToBypassShield:function(){for(var t=this.targetShield,e=0==t?0:t-1,n=1!=this.targetShieldPosition?this.lowShieldCoverage[e]:this.highShieldCoverage[e],i=un.getInstance(),r=i.targetZones,s=1,a=1,o=i.missileHitLocations.length;a<o;)for(var l=r[a++],u=0,c=l.parts.length;u<c;){var h=u++,d=l.partWeights[h]/l.weightsTotal,p=i.hitLocations[l.parts[h]];s+=d*=null!=n[p.id]?n[p.id]?0:.5:1}return t>0?s/i.missileHitLocations.length:1},get_shooterTotalMP:function(){return this.shooterProf+this.aimBonus+this.shooterMiscMPMod},get_breachArmorRSChance:function(){var t=this.targetInventory,e=0;null!=t&&(e=this.rangedOutfitChanceToBreach);var n=Gr.getAtLeastXSuccessesProb(this.shooterTotalMP,this.shooterTN,this.breachArmorRS);return null!=t?e:n},get_breachArmorRSChanceAtLeastOnce:function(){var t=this.breachArmorRSChance,e=this.breachArmorRSChance;return t+e-t*e},get_breachArmorRSChanceTwice:function(){return this.breachArmorRSChance*this.breachArmorRSChance},get_breachArmorRS:function(){return this.targetTotalRS+this.additionalRSForAV},get_aimBonus:function(){return Math.floor(2*this.shooterAim*this.aimMultiplier)},get_targetTotalRS:function(){return this.targetMiscRSMod+this.targetBehaviourRS+this.targetCoverRS+this.targetDistanceRS+4},get_targetDistanceRS:function(){var t=this.targetDistance/this.shooterRange;return 1==this.distRounding?Math.round(t):2==this.distRounding?Math.ceil(t):Math.floor(t)},get_aimMultiplier:function(){return this.shooterRapidShot?.5:1},get_additionalRSForAV:function(){var t=this.shooterDamage,e=this.avValueToOvercome,n=(e-=this.shooterAP)<0?0:e;return t>n+4?0:1+n+4-t},get_domainId:function(){return ki.DOMAIN_RANGECALC},loadCharacterClipboardWindow:function(){if(this.emptyClipboard)return this.avValueToOvercome=0,this.targetInventory=new Cn,this.targetChar=null,void this.$refs.clipboardWindow.close();this.loadCharContents(this.clipboardLoadContents)&&this.$refs.clipboardWindow.close()},loadCharContents:function(t){var e;try{e=new C(t).unserialize()}catch(t){return t instanceof V&&(t=t.val),console.log(t),q.alert("Sorry, failed to unserialize save-content string!"),!1}if(!D.__instanceof(e,yi)&&!D.__instanceof(e,Cn))return console.log(e),q.alert("Sorry, unserialized type isn't CharSheet/Inventory!"),!1;var n=D.__instanceof(e,yi)?e:null;if(null!=n)return n.postSerialization(),this.avValueToOvercome=0,this.targetInventory=n.inventory,this.targetChar=n,!0;var i=D.__instanceof(e,Cn)?e:null;return null!=i&&(i.postSerialization(),this.avValueToOvercome=0,this.targetChar=null,this.targetInventory=i,!0)},sortArmorLayers:function(t,e){return t.layer<e.layer?-1:t.layer>e.layer?1:0},getLayerValue:function(t,e,n){for(var i=this.hitLocationArmorValues,r=(this.coverageHitLocations,1<<e),s=(i[n],[]),a=Ni.SAMPLE_AV,o=this.targetInventory,l=o.wornArmor,u=un.getInstance(),c=!this.shooterFirearm,h=[],d=0,p=l.length;d<p;){var g=l[d++].armor;if(null!=g.coverage[n]){var m=0;if(null!=g.special&&null!=g.special.wornWith&&""!=g.special.wornWith.name&&(m=o.layeredWearingMaskWith(g,g.special.wornWith.name,u)),h.push(m),g.writeAVsAtLocation(u,n,r,a,m,c,0,!0))a.avp==t&&s.push(g)}else h.push(0)}if(0!=s.length){for(var f=[],_=0,v=l.length;_<v;){var b=_++,y=l[b].armor;if(null!=y.coverage[n]){var w=null!=y.special&&0!=y.special.layer?(0==y.special.layerCoverage||0!=(y.special.layerCoverage&r)?1:0)*y.special.layer:0;0!=h[b]&&y.special.wornWith.layer>0&&y.special.wornWith.layer>w&&(w=y.special.wornWith.layer);var S=w;S>0&&f.push({armor:y,layer:S})}}if(f.length>0&&(A.sort(f,Zr(this,this.sortArmorLayers)),1==s.length&&s[0]==f[f.length-1].armor&&f.pop(),f.length>0))return f[f.length-1].layer}return 0},openTreeBrowser:function(){var t=this;this.treeBrowserInited||(this.treeBrowserInited=!0),Vue.nextTick(function(){t.$refs.treeBrowser.open()})},openClipboardWindow:function(){this.clipboardLoadContents="",this.$refs.clipboardWindow.open()},get_emptyClipboard:function(){return""==m.trim(this.clipboardLoadContents)},get_availableTypes:function(){return{"troshx.sos.sheets.CharSheet":!0,"troshx.sos.core.Inventory":!0}},get_breachLabel:function(){return null==this.targetInventory?"AV":"Armor Outfit"},openFromTreeBrowser:function(t,e,n){this.loadCharContents(t)&&this.$refs.treeBrowser.close(),this.autoLoadChar=null},closeArmorOutfit:function(){this.targetInventory=null,this.targetChar=null},Template:function(){return'<div>\r\n\t\t\t<sweet-modal ref="clipboardWindow" :class="{reset:true}" >\t\t\r\n\t\t\t\t<div>\r\n\t\t\t\t\tYou can manually paste saved data text stream into text-area and click on Load Character/Inventory to open a new target character/inventory for ranged testing!\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<textarea ref="savedCharTextArea" character-set="UTF-8" v-model="clipboardLoadContents" style="min-height:60px;"></textarea>\t\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div><button v-on:click="loadCharacterClipboardWindow()">{{!emptyClipboard ? "Load Character/Inventory" : "New Inventory Outfit" }}</button></div>\r\n\t\t\t\t</div>\r\n\t\t\t</sweet-modal>\r\n\t\t\t<sweet-modal ref="treeBrowser" :class="{reset:true}" v-if="treeBrowserInited" >\t\t\r\n\t\t\t\t<tree-browser :availableTypes="availableTypes" v-on:open="openFromTreeBrowser" :initialDomain="domainId" :autoLoad="autoLoadChar" />\r\n\t\t\t</sweet-modal>\r\n\t\r\n\t\t\t<h1>Firing Range Viability Calculator &nbsp;&nbsp;<button v-on:click="openTreeBrowser">&#127759;</button> <button v-on:click="$refs.clipboardWindow.open()">&#128203;</button> <button v-if="targetInventory!=null" v-on:click="closeArmorOutfit">&#10060; Close Armor Outfit</button></h1>\r\n\t\t\t<h4>Shooter</h4>\r\n\t\t\t<div><label>Profeciency Level: <InputInt :obj="$data" prop="shooterProf" :min="0" /></label></div>\r\n\t\t\t<div><label>Aim Phases (Max 3 phases x2 MP): <InputInt :obj="$data" prop="shooterAim" :min="0" :max="3" /></label> <b><i>{{ aimBonus }}</i></b></div>\r\n\t\t\t<div><label>Misc MP Mod: <InputInt :obj="$data" prop="shooterMiscMPMod"  /></label> <i>(eg. to deal with specific Rapid shot penalties and such..)</i></div>\r\n\t\t\t<div>Total MP: <b>{{ shooterTotalMP }}</b></div>\r\n\t\t\t<div><label><input type="checkbox" v-model="shooterRapidShot"></input> Rapid Shot?</label> <i>(Also includes house-rule that Halves Aim Bonus)</i></div>\r\n\t\t\t<div><label>Weapon/Firer Range Band (yards): <InputInt :obj="$data" prop="shooterRange" :min="1" /></label></div>\r\n\t\t\t<div><label>Effective Weapon Damage: <InputInt :obj="$data" prop="shooterDamage"  /></label></div>\r\n\t\t\t<div><label>Weapon Armor Piercing (AP): <InputInt :obj="$data" prop="shooterAP"  /></label></div>\r\n\t\t\t<div><label>Weapon TN: <InputInt :obj="$data" prop="shooterTN" :min="1" /></label></div>\r\n\t\t\t<div><label>Firearm? <input type="checkbox" v-model="shooterFirearm"></input></label></div>\r\n\t\t\t\r\n\t\t\t<h4>Target</h4>\r\n\t\t\t<div><label>Misc RS Modifier: <InputInt :obj="$data" prop="targetMiscRSMod"  /></label></div>\r\n\t\t\t<div><label>Behaviour RS: <InputInt :obj="$data" prop="targetBehaviourRS"  /></label> <i>(eg. Moved:+1 RS, Sprint/Charged/In-Melee:+2 RS)</i></div>\r\n\t\t\t<div><label>Environmental Cover RS:</label> <select number v-model.number="targetCoverRS"><option :value="li.value" :key="i" v-for="(li, i) in coverOptions">{{ li.label }} ({{li.value}})</option></select></div>\r\n\t\t\t<div>Distance (yards): <InputInt :obj="$data" prop="targetDistance" :min="0" /><select number v-model.number="distRounding"><option v-for="(li, i) in roundingOptions" :key="i" :value="li.value">{{ li.label }}</option></select> <b>+{{targetDistanceRS}} RS</b></div>\r\n\t\t\t\r\n\t\t\t<br/>\r\n\t\t\t<div>Target RS: <b>{{ targetTotalRS }}</b></div>\r\n\t\t\t<div><b>{{ roundPerc(chanceToAtLeastGraze) }}</b>% Chance to at least Graze or Hit Fully (RS) <span v-if="shooterRapidShot">({{roundPerc(chanceToAtLeastGrazeAtLeastOnce)}}% &gt;=once, {{roundPerc(chanceToAtLeastGrazeTwice)}}% twice)</span></div>\r\n\t\t\t<div>{{ grazePercMargin }}% Graze Percentage Margin</div>\r\n\t\t\t<div><b>{{ roundPerc(chanceToHitFully) }}</b>% Chance to Hit Fully <span v-if="shooterRapidShot">({{roundPerc(chanceToHitFullyAtLeastOnce)}}% &gt;=once, {{roundPerc(chanceToHitFullyTwice)}}% twice)</span></div>\r\n\t\t\t<div v-if="targetInventory != null"><i>Armor Outfit Loaded...</i>:</div>\r\n\t\t\t<div>{{ targetInventory != null ? "Global AV Modifier:" : "AV Value to overcome?:"}} <InputInt :obj="$data" prop="avValueToOvercome" :min="0" /></div>\r\n\t\t\t<div v-show="additionalRSForAV>0 && targetInventory == null">Target Armor RS: <b>{{breachArmorRS}}</b></div>\r\n\t\t\t<div v-show="additionalRSForAV>0 || targetInventory != null"><b>{{roundPerc(breachArmorRSChance)}}</b>% Chance to Hit &amp; Breach Given {{breachLabel}} + TOU4<span v-if="shooterRapidShot">({{roundPerc(breachArmorRSChanceAtLeastOnce)}}% &gt;=once, {{roundPerc(breachArmorRSChanceTwice)}}% twice)</span></div>\r\n\t\t\t<div v-if="targetInventory == null">\r\n\t\t\t\t<div><span class="shield-icon-inv">☗</span> With Shield? <select v-model.number="targetShield" number><option :value="0">None</option><option :value="1">Small</option><option :value="2">Medium</option><option :value="3">Large</option></select></div>\r\n\t\t\t\t<div v-show="targetShield!=0">Shield Position: <select v-model.number="targetShieldPosition" number><option :value="0">Low</option><option :value="1">High</option></select> <span class="shield-icon-inv">☗</span></div>\r\n\t\t\t\t<div v-if="targetShield > 0"><b>{{roundPerc(chanceToBypassShield)}}</b>% chance to bypass Shield alone</div>\r\n\t\t\t\t<div v-if="targetShield > 0"><b>{{roundPerc(chanceToBypassShield*chanceToAtLeastGraze)}}</b>% chance bypass &amp; at least Graze</div>\r\n\t\t\t\t<div v-if="targetShield > 0"><b>{{roundPerc(chanceToBypassShield*chanceToHitFully)}}</b>% chance bypass &amp; to Hit Fully</div>\r\n\t\t\t\t<div v-if="targetShield > 0 && additionalRSForAV>0"><b>{{roundPerc(chanceToBypassShield*breachArmorRSChance)}}</b>% chance to bypass &amp; Penetrate given AV + TOU4</div>\r\n\t\t\t</div>\r\n\t\t\t<div v-else>\r\n\t\t\t\t<inventory :inventory="targetInventory"></inventory>\r\n\t\t\t</div>\r\n\t\t</div>'},_Init:function(){var t=Ni.prototype;this.data=t.Data,this.components=this.Components(),this.template=this.Template(),this.computed={chanceToAtLeastGraze:t.get_chanceToAtLeastGraze,chanceToAtLeastGrazeAtLeastOnce:t.get_chanceToAtLeastGrazeAtLeastOnce,chanceToAtLeastGrazeTwice:t.get_chanceToAtLeastGrazeTwice,chanceToHitFully:t.get_chanceToHitFully,chanceToHitFullyAtLeastOnce:t.get_chanceToHitFullyAtLeastOnce,chanceToHitFullyTwice:t.get_chanceToHitFullyTwice,grazePercMargin:t.get_grazePercMargin,lowShieldCoverage:t.get_lowShieldCoverage,highShieldCoverage:t.get_highShieldCoverage,coverageHitLocations:t.get_coverageHitLocations,hitLocationZeroAVValues:t.get_hitLocationZeroAVValues,hitLocationArmorValues:t.get_hitLocationArmorValues,rangedOutfitChanceToBreach:t.get_rangedOutfitChanceToBreach,chanceToBypassShield:t.get_chanceToBypassShield,shooterTotalMP:t.get_shooterTotalMP,breachArmorRSChance:t.get_breachArmorRSChance,breachArmorRSChanceAtLeastOnce:t.get_breachArmorRSChanceAtLeastOnce,breachArmorRSChanceTwice:t.get_breachArmorRSChanceTwice,breachArmorRS:t.get_breachArmorRS,aimBonus:t.get_aimBonus,targetTotalRS:t.get_targetTotalRS,targetDistanceRS:t.get_targetDistanceRS,aimMultiplier:t.get_aimMultiplier,additionalRSForAV:t.get_additionalRSForAV,domainId:t.get_domainId,emptyClipboard:t.get_emptyClipboard,availableTypes:t.get_availableTypes,breachLabel:t.get_breachLabel},this.methods={get_chanceToAtLeastGraze:t.get_chanceToAtLeastGraze,get_chanceToAtLeastGrazeAtLeastOnce:t.get_chanceToAtLeastGrazeAtLeastOnce,get_chanceToAtLeastGrazeTwice:t.get_chanceToAtLeastGrazeTwice,roundPerc:t.roundPerc,get_chanceToHitFully:t.get_chanceToHitFully,get_chanceToHitFullyAtLeastOnce:t.get_chanceToHitFullyAtLeastOnce,get_chanceToHitFullyTwice:t.get_chanceToHitFullyTwice,get_grazePercMargin:t.get_grazePercMargin,get_lowShieldCoverage:t.get_lowShieldCoverage,get_highShieldCoverage:t.get_highShieldCoverage,get_coverageHitLocations:t.get_coverageHitLocations,get_hitLocationZeroAVValues:t.get_hitLocationZeroAVValues,get_hitLocationArmorValues:t.get_hitLocationArmorValues,pierceAV:t.pierceAV,getArmorRS:t.getArmorRS,get_rangedOutfitChanceToBreach:t.get_rangedOutfitChanceToBreach,get_chanceToBypassShield:t.get_chanceToBypassShield,get_shooterTotalMP:t.get_shooterTotalMP,get_breachArmorRSChance:t.get_breachArmorRSChance,get_breachArmorRSChanceAtLeastOnce:t.get_breachArmorRSChanceAtLeastOnce,get_breachArmorRSChanceTwice:t.get_breachArmorRSChanceTwice,get_breachArmorRS:t.get_breachArmorRS,get_aimBonus:t.get_aimBonus,get_targetTotalRS:t.get_targetTotalRS,get_targetDistanceRS:t.get_targetDistanceRS,get_aimMultiplier:t.get_aimMultiplier,get_additionalRSForAV:t.get_additionalRSForAV,get_domainId:t.get_domainId,loadCharacterClipboardWindow:t.loadCharacterClipboardWindow,loadCharContents:t.loadCharContents,sortArmorLayers:t.sortArmorLayers,getLayerValue:t.getLayerValue,openTreeBrowser:t.openTreeBrowser,openClipboardWindow:t.openClipboardWindow,get_emptyClipboard:t.get_emptyClipboard,get_availableTypes:t.get_availableTypes,get_breachLabel:t.get_breachLabel,openFromTreeBrowser:t.openFromTreeBrowser,closeArmorOutfit:t.closeArmorOutfit}},__class__:Ni});var Wi=function(){this.roundingOptions=[{label:"Round Down",value:0},{label:"Round Off",value:1},{label:"Round Up",value:2}],this.coverOptions=[{label:"None",value:0},{label:"Half",value:2},{label:"3/4",value:3},{label:"Murderhole",value:4}],this.treeBrowserInited=!1,this.clipboardLoadContents="",this.autoLoadChar=ki.AUTO_LOAD,this.avValueToOvercome=0,this.targetChar=null,this.targetInventory=null,this.distRounding=0,this.targetShieldPosition=0,this.targetShield=0,this.targetDistance=0,this.targetCoverRS=0,this.targetBehaviourRS=0,this.targetMiscRSMod=0,this.shooterAP=0,this.shooterDamage=0,this.shooterFirearm=!1,this.shooterRange=1,this.shooterRapidShot=!1,this.shooterMiscMPMod=0,this.shooterTN=7,this.shooterAim=0,this.shooterProf=1};n["troshx.sos.vue.RangeCalculatorData"]=Wi,Wi.__name__=["troshx","sos","vue","RangeCalculatorData"],Wi.prototype={__class__:Wi};var Fi=function(){this.focusedFlags=0,this.e=new xn};n["troshx.sos.vue.RowEntry_troshx_sos_core_ItemQty"]=Fi,Fi.__name__=["troshx","sos","vue","RowEntry_troshx_sos_core_ItemQty"],Fi.__interfaces__=[Pi,st],Fi.prototype={reset:function(){this.e=new xn},isValid:function(){return this.e.isValid()},__class__:Fi};var Oi=function(){B.call(this)};n["troshx.sos.vue.TDHands"]=Oi,Oi.__name__=["troshx","sos","vue","TDHands"],Oi.__super__=B,Oi.prototype=r(B.prototype,{Data:function(){return{handOffCache:null}},get_isTwoHandedHandOff:function(){var t=this.entry.weapon,e=t.meleeFlags,n=t.flags;return!(!(!t.ranged&&!t.isAmmo)||0==(128&e))&&0!=(1&n)},watch_isTwoHandedHandOff:function(t){t?null==this.entry.weapon.variant&&(this.entry.weapon.variant=this.handOffCache):this.entry.weapon.ranged?(this.handOffCache=null,this.entry.weapon.variant=null,this.entry.holding1H=!1):(this.handOffCache=this.entry.weapon.variant,this.entry.weapon.variant=null)},get_gotVariant:function(){var t=this.entry.holding1H,e=null!=this.entry.weapon.variant;return!!t&&e},get_isTwoHanded:function(){return 0!=(1&this.entry.weapon.flags)},onSelectChange:function(t,e){var n=t.target,i=n.value;this.isTwoHandedHandOff?(null==this.entry.weapon.variant&&(this.entry.weapon.variant=new on(this.entry.weapon.id,this.entry.weapon.name),this.entry.weapon.variant.profs=En.matchHandOffProfs(this.entry.weapon.profs)),this.entry.holding1H=1!=i):1==i?this.entry.weapon.flags|=1:this.entry.weapon.flags&=-2},shiftIndex:function(t){return 1<<t},emit:function(t){this.$emit(t)},Template:function(){return'<td>\r\n\t<select number :disabled="entry.held !=0" v-on:focus="emit(\'focus-in-row\')" v-on:blur="emit(\'focus-out-row\')" v-on:change="onSelectChange($event, entry.weapon)">\r\n\t\t<option value="0" :selected="!isTwoHanded || gotVariant">1H</option>\r\n\t\t<option value="1" :selected="isTwoHanded && !gotVariant">2H</option>\r\n\t</select>\r\n</td>'},_Init:function(){var t=Oi.prototype;this.data=t.Data,this.template=this.Template(),this.computed={isTwoHandedHandOff:t.get_isTwoHandedHandOff,gotVariant:t.get_gotVariant,isTwoHanded:t.get_isTwoHanded},this.methods={get_isTwoHandedHandOff:t.get_isTwoHandedHandOff,watch_isTwoHandedHandOff:t.watch_isTwoHandedHandOff,get_gotVariant:t.get_gotVariant,get_isTwoHanded:t.get_isTwoHanded,onSelectChange:t.onSelectChange,shiftIndex:t.shiftIndex,emit:t.emit},this.props={entry:{}},this.watch={isTwoHandedHandOff:t.watch_isTwoHandedHandOff}},__class__:Oi});var Hi=function(){B.call(this)};n["troshx.sos.vue.TDUnheld"]=Hi,Hi.__name__=["troshx","sos","vue","TDUnheld"],Hi.__super__=B,Hi.prototype=r(B.prototype,{Data:function(){return{unheldLabels:Cn.getUnheldLabelsArray()}},shiftIndex:function(t){return 1<<t},emit:function(t){this.$emit(t)},onFocus:function(t){t.value=this.entry.unheldRemark,this.$emit("focus-in-row")},setValidNameOfInput:function(t){var e=m.trim(t.value);this.entry.unheldRemark=e},get_unheld:function(){return this.entry.unheld},watch_unheld:function(t,e){this.$refs.inputText.value=this.unheldLabel},refresh:function(){this.$refs.inputText.value=this.unheldLabel},get_unheldLabel:function(){var t=this.unheldLabels[this.entry.unheld];return t+(""!=t&&""!=this.entry.unheldRemark?": ":"")+this.entry.unheldRemark},onBlur:function(t){var e=m.trim(t.value);this.entry.unheldRemark=e,t.value=this.unheldLabel},requestCurWidgetButton:function(t,e){this.showWidget?this.requestCurWidget("",0):this.requestCurWidget(t,e)},Template:function(){return'<td class="w-holder w-unheld gotbtn focus" v-on:click.stop="">\r\n\t<input ref="inputText" type="text" class="focusable" v-on:focus="onFocus($event.target)" v-on:blur="onBlur($event.target)"></input>\r\n\t<button v-if="index>=0" :class="{active:showWidget}" v-on:click="requestCurWidgetButton(\'td-unheld\',index)">[|]</button>\r\n\t<div class="pop-widget" v-show="showWidget"  v-on:click.stop="" v-on:touchstart.stop="emit(\'focus-widget\')" v-on:mousedown.stop="emit(\'focus-widget\')">\r\n\t\t<label>Slot:</label>\r\n\t\t<div>\r\n\t\t\t<select ref="selectDom" number v-model.number="entry.unheld" style="width:98%">\r\n\t\t\t\t<option v-for="(li, i) in unheldLabels" :value="i">{{li}}</option>\r\n\t\t\t</select>\r\n\t\t</div>\r\n\t</div>\r\n</td>'},_Init:function(){var t=Hi.prototype;this.data=t.Data,this.template=this.Template(),this.computed={unheld:t.get_unheld,unheldLabel:t.get_unheldLabel},this.methods={shiftIndex:t.shiftIndex,emit:t.emit,onFocus:t.onFocus,setValidNameOfInput:t.setValidNameOfInput,get_unheld:t.get_unheld,watch_unheld:t.watch_unheld,refresh:t.refresh,get_unheldLabel:t.get_unheldLabel,onBlur:t.onBlur,requestCurWidgetButton:t.requestCurWidgetButton},this.props={requestCurWidget:{required:!0,type:Function},showWidget:{required:!0,type:Boolean},entry:{required:!0},index:{required:!0,type:Number}},this.watch={unheld:t.watch_unheld}},__class__:Hi});var Vi=function(){B.call(this),this.mixins=[xr.getInstance()]};n["troshx.sos.vue.TDWeapProfSelect"]=Vi,Vi.__name__=["troshx","sos","vue","TDWeapProfSelect"],Vi.__super__=B,Vi.prototype=r(B.prototype,{Components:function(){var t={};return t["w-prof"]=new Or,t},shiftIndex:function(t){return 1<<t},emit:function(t){this.$emit(t)},get_hasNoProf:function(){var t=this.weapon;return(null==t.profsCustom||0==t.profsCustom.list.length)&&0==t.profs},get_weaponOptionValue:function(){return this.weapon.ranged?-this.weapon.profs:this.weapon.profs},watch_weaponOptionValue:function(t,e){var n=this.$refs.selectDom;Vue.nextTick(function(){n.value=""+t})},get_gotVariant:function(){var t=this.weaponAssign,e=!1;if(null!=t){var n=null!=t.weapon.variant,i=t.holding1H;e=!!n&&i}return e},get_weaponVar:function(){return this.gotVariant?this.weaponAssign.weapon.variant:this.weapon},get_gotCustomMultiCheck:function(){var t,e=this.weaponVar;if(0!=e.profs){var n=e.profs;t=0!=(n&n-1)}else t=!1;var i=null!=e.profsCustom&&e.profsCustom.list.length>0,r=e.isAmmo&&e.ranged;return!(!t&&!i)||r},get_showSelectMultipleFirst:function(){var t=this.gotCustomMultiCheck,e=this.weapon,n=e.isAmmo&&e.ranged;return!!t||n},get_multiSelectedOptionLabel:function(){var t=this.weapon;return(t.isAmmo&&t.ranged?"^":"")+t.profLabels()},get_isSelectingMultiple:function(){return this.isVisibleWidget(this.section,"profs",this.index)},get_gotCustom:function(){return null!=this.customProfs&&this.customProfs.length>0},Mounted:function(){0==this.weapon.profs&&(this.weapon.profs=(this.weapon.ranged,1))},onProfSelectChange:function(t,e){var n=t.target,i=p.parseInt(n.value);if(0==i){var r=p.parseInt(n.getAttribute("data-index")),s=n.getAttribute("data-type");this.curWidgetRequest.type=s,this.curWidgetRequest.index=r}else{var a=!1;i<0&&(a=!0,i=-i),e.ranged=a,e.profs=i,e.ranged?(this.entry.holding1H=!1,e.variant=null,0!=(4&e.profs)&&null==e.crossbow&&(e.crossbow=new gn),0!=(8&e.profs)&&null==e.firearm&&(e.firearm=new _n),e.isAmmo=!1):e.isAmmo=!1,this.curWidgetRequest.type="",this.curWidgetRequest.index=0}},requestCurWidget:function(t,e){this.curWidgetRequest.type=t,this.curWidgetRequest.index=e},Template:function(){return'<td v-on:click.stop="" class="w-holder w-prof" :class="{\'got-custom\':gotCustom}">\r\n\t<select ref="selectDom" :value="get_weaponOptionValue()" number data-type="profs" :data-index="index" v-on:focus="emit(\'focus-in-row\')" v-on:blur="emit(\'focus-out-row\')" v-on:change="onProfSelectChange($event, weapon)">\r\n\t\t<option v-if="showSelectMultipleFirst && !gotVariant" :selected="false" style="color:grey;" value="0" :key="-999">select multiple...</option>\r\n\t\t<option selected v-if="gotCustomMultiCheck" :value="get_weaponOptionValue()">\r\n\t\t\t{{ multiSelectedOptionLabel }}\r\n\t\t</option>\r\n\t\t<option :selected="!gotCustomMultiCheck && !weaponVar.ranged && weaponVar.profs&(1 << i) && !isSelectingMultiple" v-for="(p, i) in meleeProfs" :value="(1 << i)">{{weaponVar.ranged || (profMask!=null && profMask == -1) || weaponVar.isAmmo ? "&gt;" : ""}}{{p.name}}</option>\r\n\t\t<option v-if="!gotVariant" :selected="!gotCustomMultiCheck && weapon.ranged && weapon.profs&(1 << i) && !isSelectingMultiple" v-for="(p, i) in rangedProfs" :value="-1*(1 << i)"> {{(profMask != null ? (profMask&shiftIndex(i))==0 || profMask == -1 : true) || !weapon.ranged || weapon.isAmmo ? "&gt;" : ""}}{{ p.name }}</option>\r\n\t\t<option :key="-999" :selected="false"  v-if="!showSelectMultipleFirst && !gotVariant" style="color:grey;" value="0" >select multiple...</option>\r\n\t</select>\t\r\n\t<div class="pop-widget"  v-on:click.stop="" v-on:mousedown="emit(\'focus-widget\')" v-on:touchstart.stop=""  v-if="isVisibleWidget(section,\'profs\', index)">\r\n\t\t<w-prof :entry="entry" :customWidth="gotCustom" :customProfs="this.customProfs" :curWidgetRequest="curWidgetRequest" :item="weapon" :meleeProfs="meleeProfs" :rangedProfs="rangedProfs" :weaponAssign="entry" />\r\n\t</div>\r\n</td>'},_Init:function(){var t=Vi.prototype;this.components=this.Components(),this.mounted=t.Mounted,this.template=this.Template(),this.computed={hasNoProf:t.get_hasNoProf,weaponOptionValue:t.get_weaponOptionValue,gotVariant:t.get_gotVariant,weaponVar:t.get_weaponVar,gotCustomMultiCheck:t.get_gotCustomMultiCheck,showSelectMultipleFirst:t.get_showSelectMultipleFirst,multiSelectedOptionLabel:t.get_multiSelectedOptionLabel,isSelectingMultiple:t.get_isSelectingMultiple,gotCustom:t.get_gotCustom},this.methods={shiftIndex:t.shiftIndex,emit:t.emit,get_hasNoProf:t.get_hasNoProf,get_weaponOptionValue:t.get_weaponOptionValue,watch_weaponOptionValue:t.watch_weaponOptionValue,get_gotVariant:t.get_gotVariant,get_weaponVar:t.get_weaponVar,get_gotCustomMultiCheck:t.get_gotCustomMultiCheck,get_showSelectMultipleFirst:t.get_showSelectMultipleFirst,get_multiSelectedOptionLabel:t.get_multiSelectedOptionLabel,get_isSelectingMultiple:t.get_isSelectingMultiple,get_gotCustom:t.get_gotCustom,onProfSelectChange:t.onProfSelectChange,requestCurWidget:t.requestCurWidget},this.props={rangedProfs:{required:!0,type:Array},profMask:{required:!1,default:0,type:Number},weaponAssign:{required:!1},curWidgetRequest:{required:!0},meleeProfs:{required:!0,type:Array},entry:{required:!0},customProfs:{required:!1,type:Array},section:{required:!0,type:String},index:{required:!0,type:Number},isVisibleWidget:{required:!0,type:Function},weapon:{required:!0,type:Object}},this.watch={weaponOptionValue:t.watch_weaponOptionValue}},__class__:Vi});var Di=function(){B.call(this),this.mixins=[xr.getInstance()]};n["troshx.sos.vue.TDWidgetHolder"]=Di,Di.__name__=["troshx","sos","vue","TDWidgetHolder"],Di.__super__=B,Di.prototype=r(B.prototype,{get_itemLabel:function(){var t=this.entry.item;return(D.__instanceof(t,tn)?t:null).get_label()},Components:function(){var t={};return t["w-firearm-name"]=new Br,t["w-ammunition"]=new Pr,t["w-coverage"]=new Rr,t["w-melee-atk"]=new Nr,t["w-melee-def"]=new Wr,t["w-missile-atk"]=new Fr,t["w-prof"]=new Or,t["w-span-tools"]=new Vr,t["w-tags"]=new Dr,t},focusInputText:function(){this.$emit("focus-in-row"),this.$emit("focus-widget-value",this.value)},watch_value:function(t){this.$emit("focus-widget-value",this.value)},get_item:function(){if(null!=this.entry.weapon)return this.entry.weapon;if(null!=this.entry.shield)return this.entry.shield;if(null!=this.entry.armor)return this.entry.armor;if(D.__instanceof(this.entry,Nn))return this.entry;if(D.__instanceof(this.entry,en))return this.entry;if(null==this.entry.item)throw console.log(this.entry),new V("Couldn't resolve item dependency! Check console trace above!");return this.entry.item},requestCurWidgetButton:function(t,e){this.showWidget?this.requestCurWidget("",0):this.requestCurWidget(t,e)},shiftIndex:function(t){return 1<<t},emit:function(t){this.$emit(t)},Template:function(){return'<td class="w-holder" v-on:click.stop="" :class="[{gotbtn:index>=0, focus:index>=0},widgetTagName]">\r\n\t<input type="text" :class="{focusable:index<0}" readonly :value="value" v-on:focus="focusInputText" v-on:blur="emit(\'focus-out-row\')"></input>\r\n\t<button v-if="index>=0" :class="{active:showWidget}" v-on:click="requestCurWidgetButton(widgetName,index)">[|]</button>\r\n\t<div class="pop-widget" v-if="showWidget"  v-on:click.stop="" v-on:touchstart.stop="emit(\'focus-widget\')" v-on:mousedown.stop="emit(\'focus-widget\')">\r\n\t\t<div :is="widgetTagName" :entry="entry" :item="item"  :weaponAssign="weaponAssign" :entryIndex="index" v-bind="widgetProps" :parentAttr="$attrs">\r\n\t\t\t\r\n\t\t</div>\r\n\t</div>\r\n</td>'},_Init:function(){var t=Di.prototype;this.components=this.Components(),this.template=this.Template(),this.computed={itemLabel:t.get_itemLabel,item:t.get_item},this.methods={get_itemLabel:t.get_itemLabel,focusInputText:t.focusInputText,watch_value:t.watch_value,get_item:t.get_item,requestCurWidgetButton:t.requestCurWidgetButton,shiftIndex:t.shiftIndex,emit:t.emit},this.props={requestCurWidget:{type:Function},value:{},widgetName:{type:String},showWidget:{type:Boolean},widgetTagName:{type:String},entry:{},index:{type:Number},widgetProps:{required:!1}},this.watch={value:t.watch_value}},__class__:Di});var qi=function(){B.call(this),this.mixins=[ir.getSampleInstance()]};n["troshx.sos.vue.input.InputInt"]=qi,qi.__name__=["troshx","sos","vue","input","InputInt"],qi.__super__=B,qi.prototype=r(B.prototype,{Template:function(){return'<input type="number" :disabled="disabled" number v-on:blur="blurHandler($event.target)" v-on:input="inputHandler($event.target)" :value="obj[prop]" :min="min" :max="max" :step="1" :readonly="readonly"></input>'},_Init:function(){this.template=this.Template(),this.props={prop:{required:!0},obj:{required:!0},min:{required:!1,type:Number},disabled:{required:!1,default:!1,type:Boolean},max:{required:!1,type:Number},floating:{required:!1,default:!1,type:Boolean},readonly:{required:!1,default:!1,type:Boolean}}},__class__:qi});var ji=function(){B.call(this),this.mixins=[ir.getSampleInstance()]};n["troshx.sos.vue.input.InputNumber"]=ji,ji.__name__=["troshx","sos","vue","input","InputNumber"],ji.__super__=B,ji.prototype=r(B.prototype,{Template:function(){return'<input type="number" :disabled="disabled" number v-on:blur="blurHandler($event.target)" v-on:input="inputHandler($event.target)" :value="obj[prop]" :min="min" :max="max" :step="step" :readonly="readonly"></input>'},_Init:function(){this.template=this.Template(),this.props={prop:{required:!0},obj:{required:!0},min:{required:!1,type:Number},disabled:{required:!1,default:!1,type:Boolean},max:{required:!1,type:Number},step:{required:!1,type:Number},floating:{required:!1,default:!0,type:Boolean},readonly:{required:!1,default:!1,type:Boolean}}},__class__:ji});var Gi=function(){B.call(this)};n["troshx.sos.vue.input.InputString"]=Gi,Gi.__name__=["troshx","sos","vue","input","InputString"],Gi.__super__=B,Gi.prototype=r(B.prototype,{Template:function(){return'<input type="text" :disabled="disabled"  :readonly="readonly" v-model="obj[prop]"></input>'},_Init:function(){this.template=this.Template(),this.props={prop:{required:!0},obj:{required:!0},disabled:{required:!1,default:!1,type:Boolean},readonly:{required:!1,default:!1,type:Boolean}}},__class__:Gi});var Ui=function(){B.call(this)};n["troshx.sos.vue.input.MixinInput"]=Ui,Ui.__name__=["troshx","sos","vue","input","MixinInput"],Ui.getInstance=function(){return null!=Ui.INSTANCE?Ui.INSTANCE:Ui.INSTANCE=new Ui},Ui.__super__=B,Ui.prototype=r(B.prototype,{Components:function(){var t={};return t.InputInt=new qi,t.InputNumber=new ji,t.InputString=new Gi,t},_Init:function(){Ui.prototype;this.components=this.Components()},__class__:Ui});var $i=function(){B.call(this)};n["troshx.sos.vue.inputs.NumericInput"]=$i,$i.__name__=["troshx","sos","vue","inputs","NumericInput"],$i.getSampleInstance=function(){return null!=$i.INSTANCE?$i.INSTANCE:$i.INSTANCE=new $i},$i.__super__=B,$i.prototype=r(B.prototype,{get_min:function(){return 0},get_max:function(){return 999999999},get_valid:function(){return!0},Template:function(){return $i.TEMPLATE},Mounted:function(){this.checkConstraints()},checkConstraints:function(){var t=this.current,e=t,n=this.min,i=this.max;null!=n&&e<n&&(e=n),null!=i&&e>i&&(e=i),e!=t&&(this.obj[this.prop]=e)},watch_min:function(t){this.checkConstraints()},watch_max:function(t){this.checkConstraints()},blurHandler:function(t){""==t.value&&(t.valueAsNumber=this.obj[this.prop])},inputHandler:function(t){if(""!=t.value){var e=this.max,n=this.min,i=this.floating?t.valueAsNumber:0|t.valueAsNumber;null==i||isNaN(i)?t.valueAsNumber=this.obj[this.prop]:(i!=t.valueAsNumber&&(t.valueAsNumber=i),i>e&&(i=e,t.valueAsNumber=i),i<n&&(i=n,t.valueAsNumber=i),this.obj[this.prop]=i)}},get_current:function(){return this.obj[this.prop]},_Init:function(){var t=$i.prototype;this.template=this.Template(),this.mounted=t.Mounted,this.computed={min:t.get_min,max:t.get_max,valid:t.get_valid,current:t.get_current},this.methods={get_min:t.get_min,get_max:t.get_max,get_valid:t.get_valid,checkConstraints:t.checkConstraints,watch_min:t.watch_min,watch_max:t.watch_max,blurHandler:t.blurHandler,inputHandler:t.inputHandler,get_current:t.get_current},this.props={prop:{required:!0,type:String},obj:{required:!0},disabled:{required:!1,default:!1,type:Boolean},floating:{required:!1,default:!1,type:Boolean},readonly:{required:!1,default:!1,type:Boolean}},this.watch={min:t.watch_min,max:t.watch_max}},__class__:$i});var zi=function(){B.call(this),this.mixins=[$i.getSampleInstance()]};n["troshx.sos.vue.inputs.impl.AttributeInput"]=zi,zi.__name__=["troshx","sos","vue","inputs","impl","AttributeInput"],zi.__super__=B,zi.prototype=r(B.prototype,{get_bareMinAttribute:function(){return this.magic?0:1},get_current:function(){return this.obj[this.prop]},get_valid:function(){return this.current+this.racialModifier>=this.bareMinAttribute},get_min:function(){return this.magic?0:1},get_max:function(){var t=this.remainingAttributePoints,e=this.current+t,n=0|Math.min(this.current+(t-(e>10?e-10:0)),8),i=this.min;return n>=i?n:i},_Init:function(){var t=zi.prototype;this.computed={bareMinAttribute:t.get_bareMinAttribute,current:t.get_current,valid:t.get_valid,min:t.get_min,max:t.get_max},this.methods={get_bareMinAttribute:t.get_bareMinAttribute,get_current:t.get_current,get_valid:t.get_valid,get_min:t.get_min,get_max:t.get_max},this.props={prop:{required:!0,type:String},obj:{required:!0},disabled:{required:!1,default:!1,type:Boolean},magic:{required:!1,default:!1,type:Boolean},racialModifier:{required:!1,default:0,type:Number},remainingAttributePoints:{required:!0,type:Number},floating:{required:!1,default:!1,type:Boolean},readonly:{required:!1,default:!1,type:Boolean}}},__class__:zi});var Zi=function(){B.call(this),this.mixins=[$i.getSampleInstance()]};n["troshx.sos.vue.inputs.impl.BoonBaneInput"]=Zi,Zi.__name__=["troshx","sos","vue","inputs","impl","BoonBaneInput"],Zi.__super__=B,Zi.prototype=r(B.prototype,{Template:function(){return'<span class="gen-comp-bb" :class="{canceled:obj._canceled, \'required\':min>0, \'force-perm\':obj._forcePermanent, disabled:max<1||disabled, selected:obj[prop]>0}" :style="{pointerEvents:(readonly ? \'none\' : \'auto\')}">\r\n\t\t<label><input type="checkbox" :disabled="obj._canceled || cannotUncheck" v-if="coreMax<2" :checked="obj[prop]>=1" v-on:click.stop="checkboxHandler($event.target, $event)"></input><input type="number" :disabled="obj._canceled" v-if="coreMax>=2" number v-on:input="inputHandler($event.target)" v-on:blur="blurHandler($event.target)" :value="obj[prop]" :class="{invalid:!valid}" :min="min" :max="max"></input><span v-html="label" v-on:click="toggleIfPossible($event)"></span><span class="close-btn" v-show="showClose">&nbsp;<a href="#" v-on:click.stop.prevent="closeBB()">[x]</a></span><span style="opacity:1;pointer-events:auto;" v-show="showReset && !(isBane && cannotUncheck)" class="reset-btb">[<a href="#" v-on:click.stop.prevent="resetBB()">c</a>]</span></label>\r\n\t\t</span>'},get_cannotUncheck:function(){return this.bba._minRequired>=1&&this.obj[this.prop]>=1},get_canceled:function(){return this.bba._canceled},watch_canceled:function(t,e){this.$emit("updateCanceledBB",this.bba,this.isBane,t,e)},get_showReset:function(){var t=this.bb.costs,e=this.cost;null==e&&(e=t[0]),e=e<t[0]?t[0]:e;var n=this.bba.rank;return e!=t[n>1?n-1:0]},resetBB:function(){this.$emit("resetBB",this.bba,this.isBane)},get_discount:function(){return this.isBane?0:this.bba.discount},get_min:function(){return 0!=this.bba._minRequired?this.bba._minRequired:0},get_max:function(){var t=this.coreMax;if(null!=this.remaining){for(var e=this.bba,n=this.remaining+(this.current>0?e._costCached:0),i=0,r=this.bb.costs[0],s=0,a=t;s<a;){var o=s++,l=e.getCost(o+1);if(n<(l=l<r?r:l))break;i=o+1}return i}return t},get_coreMax:function(){return this.bb.clampRank?1:this.bb.costs.length},get_current:function(){return this.obj[this.prop]},toggleIfPossible:function(t){var e=this.bba;if(!this.gotDiscount){var n=this.obj[this.prop];if(e._canceled)return e._canceled=!1,void(0==n?(this.obj[this.prop]=1,t.stopPropagation(),t.preventDefault()):this.$emit("uncancel",e,this.isBane));0==n&&(this.obj[this.prop]=1,t.stopPropagation(),t.preventDefault())}},closeBB:function(){this.obj[this.prop]=0},get_showClose:function(){return this.obj[this.prop]>=1&&this.coreMax>=2},checkboxHandler:function(t,e){this.bba;this.gotDiscount?e.preventDefault():this.obj[this.prop]=t.checked?1:0},watch_current:function(t,e){if(this.$emit("updateRankBB",this.bba,this.isBane,t,e),e>0){if(t<=0)return void this.$emit("removeBB",this.bba,this.isBane)}else if(t>0)return void this.$emit("addBB",this.bba,this.isBane)},get_cost:function(){return this.bba.getCost(this.bba.rank)},get_qty:function(){return this.bba.getQty()},get_gotDiscount:function(){return this.bba.discount>0},watch_cost:function(t){var e=this.bba;e.rank;e._costCached=t},get_label:function(){var t=this.bb,e=this.bba,n=t.customCostInnerSlashes,i=this.qty,r=")",s="(";1!=t.multipleTimes&&0!=t.multipleTimes&&(r="]",s="[");for(var a=-2!=t.multipleTimes?"/":"|",o=t.costs,l=e.rank<2?o[0]:o[e.rank-1],u=1==e.rank?"<b>"+o[0]+"</b>":""+o[0],c=this.max,h=1,d=o.length;h<d;){var p=h++,g=null!=n?n.charAt(p-1):a;u+=(p==c?'<span class="limit-join">'+g+"</span>":g)+(e.rank==p+1?"<b>"+o[p]+"</b>":""+o[p])}var m=s+u+r,f=this.cost;return f=0!=f?f:o[0],this.bb.name+" "+m+(i>1?"~"+i+"~":"")+(f!=l?"=<b>"+f+"</b>":"")+(this.gotDiscount?"-"+e.discount:"")},get_bba:function(){return this.obj},get_isBane:function(){return D.__instanceof(this.obj,vt)},get_bb:function(){return this.bba.getBoonOrBane()},_Init:function(){var t=Zi.prototype;this.template=this.Template(),this.computed={cannotUncheck:t.get_cannotUncheck,canceled:t.get_canceled,showReset:t.get_showReset,discount:t.get_discount,min:t.get_min,max:t.get_max,coreMax:t.get_coreMax,current:t.get_current,showClose:t.get_showClose,cost:t.get_cost,qty:t.get_qty,gotDiscount:t.get_gotDiscount,label:t.get_label,bba:t.get_bba,isBane:t.get_isBane,bb:t.get_bb},this.methods={get_cannotUncheck:t.get_cannotUncheck,get_canceled:t.get_canceled,watch_canceled:t.watch_canceled,get_showReset:t.get_showReset,resetBB:t.resetBB,get_discount:t.get_discount,get_min:t.get_min,get_max:t.get_max,get_coreMax:t.get_coreMax,get_current:t.get_current,toggleIfPossible:t.toggleIfPossible,closeBB:t.closeBB,get_showClose:t.get_showClose,checkboxHandler:t.checkboxHandler,watch_current:t.watch_current,get_cost:t.get_cost,get_qty:t.get_qty,get_gotDiscount:t.get_gotDiscount,watch_cost:t.watch_cost,get_label:t.get_label,get_bba:t.get_bba,get_isBane:t.get_isBane,get_bb:t.get_bb},this.props={prop:{required:!0,type:String},obj:{required:!0},remaining:{type:Number},disabled:{required:!1,default:!1,type:Boolean},floating:{required:!1,default:!1,type:Boolean},readonly:{required:!1,default:!1,type:Boolean}},this.watch={canceled:t.watch_canceled,current:t.watch_current,cost:t.watch_cost}},__class__:Zi});var Qi=function(){B.call(this),this.mixins=[$i.getSampleInstance()]};n["troshx.sos.vue.inputs.impl.CategoryPCPInput"]=Qi,Qi.__name__=["troshx","sos","vue","inputs","impl","CategoryPCPInput"],Qi.__super__=B,Qi.prototype=r(B.prototype,{get_current:function(){return this.obj[this.prop]},get_valid:function(){return this.current>=this.min&&this.max<=this.maxPCPPerCategory},get_min:function(){return this.magic?0:1},get_max:function(){var t=0|Math.min(this.current+this.remainingAssignable,this.maxPCPPerCategory),e=this.magic?0:1;return t>=e?t:e},_Init:function(){var t=Qi.prototype;this.computed={current:t.get_current,valid:t.get_valid,min:t.get_min,max:t.get_max},this.methods={get_current:t.get_current,get_valid:t.get_valid,get_min:t.get_min,get_max:t.get_max},this.props={prop:{required:!0,type:String},obj:{required:!0},disabled:{required:!1,default:!1,type:Boolean},magic:{required:!1,default:!1,type:Boolean},remainingAssignable:{required:!0,type:Number},floating:{required:!1,default:!1,type:Boolean},maxPCPPerCategory:{required:!0,type:Number},readonly:{required:!1,default:!1,type:Boolean}}},__class__:Qi});var Yi=function(){B.call(this)};n["troshx.sos.vue.inputs.impl.InputNameLabel"]=Yi,Yi.__name__=["troshx","sos","vue","inputs","impl","InputNameLabel"],Yi.__super__=B,Yi.prototype=r(B.prototype,{onBlur:function(t){var e=t.value;(e=m.trim(e))!=t.value&&(t.value=e),this.obj[this.prop]=e},Template:function(){return'<input type="text" :disabled="disabled" :value="obj[prop]" v-on:blur="onBlur($event.target)"></input>'},_Init:function(){var t=Yi.prototype;this.template=this.Template(),this.methods={onBlur:t.onBlur},this.props={prop:{required:!0},obj:{required:!0},disabled:{required:!1,default:!1,type:Boolean},readonly:{required:!1,default:!1,type:Boolean}}},__class__:Yi});var Ki=function(){B.call(this),this.mixins=[$i.getSampleInstance()]};n["troshx.sos.vue.inputs.impl.SchoolLevelInput"]=Ki,Ki.__name__=["troshx","sos","vue","inputs","impl","SchoolLevelInput"],Ki.__super__=B,Ki.prototype=r(B.prototype,{get_max:function(){for(var t=this.current,e=this.remainingArc+(t>0?this.levelCosts[t-1]:0),n=0,i=0,r=this.levelCosts.length;i<r;){var s=i++;if(this.levelCosts[s]>e)return n;n=s+1}return n},get_min:function(){return this.minAmount},get_current:function(){return this.obj[this.prop]},_Init:function(){var t=Ki.prototype;this.computed={max:t.get_max,min:t.get_min,current:t.get_current},this.methods={get_max:t.get_max,get_min:t.get_min,get_current:t.get_current},this.props={prop:{required:!0,type:String},remainingArc:{required:!0,type:Number},obj:{required:!0},minAmount:{required:!1,default:0,type:Number},disabled:{required:!1,default:!1,type:Boolean},levelCosts:{required:!0,type:Array},floating:{required:!1,default:!1,type:Boolean},readonly:{required:!1,default:!1,type:Boolean}}},__class__:Ki});var Xi=function(){B.call(this),this.mixins=[$i.getSampleInstance()]};n["troshx.sos.vue.inputs.impl.SkillLibInput"]=Xi,Xi.__name__=["troshx","sos","vue","inputs","impl","SkillLibInput"],Xi.__super__=B,Xi.prototype=r(B.prototype,{Data:function(){return{}},Created:function(){this.interactedInput=!1},get_min:function(){if(null!=this.skillLevelsPacket){var t=this.skillLevelsPacket[this.prop];return t>=5?5:t}return 0},checkConstraints:function(){var t=this.current,e=t,n=this.min,i=this.max;null!=n&&e<n&&(e=n),null!=i&&e>i&&(e=i),e!=t&&(this.obj[this.prop]=e-n)},watch_current:function(t,e){this.interactedInput&&this.$emit("change",t-e),this.interactedInput=!1},inputHandler:function(t){if(""!=t.value){var e=this.max,n=this.min,i=this.floating?t.valueAsNumber:0|t.valueAsNumber;null==i||isNaN(i)?t.valueAsNumber=this.obj[this.prop]:(i!=t.valueAsNumber&&(t.valueAsNumber=i),i>e&&(i=e,t.valueAsNumber=i),i<n&&(i=n,t.valueAsNumber=i),this.interactedInput=!0,this.obj[this.prop]=i-n)}},get_max:function(){var t=this.current+this.remaining,e=this.min;return(t=t<e?e:t)>=10?10:t},clamp5:function(t){return t>=5?5:t},get_current:function(){var t;if(null!=this.skillLevelsPacket){var e=this.skillLevelsPacket[this.prop];t=e>=5?5:e}else t=0;return t+this.obj[this.prop]},get_deleteBtnStyle:function(){return{visibility:0==this.current?"visible":"hidden"}},onDeleteClick:function(){this.$emit("delete",this.index)},Template:function(){return'<span :class="{active:obj[prop]>0, activepack:min>0}">\r\n\t\t\t\t<label><input type="number" number :value="current" v-on:blur="blurHandler($event.target)" v-on:input="inputHandler($event.target)" :class="{invalid:!valid}" :min="min" :max="max"></input>{{prop}}<span v-show="skillsTable.requiresSpecialisation[prop]">()</span><sup v-show="skillsTable.requiresTrained[prop]">1</sup><span v-if="canDelete" :style="deleteBtnStyle">[<a href="#" v-on:click.prevent="onDeleteClick">x</a>]</span></label>\r\n\t\t\t</span>'},_Init:function(){var t=Xi.prototype;this.data=t.Data,this.created=t.Created,this.template=this.Template(),this.computed={min:t.get_min,max:t.get_max,current:t.get_current,deleteBtnStyle:t.get_deleteBtnStyle},this.methods={get_min:t.get_min,checkConstraints:t.checkConstraints,watch_current:t.watch_current,inputHandler:t.inputHandler,get_max:t.get_max,clamp5:t.clamp5,get_current:t.get_current,get_deleteBtnStyle:t.get_deleteBtnStyle,onDeleteClick:t.onDeleteClick},this.props={prop:{required:!0,type:String},obj:{required:!0},skillsTable:{required:!0,type:Object},remaining:{required:!1,default:10,type:Number},disabled:{required:!1,default:!1,type:Boolean},canDelete:{required:!1,default:!1,type:Boolean},skillLevelsPacket:{required:!1},index:{required:!0,type:Number},floating:{required:!1,default:!1,type:Boolean},readonly:{required:!1,default:!1,type:Boolean}},this.watch={current:t.watch_current}},__class__:Xi});var Ji=function(){B.call(this),this.mixins=[$i.getSampleInstance()]};n["troshx.sos.vue.inputs.impl.SkillPacketInput"]=Ji,Ji.__name__=["troshx","sos","vue","inputs","impl","SkillPacketInput"],Ji.__super__=B,Ji.prototype=r(B.prototype,{Data:function(){return{errorsDetected:{}}},Created:function(){this.clickedOnPlus=!1},watch_current:function(t,e){this.$emit("change",this.index,t-e,this.clickedOnPlus),null!=this.obj.history&&!this.clickedOnPlus&&this.current<this.obj.history.length&&this.showCurrentHistory(),this.clickedOnPlus=!1},showCurrentHistory:function(){for(var t=this.packet,e=t.history[this.current],n=0,i=t.fields.length;n<i;){var r=n++,s=t.fields[r];if("~"==s.charAt(0)){var a=this.labelSchema[s];if(a instanceof Array&&null==a.__enum__)this.labelMap[s]=e[s];else{var o=Wn.getSplitFromSpecialisation(e[s]);this.labelMap[s]=o[1]}}}},get_current:function(){return this.obj[this.prop]},get_min:function(){return 0},get_max:function(){var t=this.packet,e=t.qty+this.skillPacketsRemaining,n=null!=t.history?this.dynamicMaxQtyUntilUseless():this.staticMaxQtyUntilUseless();return(e=e<n?e:n)>=5?5:e},staticMaxQtyUntilUseless:function(){for(var t=this.packet,e=t.qty,n=this.packetChoosy,i=9999,r=0,s=t.fields.length;r<s;){var a=r++,o=t.fields[a],l=t.values[o],u=o;u=Je.getSkillLabel(u,this.labelSchema,this.labelMap);var c=this.skillValues[u],h=(5-(c>=5?5:c))/l;(l=e+(n?Math.floor(h):Math.ceil(h)))<i&&(i=l)}return i},currentPacketClampedSkillLevel:function(t){return t>=5?5:t},dynamicMaxQtyUntilUseless:function(){for(var t=this.packetValueList,e=this.packetChoosy?5:6,n=t.length;--n>-1;){var i=t[n];if(this.disabledFromCount(t,i.p,n)>=e)return this.current}return this.current+1},cloneCurrentState:function(){for(var t={},e=this.packet.fields,n=0,i=e.length;n<i;){var r=e[n++],s=Je.getSkillLabel(r,this.labelSchema,this.labelMap);t[r]=s}return t},validation:function(){for(var t=!1,e=0,n=this.packet.fields.length;e<n;){var i,r=e++,s=this.packet.fields[r];if("~"==s.charAt(0)){var a=this.labelSchema[s];i=a instanceof Array&&null==a.__enum__}else i=!0;if(!i)""==this.labelMap[s]?(t=!0,Vue.set(this.errorsDetected,s,!0)):Vue.set(this.errorsDetected,s,!1)}return!t},incrementBtnHit:function(){if(this.validation()){var t=this.current;this.clickedOnPlus=!0;var e=this.packet.history;e.splice(t,e.length-t),this.packet.history.push(this.cloneCurrentState()),this.obj[this.prop]=t+1}},spliceBtnHit:function(){var t=this.current,e=this.packet.history;e.splice(t,e.length-t)},get_packet:function(){return this.obj},isLabelBinded:function(t){return"~"==t.charAt(0)},getLabel:function(t){return Je.getSkillLabel(t,this.labelSchema,this.labelMap)},getBindedValue:function(t){return t=Je.getSkillLabel(t,this.labelSchema,this.labelMap),this.skillValues[t]},get_showHistoryInterface:function(){var t=this.obj[this.prop]>0,e=this.obj.history.length>0;return!!t||e},get_packetValueList:function(){for(var t=[],e=0,n=d.fields(this.packet.values);e<n.length;){var i=n[e];++e;var r,s="~"==i.charAt(0),a=this.packet.values[i];if(s){var o=this.labelSchema[i];r=o instanceof Array&&null==o.__enum__}else r=!1;for(;--a>-1;)t.push({p:i,isLabelBinded:s,isArray:r})}return t},watch_skillSubjectHash:function(t,e){if(null!=this.obj.history)for(var n=0,i=this.packet.fields.length;n<i;){var r,s=n++,a=this.packet.fields[s];if("~"==a.charAt(0)){var o=this.labelSchema[a];r=o instanceof Array&&null==o.__enum__}else r=!0;if(!r){var l=this.labelMap[a];if(""!=l){var u=this.labelSchema[a],c=this.skillSubjectHash[u];null!=c&&c.indexOf(l)<0&&(this.labelMap[a]="")}}}},onOptionClickUnder:function(t){Vue.set(this.errorsDetected,t,!1)},disabledFromCount:function(t,e,n){e=Je.getSkillLabel(e,this.labelSchema,this.labelMap);for(var i=this.skillValues[e];--n>-1;)i+=Je.getSkillLabel(t[n].p,this.labelSchema,this.labelMap)==e?1:0;return i},disabledFrom:function(t,e,n){return this.disabledFromCount(t,e,n)>=5},isArray:function(t){return t instanceof Array&&null==t.__enum__},Template:function(){return'<div class="skillpacket" :class="{active:obj[prop]>0}">\r\n<div class="heading"><button v-if="obj.history!=null" v-on:click="incrementBtnHit" v-show="true || current==obj.history.length" :disabled="current>=max">+</button><input type="number" v-if="obj.history==null" number :value="obj[prop]" v-on:input="inputHandler($event.target)" v-on:blur="blurHandler($event.target)" :class="{invalid:!valid}" :min="min" :max="max"></input><label>{{ obj.name }}</label><button v-if="false && obj.history!=null" v-on:click="spliceBtnHit" v-show="current!=obj.history.length" class="revert" :disabled="obj[prop]>=max">&#9100;</button><span class="max-length" v-if="obj.history!=null" v-show="showHistoryInterface">/{{ obj.history.length }}</span><input type="number" number :value="current" :max="obj.history.length" :min="0" v-on:input="inputHandler($event.target)" v-if="obj.history!=null" v-show="showHistoryInterface" class="max-length-input"></input><span class="max-predict" v-if="obj.history==null">{{max - current}}</span><span style="display:block;clear:both"></span></div>\r\n\t\t\t<div class="skill-listing">\r\n\t\t\t\t<div v-for="(entry,i) in packetValueList" :class="{disabled:disabledFrom(packetValueList, entry.p, i)}">\r\n\t\t\t\t\t<div v-if="!entry.isLabelBinded">{{ entry.p }}</div>\r\n\t\t\t\t\t<div v-else>\r\n\t\t\t\t\t\t<select v-if="entry.isArray" v-model="labelMap[entry.p]">\r\n\t\t\t\t\t\t\t<option value="" disabled selected hidden>Choose One...</option>\r\n\t\t\t\t\t\t\t<option v-for="val in labelSchema[entry.p]" :value="val">{{ val }}</option>\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t<span v-else class="flex"><span>{{labelSchema[entry.p]}}(</span><span class="middle">\r\n\t\t\t\t\t\t\t<select v-if="skillSubjectHash[labelSchema[entry.p]]" v-model="labelMap[entry.p]"  v-on:change="onOptionClickUnder(entry.p)" :class="{invalid:errorsDetected[entry.p]}">\r\n\t\t\t\t\t\t\t\t<option value="" disabled selected hidden>Choose One...</option>\r\n\t\t\t\t\t\t\t\t<option v-for="special in skillSubjectHash[labelSchema[entry.p]]" :value="special" >{{ special }}</option>\r\n\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t</span><span>)</span></span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>'},_Init:function(){var t=Ji.prototype;this.data=t.Data,this.created=t.Created,this.template=this.Template(),this.computed={current:t.get_current,min:t.get_min,max:t.get_max,packet:t.get_packet,showHistoryInterface:t.get_showHistoryInterface,packetValueList:t.get_packetValueList},this.methods={watch_current:t.watch_current,showCurrentHistory:t.showCurrentHistory,get_current:t.get_current,get_min:t.get_min,get_max:t.get_max,staticMaxQtyUntilUseless:t.staticMaxQtyUntilUseless,currentPacketClampedSkillLevel:t.currentPacketClampedSkillLevel,dynamicMaxQtyUntilUseless:t.dynamicMaxQtyUntilUseless,cloneCurrentState:t.cloneCurrentState,validation:t.validation,incrementBtnHit:t.incrementBtnHit,spliceBtnHit:t.spliceBtnHit,get_packet:t.get_packet,isLabelBinded:t.isLabelBinded,getLabel:t.getLabel,getBindedValue:t.getBindedValue,get_showHistoryInterface:t.get_showHistoryInterface,get_packetValueList:t.get_packetValueList,watch_skillSubjectHash:t.watch_skillSubjectHash,onOptionClickUnder:t.onOptionClickUnder,disabledFromCount:t.disabledFromCount,disabledFrom:t.disabledFrom,isArray:t.isArray},this.props={prop:{required:!0,type:String},labelMap:{required:!0},obj:{required:!0},skillSubjectHash:{required:!0},skillPacketsRemaining:{required:!0,type:Number},disabled:{required:!1,default:!1,type:Boolean},packetChoosy:{required:!0,type:Boolean},skillValues:{required:!0},index:{required:!0,type:Number},floating:{required:!1,default:!1,type:Boolean},labelSchema:{required:!0},readonly:{required:!1,default:!1,type:Boolean}},this.watch={current:t.watch_current,skillSubjectHash:{deep:!0,handler:t.watch_skillSubjectHash}}},__class__:Ji});var tr=function(){B.call(this),this.name="treeview"};n["troshx.sos.vue.treeview.TreeView"]=tr,tr.__name__=["troshx","sos","vue","treeview","TreeView"],tr.__super__=B,tr.prototype=r(B.prototype,{getNodeClass:function(t,e){var n={active:null!=this.value&&this.model[e][this.valuename]==this.value};if(null!=this.getCustomClass){var i=this.getCustomClass(this.model[e]);i&&(n[i]=!0)}return n},select:function(t,e){(!this.model[t].isOpened||null!=this.value&&this.model[t][this.valuename]==this.value)&&this.toggleOpen(t),this.$emit("update:value",e),this.$emit("treeview_click",this.model[t],this.parentNode)},toggleOpen:function(t){this.validNodeHandler(this.model[t][this.children],this.model[t])&&(null==this.model[t].isOpened&&this.$set(this.model[t],"isOpened",this.hasSelectedChild(t)),this.$set(this.model[t],"isOpened",!this.model[t].isOpened))},areValidNodes:function(t,e){return null!=t&&t instanceof Array&&null==t.__enum__&&t.length>0},get_validNodeHandler:function(){return null!=this.areValidNodesHandler?this.areValidNodesHandler:Zr(this,this.areValidNodes)},hasSelected:function(){for(var t=0,e=this.model.length;t<e;){var n=t++;if(null!=this.value&&this.model[n][this.valuename]==this.value||this.hasSelectedChild(n))return!0}return!1},hasSelectedChild:function(t){for(var e=0,n=this.$children.length;e<n;){var i=e++,r=this.$children[i];if(r.parent==t&&r.hasSelected())return!0}return!1},isSelected:function(t){return null!=this.value&&this.model[t][this.valuename]==this.value},isOpened:function(t){return!(null==this.model[t].isOpened||!this.model[t].isOpened)||this.hasSelectedChild(t)},bubbleValueHandler:function(t){this.$emit("update:value",t)},bubbleClickHandler:function(t,e){this.$emit("treeview_click",t,e)},Template:function(){return'<div class="treeview" :class="classname">\r\n    <div class="node-data"\r\n        v-for="(node, index) in model" :key="index"  v-if="filterNodeHandler == null || filterNodeHandler(node, parentNode)"\r\n    >\r\n\t\t<div class="node"\r\n            :class="getNodeClass(node, index)"\r\n            @click.prevent="select(index, node[valuename])"\r\n>\r\n            <span class="icon node-parent-toggled"\r\n                v-show="validNodeHandler(node[children], node) && isOpened(index)"\r\n            >\r\n                <svg viewBox="0 0 35 35" v-if="getCustomIcon == null || getCustomIcon(node ,1)===false">\r\n                    <g transform="translate(0,-1017.3621)">\r\n                        <path class="back" d="m 2.1411424,1026.4693 0,23.4146 27.0189286,0 0,-23.4146 -13.937805,0 0,-2.7898 -9.2657958,0 0,2.7898 z"/>\r\n                        <path class="front" d="m 1,1051.3621 7,-19 2,0 1,-2 6,0 -1,2 19,0 -4.472399,18.9369 z"/>\r\n                        <path class="light" d="m 29.696699,1047.0363 -0.820749,3.0631 -6,0 0.757614,-3"/>\r\n                    </g>\r\n                </svg>\r\n\t\t\t\t<span class="custom-icon opened" v-else>{{getCustomIcon(node, 1)}}</span>\r\n            </span>\r\n            <span class="icon node-parent" style="cursor:pointer"\r\n                v-show="validNodeHandler(node[children], node) && !isOpened(index)"\r\n            >\r\n                <svg width="14" height="14" viewBox="0 0 35 35" v-if="getCustomIcon == null || getCustomIcon(node ,0)===false">\r\n                    <g transform="translate(0,-1017.3621)">\r\n                        <path class="fill" d="m 1,1026.1835 0,25.1786 33,0 0,-25.1786 -18.857143,0 0,-3 -10.017857,0 0,3 z" />\r\n                        <path class="light" d="m 32,1046.1625 0,3 -6,0 0,-3 6,0"/>\r\n                    </g>\r\n                </svg>\r\n\t\t\t\t<span class="custom-icon closed" v-else>{{getCustomIcon(node, 0)}}</span>\r\n            </span>\r\n            <span class="icon node" style="cursor:pointer"\r\n                v-if="!validNodeHandler(node[children], node)"\r\n            >\r\n                <svg width="8" height="8" viewBox="0 0 35 35" v-if="getCustomIcon == null || getCustomIcon(node ,2)===false">\r\n                    <g transform="translate(0,-1017.3622)">\r\n                        <circle cx="17.488264" cy="1034.874" r="16.003242"/>\r\n                    </g>\r\n                </svg>\r\n\t\t\t\t<span class="custom-icon leaf" v-else>{{getCustomIcon(node, 2)}}</span>\r\n            </span>\r\n            <label v-html="customLabelHandler == null ? node[labelname] : customLabelHandler(node[labelname])"></label>\r\n        </div>\r\n        <div v-if="validNodeHandler(node[children], node)"\r\n            class="children"\r\n            v-show="isOpened(index)"\r\n        >\r\n            <div class="margin"></div>\r\n            <div class="nodes">\r\n                <treeview \r\n\t\t\t\t\t:value="value"\r\n\t\t\t\t\t@update:value="bubbleValueHandler"\r\n\t\t\t\t\t@treeview_click="bubbleClickHandler"\r\n\t\t\t\t\t:labelname="labelname"\r\n                    :valuename="valuename"\r\n                    :children="children"\r\n                    :model="node[children]"\r\n                    :parent.once="index"\r\n\t\t\t\t\t:parentNode.once="node"\r\n                    classname="inner"\r\n\t\t\t\t\t:getCustomClass="getCustomClass"\r\n\t\t\t\t\t:getCustomIcon="getCustomIcon"\r\n\t\t\t\t\t:filterNodeHandler="filterNodeHandler"\r\n\t\t\t\t\t:customLabelHandler="customLabelHandler"\r\n                ></treeview>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'},_Init:function(){var t=tr.prototype;this.template=this.Template(),this.computed={validNodeHandler:t.get_validNodeHandler},this.methods={getNodeClass:t.getNodeClass,select:t.select,toggleOpen:t.toggleOpen,areValidNodes:t.areValidNodes,get_validNodeHandler:t.get_validNodeHandler,hasSelected:t.hasSelected,hasSelectedChild:t.hasSelectedChild,isSelected:t.isSelected,isOpened:t.isOpened,bubbleValueHandler:t.bubbleValueHandler,bubbleClickHandler:t.bubbleClickHandler},this.props={customLabelHandler:{required:!1,type:Function},value:{required:!1},valuename:{required:!1,default:"value",type:String},classname:{required:!1,type:String},getCustomClass:{required:!1,type:Function},children:{required:!1,default:"nodes",type:String},parentNode:{required:!1},areValidNodesHandler:{required:!1,type:Function},getCustomIcon:{required:!1,type:Function},model:{required:!0,type:Array},filterNodeHandler:{required:!1,type:Function},labelname:{required:!1,default:"label",type:String},parent:{required:!1,type:Number}}},__class__:tr});var er=function(){B.call(this),this.inheritAttrs=!1};n["troshx.sos.vue.uifields.ArrayOf"]=er,er.__name__=["troshx","sos","vue","uifields","ArrayOf"],er.__super__=B,er.prototype=r(B.prototype,{Data:function(){return{selectedIndex:-1}},getKey:function(t,e){var n=D.__instanceof(t,tt)?t:null;return null!=n?n.get_uid():null!=t.uid?t.uid:e},Components:function(){return null!=er.COMPONENTS?er.COMPONENTS:er.COMPONENTS=_r.getNewSetOfComponents(!0)},Template:function(){return'<div>\r\n\t\t<label v-if="label!=null">{{label}}:&nbsp;| {{maxLength}}</label><label v-if="label==null && maxLength!=null">| {{maxLength}} </label><button v-show="!readonly" :disabled="!(maxLength == null || current.length + 1 <= maxLength)" v-on:click="pushEntry()">+</button> &nbsp;<button  v-show="!readonly" :disabled="!(current.length > (minLength != null ? minLength : 0))" v-on:click="popEntry()">-</button> &nbsp;<button v-on:click="clearSelect" v-show="selectedIndex>=0">No-Select</button>\r\n\t\t<ul class="array-of" style="list-style-type:none">\r\n\t\t\t<li v-for="(li, i) in current" :class="{disabled:!(maxLength == null || i < maxLength)}" :key="getKey(li, i)">\r\n\t\t\t\t<input type="radio" v-on:click="selectedIndex=i" :checked="selectedIndex==i"></input>\r\n\t\t\t\t<span :is="typeMap[of]" v-bind="$attrs" :index="i" :readonly="readonly" :obj="current" :prop="i" :class="{disabled:!(maxLength == null || i < maxLength)}" :disabled="!(maxLength == null || i < maxLength)"></span>\r\n\t\t\t</li>\r\n\t\t</ul>\r\n\t\t\r\n\t\t</div>'},clearSelect:function(){this.selectedIndex=-1},pushEntry:function(){var t,e=this.current,n=this.defaultValue;if(d.isFunction(n))t=n();else if(n instanceof Array&&null==n.__enum__)console.log("Warning, nested array not supported"),t=n.concat([]);else{var i=_.typeof(n);if(6==i[1]){var r=i[2];t=_.createInstance(r,[])}else t=n}this.selectedIndex<-1?e.push(t):e.splice(this.selectedIndex,0,t)},watch_maxLength:function(t,e){if(this.autoExpand&&t>e)for(;--t>=e;)this.pushEntry()},popEntry:function(){this.selectedIndex<0?this.current.pop():this.current.splice(this.selectedIndex,1)},get_current:function(){return this.obj[this.prop]},get_typeMap:function(){return _r.getTypeMapToComponentNames()},get_arrayLength:function(){return this.current.length},watch_arrayLength:function(t,e){t<=this.selectedIndex&&(this.selectedIndex=t-1)},_Init:function(){var t=er.prototype;this.data=t.Data,this.components=this.Components(),this.template=this.Template(),this.computed={current:t.get_current,typeMap:t.get_typeMap,arrayLength:t.get_arrayLength},this.methods={getKey:t.getKey,clearSelect:t.clearSelect,pushEntry:t.pushEntry,watch_maxLength:t.watch_maxLength,popEntry:t.popEntry,get_current:t.get_current,get_typeMap:t.get_typeMap,get_arrayLength:t.get_arrayLength,watch_arrayLength:t.watch_arrayLength},this.props={label:{required:!1,default:null,type:String},prop:{required:!0},defaultValue:{required:!0},obj:{required:!0},of:{required:!0,type:String},disabled:{required:!1,default:!1,type:Boolean},maxLength:{required:!1,type:Number},autoExpand:{required:!1,default:!1,type:Boolean},minLength:{required:!1,default:0,type:Number},readonly:{required:!1,default:!1,type:Boolean}},this.watch={maxLength:t.watch_maxLength,arrayLength:t.watch_arrayLength}},__class__:er});var nr=function(){B.call(this),this.inheritAttrs=!1};n["troshx.sos.vue.uifields.ArrayOfBits"]=nr,nr.__name__=["troshx","sos","vue","uifields","ArrayOfBits"],nr.__super__=B,nr.prototype=r(B.prototype,{Components:function(){var t={};return t.comp=new er,t},Mounted:function(){},Render:function(t){var e={obj:this.obj,prop:this.prop,maxLength:this.maxLength,of:"SingleBitSelection",defaultValue:0},n={currentBitmask:this.currentBitmask,bitList:this.currentBitArray,labels:this.labels},i=this.$attrs;return jr.override2ndObjInto(e,i),t("comp",{props:e,attrs:n})},get_currentBitmask:function(){var t=this.currentBitArray,e=0,n=t.length;null!=this.maxLength&&this.maxLength<n&&(n=this.maxLength);for(var i=0,r=n;i<r;){e|=t[i++]}return e},watch_currentBitmask:function(t){null!=this.bitmaskSetObj&&null!=this.bitmaskSetProp&&(this.bitmaskSetObj[this.bitmaskSetProp]=t);var e=this.currentBitArray,n=e.length,i=0;null!=this.maxLength&&this.maxLength<n&&(n=this.maxLength);for(var r=0,s=n;r<s;){var a=r++;0==(i&e[a])?i|=e[a]:Vue.set(e,a,0)}},get_currentBitArray:function(){return this.obj[this.prop]},_Init:function(){var t=nr.prototype;this.components=this.Components(),this.mounted=t.Mounted,this.render=t.Render,this.computed={currentBitmask:t.get_currentBitmask,currentBitArray:t.get_currentBitArray},this.methods={get_currentBitmask:t.get_currentBitmask,watch_currentBitmask:t.watch_currentBitmask,get_currentBitArray:t.get_currentBitArray},this.props={prop:{required:!0,type:String},obj:{required:!0},bitmaskSetObj:{required:!1},bitmaskSetProp:{required:!1,type:String},maxLength:{required:!1,type:Number},labels:{required:!0,type:Array}},this.watch={currentBitmask:t.watch_currentBitmask}},__class__:nr});var ir=function(){B.call(this)};n["troshx.sos.vue.uifields.BaseNumMixin"]=ir,ir.__name__=["troshx","sos","vue","uifields","BaseNumMixin"],ir.getSampleInstance=function(){return null!=ir.INSTANCE?ir.INSTANCE:ir.INSTANCE=new ir},ir.__super__=B,ir.prototype=r(B.prototype,{checkConstraints:function(){var t=this.current,e=t,n=this.min,i=this.max;null!=n&&e<n&&(e=n),null!=i&&e>i&&(e=i),e!=t&&(this.obj[this.prop]=e)},watch_min:function(t){this.checkConstraints()},watch_max:function(t){this.checkConstraints()},get_current:function(){return this.obj[this.prop]},blurHandler:function(t){""==t.value&&(t.valueAsNumber=this.obj[this.prop])},inputHandler:function(t){if(""!=t.value){var e=this.max,n=this.min,i=this.floating?t.valueAsNumber:0|t.valueAsNumber;null==i||isNaN(i)?t.valueAsNumber=this.obj[this.prop]:(i!=t.valueAsNumber&&(t.valueAsNumber=i),i>e&&(i=e,t.valueAsNumber=i),i<n&&(i=n,t.valueAsNumber=i),this.obj[this.prop]=i)}},_Init:function(){var t=ir.prototype;this.computed={current:t.get_current},this.methods={checkConstraints:t.checkConstraints,watch_min:t.watch_min,watch_max:t.watch_max,get_current:t.get_current,blurHandler:t.blurHandler,inputHandler:t.inputHandler},this.props={label:{required:!1,default:null,type:String},prop:{required:!0},obj:{required:!0},min:{required:!1,type:Number},disabled:{required:!1,default:!1,type:Boolean},max:{required:!1,type:Number},step:{required:!1,type:Number},floating:{required:!1,default:!0,type:Boolean},readonly:{required:!1,default:!1,type:Boolean}},this.watch={min:t.watch_min,max:t.watch_max}},__class__:ir});var rr=function(){B.call(this)};n["troshx.sos.vue.uifields.Bitmask"]=rr,rr.__name__=["troshx","sos","vue","uifields","Bitmask"],rr.__super__=B,rr.prototype=r(B.prototype,{Template:function(){return'<div class="troshx-uifields" :class="{disabled:disabled}">\r\n\t\t\t<label v-if="label">{{ label }}:&nbsp;</label>\r\n\t\t\t<span style="vertical-align:top; margin-right:5px; display:inline-block" v-for="(li, i) in labels"><label><input type="checkbox" v-on:click="checkboxHandler($event.target, i)" :checked="(valueAtIndex(i)&current)!=0" :disabled="!(validateOptionFunc == null || validateOptionFunc(i))"></input>{{ li }}</label></span>\r\n\t\t</div>'},checkboxHandler:function(t,e){t.checked?this.obj[this.prop]|=null!=this.values?this.values[e]:1<<e:this.obj[this.prop]&=~(null!=this.values?this.values[e]:1<<e)},valueAtIndex:function(t){return null!=this.values?this.values[t]:1<<t},get_current:function(){return this.obj[this.prop]},_Init:function(){var t=rr.prototype;this.template=this.Template(),this.computed={current:t.get_current},this.methods={checkboxHandler:t.checkboxHandler,valueAtIndex:t.valueAtIndex,get_current:t.get_current},this.props={label:{required:!1,default:null,type:String},prop:{required:!0},obj:{required:!0},values:{required:!1,type:Array},disabled:{required:!1,default:!1,type:Boolean},validateOptionFunc:{required:!1,type:Function},labels:{required:!0,type:Array},readonly:{required:!1,default:!1,type:Boolean}}},__class__:rr});var sr=function(){B.call(this)};n["troshx.sos.vue.uifields.ButtonCounter"]=sr,sr.__name__=["troshx","sos","vue","uifields","ButtonCounter"],sr.__super__=B,sr.prototype=r(B.prototype,{get_showLabel:function(){return null!=this.label?this.label:"Add"},onClickButton:function(){this.preventDefault||(this.obj[this.prop]=this.obj[this.prop]+1);var t=null;null!=this.callback&&(t=this.callback(this.obj,this.prop)),null!=t?this.$emit("callback",t):this.$emit("callback")},Template:function(){return'<div class="button-counter-press"><button :disabled="disabled" v-on:click="onClickButton">{{ showLabel }}</button><span class="colon">:</span> <span class="num">{{obj[prop]}}</span></div>'},_Init:function(){var t=sr.prototype;this.template=this.Template(),this.computed={showLabel:t.get_showLabel},this.methods={get_showLabel:t.get_showLabel,onClickButton:t.onClickButton},this.props={label:{required:!1,default:null,type:String},prop:{required:!0},obj:{required:!0},preventDefault:{required:!1,default:!1,type:Boolean},disabled:{required:!1,default:!1,type:Boolean},callback:{required:!1,type:Function},readonly:{required:!1,default:!1,type:Boolean}}},__class__:sr});var ar=function(){B.call(this)};n["troshx.sos.vue.uifields.ButtonPermaPress"]=ar,ar.__name__=["troshx","sos","vue","uifields","ButtonPermaPress"],ar.__super__=B,ar.prototype=r(B.prototype,{get_showLabel:function(){return null!=this.label?this.label:"Activate"},onClickButton:function(){this.preventDefault||(this.obj[this.prop]=!0);var t=null;null!=this.callback&&(t=this.callback(this.obj,this.prop)),null!=t?this.$emit("callback",t):this.$emit("callback")},Template:function(){return'<div class="button-perma-press">\r\n\t\t\t<div v-if="description!=null && !obj[prop]">{{description}}</div>\r\n\t\t\t<div v-if="descriptionDone!=null && obj[prop]">{{descriptionDone}}</div>\r\n\t\t\t<div><button :disabled="disabled || obj[prop]" v-on:click="onClickButton">{{ showLabel }}</button></div>\r\n\t\t</div>'},_Init:function(){var t=ar.prototype;this.template=this.Template(),this.computed={showLabel:t.get_showLabel},this.methods={get_showLabel:t.get_showLabel,onClickButton:t.onClickButton},this.props={label:{required:!1,default:null,type:String},prop:{required:!0},obj:{required:!0},preventDefault:{required:!1,default:!1,type:Boolean},disabled:{required:!1,default:!1,type:Boolean},descriptionDone:{required:!1,type:String},callback:{required:!1,type:Function},description:{required:!1,type:String},readonly:{required:!1,default:!1,type:Boolean}}},__class__:ar});var or=function(){B.call(this),this.mixins=[ir.getSampleInstance()]};n["troshx.sos.vue.uifields.FieldInt"]=or,or.__name__=["troshx","sos","vue","uifields","FieldInt"],or.__super__=B,or.prototype=r(B.prototype,{Template:function(){return'<div>\r\n\t\t\t<label v-if="label">{{ label }}:&nbsp;</label>\r\n\t\t\t<input type="number"  :readonly="readonly" number v-on:blur="blurHandler($event.target)" v-on:input="inputHandler($event.target)" :value="obj[prop]" :min="min" :max="max" :step="1"></input>\r\n\t\t</div>'},_Init:function(){this.template=this.Template(),this.props={label:{required:!1,default:null,type:String},prop:{required:!0},obj:{required:!0},min:{required:!1,type:Number},disabled:{required:!1,default:!1,type:Boolean},max:{required:!1,type:Number},floating:{required:!1,default:!1,type:Boolean},readonly:{required:!1,default:!1,type:Boolean}}},__class__:or});var lr=function(){B.call(this),this.mixins=[ir.getSampleInstance()]};n["troshx.sos.vue.uifields.FieldNumber"]=lr,lr.__name__=["troshx","sos","vue","uifields","FieldNumber"],lr.__super__=B,lr.prototype=r(B.prototype,{Template:function(){return'<div>\r\n\t\t\t<label v-if="label">{{ label }}:&nbsp;</label>\r\n\t\t\t<input type="number"  :readonly="readonly" :disabled="disabled" number v-on:blur="blurHandler($event.target)" v-on:input="inputHandler($event.target)" :value="obj[prop]" :min="min" :max="max" :step="step"></input>\r\n\t\t</div>'},_Init:function(){this.template=this.Template(),this.props={label:{required:!1,default:null,type:String},prop:{required:!0},obj:{required:!0},min:{required:!1,type:Number},disabled:{required:!1,default:!1,type:Boolean},max:{required:!1,type:Number},step:{required:!1,type:Number},floating:{required:!1,default:!0,type:Boolean},readonly:{required:!1,default:!1,type:Boolean}}},__class__:lr});var ur=function(){B.call(this)};n["troshx.sos.vue.uifields.FieldString"]=ur,ur.__name__=["troshx","sos","vue","uifields","FieldString"],ur.__super__=B,ur.prototype=r(B.prototype,{Template:function(){return'<div>\r\n\t\t\t<label v-if="label">{{ label }}:&nbsp;</label>\r\n\t\t\t<input type="text" v-model="obj[prop]" :disabled="disabled" :readonly="readonly"></input>\r\n\t\t</div>'},_Init:function(){this.template=this.Template(),this.props={label:{required:!1,default:null,type:String},prop:{required:!0},obj:{required:!0},disabled:{required:!1,default:!1,type:Boolean},readonly:{required:!1,default:!1,type:Boolean}}},__class__:ur});var cr=function(){B.call(this)};n["troshx.sos.vue.uifields.FieldTextArea"]=cr,cr.__name__=["troshx","sos","vue","uifields","FieldTextArea"],cr.__super__=B,cr.prototype=r(B.prototype,{Template:function(){return'<div>\r\n\t\t\t<label v-if="label">{{ label }}:&nbsp;</label>\r\n\t\t\t<textarea v-model="obj[prop]" :disabled="disabled" :readonly="readonly"></textarea>\r\n\t\t</div>'},_Init:function(){this.template=this.Template(),this.props={label:{required:!1,default:null,type:String},prop:{required:!0},obj:{required:!0},disabled:{required:!1,default:!1,type:Boolean},readonly:{required:!1,default:!1,type:Boolean}}},__class__:cr});var hr=function(){B.call(this),this.inheritAttrs=!1};n["troshx.sos.vue.uifields.HitLocationMultiSelector"]=hr,hr.__name__=["troshx","sos","vue","uifields","HitLocationMultiSelector"],hr.__super__=B,hr.prototype=r(B.prototype,{Components:function(){var t={};return t.comp=new rr,t},get_labels:function(){for(var t=[],e=this.body.hitLocations,n=0,i=e.length;n<i;){var r=n++;t.push(e[r].name)}return t},Render:function(t){var e={label:this.label,obj:this.obj,prop:this.prop,labels:this.labels},n=this.$attrs;return jr.override2ndObjInto(e,n),t("comp",{props:e})},_Init:function(){var t=hr.prototype;this.components=this.Components(),this.render=t.Render,this.computed={labels:t.get_labels},this.methods={get_labels:t.get_labels},this.props={label:{required:!1,default:null,type:String},prop:{required:!0},obj:{required:!0},body:{required:!0,type:Object},disabled:{required:!1,default:!1,type:Boolean},readonly:{required:!1,default:!1,type:Boolean}}},__class__:hr});var dr=function(){B.call(this)};n["troshx.sos.vue.uifields.HitLocationSelector"]=dr,dr.__name__=["troshx","sos","vue","uifields","HitLocationSelector"],dr.__super__=B,dr.prototype=r(B.prototype,{Components:function(){var t={};return t.comp=new mr,t},get_labels:function(){for(var t=[],e=this.body.hitLocations,n=0,i=e.length;n<i;){var r=n++;t.push(e[r].name)}return t},Render:function(t){var e={label:this.label,obj:this.obj,prop:this.prop,labels:this.labels},n=this.$attrs;return jr.override2ndObjInto(e,n),t("comp",{props:e})},_Init:function(){var t=dr.prototype;this.components=this.Components(),this.render=t.Render,this.computed={labels:t.get_labels},this.methods={get_labels:t.get_labels},this.props={label:{required:!1,default:null,type:String},prop:{required:!0},obj:{required:!0},body:{required:!0,type:Object},disabled:{required:!1,default:!1,type:Boolean},readonly:{required:!1,default:!1,type:Boolean}}},__class__:dr});var pr=function(){B.call(this),this.mixins=[Ui.getInstance()]};n["troshx.sos.vue.uifields.MoneyField"]=pr,pr.__name__=["troshx","sos","vue","uifields","MoneyField"],pr.__super__=B,pr.prototype=r(B.prototype,{get_current:function(){return this.obj[this.prop]},Template:function(){return'<div class="moneyfields">\r\n\t\t\t<div>Money:</div>\r\n\t\t\t<label><InputInt :obj="current" prop="gp" :disabled="disabled" :readonly="readonly" style="width:70px" />&nbsp;GP</label> &nbsp;\r\n\t\t\t<label><InputInt :obj="current" prop="sp" :disabled="disabled" :readonly="readonly" style="width:70px"/>&nbsp;SP</label> &nbsp;\r\n\t\t\t<label><InputInt :obj="current" prop="cp" :disabled="disabled" :readonly="readonly"  style="width:70px"/>&nbsp;CP</label> &nbsp;\r\n\t\t</div>'},_Init:function(){var t=pr.prototype;this.template=this.Template(),this.computed={current:t.get_current},this.methods={get_current:t.get_current},this.props={label:{required:!1,default:null,type:String},prop:{required:!0},obj:{required:!0},disabled:{required:!1,default:!1,type:Boolean},readonly:{required:!1,default:!1,type:Boolean}}},__class__:pr});var gr=function(){B.call(this),this.inheritAttrs=!1};n["troshx.sos.vue.uifields.SingleBitSelection"]=gr,gr.__name__=["troshx","sos","vue","uifields","SingleBitSelection"],gr.__super__=B,gr.prototype=r(B.prototype,{Components:function(){var t={};return t.comp=new mr,t},shiftIndex:function(t){return 1<<t},isValidOptionAt:function(t){return 0==(this.currentBitmask&~this.bitList[this.index]&1<<t)},Template:function(){return'<comp v-bind="$attrs" :includeZeroOption="true" :labels="$attrs.labels" :validateOptionFunc="isValidOptionAt" :valueAtIndexFunc="shiftIndex"></comp>'},_Init:function(){var t=gr.prototype;this.components=this.Components(),this.template=this.Template(),this.methods={shiftIndex:t.shiftIndex,isValidOptionAt:t.isValidOptionAt},this.props={currentBitmask:{required:!0,type:Number},bitList:{required:!0,type:Array},index:{required:!0,type:Number}}},__class__:gr});var mr=function(){B.call(this)};n["troshx.sos.vue.uifields.SingleSelection"]=mr,mr.__name__=["troshx","sos","vue","uifields","SingleSelection"],mr.__super__=B,mr.prototype=r(B.prototype,{valueAtIndex:function(t){return null!=this.values?this.values[t]:null!=this.valueAtIndexFunc?this.valueAtIndexFunc(t):t},Template:function(){return'<div :style="{pointerEvents:readonly ? \'none\' : \'auto\'}">\r\n\t\t\t<span v-if="label"><label>{{ label }}</label>:<br/></span>\r\n\t\t\t<select number v-model.number="obj[prop]" :disabled="disabled">\r\n\t\t\t\t<option v-if="includeZeroOption" :value="0">{{ zeroValueLabel }}</option> \r\n\t\t\t\t<option v-for="(li, i) in labels" :value="valueAtIndex(i)" :disabled="!(validateOptionFunc == null || validateOptionFunc(i))">{{ li }}</option> \r\n\t\t\t</select>\r\n\t\t</div>'},_Init:function(){var t=mr.prototype;this.template=this.Template(),this.methods={valueAtIndex:t.valueAtIndex},this.props={label:{required:!1,default:null,type:String},prop:{required:!0},obj:{required:!0},values:{required:!1,type:Array},zeroValueLabel:{required:!1,default:"",type:String},disabled:{required:!1,default:!1,type:Boolean},valueAtIndexFunc:{required:!1,type:Function},includeZeroOption:{required:!1,default:!1,type:Boolean},validateOptionFunc:{required:!1,type:Function},labels:{required:!0,type:Array},readonly:{required:!1,default:!1,type:Boolean}}},__class__:mr});var fr=function(){B.call(this)};n["troshx.sos.vue.uifields.SingleSelectionStr"]=fr,fr.__name__=["troshx","sos","vue","uifields","SingleSelectionStr"],fr.__super__=B,fr.prototype=r(B.prototype,{valueAtIndex:function(t){return null!=this.values?this.values[t]:this.labels[t]},Template:function(){return'<div>\r\n\t\t\t<span v-if="label"><label>{{ label }}</label>:<br/></span>\r\n\t\t\t<select v-model="obj[prop]" :disabled="disabled">\r\n\t\t\t\t<option v-for="(li, i) in labels" :value="valueAtIndex(i)" :disabled="!(validateOptionFunc == null || validateOptionFunc(i))">{{ li }}</option> \r\n\t\t\t</select>\r\n\t\t</div>'},_Init:function(){var t=fr.prototype;this.template=this.Template(),this.methods={valueAtIndex:t.valueAtIndex},this.props={label:{required:!1,default:null,type:String},prop:{required:!0},obj:{required:!0},values:{required:!1,type:Array},disabled:{required:!1,default:!1,type:Boolean},validateOptionFunc:{required:!1,type:Function},labels:{required:!0,type:Array},readonly:{required:!1,default:!1,type:Boolean}}},__class__:fr});var _r=function(){};n["troshx.sos.vue.uifields.UI"]=_r,_r.__name__=["troshx","sos","vue","uifields","UI"],_r.getComponents=function(){return null!=_r.COMPONENTS?_r.COMPONENTS:_r.COMPONENTS=_r.getNewSetOfComponents()},_r.getNewSetOfComponents=function(t){null==t&&(t=!1);var e={};return t||(e.ArrayOf=new er,e.ArrayOfBits=new nr),e.Bitmask=new rr,e.FieldNumber=new lr,e.FieldInt=new or,e.FieldString=new ur,e.FieldTextArea=new cr,e.SingleSelection=new mr,e.SingleSelectionStr=new fr,e.SingleBitSelection=new gr,e.Money=new pr,e.HitLocationSelector=new dr,e.HitLocationMultiSelector=new hr,e.WealthAssetField=new br,e.ButtonCounter=new sr,e.ButtonPermaPress=new ar,e},_r.getTypeMapToComponentNames=function(){return null!=_r.TYPES?_r.TYPES:_r.TYPES=_r.getNewTypeMapToComponentNames()},_r.getNewTypeMapToComponentNames=function(){return{Array:"ArrayOf",ArrayOfBits:"ArrayOfBits",Bitmask:"Bitmask",Float:"FieldNumber",Int:"FieldInt",String:"FieldString",textarea:"FieldTextArea",SingleSelection:"SingleSelection",SingleSelectionStr:"SingleSelectionStr",SingleBitSelection:"SingleBitSelection",HitLocationSelector:"HitLocationSelector",HitLocationMultiSelector:"HitLocationMultiSelector",Money:"Money",WealthAssetAssign:"WealthAssetField",ButtonCounter:"ButtonCounter",ButtonPermaPress:"ButtonPermaPress"}};var vr=function(){B.call(this)};n["troshx.sos.vue.uifields.UIMixin"]=vr,vr.__name__=["troshx","sos","vue","uifields","UIMixin"],vr.getInstance=function(){return null!=vr.INSTANCE?vr.INSTANCE:vr.INSTANCE=new vr},vr.__super__=B,vr.prototype=r(B.prototype,{Components:function(){return _r.getComponents()},_Init:function(){this.components=this.Components()},__class__:vr});var br=function(){B.call(this)};n["troshx.sos.vue.uifields.WealthAssetField"]=br,br.__name__=["troshx","sos","vue","uifields","WealthAssetField"],br.__super__=B,br.prototype=r(B.prototype,{get_current:function(){return this.obj[this.prop]},get_residueWealth:function(){var t=this.current.worth;return null!=this.remainingWealth?this.remainingWealth+t:999},Template:function(){return'<div class="wealth-asset-row">\r\n\t\t\t<label>Name: <input type="text" v-model="current.name"></input></label>\r\n\t\t\t<label>Worth: <select :disabled="fixedWorth" number v-model.number="current.worth">\r\n\t\t\t\t\t<option :value="1" :disabled="residueWealth < 1">1W</option>\r\n\t\t\t\t\t<option :value="2" :disabled="residueWealth < 2">2W</option>\r\n\t\t\t\t\t<option :value="3" :disabled="residueWealth < 3">3W</option>\r\n\t\t\t\t</select>\r\n\t\t\t</label>\r\n\t\t\t<label v-if="!disableLiquidity">Liquidate? <input type="checkbox" v-model="current.liquidate"></input></label>\r\n\t\t</div>'},_Init:function(){var t=br.prototype;this.template=this.Template(),this.computed={current:t.get_current,residueWealth:t.get_residueWealth},this.methods={get_current:t.get_current,get_residueWealth:t.get_residueWealth},this.props={label:{required:!1,default:null,type:String},prop:{required:!0},obj:{required:!0},disableLiquidity:{required:!1,default:!1,type:Boolean},disabled:{required:!1,default:!1,type:Boolean},fixedWorth:{required:!1,default:!1,type:Boolean},remainingWealth:{required:!1,type:Number},readonly:{required:!1,default:!1,type:Boolean}}},__class__:br});var yr=function(){B.call(this)};n["troshx.sos.vue.widgets.BaseItemWidget"]=yr,yr.__name__=["troshx","sos","vue","widgets","BaseItemWidget"],yr.__super__=B,yr.prototype=r(B.prototype,{Template:function(){return"<div>"+_.getClassName(D.getClass(this)).split(".").pop()+"</div>"},get_itemLabel:function(){return this.item.get_label()},_Init:function(){var t=yr.prototype;this.template=this.Template(),this.computed={itemLabel:t.get_itemLabel},this.methods={get_itemLabel:t.get_itemLabel},this.props={item:{required:!0,type:Object},entryIndex:{required:!1,type:Number},parentAttr:{required:!1},entry:{required:!0}}},__class__:yr});var wr=function(){B.call(this)};n["troshx.sos.vue.widgets.BoonBaneApplyDetails"]=wr,wr.__name__=["troshx","sos","vue","widgets","BoonBaneApplyDetails"],wr.getSlug=function(t){return"bb-detail-"+t.split(" ").join("-").toLowerCase()},wr.__super__=B,wr.prototype=r(B.prototype,{Components:function(){return _r.getComponents()},get_uiFields:function(){return this.assign.getUIFields()},get_bb:function(){return this.assign.getBoonOrBane()},get_qty:function(){return this.assign.getQty()},get_cost:function(){return this.assign.getCost(this.assign.rank)},get_titleheader:function(){return this.bb.name+(this.ingame?"":" ["+this.clampCost+(null!=this.remainingPoints?"/"+(this.remainingPoints+this.clampCost):"")+"]")},get_clampCost:function(){return 0|Math.max(this.cost,this.bb.costs[0])},get_locked:function(){return this.assign._forcePermanent},get_isCanceled:function(){return this.assign._canceled},get_typeMap:function(){return _r.getTypeMapToComponentNames()},get_slug:function(){return"bb-detail-"+this.bb.name.split(" ").join("-").toLowerCase()},Template:function(){return'\r\n\t\t\t<div class="bb-detail" v-show="assign.__hasUIFields__ && !isCanceled" :id="slug">\r\n\t\t\t\t<h4>{{ titleheader }}</h4>\r\n\t\t\t\t<div>\t\r\n\t\t\t\t\t<div v-for="(li, i) in uiFields" :is="typeMap[li.type]" :obj="assign" v-bind="li" :key="li.prop" v-on:callback="$emit(\'callback\', assign, li.prop, arguments[1])"></div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t'},_Init:function(){var t=wr.prototype;this.components=this.Components(),this.template=this.Template(),this.computed={uiFields:t.get_uiFields,bb:t.get_bb,qty:t.get_qty,cost:t.get_cost,titleheader:t.get_titleheader,clampCost:t.get_clampCost,locked:t.get_locked,isCanceled:t.get_isCanceled,typeMap:t.get_typeMap,slug:t.get_slug},this.methods={get_uiFields:t.get_uiFields,get_bb:t.get_bb,get_qty:t.get_qty,get_cost:t.get_cost,get_titleheader:t.get_titleheader,get_clampCost:t.get_clampCost,get_locked:t.get_locked,get_isCanceled:t.get_isCanceled,get_typeMap:t.get_typeMap,get_slug:t.get_slug},this.props={assign:{required:!0,type:Object},ingame:{required:!0,type:Boolean},remainingPoints:{required:!1,type:Number}}},__class__:wr});var Sr=function(){B.call(this)};n["troshx.sos.vue.widgets.GingkoTreeBrowser"]=Sr,Sr.__name__=["troshx","sos","vue","widgets","GingkoTreeBrowser"],Sr.get_MARKED=function(){return marked},Sr.__super__=B,Sr.prototype=r(B.prototype,{Components:function(){return{treeview:new tr}},Mounted:function(){this.loadDomain(this.defaultDomain)},loadDomainClick:function(){this.loadDomain(this.requestedDomain)},loadDomain:function(t){this.requestEnteredDomain=t,this.isLoading=!0,this.loadedDomain="";var e=new b(ki.CURL_DOMAIN+"/curlgink.php").setParameter("id",t);e.onData=Zr(this,this.onDataReceived),e.onError=Zr(this,this.onErrorLoad),e.request()},get_requestedDomain:function(){var t=this.defaultDomain;return""!=this.requestEnteredDomain?this.requestEnteredDomain:t},onDataReceived:function(t){var e;this.isLoading=!1;try{e=JSON.parse(t)}catch(t){return void q.alert("Sorry, failed to parse domain!")}this.loadedDomain=this.requestedDomain;for(var n=0,i=e.length;n<i;){var r=n++;e[r].key="_"+this.valueKeyCounter++,this.cleanNode(e[r])}if(null!=this.autoLoad)for(var s=0,a=e.length;s<a;){var o=s++;this.checkNodes(e[o])}this.model=e,this.$emit("loaded-domain",this.loadedDomain),null!=this.autoLoadNode?Vue.nextTick(Zr(this,this.attemptLoadAutoNode)):null!=this.autoLoad&&q.alert("Failed to find serializable node to load for ?autoload="+this.autoLoad)},attemptLoadAutoNode:function(){null!=this.autoLoadNode?this.$emit("open",this.autoLoadNode.content,"(loaded from url)",Zr(this,this.disableOpenButton)):console.log("Missing autoload node for some reason..."),this.autoLoadNode=null},nodeGotContent:function(t){return""!=t.content},cleanNode:function(t){if(null!=t.children){t.children.length>0&&(t.children=t.children.filter(Zr(this,this.nodeGotContent)));for(var e=0,n=t.children.length;e<n;){var i=e++;t.children[i].key="_"+this.valueKeyCounter++,this.cleanNode(t.children[i])}}},checkNodes:function(t){if(!this.checkNode(t)&&null!=t.children)for(var e=0,n=t.children.length;e<n;){var i=e++;this.checkNodes(t.children[i])}},setupNode:function(t){t.key="_"+this.valueKeyCounter++},checkNode:function(t){if(null!=t.children&&t.children.length>0&&("http://"==a.substr(t.children[0].content,0,7)||"https://"==a.substr(t.children[0].content,0,8))&&this.isSerializable(t)&&jr.getURLQueryStringParams(t.children[0].content).autoload==this.autoLoad)return this.autoLoadNode=t,!0;return!1},cleanNodes:function(t){return t.filter(Zr(this,this.nodeGotContent))},getFirstChild:function(t){return t[0]},onErrorLoad:function(t){this.isLoading=!1,q.alert("Failed to load domain!")},get_curIsHeadingNode:function(){return null!=this.curSelectedNode&&null!=this.curSelectedNode.children&&0!=this.curSelectedNode.children.length&&this.isSerializable(this.curSelectedNode.children[0])},get_curLandingNode:function(){return null!=this.curSelectedNode?this.curIsHeadingNode?this.curSelectedNode.children[0]:this.curSelectedNode:null},get_curLandingValue:function(){return this.curLandingNode.content},get_curSerializable:function(){var t=null!=this.curSelectedNode?this.curSelectedNode.content:null;return null!=t&&this.isSerializableValue(t)},get_curLandingSerializable:function(){return null!=this.curLandingNode&&this.isSerializable(this.curLandingNode)},get_compiledMarkdown:function(){var t=null!=this.curSelectedNode?this.curSelectedNode.content:null;return null==t||this.curSerializable?"":marked(t,{sanitize:!0})},customLabelHandler:function(t){for(var e=t.split("\\n"),n=0,i=0,r=e.length;i<r;){var s=i++;if(""!=m.trim(e[s]))break;n=s}t=e[n],t=m.trim(t);var o=new RegExp("^#*","".split("u").join(""));return(t=t.replace(o,"")).length<this.maxLabelLength?t:a.substr(t,0,this.maxLabelLength)+"..."},onTreeViewClick:function(t,e){this.curSelectedNode=t,this.curSelectedParentNode=e},isSerializable:function(t){return new s("^cy[0-9]*:","").match(t.content)},isSerializableValue:function(t){return new s("^cy[0-9]*:","").match(t)},onOpenClick:function(){var t=this.curLandingNode;if(null!=t){var e=t!=this.curSelectedNode?this.curSelectedNode:this.curSelectedParentNode;this.$emit("open",t.content,this.customLabelHandler(e.content),Zr(this,this.disableOpenButton))}},filterNodeHandler:function(t,e){if(null==this.availableTypes)return!0;var n=this.isSerializable(t);if(n&&null!=this.availableTypes&&!this.availableTypes[this.getSerializeContentType(t.content)])return!1;if(null==t.children||t.children.length>1)return!0;var i=t.children[0];return!((n=this.isSerializable(i))&&null!=this.availableTypes&&!this.availableTypes[this.getSerializeContentType(i.content)])},getCustomIcon:function(t){return null!=t.children&&0!=t.children.length||!this.isSerializable(t)?!(null==t.children||1!=t.children.length||!this.isSerializable(t.children[0]))&&this.getCustomIconForContent(t.children[0].content):this.getCustomIconForContent(t.content)},areValidNodesHandler:function(t,e){return null!=t&&t instanceof Array&&null==t.__enum__&&(t.length>1||1==t.length&&!this.isSerializable(t[0]))&&!this.isSerializable(e)},disableOpenButton:function(){this.$refs.openButton.disabled=!0},getCustomIconForContent:function(t){var e=t.indexOf(":"),n=p.parseInt(a.substr(t,2,e)),i=Sr.SERIALIZE_PREFIXES[a.substr(t,e+1,n)];return null!=i&&i.icon},get_curSelectedType:function(){if(null==this.curLandingNode)return"";var t=this.curLandingNode.content,e=t.indexOf(":"),n=p.parseInt(a.substr(t,2,e)),i=Sr.SERIALIZE_PREFIXES[a.substr(t,e+1,n)];return null!=i?i.name:""},getSerializeContentType:function(t){var e=t.indexOf(":"),n=p.parseInt(a.substr(t,2,e));return a.substr(t,e+1,n)},onInputDomain:function(t){""!=t.value&&(this.requestEnteredDomain=t.value)},get_treeviewStyle:function(){return this.isLoading?{"pointer-events":"none",opacity:.4}:{}},onInputDomainBlur:function(t){},Template:function(){return'\r\n\t\t\t<div class="gingko-tree">\r\n\t\t\t\t<div><span v-show="loadedDomain!=\'\'" ><input type="text" style="display:inline-block;width:auto;max-width:80px;background-color:#f3f5f6" readonly :value="loadedDomain"></input> <i>loaded.</i></span><span style="margin-left:30px;display:inline-block"><input type="text" :disabled="isLoading" :value="requestedDomain" v-on:blur="onInputDomainBlur($event.target)" @input="onInputDomain($event.target)"></input><button v-on:click="loadDomainClick" :disabled="isLoading">Load Domain ID</button></span></div>\r\n\t\t\t\t<treeview :value.sync="curSelectedValue" v-on:treeview_click="onTreeViewClick" :disabled="isLoading" \r\n\t\t\t\t\t:style="treeviewStyle"\r\n\t\t\t\t\t\r\n\t\t\t\t\t:model="model"\r\n\t\t\t\t\tclass="form-control"\r\n\t\t\t\t\tlabelname="content"\r\n\t\t\t\t\tvaluename="key"\r\n\t\t\t\t\tchildren = "children" \r\n\t\t\t\t\t:customLabelHandler = "customLabelHandler"\r\n\t\t\t\t\t:filterNodeHandler = "filterNodeHandler"\r\n\t\t\t\t\t:getCustomIcon = "getCustomIcon"\r\n\t\t\t\t\t\r\n\t\t\t\t\t:areValidNodesHandler = "areValidNodesHandler"\r\n\t\t\t\t/>\r\n\t\t\t\t<div class="markdown-view">\r\n\t\t\t\t\t<div v-html="compiledMarkdown" v-show="compiledMarkdown"></div>\r\n\t\t\t\t\t<div v-show="curLandingSerializable"><button v-on:click="onOpenClick" ref="openButton" :disabled="locked">Open {{curSelectedType}}</button></div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t'},get_defaultDomain:function(){return null!=this.initialDomain?this.initialDomain:ki.DOMAIN_INVENTORY},Data:function(){return{requestEnteredDomain:"",curSelectedValue:null,curSelectedNode:null,loadedDomain:"",isLoading:!1,curSelectedParentNode:null,valueKeyCounter:0,autoLoadNode:null,model:[]}},_Init:function(){var t=Sr.prototype;this.components=this.Components(),this.mounted=t.Mounted,this.template=this.Template(),this.data=t.Data,this.computed={requestedDomain:t.get_requestedDomain,curIsHeadingNode:t.get_curIsHeadingNode,curLandingNode:t.get_curLandingNode,curLandingValue:t.get_curLandingValue,curSerializable:t.get_curSerializable,curLandingSerializable:t.get_curLandingSerializable,compiledMarkdown:t.get_compiledMarkdown,curSelectedType:t.get_curSelectedType,treeviewStyle:t.get_treeviewStyle,defaultDomain:t.get_defaultDomain},this.methods={loadDomainClick:t.loadDomainClick,loadDomain:t.loadDomain,get_requestedDomain:t.get_requestedDomain,onDataReceived:t.onDataReceived,attemptLoadAutoNode:t.attemptLoadAutoNode,nodeGotContent:t.nodeGotContent,cleanNode:t.cleanNode,checkNodes:t.checkNodes,setupNode:t.setupNode,checkNode:t.checkNode,cleanNodes:t.cleanNodes,getFirstChild:t.getFirstChild,onErrorLoad:t.onErrorLoad,get_curIsHeadingNode:t.get_curIsHeadingNode,get_curLandingNode:t.get_curLandingNode,get_curLandingValue:t.get_curLandingValue,get_curSerializable:t.get_curSerializable,get_curLandingSerializable:t.get_curLandingSerializable,get_compiledMarkdown:t.get_compiledMarkdown,customLabelHandler:t.customLabelHandler,onTreeViewClick:t.onTreeViewClick,isSerializable:t.isSerializable,isSerializableValue:t.isSerializableValue,onOpenClick:t.onOpenClick,filterNodeHandler:t.filterNodeHandler,getCustomIcon:t.getCustomIcon,areValidNodesHandler:t.areValidNodesHandler,disableOpenButton:t.disableOpenButton,getCustomIconForContent:t.getCustomIconForContent,get_curSelectedType:t.get_curSelectedType,getSerializeContentType:t.getSerializeContentType,onInputDomain:t.onInputDomain,get_treeviewStyle:t.get_treeviewStyle,onInputDomainBlur:t.onInputDomainBlur,get_defaultDomain:t.get_defaultDomain},this.props={locked:{required:!1,default:!1,type:Boolean},autoLoad:{required:!1,type:String},availableTypes:{required:!1},initialDomain:{required:!1,type:String},maxLabelLength:{required:!1,default:32,type:Number}}},__class__:Sr});var Cr=function(){B.call(this)};n["troshx.sos.vue.widgets.InputName"]=Cr,Cr.__name__=["troshx","sos","vue","widgets","InputName"],Cr.__super__=B,Cr.prototype=r(B.prototype,{emit:function(t){this.$emit(t)},get_label:function(){var t=this.item.get_label();return null!=this.weaponHeldOff?this.weapon.getLabelHeld(this.weaponHeldOff):t},get_weapon:function(){var t=this.item;return D.__instanceof(t,on)?t:null},Mounted:function(){this.$el.value=this.item.get_label()},watch_item:function(t){this.$el.value=t.get_label()},setValidNameOfInput:function(t){var e=m.trim(t.value),n=!1;""!=e&&(this.item.name=e,n=!0),t.value=this.label,n&&this.$emit("updated")},Template:function(){return'<input type="text" v-on:blur="setValidNameOfInput($event.target)" v-on:focus="$event.target.value=item.name" :value="label" ></input>'},_Init:function(){var t=Cr.prototype;this.mounted=t.Mounted,this.template=this.Template(),this.computed={label:t.get_label,weapon:t.get_weapon},this.methods={emit:t.emit,get_label:t.get_label,get_weapon:t.get_weapon,watch_item:t.watch_item,setValidNameOfInput:t.setValidNameOfInput},this.props={weaponHeldOff:{required:!1,default:null,type:Boolean},item:{type:Object}},this.watch={item:t.watch_item}},__class__:Cr});var Ar=function(){B.call(this)};n["troshx.sos.vue.widgets.InputNameQty"]=Ar,Ar.__name__=["troshx","sos","vue","widgets","InputNameQty"],Ar.__super__=B,Ar.prototype=r(B.prototype,{emit:function(t){this.$emit(t)},get_label:function(){var t=this.itemQty;return t.item.get_label()+(null!=t.attachments?t.getAttachmentsLabels():"")},Mounted:function(){this.$el.value=this.itemQty.item.get_label()},watch_itemQty:function(t){this.$el.value=t.item.get_label()},setValidNameOfInput:function(t){var e=m.trim(t.value),n=!1;""==e||null!=this.customValidateName&&!this.customValidateName(e,this.itemQty)||(this.itemQty.item.name=e,n=!0),t.value=this.label,n&&this.$emit("updated")},Template:function(){return'<input type="text" v-on:blur="setValidNameOfInput($event.target)" v-on:focus="$event.target.value=itemQty.item.name" ></input>'},_Init:function(){var t=Ar.prototype;this.mounted=t.Mounted,this.template=this.Template(),this.computed={label:t.get_label},this.methods={emit:t.emit,get_label:t.get_label,watch_itemQty:t.watch_itemQty,setValidNameOfInput:t.setValidNameOfInput},this.props={customValidateName:{type:Function},itemQty:{type:Object}},this.watch={itemQty:t.watch_itemQty}},__class__:Ar});var xr=function(){B.call(this)};n["troshx.sos.vue.widgets.MeleeVariantMixin"]=xr,xr.__name__=["troshx","sos","vue","widgets","MeleeVariantMixin"],xr.getInstance=function(){return null!=xr.INSTANCE?xr.INSTANCE:xr.INSTANCE=new xr},xr.inlineGotVariant=function(t){var e=!1;if(null!=t){var n=null!=t.weapon.variant,i=t.holding1H;e=!!n&&i}return e},xr.__super__=B,xr.prototype=r(B.prototype,{get_gotVariant:function(){var t=this.weaponAssign,e=!1;if(null!=t){var n=null!=t.weapon.variant,i=t.holding1H;e=!!n&&i}return e},_Init:function(){var t=xr.prototype;this.computed={gotVariant:t.get_gotVariant},this.methods={get_gotVariant:t.get_gotVariant},this.props={weaponAssign:{required:!1}}},__class__:xr});var Ir=function(){B.call(this),this.mixins=[Ui.getInstance()]};n["troshx.sos.vue.widgets.ModifierList"]=Ir,Ir.__name__=["troshx","sos","vue","widgets","ModifierList"],Ir.__super__=B,Ir.prototype=r(B.prototype,{Data:function(){var t=Tn[this.rowId];return{staticMod:Ln.create(t,"",0)}},resetData:function(){var t=Tn[this.rowId];this.staticMod=Ln.create(t,"",0)},get_rowStatic:function(){var t=Tn;return this.char.staticModifierTable[t[this.rowId]]},get_rowSituational:function(){var t=Tn;return this.char.situationalModifierTable[t[this.rowId]]},get_list:function(){for(var t=[],e=this.rowStatic,n=this.rowSituational,i=0,r=e.length;i<r;){var s=e[i++];s.custom||t.push({staticMod:s,name:s.name,custom:s.custom})}for(var a=0,o=n.length;a<o;){var l=a++;t.push({name:n[l].get_name(),custom:!1})}for(var u=0,c=e.length;u<c;){var h=e[u++];h.custom&&t.push({staticMod:h,name:h.name,custom:h.custom})}return t},get_enabledAddBtn:function(){return""!=m.trim(this.staticMod.name)},addStaticEntry:function(){var t=this.char,e=this.staticMod;if(null!=e){var n=t.staticModifierTable[e.index];n.push(e);for(var i=e.next;null!=i;)(n=t.staticModifierTable[i.index]).push(i),i=i.next}this.resetData()},getStaticModStat:function(t){return(0!=t.multiply?"x"+t.multiply:"")+(0!=t.add?(t.add>=0?"+":"")+t.add:"")},deleteEntry:function(t){var e=this.char,n=t.staticMod;if(null!=n)for(var i=e.staticModifierTable[n.index],r=(i.splice(i.indexOf(n),1),n.next);null!=r;)(i=e.staticModifierTable[r.index]).splice(i.indexOf(r),1),r=r.next},Template:function(){return'<div>\r\n\t\t\t<ul class="modifiers">\r\n\t\t\t\t<li v-for="(li, i) in list" :class="{custom:li.custom}">{{li.name}}<span v-if="li.staticMod!=null"> ({{ getStaticModStat(li.staticMod) }})</span> <span v-if="li.custom"><a href="javascript:;" v-on:click="deleteEntry(li)">[x]</a></span></li>\r\n\t\t\t</ul>\r\n\t\t\t<div v-if="editable">\r\n\t\t\t\t<div v-if="staticMod != null">\r\n\t\t\t\t\t<div><label>Name:<InputString :obj="staticMod" prop="name" /></label> <label>Add(+):<InputNumber :obj="staticMod" prop="add" /></label> <label>Multiply(x):<InputNumber :obj="staticMod" prop="multiply" :step="0.5" /></label></div>\r\n\t\t\t\t\t<button :enabled="enabledAddBtn" v-on:click="addStaticEntry">Add Custom Modifier</button>\r\n\t\t\t\t<div>\r\n\t\t\t</div>\r\n\t\t</div>'},_Init:function(){var t=Ir.prototype;this.data=t.Data,this.template=this.Template(),this.computed={rowStatic:t.get_rowStatic,rowSituational:t.get_rowSituational,list:t.get_list,enabledAddBtn:t.get_enabledAddBtn},this.methods={resetData:t.resetData,get_rowStatic:t.get_rowStatic,get_rowSituational:t.get_rowSituational,get_list:t.get_list,get_enabledAddBtn:t.get_enabledAddBtn,addStaticEntry:t.addStaticEntry,getStaticModStat:t.getStaticModStat,deleteEntry:t.deleteEntry},this.props={baseCalc:{required:!1,type:Number},char:{required:!0,type:Object},editable:{required:!1,default:!1,type:Boolean},rowId:{required:!0,type:String}}},__class__:Ir});var kr=function(){B.call(this)};n["troshx.sos.vue.widgets.SchoolSheetDetails"]=kr,kr.__name__=["troshx","sos","vue","widgets","SchoolSheetDetails"],kr.__super__=B,kr.prototype=r(B.prototype,{Components:function(){return _r.getComponents()},get_uiFields:function(){return this.bonuses.getUIFields()},get_typeMap:function(){return _r.getTypeMapToComponentNames()},Template:function(){return'\r\n\t\t\t<div class="school-sheet-bonuses" v-show="bonuses.__hasUIFields__">\r\n\t\t\t\t<div v-for="(li, i) in uiFields" :is="typeMap[li.type]" :obj="bonuses" v-bind="li" :key="li.prop"></div>\r\n\t\t\t</div>\r\n\t\t'},_Init:function(){var t=kr.prototype;this.components=this.Components(),this.template=this.Template(),this.computed={uiFields:t.get_uiFields,typeMap:t.get_typeMap},this.methods={get_uiFields:t.get_uiFields,get_typeMap:t.get_typeMap},this.props={bonuses:{required:!0,type:Object}}},__class__:kr});var Tr=function(){B.call(this),this.mixins=[xr.getInstance()]};n["troshx.sos.vue.widgets.SelectHeld"]=Tr,Tr.__name__=["troshx","sos","vue","widgets","SelectHeld"],Tr.__super__=B,Tr.prototype=r(B.prototype,{get_gotVariant:function(){var t=this.weaponAssign,e=!1;if(null!=t){var n=null!=t.weapon.variant,i=t.holding1H;e=!!n&&i}return e},get_item:function(){return null!=this.entry.weapon?this.entry.weapon:null!=this.entry.shield?this.entry.shield:null!=this.entry.armor?this.entry.armor:D.__instanceof(this.entry,en)?this.entry:this.entry.item},get_twoHanded:function(){var t=0!=(1&this.item.flags);return!(this.gotVariant&&this.weaponAssign.holding1H&&null!=this.weaponAssign.weapon.variant)&&t},holdItemHandler:function(t,e){this.inventory.holdEquiped(t,e)},shiftIndex:function(t){return 1<<t},emit:function(t){this.$emit(t)},Template:function(){return'<select number :value="entry.held" v-on:change="holdItemHandler(entry, $event.target.value)"  >\r\n\t<option :value="0">No</option>\r\n\t<option :value="1" :disabled="twoHanded">Master-hand</option>\r\n\t<option :value="2" :disabled="twoHanded">Off-hand</option>\r\n\t<option :value="3" :disabled="gotVariant">Both hands</option>\r\n</select>'},_Init:function(){var t=Tr.prototype;this.template=this.Template(),this.computed={gotVariant:t.get_gotVariant,item:t.get_item,twoHanded:t.get_twoHanded},this.methods={get_gotVariant:t.get_gotVariant,get_item:t.get_item,get_twoHanded:t.get_twoHanded,holdItemHandler:t.holdItemHandler,shiftIndex:t.shiftIndex,emit:t.emit},this.props={inventory:{type:Object},weaponAssign:{required:!1},entry:{}}},__class__:Tr});var Lr=function(){B.call(this)};n["troshx.sos.vue.widgets.SkillSubjectCreator"]=Lr,Lr.__name__=["troshx","sos","vue","widgets","SkillSubjectCreator"],Lr.__super__=B,Lr.prototype=r(B.prototype,{Data:function(){return new Mr},get_withinEditableScope:function(){var t=""!=this.selectedSubject,e=null==this.permaHash||!this.permaHash[this.selectedSubject];return!!t&&e},onSelectSubjectChange:function(){this.editMode&&(this.editFieldText=this.selectedSubject),""!=this.selectedSubject&&""!=this.selectedSkill&&this.skillValues[this.comboName]>=0&&this.$emit("exists",this.selectedSkill,this.selectedSubject)},notifyExistsIfNeeded:function(){""!=this.selectedSubject&&""!=this.selectedSkill&&this.skillValues[this.comboName]>=0&&this.$emit("exists",this.selectedSkill,this.selectedSubject)},onSelectSkillChange:function(){""!=this.selectedSubject&&""!=this.selectedSkill&&this.skillValues[this.comboName]>=0&&this.$emit("exists",this.selectedSkill,this.selectedSubject)},onTouchEditField:function(){},watch_editMode:function(t){this.editFieldText=t?this.selectedSubject:""},deleteBtnClick:function(){var t=this.selectedSubject;this.editFieldText="",this.selectedSubject="";var e=this.skillSubjects.indexOf(t);e>=0&&this.skillSubjects.splice(e,1)},onRenameBtnClick:function(){if(this.selectedSubject!=this.editFieldText){var t=this.editFieldText;this.editFieldText="";var e=this.skillSubjects.indexOf(this.selectedSubject);if(e>=0)Vue.set(this.skillSubjects,e,t),this.selectedSubject=t,this.$refs.selectSubject.focus()}},onAddSkillClick:function(){this.$emit("addSkill",this.selectedSkill,this.selectedSubject)},get_comboName:function(){return this.selectedSkill+" ("+this.selectedSubject+")"},onAddBtnClick:function(){var t=this.editFieldText;this.skillSubjects.push(t),this.editFieldText="",this.selectedSubject=t,this.$refs.selectSubject.focus()},get_renameButtonInvalid:function(){return this.isDeleteSubjectDisabled},get_isDeleteSubjectDisabled:function(){var t=this.skillSubjectHash[this.selectedSubject];return null!=t&&t.length>0},get_addButtonInvalid:function(){return!(this.skillSubjects.indexOf(this.editFieldText)<0)||""==this.editFieldText},get_isAddSkillDisabled:function(){var t=this.selectedSubject,e=this.skillValues;return""==this.selectedSkill||""==t||e[this.selectedSkill+" ("+t+")"]>=0},Template:function(){return'<div class="skill-subjects">\r\n\t\t\t<div class="columner col-skills">\r\n\t\t\t\t<h4>Skill: <span style="font-weight:normal;white-space:nowrap">{{comboName}}</span></h4>\r\n\t\t\t\t<select size="5" ref="selectSkill" v-model="selectedSkill" v-on:change="onSelectSkillChange">\r\n\t\t\t\t\t<option v-for="(li, i) in skillList" :key="li" :value="li">{{li}}</option>\r\n\t\t\t\t</select>\r\n\t\t\t\t<div><button :disabled="isAddSkillDisabled" v-on:click="onAddSkillClick">{{skillValues[comboName]>=0 ? "Already Exists" : "^Add Skill Entry"}}</button></div>\r\n\t\t\t</div>\r\n\t\t\t<div class="columner col-subject">\r\n\t\t\t\t<h4>Specialisations:</h4>\r\n\t\t\t\t<select size="6" ref="selectSubject" v-model="selectedSubject" v-on:change="onSelectSubjectChange">\r\n\t\t\t\t\t<option v-for="(li, i) in skillSubjects" :key="li" :value="li">{{li}}</option>\r\n\t\t\t\t</select>\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t\t<div class="columner col-add-subject">\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<h4>Specialisation</h4>\r\n\t\t\t\t\t<label><input type="radio" name="edit-mode" :checked="!editMode" v-on:click="editMode = false"></input>New</label>\r\n\t\t\t\t\t<label><input type="radio" name="edit-mode" :checked="editMode"  v-on:click="editMode = true"></input>Edit</label>\r\n\t\t\t\t\t<button class="del" :disabled="isDeleteSubjectDisabled" v-show="withinEditableScope && editMode" v-on:click="deleteBtnClick">Del</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div><input type="text" v-on:input="onTouchEditField" v-model="editFieldText" :disabled="editMode && !withinEditableScope"></input></div>\r\n\t\t\t\t<div><button v-show="editMode && withinEditableScope" v-on:click="onRenameBtnClick" :disabled="renameButtonInvalid">&lt;&lt;Rename</button><button v-show="!editMode" v-on:click="onAddBtnClick" :disabled="addButtonInvalid">&lt;&lt;Add</button></div>\r\n\t\t\t</div>\r\n\t\t</div>'},_Init:function(){var t=Lr.prototype;this.data=t.Data,this.template=this.Template(),this.computed={withinEditableScope:t.get_withinEditableScope,comboName:t.get_comboName,renameButtonInvalid:t.get_renameButtonInvalid,isDeleteSubjectDisabled:t.get_isDeleteSubjectDisabled,addButtonInvalid:t.get_addButtonInvalid,isAddSkillDisabled:t.get_isAddSkillDisabled},this.methods={get_withinEditableScope:t.get_withinEditableScope,onSelectSubjectChange:t.onSelectSubjectChange,notifyExistsIfNeeded:t.notifyExistsIfNeeded,onSelectSkillChange:t.onSelectSkillChange,onTouchEditField:t.onTouchEditField,watch_editMode:t.watch_editMode,deleteBtnClick:t.deleteBtnClick,onRenameBtnClick:t.onRenameBtnClick,onAddSkillClick:t.onAddSkillClick,get_comboName:t.get_comboName,onAddBtnClick:t.onAddBtnClick,get_renameButtonInvalid:t.get_renameButtonInvalid,get_isDeleteSubjectDisabled:t.get_isDeleteSubjectDisabled,get_addButtonInvalid:t.get_addButtonInvalid,get_isAddSkillDisabled:t.get_isAddSkillDisabled},this.props={skillSubjects:{required:!0,type:Array},skillSubjectHash:{required:!0},permaHash:{required:!1},skillValues:{required:!0},skillList:{required:!0,type:Array}},this.watch={editMode:t.watch_editMode}},__class__:Lr});var Mr=function(){this.selectedSkill="",this.editFieldText="",this.selectedSubject="",this.editMode=!1};n["troshx.sos.vue.widgets.SkillSubjectCreatorData"]=Mr,Mr.__name__=["troshx","sos","vue","widgets","SkillSubjectCreatorData"],Mr.prototype={__class__:Mr};var Er=function(){B.call(this)};n["troshx.sos.vue.widgets.WAmmoSpawner"]=Er,Er.__name__=["troshx","sos","vue","widgets","WAmmoSpawner"],Er.__super__=B,Er.prototype=r(B.prototype,{Data:function(){return{ammoList:bn.getDefaultList(),arrowList:ln.getDefaultList()}},Template:function(){return'<div>\r\n\t<span v-for="(li, i) in filteredList">{{ li.name }} <button class="add-btn" v-on:click="addAmmo(li)">+</button></span>\r\n</div>'},get_combinedList:function(){for(var t=[],e=0,n=this.ammoList.length;e<n;){var i=e++;t.push(this.ammoList[i])}for(var r=0,s=this.arrowList.length;r<s;){var a=r++;t.push(this.arrowList[a])}return t},get_filteredList:function(){for(var t=[],e=this.mask,n=this.combinedList,i=0,r=n.length;i<r;){var s=n[i++];0!=e&&0==(e&s.profs)||t.push(s)}return t},_Init:function(){var t=Er.prototype;this.data=t.Data,this.template=this.Template(),this.computed={combinedList:t.get_combinedList,filteredList:t.get_filteredList},this.methods={get_combinedList:t.get_combinedList,get_filteredList:t.get_filteredList},this.props={mask:{required:!1,default:0,type:Number},addAmmo:{required:!0,type:Function}}},__class__:Er});var Pr=function(){B.call(this)};n["troshx.sos.vue.widgets.WAmmunition"]=Pr,Pr.__name__=["troshx","sos","vue","widgets","WAmmunition"],Pr.__super__=B,Pr.prototype=r(B.prototype,{Data:function(){return{list:bn.getDefaultList()}},checkboxHandler:function(t,e,n,i){t.checked?n[i]|=1<<e:n[i]&=~(1<<e)},shiftIndex:function(t){return 1<<t},Template:function(){return'<div>\r\n\t<span v-for="(li, i) in list" style="display:inline-block" :key="i">\r\n\t\t<label style="display:inline-block"><input type="checkbox" :value="shiftIndex(i)" v-on:click="checkboxHandler($event.target, i, item.firearm, \'ammunitions\')" :checked="(shiftIndex(i)&item.firearm.ammunitions)!=0"></input>{{li.name}}<span v-if="addAmmoMethod!=null" :style="{visibility:(shiftIndex(i)&item.firearm.ammunitions)!=0 ?\'visible\':\'hidden\'}">[<a href="javascript:;" v-on:click.prevent.stopPropagation="addAmmoMethod(li)">+</a>]</span></label>\r\n\t</span>\r\n</div>'},get_addAmmoMethod:function(){return null!=this.addAmmo?this.addAmmo:this.parentAttr.addAmmo},_Init:function(){var t=Pr.prototype;this.data=t.Data,this.template=this.Template(),this.computed={addAmmoMethod:t.get_addAmmoMethod},this.methods={checkboxHandler:t.checkboxHandler,shiftIndex:t.shiftIndex,get_addAmmoMethod:t.get_addAmmoMethod},this.props={item:{required:!0,type:Object},entryIndex:{required:!1,type:Number},parentAttr:{required:!1},entry:{required:!0},addAmmo:{required:!1,type:Function}}},__class__:Pr});var Rr=function(){B.call(this)};n["troshx.sos.vue.widgets.WCoverage"]=Rr,Rr.__name__=["troshx","sos","vue","widgets","WCoverage"],Rr.__super__=B,Rr.prototype=r(B.prototype,{checkboxHandler:function(t,e){var n=this.armor,i=this.hitLocations[e].id;t.checked?Vue.set(n.coverage,i,0):(Vue.delete(n.coverage,i),null!=n.special&&(n.special.layerCoverage&=~(1<<e),null!=n.special.hitModifier&&(n.special.hitModifier.locationMask&=~(1<<e))),null!=n.customise&&null!=n.customise.hitLocationAllAVModifiers&&Vue.delete(n.customise.hitLocationAllAVModifiers,i))},get_isCustomBody:function(){return null!=this.customBody&&this.customBody!=un.getInstance()},get_bodyChar:function(){return this.isCustomBody?this.customBody:un.getInstance()},get_hitLocations:function(){return this.isCustomBody?this.customBody.hitLocations:un.getInstance().hitLocations},get_armor:function(){var t=this.item;return D.__instanceof(t,en)?t:null},isInnerChecked:function(t,e){var n=this.hitLocations;return 0!=(this.armor.coverage[n[t].id]&1<<e)},innerCheckboxHandler:function(t,e,n){var i=this.armor,r=this.hitLocations[e].id,s=i.coverage[r];t.checked?Vue.set(i.coverage,r,s|1<<n):Vue.set(i.coverage,r,s&~(1<<n))},Template:function(){return'<div>\r\n\t<div class="coverage-list">\r\n\t\t<div v-for="(li, i) in hitLocations" :key="i">\r\n\t\t\t<label><input type="checkbox" v-on:click="checkboxHandler($event.target, i)" :checked="item.coverage[li.get_uid()]!=null"></input>{{i+1}}. {{li.name}}</label> &nbsp; <span class="symbols" v-if="item.coverage[li.get_uid()]!=null"><label>ϕ</label><input type="checkbox" v-on:click="innerCheckboxHandler($event.target, i, 0)" :checked="isInnerChecked(i,0)"></input><label>*</label><input type="checkbox" v-on:click="innerCheckboxHandler($event.target, i, 1)" :checked="isInnerChecked(i,1)"></input><label>t</label><input type="checkbox" v-on:click="innerCheckboxHandler($event.target, i, 2)" :checked="isInnerChecked(i,2)"></input></span>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="legend">\r\n\t\t<b>Legend:</b>\r\n\t\t<label>ϕ</label>: Weak spot,  <label>*</label>: Half base AV, <label>t</label>: Against thrusts only\r\n\t</div>\r\n</div>'},_Init:function(){var t=Rr.prototype;this.template=this.Template(),this.computed={isCustomBody:t.get_isCustomBody,bodyChar:t.get_bodyChar,hitLocations:t.get_hitLocations,armor:t.get_armor},this.methods={checkboxHandler:t.checkboxHandler,get_isCustomBody:t.get_isCustomBody,get_bodyChar:t.get_bodyChar,get_hitLocations:t.get_hitLocations,get_armor:t.get_armor,isInnerChecked:t.isInnerChecked,innerCheckboxHandler:t.innerCheckboxHandler},this.props={customBody:{required:!1,type:Object},item:{required:!0,type:Object},entryIndex:{required:!1,type:Number},parentAttr:{required:!1},entry:{required:!0}}},__class__:Rr});var Br=function(){B.call(this)};n["troshx.sos.vue.widgets.WFirearmName"]=Br,Br.__name__=["troshx","sos","vue","widgets","WFirearmName"],Br.__super__=B,Br.prototype=r(B.prototype,{Data:function(){return{mechanismCache:null,selectedMechanismIndex:-1}},Mounted:function(){this.selectedMechanismIndex=null!=this.firingMechanism?this.availableFiringMechanisms.indexOf(this.firingMechanism):null},get_availableFiringMechanisms:function(){return null!=this.customFiringMechanisms?this.customFiringMechanisms.concat(vn.getDefaultList()):vn.getDefaultList()},get_weapon:function(){var t=this.item;return D.__instanceof(t,on)?t:null},get_firingMechanism:function(){return null!=this.weapon.firearm?this.weapon.firearm.firingMechanism:null},watch_selectedMechanismIndex:function(t,e){var n=this.availableFiringMechanisms;this.weapon.firearm.firingMechanism=t>=0?n[t]:null},Template:function(){return'<div>\r\n\t<div v-if="!excludeName"><label>Name:<input type="text" v-model="item.name"></input></label></div>\r\n\t<div>\r\n\t\t<label>Mechanism:</label>\r\n\t\t<br/>\r\n\t\t<select ref="domSelect" number v-model="selectedMechanismIndex">\r\n\t\t\t<option :value="-1"></option>\r\n\t\t\t<option v-for="(li, i) in availableFiringMechanisms" :value="i">{{ li.name }}</option>\r\n\t\t</select>\r\n\t</div>\r\n</div>'},_Init:function(){var t=Br.prototype;this.data=t.Data,this.mounted=t.Mounted,this.template=this.Template(),this.computed={availableFiringMechanisms:t.get_availableFiringMechanisms,weapon:t.get_weapon,firingMechanism:t.get_firingMechanism},this.methods={get_availableFiringMechanisms:t.get_availableFiringMechanisms,get_weapon:t.get_weapon,get_firingMechanism:t.get_firingMechanism,watch_selectedMechanismIndex:t.watch_selectedMechanismIndex},this.props={item:{required:!0,type:Object},excludeName:{required:!1,default:!1,type:Boolean},entryIndex:{required:!1,type:Number},customFiringMechanisms:{required:!1,type:Array},parentAttr:{required:!1},entry:{required:!0}},this.watch={selectedMechanismIndex:t.watch_selectedMechanismIndex}},__class__:Br});var Nr=function(){B.call(this),this.mixins=[Ui.getInstance(),xr.getInstance()]};n["troshx.sos.vue.widgets.WMeleeAtk"]=Nr,Nr.__name__=["troshx","sos","vue","widgets","WMeleeAtk"],Nr.__super__=B,Nr.prototype=r(B.prototype,{get_damageTypeLabels:function(){return fn.getFlagLabels()},Template:function(){return'<div>\r\n\t<div style="width:50%;display:inline-block">\r\n\t\t<label>TN:<br/>\r\n\t\t\t<InputInt v-if="!thrusting" :obj="gotVariant ? item.variant : item" prop="atnS" style="width:100%"/>\r\n\t\t\t<InputInt v-if="thrusting" :obj="gotVariant ? item.variant : item" prop="atnT" style="width:100%"/>\r\n\t\t</label>\r\n\t</div><div style="width:50%;display:inline-block">\r\n\t\t<label>Damage:<br/>\r\n\t\t\t<InputInt v-if="!thrusting" :obj="gotVariant ? item.variant : item" prop="damageS" style="width:100%" />\r\n\t\t\t<InputInt v-if="thrusting" :obj="gotVariant ? item.variant : item" prop="damageT" style="width:100%" />\r\n\t\t</label>\r\n\t</div>\r\n\t<div>\r\n\t\t<label>Damage Type:</label>\r\n\t\t<select v-if="!thrusting && !gotVariant" number v-model.number="item.damageTypeS">\r\n\t\t\t<option v-for="(label, index) in damageTypeLabels" :value="index" :key="index">{{ label }}</option>\r\n\t\t</select>\r\n\t\t<select v-if="thrusting && !gotVariant" number v-model.number="item.damageTypeT">\r\n\t\t\t<option v-for="(label, index) in damageTypeLabels" :value="index" :key="index">{{ label }}</option>\r\n\t\t</select>\r\n\t\t\t\r\n\t\t<select v-if="!thrusting && gotVariant" number v-model.number="item.variant.damageTypeS">\r\n\t\t\t<option v-for="(label, index) in damageTypeLabels" :value="index" :key="index">{{ label }}</option>\r\n\t\t</select>\r\n\t\t<select v-if="thrusting && gotVariant" number v-model.number="item.variant.damageTypeT">\r\n\t\t\t<option v-for="(label, index) in damageTypeLabels" :value="index" :key="index">{{ label }}</option>\r\n\t\t</select>\r\n\t</div>\r\n\t\r\n</div>'},_Init:function(){var t=Nr.prototype;this.template=this.Template(),this.computed={damageTypeLabels:t.get_damageTypeLabels},this.methods={get_damageTypeLabels:t.get_damageTypeLabels},this.props={item:{required:!0,type:Object},entryIndex:{required:!1,type:Number},weaponAssign:{required:!1},parentAttr:{required:!1},entry:{required:!0},thrusting:{required:!0,type:Boolean}}},__class__:Nr});var Wr=function(){yr.call(this),this.mixins=[Ui.getInstance(),xr.getInstance()]};n["troshx.sos.vue.widgets.WMeleeDef"]=Wr,Wr.__name__=["troshx","sos","vue","widgets","WMeleeDef"],Wr.__super__=yr,Wr.prototype=r(yr.prototype,{Template:function(){return'<div>\r\n\t<div style="width:50%;display:inline-block">\r\n\t\t<label>DTN:<br/>\r\n\t\t\t<InputInt :obj="gotVariant ? item.variant : item" prop="dtn" style="width:100%"></InputInt>\r\n\t\t</label>\r\n\t</div><div style="width:50%;display:inline-block">\r\n\t\t<label>Guard:<br/>\r\n\t\t\t<InputInt :obj="gotVariant ? item.variant : item" prop="guard" style="width:100%"></InputInt>\r\n\t\t</label>\r\n\t</div>\r\n</div>'},_Init:function(){Wr.prototype;yr.prototype._Init.call(this),this.template=this.Template()},__class__:Wr});var Fr=function(){yr.call(this),this.mixins=[Ui.getInstance()]};n["troshx.sos.vue.widgets.WMissileAtk"]=Fr,Fr.__name__=["troshx","sos","vue","widgets","WMissileAtk"],Fr.__super__=yr,Fr.prototype=r(yr.prototype,{get_damageTypeLabels:function(){return fn.getFlagLabels()},Template:function(){return'<div>\r\n\t<div style="width:50%;display:inline-block">\r\n\t\t<label>TN:<br/>\r\n\t\t\t<InputInt :obj="item" prop="atnM" style="width:100%"></InputInt>\r\n\t\t</label>\r\n\t</div><div style="width:50%;display:inline-block">\r\n\t\t<label>Damage:<br/>\r\n\t\t\t<InputInt :obj="item" prop="damageM" style="width:100%"></InputInt>\r\n\t\t</label>\r\n\t</div>\r\n\t<div>\r\n\t\t<label>Damage Type:</label>\r\n\t\t<select number v-model.number="item.damageTypeM">\r\n\t\t\t<option v-for="(label, index) in damageTypeLabels" :value="index" :key="index">{{ label }}</option>\r\n\t\t</select>\r\n\t</div>\r\n</div>'},_Init:function(){var t=Fr.prototype;yr.prototype._Init.call(this),this.template=this.Template(),F.dynamicSetOverwrite(null!=this.computed?this.computed:this.computed={},{damageTypeLabels:t.get_damageTypeLabels}),F.dynamicSetOverwrite(null!=this.methods?this.methods:this.methods={},{get_damageTypeLabels:t.get_damageTypeLabels})},__class__:Fr});var Or=function(){B.call(this)};n["troshx.sos.vue.widgets.WProf"]=Or,Or.__name__=["troshx","sos","vue","widgets","WProf"],Or.__super__=B,Or.prototype=r(B.prototype,{Mounted:function(){var t=this.weapon;t.ranged?(this.rangedFlags=t.profs,this.ranged=!0,this.isAmmo=t.isAmmo&&t.ranged):(this.meleeFlags=t.profs,this.ranged=!1)},get_weapon:function(){var t=this.item;return D.__instanceof(t,on)?t:null},get_gotCustomColumn:function(){return this.customWidth},getProfsOfTypeIfAny:function(t,e){if(null!=t){for(var n=[],i=0,r=t.length;i<r;){var s=i++;t[s].type==e&&n.push(t[s])}return 0==n.length?null:n}return null},get_meleeCustomProfs:function(){return this.getProfsOfTypeIfAny(this.customProfs,0)},get_rangedCustomProfs:function(){return this.getProfsOfTypeIfAny(this.customProfs,1)},get_curMeleeCustomProfs:function(){return null!=this.weapon.profsCustom?this.getProfsOfTypeIfAny(this.weapon.profsCustom.list,0):null},get_curRangedCustomProfs:function(){return null!=this.weapon.profsCustom?this.getProfsOfTypeIfAny(this.weapon.profsCustom.list,1):null},Data:function(){return new Hr},Template:function(){return'<div style="vertical-align:top" class="widget-prof">\r\n\t<div style="width:50%;display:block;float:left">\r\n\t\t<div :class="{columner:gotCustomColumn}">\r\n\t\t\t<div><label><input type="radio" :checked="!ranged" v-on:click="ranged=false"></input><b>Melee:</b></label></div>\r\n\t\t\t<div v-for="(li,i) in meleeProfs" :key="i" class="listitem" :class="{disabled:ranged}">\r\n\t\t\t\t<label><input type="checkbox" :disabled="ranged" :checked="(shiftIndex(i) & meleeFlags) !=0" v-on:click="checkMelee($event.target,i)"></input>{{li.name}}</label>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div :class="{columner:gotCustomColumn}" v-if="gotCustomColumn && meleeCustomProfs!=null">\r\n\t\t\t<div class="custom-li" v-for="(li, i) in curMeleeCustomProfs">\r\n\t\t\t\t{{ li.name }}\r\n\t\t\t\t<button v-on:click="deleteCustomProf(li)">X</button>\r\n\t\t\t</div>\r\n\t\t\t<select ref="selectCustomMelee" :value="0" number>\r\n\t\t\t\t<option value="0" style="font-style:italics;color:#999999">Add custom...</option>\r\n\t\t\t\t<option v-for="(li, i) in meleeCustomProfs" v-on:click="addCustomProf(false, i)" >{{ li.name }}</option>\r\n\t\t\t</select>\r\n\t\t</div>\r\n\t\t<div class="clear:both" v-if="gotCustomColumn"></div>\r\n\t</div><div style="width:50%;display:block;float:left">\r\n\t\t<div :class="{columner:gotCustomColumn}">\r\n\t\t\t<div v-if="gotCustomColumn && rangedCustomProfs!=null">\r\n\t\t\t\t<div class="custom-li" v-for="(li, i) in curRangedCustomProfs">\r\n\t\t\t\t\t{{ li.name }}\r\n\t\t\t\t\t<button v-on:click="deleteCustomProf(li)">X</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<select ref="selectCustomRanged" :value="0" number>\r\n\t\t\t\t\t<option value="0">Add custom...</option>\r\n\t\t\t\t\t<option v-for="(li, i) in rangedCustomProfs" v-on:click="addCustomProf(false, i)" >{{ li.name }}</option>\r\n\t\t\t\t</select>\r\n\t\t\t</div>\r\n\t\t\t<div><label><input type="radio" :checked="ranged" v-on:click="ranged=true"></input><b>Ranged:</b></label></div>\r\n\t\t\t<div v-for="(li,i) in rangedProfs" :key="i" class="listitem" :class="{disabled:!ranged}">\r\n\t\t\t\t<label><input type="checkbox" :disabled="!ranged" :checked="(shiftIndex(i) & rangedFlags) !=0" v-on:click="checkRanged($event.target,i)"></input>{{li.name}}</label>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div :class="{columner:gotCustomColumn}">\r\n\t\t\t<div v-if="rangedCustomProfs !=null">\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t\t<hr/>\r\n\t\t\t<div class="listitem" :class="{disabled:!ranged}"><label>Is Ammo^<input type="checkbox" v-model="isAmmo"></input></label></div>\r\n\t\t\t<hr/>\r\n\t\t\t<button v-on:click="confirm()" :disabled="confirmBtnDisabled">Confirm<span v-show="showBtnArrows"> &gt;&gt;</span></button>\r\n\t\t</div>\r\n\t\t<div class="clear:both" v-if="gotCustomColumn"></div>\r\n\t</div>\r\n\t<div style="clear:both"></div>\r\n</div>'},shiftIndex:function(t){return 1<<t},checkMelee:function(t,e){t.checked?this.meleeFlags|=1<<e:this.meleeFlags&=~(1<<e)},checkRanged:function(t,e){t.checked?this.rangedFlags|=1<<e:this.rangedFlags&=~(1<<e)},deleteCustomProf:function(t){var e=this.weapon;return null!=e.profsCustom&&e.profsCustom.splicedAgainst(t)},confirm:function(){if(!this.confirmBtnDisabled){var t=this.weapon;this.ranged?(t.isAmmo=this.isAmmo,t.variant=null,this.weaponAssign.holding1H=!1,t.profs=this.rangedFlags,0!=(4&t.profs)&&null==t.crossbow&&(t.crossbow=new gn),0!=(8&t.profs)&&null==t.firearm&&(t.firearm=new _n)):(t.isAmmo=!1,t.profs=this.meleeFlags),t.ranged=this.ranged,null!=this.curWidgetRequest&&(this.curWidgetRequest.index=0,this.curWidgetRequest.type="")}},myBowSlingMask:function(){return 3},get_showBtnArrows:function(){var t=this.weapon.ranged!=this.ranged,e=this.weapon.ranged&&this.weapon.isAmmo!=this.isAmmo,n=!1,i=this.weapon.ranged&&1==this.isAmmo&&this.weapon.isAmmo==this.isAmmo;if(this.ranged){var r=this.rangedFlags;r|=0!=(3&r)?3:0;var s=this.weapon.profs;n=0!=(r^(s|=0!=(3&s)?3:0))}return!!(t||e||n)&&!i},get_confirmBtnDisabled:function(){var t=this.meleeFlags,e=this.rangedFlags;return this.ranged?0==e:0==t},_Init:function(){var t=Or.prototype;this.mounted=t.Mounted,this.data=t.Data,this.template=this.Template(),this.computed={weapon:t.get_weapon,gotCustomColumn:t.get_gotCustomColumn,meleeCustomProfs:t.get_meleeCustomProfs,rangedCustomProfs:t.get_rangedCustomProfs,curMeleeCustomProfs:t.get_curMeleeCustomProfs,curRangedCustomProfs:t.get_curRangedCustomProfs,showBtnArrows:t.get_showBtnArrows,confirmBtnDisabled:t.get_confirmBtnDisabled},this.methods={get_weapon:t.get_weapon,get_gotCustomColumn:t.get_gotCustomColumn,getProfsOfTypeIfAny:t.getProfsOfTypeIfAny,get_meleeCustomProfs:t.get_meleeCustomProfs,get_rangedCustomProfs:t.get_rangedCustomProfs,get_curMeleeCustomProfs:t.get_curMeleeCustomProfs,get_curRangedCustomProfs:t.get_curRangedCustomProfs,shiftIndex:t.shiftIndex,checkMelee:t.checkMelee,checkRanged:t.checkRanged,deleteCustomProf:t.deleteCustomProf,confirm:t.confirm,myBowSlingMask:t.myBowSlingMask,get_showBtnArrows:t.get_showBtnArrows,get_confirmBtnDisabled:t.get_confirmBtnDisabled},this.props={item:{required:!0,type:Object},rangedProfs:{required:!0,type:Array},entryIndex:{required:!1,type:Number},weaponAssign:{required:!0},parentAttr:{required:!1},curWidgetRequest:{required:!1},meleeProfs:{required:!0,type:Array},customWidth:{required:!1,default:!1,type:Boolean},entry:{required:!0},customProfs:{required:!1,type:Array}}},__class__:Or});var Hr=function(){this.isAmmo=!1,this.rangedFlags=0,this.meleeFlags=0,this.ranged=!1};n["troshx.sos.vue.widgets.WProfData"]=Hr,Hr.__name__=["troshx","sos","vue","widgets","WProfData"],Hr.prototype={__class__:Hr};var Vr=function(){B.call(this)};n["troshx.sos.vue.widgets.WSpanTools"]=Vr,Vr.__name__=["troshx","sos","vue","widgets","WSpanTools"],Vr.__super__=B,Vr.prototype=r(B.prototype,{Data:function(){return{list:mn.getDefaultList()}},checkboxHandler:function(t,e,n,i){t.checked?n[i]|=1<<e:n[i]&=~(1<<e)},shiftIndex:function(t){return 1<<t},Template:function(){return'<div>\r\n\t<span v-for="(li, i) in list" :key="i">\r\n\t\t<label style="display:inline-block"><input type="checkbox" :value="shiftIndex(i)" v-on:click="checkboxHandler($event.target, i, item.crossbow, \'spanningTools\')" :checked="(shiftIndex(i)&item.crossbow.spanningTools)!=0"></input>{{li.name}}<span :style="{visibility:(shiftIndex(i)&item.crossbow.spanningTools)!=0 ?\'visible\':\'hidden\'}">[<a href="javascript:;" v-on:click.prevent.stopPropagation="">+</a>]</span></label>\r\n\t</span>\r\n</div>'},_Init:function(){var t=Vr.prototype;this.data=t.Data,this.template=this.Template(),this.methods={checkboxHandler:t.checkboxHandler,shiftIndex:t.shiftIndex},this.props={item:{required:!0,type:Object},entryIndex:{required:!1,type:Number},parentAttr:{required:!1},entry:{required:!0}}},__class__:Vr});var Dr=function(){B.call(this),this.mixins=[Ui.getInstance(),vr.getInstance(),xr.getInstance()]};n["troshx.sos.vue.widgets.WTags"]=Dr,Dr.__name__=["troshx","sos","vue","widgets","WTags"],Dr.__super__=B,Dr.prototype=r(B.prototype,{get_gotVariant:function(){var t=this.weaponAssign,e=!1;if(null!=t){var n=null!=t.weapon.variant,i=t.holding1H;e=!!n&&i}return e},Data:function(){return{meleeSpecialCache:null,missileSpecialCache:null,armorSpecialCache:null,armorBurdinadinCache:null,armorSpecialHitModifierCache:null,customise:null,customMeleeCache:null,customiseArmor:null,restoreOriginal:!1,armorWornWith:null,armorCustomiseNotesCache:null}},Mounted:function(){this.updateWeaponStates(),this.updateArmorStates()},updateArmorStates:function(){var t=this.armor;null!=t&&null==t.customise&&(this.customiseArmor=new nn,this.customiseArmor.original=t)},updateWeaponStates:function(){if(this.firearmAmmoCapable&&null==this.weapon.firearm&&(this.weapon.firearm=new _n),this.crossbowAmmoCapable&&null==this.weapon.crossbow&&(this.weapon.crossbow=new gn),null!=this.weapon){var t=this.weapon;null==t.customise&&(this.customise=new Dn,this.customise.original=t)}},watch_weapon:function(t,e){this.updateWeaponStates()},get_currentCustomise:function(){return null!=this.weapon.customise?this.weapon.customise:this.customise},get_currentArmorCustomise:function(){return null!=this.armor.customise?this.armor.customise:this.customiseArmor},get_isEnteredItem:function(){return null!=this.entryIndex&&this.entryIndex>=0},doRestoreOriginal:function(){var t=this.weapon.customise.original;if(null==t)throw new V("Exception original weapon not found!");this.restoreOriginal=!1,this.entry.weapon=t},doRestoreOriginalArmor:function(){var t=this.armor.customise.original;if(null==t)throw new V("Exception original armor not found!");this.restoreOriginal=!1,this.entry.armor=t},assignWeaponCustomisation:function(){var t=this.weapon;t.customise=null;var e=this.currentCustomise,n=new y;n.serialize(t),(t=new C(n.toString()).unserialize()).customise=e,this.customise=null,this.entry.weapon=t},assignArmorCustomisation:function(){var t=this.armor;t.customise=null;var e=this.currentArmorCustomise,n=new y;n.serialize(t),(t=new C(n.toString()).unserialize()).customise=e,this.customiseArmor=null,this.entry.armor=t},get_armorCrestLabels:function(){var t=[];return t.push("Identifying"),t.push("Intimidating"),t.push("Ruthlessly Fashionable"),t},shiftIndex:function(t){return 1<<t},get_canRegisterCustomisation:function(){return""!=m.trim(this.currentCustomise.name)},get_canRegisterArmorCustomisation:function(){return""!=m.trim(this.currentArmorCustomise.name)},setCustomiseNameInput:function(t){var e=m.trim(t.value);""!=e&&(this.currentCustomise.name=e),t.value=this.currentCustomise.name},setArmorCustomiseNameInput:function(t){var e=m.trim(t.value);""!=e&&(this.armor.customise.name=e),t.value=this.armor.customise.name},withinItemFlagRange:function(t){return 0!=(1<<t&(null!=this.shield?-2:-4))},get_hasStrap:function(){return 0!=(2&this.item.flags)},get_handInteractable:function(){return null==this.entry.held||0==this.entry.held},get_firearmAmmo:function(){return!!this.firearmAmmoCapable&&null!=this.weapon.firearm},get_crossbowAmmo:function(){return!!this.crossbowAmmoCapable&&null!=this.weapon.crossbow},get_firearmAmmoCapable:function(){return!!this.isAmmo&&0!=(8&this.weapon.profs)},get_crossbowAmmoCapable:function(){return!!this.isAmmo&&0!=(4&this.weapon.profs)},get_itemFlags:function(){var t=[];return t.push("Two-Handed"),t.push("Strapped"),t.push("Eye-Corrective"),t.push("Prosthetic"),t},get_armorFlags:function(){var t=[];return t.push("Movable"),t.push("Hard"),t.push("Mail"),t.push("Textile"),t.push("Bulletproof"),t},get_customMeleeFlags:function(){var t=[];return t.push("Custom Hilt"),t.push("Ridiculously Sharp"),t.push("Exquisite Decoration"),t.push("Bizarre Gimmick"),t},get_customMeleeIntVars:function(){var t=[];return t.push("customGrip"),t.push("fineForging"),t.push("integratedPistol"),t},get_customMeleeIntVarLabels:function(){for(var t=this.customMeleeIntVars,e=t.concat([]),n=0,i=t.length;n<i;){var r=n++;e[r]=tn.labelizeCamelCase(t[r])}return e},get_meleeVarNames:function(){return In.getIntVarNames()},get_meleeVarLabels:function(){return tn.labelizeCamelCaseArr(this.meleeVarNames)},get_missileVarNames:function(){return kn.getIntVarNames()},get_missileVarLabels:function(){return tn.labelizeCamelCaseArr(this.missileVarNames)},get_layerCoverageFlags:function(){var t=this.armor;if(null==t)return null;for(var e=this.bodyForArmor,n=[],i=d.fields(t.coverage),r=0,s=i.length;r<s;){var a=i[r++],o=e.hitLocationHash[a];n.push({label:e.hitLocations[o].name,id:e.hitLocations[o].id,value:1<<o,index:o})}return n.sort(Zr(this,this.sortCoverageFlag)),n},get_layerCoverageBits:function(){for(var t=this.layerCoverageFlags,e=0,n=0,i=t.length;n<i;){e|=t[n++].value}return e},get_targetZoneFlags:function(){if(null==this.armor)return null;for(var t=this.bodyForArmor,e=[],n=0,i=t.thrustStartIndex;n<i;){var r=n++,s=t.targetZones[r];e.push({label:""!=s.description?s.description+" to "+s.name:s.name,value:1<<r,index:r,id:"_"+r})}return e},get_targetZoneFlags2:function(){if(null==this.armor)return null;for(var t=this.bodyForArmor,e=[],n=t.thrustStartIndex,i=t.targetZones.length;n<i;){var r=n++,s=t.targetZones[r];e.push({label:""!=s.description?s.description+" to "+s.name:s.name,value:1<<r,index:r,id:"_"+r})}return e},get_modifyAllSwinging:function(){var t=this.armor;if(null==t)return null;var e=this.bodyForArmor;return(t.special.hitModifier.targetZoneMask&e.swingMask)==e.swingMask},get_modifyAllThrusting:function(){var t=this.armor;if(null==t)return null;var e=this.bodyForArmor;return(t.special.hitModifier.targetZoneMask&e.thrustMask)==e.thrustMask},get_swingMask:function(){return null==this.armor?0:this.bodyForArmor.swingMask},get_thrustMask:function(){return null==this.armor?0:this.bodyForArmor.thrustMask},sortCoverageFlag:function(t,e){return t.value<e.value?-1:t.value>e.value?1:0},get_bodyForArmor:function(){return null!=this.armor.special&&null!=this.armor.special.otherBodyType?this.armor.special.otherBodyType:un.getInstance()},get_hitLocationIds:function(){return d.fields(this.bodyForArmor.hitLocationHash)},get_hitLocationDummy:function(){for(var t=this.hitLocationIds,e=this.currentArmorCustomise.hitLocationAllAVModifiers,n={},i=0,r=t.length;i<r;){var s=t[i++];n[s]=null!=e&&null!=e[s]?e[s]:0}return n},crushAVInputHandler:function(t,e){var n=this.currentArmorCustomise,i=0|t.valueAsNumber;if(null==i||isNaN(i))t.valueAsNumber=this.hitLocationDummy[e.id];else if(0!=i)null==n.hitLocationAllAVModifiers&&(n.hitLocationAllAVModifiers={}),Vue.set(n.hitLocationAllAVModifiers,e.id,i);else{if(null==n.hitLocationAllAVModifiers)return;null!=n.hitLocationAllAVModifiers[e.id]&&Vue.delete(n.hitLocationAllAVModifiers,e.id)}},get_handMask:function(){return 3},get_shield:function(){var t=this.item;return D.__instanceof(t,Nn)?t:null},get_isMeleeWeap:function(){if(null!=this.weapon){var t=this.weapon;return!t.ranged&&!t.isAmmo}return!1},get_meleeFlagDisablingMask:function(){return this.entry.attached?65536:0},get_missileFlagDisablingMask:function(){return this.entry.attached?16:0},get_meleeFlags:function(){return In.getFlagVarLabels()},get_missileFlags:function(){return kn.getFlagVarLabels()},get_weapon:function(){var t=this.item;return D.__instanceof(t,on)?t:null},get_weaponSpec:function(){var t=this.gotVariant?this.weaponAssign.weapon.variant:null;return null!=t?t:this.weapon},get_firearm:function(){var t;if(null!=this.weapon){var e=this.weapon,n=0!=(8&e.profs);t=!(!e.ranged||!n||e.isAmmo)&&null!=e.firearm}else t=!1;return t?this.weapon.firearm:null},get_crossbow:function(){var t;if(null!=this.weapon){var e=this.weapon,n=0!=(4&e.profs);t=!(!e.ranged||!n||e.isAmmo)&&null!=e.crossbow}else t=!1;return t?this.weapon.crossbow:null},get_isAmmo:function(){if(null!=this.weapon){var t=this.weapon;return!!t.isAmmo&&t.ranged}return!1},get_armor:function(){var t=this.item;return D.__instanceof(t,en)?t:null},get_isAttachment:function(){if(null!=this.weapon){var t=this.weapon,e=0!=(65536&t.meleeFlags),n=0!=(16&t.missileFlags);return t.ranged?n:e}return!1},onCustomMeleeCheck:function(t){t.checked?this.currentCustomise.melee=null!=this.currentCustomise.melee?this.currentCustomise.melee:null!=this.customMeleeCache?this.customMeleeCache:new qn:(this.customMeleeCache=this.currentCustomise.melee,this.currentCustomise.melee=null)},onArmorCustomiseNotesCheck:function(t){var e=this.armor;t.checked?Object.prototype.hasOwnProperty.call(e.customise,"notes")?e.customise.notes=null!=e.customise.notes?e.customise.notes:null!=this.armorCustomiseNotesCache?this.armorCustomiseNotesCache:[]:Vue.set(e.customise,"notes",[]):(this.armorCustomiseNotesCache=e.customise.notes,e.customise.notes=null)},onArmorBurdinadinCheck:function(t){var e=this.armor;t.checked?e.burdinadin=null!=e.burdinadin?e.burdinadin:null!=this.armorBurdinadinCache?this.armorBurdinadinCache:new pn:(this.armorBurdinadinCache=e.burdinadin,e.burdinadin=null)},onArmorSpecialCheck:function(t){var e=this.armor;t.checked?e.special=null!=e.special?e.special:null!=this.armorSpecialCache?this.armorSpecialCache:new rn:(this.armorSpecialCache=e.special,e.special=null)},onArmorWornWithCheck:function(t){var e=this.armor;if(t.checked){var n=null!=e.special.wornWith?e.special.wornWith:null!=this.armorWornWith?this.armorWornWith:new an;e.special.wornWith=n}else this.armorWornWith=e.special.wornWith,e.special.wornWith=null},onArmorLocationSpecificSpecialCheck:function(t){var e=this.armor;if(t.checked){var n=null!=e.special.hitModifier?e.special.hitModifier:null!=this.armorSpecialHitModifierCache?this.armorSpecialHitModifierCache:new sn;e.special.hitModifier=n}else this.armorSpecialHitModifierCache=e.special.hitModifier,e.special.hitModifier=null},onWeapSpecialCheck:function(t,e){var n=this.weaponSpec;t.checked?e?this.weapon.missileSpecial=null!=this.weapon.missileSpecial?this.weapon.missileSpecial:null!=this.missileSpecialCache?this.missileSpecialCache:new kn:n.meleeSpecial=null!=n.meleeSpecial?n.meleeSpecial:null!=this.meleeSpecialCache?this.meleeSpecialCache:new In:e?(this.missileSpecialCache=this.weapon.missileSpecial,this.weapon.missileSpecial=null):(this.meleeSpecialCache=n.meleeSpecial,n.meleeSpecial=null)},Template:function(){return'<div>\r\n\t<div v-if="firearm">\r\n\t\t-Firearm-\r\n\t\t<br/>\r\n\t\t<span>\r\n\t\t\t<label><input type="checkbox" v-model="firearm.double"></input>Double</label>&nbsp;&nbsp;&nbsp;\r\n\t\t</span>\r\n\t\t<span>\r\n\t\t\t<label><InputInt :obj="firearm" prop="multishot" style="width:40px" /></input>Multishot</label>&nbsp;&nbsp;&nbsp;\r\n\t\t</span>\r\n\t\t<span>\r\n\t\t\t<label><InputInt :obj="firearm" prop="magazine" style="width:40px" />Magazine</label>&nbsp;&nbsp;&nbsp;\r\n\t\t</span>\r\n\t\t<span>\r\n\t\t\t<label><InputInt :obj="firearm" prop="revolver" style="width:40px" />Revolver</label>&nbsp;&nbsp;&nbsp;\r\n\t\t</span>\r\n\t\t<span>\r\n\t\t\t<label><InputInt :obj="firearm" prop="highCaliber" style="width:40px" /></input>High Caliber</label>&nbsp;&nbsp;&nbsp;\r\n\t\t</span>\r\n\t</div>\r\n\t<div>\r\n\t\t-Item:-\r\n\t\t<div>\r\n\t\t\t<label>Cost:</label><br/>\r\n\t\t\t<InputInt :step="1" :min="0" :obj="item" prop="cost" style="width:40%;display:inline-block" /><select number v-model.number="item.costCurrency" style="width:50%;display:inline-block">\r\n\t\t\t\t<option value="0">cp</option>\r\n\t\t\t\t<option value="1">sp</option>\r\n\t\t\t\t<option value="2">gp</option>\r\n\t\t\t</select>\r\n\t\t</div>\r\n\t\t\r\n\t\t<div v-if="!handInteractable">\r\n\t\t\t<i>Unhold items before you can interact with hand-related flags</i>\r\n\t\t</div>\r\n\t\t<div v-for="(li, i) in itemFlags" :key="i" v-if="withinItemFlagRange(i)" >\r\n\t\t\t<label :class="{disabled:!handInteractable && (shiftIndex(i)&handMask)!=0}"><input type="checkbox" :value="shiftIndex(i)" :disabled="!handInteractable && (shiftIndex(i)&handMask)!=0" :checked="(shiftIndex(i)&item.flags)!=0" v-on:click="checkboxHandler($event.target, i, item, \'flags\')" ></input>{{li}}</label>\r\n\t\t</div>\r\n\t\t<hr/>\r\n\t</div>\r\n\t\t\t\r\n\t\r\n\t<div v-if="weapon">\r\n\t\t-{{weapon.ranged ? \'Missile\' : \'Melee\'}} Flags:-\r\n\t\t<div v-if="!weapon.ranged">\r\n\t\t\t<div v-for="(li, i) in meleeFlags" :key="i" style="display:inline-block;margin-right:3px">\r\n\t\t\t\t<label :class="{disabled:(meleeFlagDisablingMask&shiftIndex(i))!=0}"><input type="checkbox" :checked="(shiftIndex(i)&weaponSpec.meleeFlags)!=0" v-on:click="checkboxHandler($event.target, i, weaponSpec, \'meleeFlags\')" :value="shiftIndex(i)" :disabled="(meleeFlagDisablingMask&shiftIndex(i))!=0"></input>{{li}}</label>\r\n\t\t\t</div>\r\n\t\t\t<hr/>\r\n\t\t\t<label><input type="checkbox" v-on:click="onWeapSpecialCheck($event.target, false)" :checked="weaponSpec.meleeSpecial!=null"><i>MeleeSpecial?</i></input></label>\r\n\t\t\t<div v-if="weaponSpec.meleeSpecial">\r\n\t\t\t\t<div v-for="(li, i) in meleeVarLabels" :key="i">\r\n\t\t\t\t\t<label style="width:50%; float:left;display:block;">{{ li }}: </label><InputInt style="width:50%;float:left;display:block;max-width:40px" :min="0" :obj="weaponSpec.meleeSpecial" :prop="meleeVarNames[i]" />\r\n\t\t\t\t\t<div style="clear:both"></div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<hr/>\r\n\t\t</div>\r\n\t\t<div v-if="weapon.ranged">\r\n\t\t\t<div v-for="(li, i) in missileFlags" :key="i"  style="display:inline-block;margin-right:3px">\r\n\t\t\t\t<label class="{disabled:(missileFlagDisablingMask&shiftIndex(i))!=0}"><input type="checkbox" :checked="(shiftIndex(i)&item.missileFlags)!=0"  v-on:click="checkboxHandler($event.target, i, item, \'missileFlags\')" :value="shiftIndex(i)"  :disabled="(missileFlagDisablingMask&shiftIndex(i))!=0"></input>{{li}}</label>\r\n\t\t\t</div>\r\n\t\t\t<hr/>\r\n\t\t\t<label><input type="checkbox" v-on:click="onWeapSpecialCheck($event.target, true)" :checked="weapon.missileSpecial!=null"><i>MissileSpecial?</i></input></label>\r\n\t\t\t<div v-if="item.missileSpecial">\r\n\t\t\t\t<div v-for="(li, i) in missileVarLabels" :key="i">\r\n\t\t\t\t\t<label style="width:50%; float:left;display:block;">{{ li }}: </label><InputInt style="width:50%;float:left;display:block;max-width:40px" :min="0" :obj="item.missileSpecial" :prop="missileVarNames[i]" />\r\n\t\t\t\t\t<div style="clear:both"></div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<hr/>\r\n\t</div>\r\n\t<div v-if="shield">\r\n\t\t<div v-show="hasStrap">\r\n\t\t\t<label>Shield Strap: </label><select number v-model.number="shield.strapType" style="width:auto">\r\n\t\t\t\t<option value="0">Arm</option>\r\n\t\t\t\t<option value="1">Shoulder</option>\r\n\t\t\t</select>\r\n\t\t</div>\r\n\t\t<hr/>\r\n\t</div>\r\n\t\t\t\t\t\r\n\t<div v-if="isAmmo">\r\n\t\t<div v-if="firearmAmmo">\r\n\t\t\t-Firearm Ammo Modifiers-\r\n\t\t\t<div>\r\n\t\t\t\t<label><InputInt :obj="weapon.firearm" prop="load" />Load</label>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div v-if="crossbowAmmo">\r\n\t\t\t-Crossbow Ammo Modifiers-\r\n\t\t\t<div>\r\n\t\t\t\t<label><InputInt :obj="weapon.crossbow" prop="span" />Span</label>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<hr/>\r\n\t</div>\r\n\t\t\t\t\t\r\n\t<div v-if="weapon!=null && currentCustomise!=null">\r\n\t\t<div v-if="!isEnteredItem">\r\n\t\t\t<div>-Weapon Personalisation?-</div>\r\n\t\t\t<i>Have current item inserted into list first before being able to register a new customisation.</i>\r\n\t\t</div>\r\n\t\t<div v-else>\r\n\t\t\t<div>-Weapon Personalisation-</div>\r\n\t\t\t\r\n\t\t\t<div v-if="customise != null">\r\n\t\t\t\t<label>Customisation Name:</label><input type="text" v-model="currentCustomise.name"></input>\r\n\t\t\t</div>\r\n\t\t\t<div v-else>\r\n\t\t\t\t<label>Name:</label><input type="text" v-on:blur="setCustomiseNameInput($event.target)" :value="currentCustomise.name"></input>\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t\t<div v-if="isMeleeWeap">\r\n\t\t\t\t<div>-Melee Customisations</div>\r\n\t\t\t\t<div v-for="(li, i) in customMeleeFlags" :key="i"  style="display:inline-block;margin-right:3px">\r\n\t\t\t\t\t<label><input type="checkbox" :checked="(shiftIndex(i)&currentCustomise.meleeFlags)!=0"  v-on:click="checkboxHandler($event.target, i, currentCustomise, \'meleeFlags\')" :value="shiftIndex(i)"></input>{{li}}</label>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div v-if="customise != null || currentCustomise.melee == null"><label><input type="checkbox" v-on:click="onCustomMeleeCheck($event.target)" :checked="currentCustomise.melee!=null"><i>more...</i></input></label></div>\t\r\n\t\t\t\t\t\r\n\t\t\t\t<div v-if="currentCustomise.melee != null">\r\n\t\t\t\t\t<div v-for="(li, i) in customMeleeIntVarLabels" :key="i">\r\n\t\t\t\t\t\t<label style="width:50%; float:left;display:block;">{{ li }}: </label><InputInt style="width:50%;float:left;display:block;max-width:40px" :min="0" :obj="currentCustomise.melee" :prop="customMeleeIntVars[i]" />\r\n\t\t\t\t\t\t<div style="clear:both"></div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div v-show="currentCustomise.melee.integratedPistol >=1">\r\n\t\t\t\t\t\t<div>Integrated Pistol: {{ currentCustomise.melee.integratedPistol == 1 ? "Pistol" : "Dragon" }}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div v-show="currentCustomise.hasBizarreGimmick()">\r\n\t\t\t\t\t\t<label style="display:block;">Bizaare Gimmick: </label><input style="display:block;width:90%"  v-model="currentCustomise.melee.bizarreGimmickDesc"></input>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div v-show="currentCustomise.hasExquisiteDecoration()">\r\n\t\t\t\t\t\t<label style="display:block;">Exquisite Decoration: </label><input style="display:block;width:90%"  v-model="currentCustomise.melee.exquisiteDecorDesc"></input>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div v-show="currentCustomise.isRidiculouslySharp()">\r\n\t\t\t\t\t\t<label>Sharpened?</label>\r\n\t\t\t\t\t\t<input type="checkbox" v-model="currentCustomise.melee.sharpened"></input>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t\t<div v-if="customise != null">\r\n\t\t\t\t<button v-on:click="assignWeaponCustomisation()" :disabled="!canRegisterCustomisation">Register Customisation &gt;&gt;</button>\r\n\t\t\t</div>\t\r\n\t\t\t<div v-else>\r\n\t\t\t\t<i>Weapon has been customised.</i>\r\n\t\t\t\r\n\t\t\t\t<br/>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<label><i>Restore original?</i></label><input type="checkbox" v-model="restoreOriginal"></input><br/><br/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div v-if="restoreOriginal" >\r\n\t\t\t\t\t<button v-on:click="doRestoreOriginal()">Confirm Restore Original</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<hr/>\r\n\t</div>\r\n\t\t\t\t\t\t\r\n\t<div v-if="armor!=null">\r\n\t\t<div>-Headgear-related:-</div>\r\n\t\t<div><label>Perception Penalty (PP): <InputInt :obj="item" :min="0" prop="pp" /></label></div>\r\n\t\t<hr/>\r\n\t\t<div>-Armor Flags:-</div>\r\n\t\t<div v-for="(li, i) in armorFlags" :key="i" style="display:inline-block;margin-right:3px">\r\n\t\t\t<label><input type="checkbox" :checked="(shiftIndex(i)&item.specialFlags)!=0" v-on:click="checkboxHandler($event.target, i, item, \'specialFlags\')" :value="shiftIndex(i)"></input>{{li}}</label>\r\n\t\t</div>\r\n\t\t<hr/>\r\n\t\t<div><label><input type="checkbox" v-on:click="onArmorSpecialCheck($event.target)" :checked="item.special!=null"></input><i>ArmorSpecial?</i></label></div>\r\n\t\t<div v-if="item.special">\r\n\t\t\t<div><label>Layer: <InputInt :obj="item.special" prop="layer" :min="0"  /></label></div>\r\n\t\t\t<div v-if="item.special.layer > 0 && layerCoverageFlags.length > 0">\r\n\t\t\t\t<label>Layer coverages: <i>(leave blank for all)</i> {{layerCoverageBits}}</label>\r\n\t\t\t\t<div><label  v-for="li in layerCoverageFlags" :key="li.value"><input type="checkbox" v-on:click="checkboxHandler($event.target, li.index, item.special, \'layerCoverage\')" :checked="(li.value&item.special.layerCoverage)!=0"></input>{{li.index+1}}:{{li.label}}</label></div>\r\n\t\t\t</div>\r\n\t\t\t<div><label>Restricts breathing: <InputInt :obj="item.special" prop="restrictsBreathing" :min="0" /></label></div>\r\n\t\t\t<br/>\r\n\t\t\t<div><label><input type="checkbox" v-on:click="onArmorWornWithCheck($event.target)" :checked="item.special.wornWith!=null"></input>Worn With modifer?</label></div>\r\n\t\t\t<div v-if="item.special.wornWith!=null">\r\n\t\t\t\t<div><label>Other Armor Name: <input type="text" v-model="item.special.wornWith.name"></input></label></div>\r\n\t\t\t\t<div>Layer: <i>("0" for AV Self, "-1" for AV Other)</i></div>\r\n\t\t\t\t<div><label>Layer: <InputInt :min="-1" :obj="item.special.wornWith" prop="layer" /></label></div>\r\n\t\t\t</div>\r\n\t\t\t<div><label><input type="checkbox" v-on:click="onArmorLocationSpecificSpecialCheck($event.target)" :checked="item.special.hitModifier!=null"></input>Location/Zone-specific modifier?<i v-show="item.special.hitModifier != null"> Provides...</i></label></div>\r\n\t\t\t<div v-if="item.special.hitModifier!=null">\r\n\t\t\t\t<div><label>Multiplied of AV: <InputNumber :step="0.5" :min="0" :obj="item.special.hitModifier" prop="multiplyAV" /></label></div>\r\n\t\t\t\t<div><label>Added/Subtracted AV: <InputInt :obj="item.special.hitModifier" prop="addAV" /></label></div>\r\n\t\t\t\t<div><label :class="{active:item.special.hitModifier.locationMask!=0}"><b>Hit Locations:</b> </label>{{layerCoverageFlags.length!=0 ? "" : " - "}}<label v-for="li in layerCoverageFlags" :key="li.id"><input type="checkbox" v-on:click="checkboxHandler($event.target, li.index, item.special.hitModifier, \'locationMask\')" :checked="(li.value&item.special.hitModifier.locationMask)!=0"></input>{{li.index+1}}:{{li.label}}</label></div>\r\n\t\t\t\t<div><label :class="{active:item.special.hitModifier.targetZoneMask!=0}"><b>Target Zones:</b> </label></div>\r\n\t\t\t\t<div class="label" :class="{active:modifyAllSwinging}"><label></label>Swinging Target Zones: <label><i>All?</i><input type="checkbox"  v-on:click="checkboxMaskHandler($event.target, swingMask, item.special.hitModifier, \'targetZoneMask\')" :checked="modifyAllSwinging"></input></label></div>\r\n\t\t\t\t<div><label v-for="li in targetZoneFlags" :key="li.id"><input type="checkbox" v-on:click="checkboxHandler($event.target, li.index, item.special.hitModifier, \'targetZoneMask\')" :checked="(li.value&item.special.hitModifier.targetZoneMask)!=0"></input>{{li.index+1}}:{{li.label}}</label></div>\r\n\t\t\t\t<div class="label" :class="{active:modifyAllThrusting}">Thrusting Target Zones: <label><i>All?</i><input type="checkbox" v-on:click="checkboxMaskHandler($event.target, thrustMask, item.special.hitModifier, \'targetZoneMask\')" :checked="modifyAllThrusting"></input></label></div>\r\n\t\t\t\t<div><label v-for="li in targetZoneFlags2" :key="li.id"><input type="checkbox" v-on:click="checkboxHandler($event.target, li.index, item.special.hitModifier, \'targetZoneMask\')" :checked="(li.value&item.special.hitModifier.targetZoneMask)!=0"></input>{{li.index+1}}:{{li.label}}</label></div>\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\r\n\r\n\t\t</div>\r\n\t\t<hr/>\t\r\n\t\t<div><label><input type="checkbox" v-on:click="onArmorBurdinadinCheck($event.target)" :checked="item.burdinadin!=null"></input><i>Burdinadin?</i></label></div>\r\n\t\t<div v-if="item.burdinadin">\r\n\t\t\t<div><label>Insulation: <InputInt :obj="item.burdinadin" prop="insulation" :min="0"  /></label><span v-if="item.customise !=null && item.customise.original!=null && item.customise.original.burdinadin != null && item.customise.original.burdinadin.insulation != item.burdinadin.insulation">&nbsp;({{(item.customise.original.burdinadin.insulation)}})</span></div>\r\n\t\t\t<div><label>Augmentations: <InputInt :obj="item.burdinadin" prop="augmentations" :min="0"  /></label></div>\r\n\t\t</div>\r\n\t\t<hr/>\r\n\t\t<div v-if="currentArmorCustomise!=null">\r\n\t\t\t<div v-if="!isEnteredItem">\r\n\t\t\t\t<div>-Armor State/Customisation-</div>\r\n\t\t\t\t<i>Have current item inserted into list first before being able to register a new customisation.</i>\r\n\t\t\t</div>\r\n\t\t\t<div v-else>\r\n\t\t\t\t<div>-Armor State/Customisation-</div>\r\n\t\t\t\t<div v-if="customiseArmor != null">\r\n\t\t\t\t\t<label>State/Customisation Name:</label><input type="text" v-model="currentArmorCustomise.name"></input>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div v-else>\r\n\t\t\t\t\t<label>Name:</label><input type="text" v-on:blur="setArmorCustomiseNameInput($event.target)" :value="currentArmorCustomise.name"></input>\t\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t\t<div v-if="isEnteredItem">\r\n\t\t\t\t<div><label>Crest: <select number v-model.number="currentArmorCustomise.crest"><option :value="0"></option><option v-for="(li,i) in armorCrestLabels" :key="i+1" :value="i+1">{{li}}</option></select></label></div>\r\n\t\t\t\t<div v-if="layerCoverageFlags.length!=0"><label><i>Reduced/Crushed AVs:</i></label></div>\r\n\t\t\t\t<div><label  v-for="li in layerCoverageFlags" :key="li.id"><InputInt v-on:input.native="crushAVInputHandler($event.target, li)" :max="0" :obj="hitLocationDummy" :prop="li.id" /> {{li.index+1}}:{{li.label}}</label></div>\r\n\t\t\t\t<div v-if="customiseArmor != null">\t\t\r\n\t\t\t\t\t<button v-on:click="assignArmorCustomisation()" :disabled="!canRegisterArmorCustomisation">Register Customisation &gt;&gt;</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div v-else>\t\r\n\t\t\t\t\t<i>Armor has been altered.</i>\r\n\t\t\t\t\t<div v-if="item.customise!=null">\r\n\t\t\t\t\t\t<div><label><input type="checkbox" :disabled="item.customise.notes!=null && item.customise.notes.length > 0" :checked="item.customise.notes!=null" v-on:click="onArmorCustomiseNotesCheck($event.target)"></input><i>Notes?</i></label></div>\r\n\t\t\t\t\t\t<div v-if="item.customise.notes!=null">\r\n\t\t\t\t\t\t\t<hr/>\r\n\t\t\t\t\t\t\t<ArrayOf :obj="item.customise" of="String" prop="notes" defaultValue="\'\'"></ArrayOf>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<br/>\t\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<label><i>Restore original?</i></label><input type="checkbox" v-model="restoreOriginal"></input><br/><br/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div v-if="restoreOriginal" >\r\n\t\t\t\t\t\t<button v-on:click="doRestoreOriginalArmor()">Confirm Restore Original</button>\r\n\t\t\t\t\t</div>\t\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t\t\r\n\t\t</div>\r\n\t\t\t\t\r\n\t\t<hr/>\r\n\t\t\t\r\n\t</div>\r\n</div>'},checkboxHandler:function(t,e,n,i){t.checked?n[i]|=1<<e:n[i]&=~(1<<e)},checkboxMaskHandler:function(t,e,n,i){t.checked?n[i]|=e:n[i]&=~e},_Init:function(){var t=Dr.prototype;this.data=t.Data,this.mounted=t.Mounted,this.template=this.Template(),this.computed={gotVariant:t.get_gotVariant,currentCustomise:t.get_currentCustomise,currentArmorCustomise:t.get_currentArmorCustomise,isEnteredItem:t.get_isEnteredItem,armorCrestLabels:t.get_armorCrestLabels,canRegisterCustomisation:t.get_canRegisterCustomisation,canRegisterArmorCustomisation:t.get_canRegisterArmorCustomisation,hasStrap:t.get_hasStrap,handInteractable:t.get_handInteractable,firearmAmmo:t.get_firearmAmmo,crossbowAmmo:t.get_crossbowAmmo,firearmAmmoCapable:t.get_firearmAmmoCapable,crossbowAmmoCapable:t.get_crossbowAmmoCapable,itemFlags:t.get_itemFlags,armorFlags:t.get_armorFlags,customMeleeFlags:t.get_customMeleeFlags,customMeleeIntVars:t.get_customMeleeIntVars,customMeleeIntVarLabels:t.get_customMeleeIntVarLabels,meleeVarNames:t.get_meleeVarNames,meleeVarLabels:t.get_meleeVarLabels,missileVarNames:t.get_missileVarNames,missileVarLabels:t.get_missileVarLabels,layerCoverageFlags:t.get_layerCoverageFlags,layerCoverageBits:t.get_layerCoverageBits,targetZoneFlags:t.get_targetZoneFlags,targetZoneFlags2:t.get_targetZoneFlags2,modifyAllSwinging:t.get_modifyAllSwinging,modifyAllThrusting:t.get_modifyAllThrusting,swingMask:t.get_swingMask,thrustMask:t.get_thrustMask,bodyForArmor:t.get_bodyForArmor,hitLocationIds:t.get_hitLocationIds,hitLocationDummy:t.get_hitLocationDummy,handMask:t.get_handMask,shield:t.get_shield,isMeleeWeap:t.get_isMeleeWeap,meleeFlagDisablingMask:t.get_meleeFlagDisablingMask,missileFlagDisablingMask:t.get_missileFlagDisablingMask,meleeFlags:t.get_meleeFlags,missileFlags:t.get_missileFlags,weapon:t.get_weapon,weaponSpec:t.get_weaponSpec,firearm:t.get_firearm,crossbow:t.get_crossbow,isAmmo:t.get_isAmmo,armor:t.get_armor,isAttachment:t.get_isAttachment},this.methods={get_gotVariant:t.get_gotVariant,updateArmorStates:t.updateArmorStates,updateWeaponStates:t.updateWeaponStates,watch_weapon:t.watch_weapon,get_currentCustomise:t.get_currentCustomise,get_currentArmorCustomise:t.get_currentArmorCustomise,get_isEnteredItem:t.get_isEnteredItem,doRestoreOriginal:t.doRestoreOriginal,doRestoreOriginalArmor:t.doRestoreOriginalArmor,assignWeaponCustomisation:t.assignWeaponCustomisation,assignArmorCustomisation:t.assignArmorCustomisation,get_armorCrestLabels:t.get_armorCrestLabels,shiftIndex:t.shiftIndex,get_canRegisterCustomisation:t.get_canRegisterCustomisation,get_canRegisterArmorCustomisation:t.get_canRegisterArmorCustomisation,setCustomiseNameInput:t.setCustomiseNameInput,setArmorCustomiseNameInput:t.setArmorCustomiseNameInput,withinItemFlagRange:t.withinItemFlagRange,get_hasStrap:t.get_hasStrap,get_handInteractable:t.get_handInteractable,get_firearmAmmo:t.get_firearmAmmo,get_crossbowAmmo:t.get_crossbowAmmo,get_firearmAmmoCapable:t.get_firearmAmmoCapable,get_crossbowAmmoCapable:t.get_crossbowAmmoCapable,get_itemFlags:t.get_itemFlags,get_armorFlags:t.get_armorFlags,get_customMeleeFlags:t.get_customMeleeFlags,get_customMeleeIntVars:t.get_customMeleeIntVars,get_customMeleeIntVarLabels:t.get_customMeleeIntVarLabels,get_meleeVarNames:t.get_meleeVarNames,get_meleeVarLabels:t.get_meleeVarLabels,get_missileVarNames:t.get_missileVarNames,get_missileVarLabels:t.get_missileVarLabels,get_layerCoverageFlags:t.get_layerCoverageFlags,get_layerCoverageBits:t.get_layerCoverageBits,get_targetZoneFlags:t.get_targetZoneFlags,get_targetZoneFlags2:t.get_targetZoneFlags2,get_modifyAllSwinging:t.get_modifyAllSwinging,get_modifyAllThrusting:t.get_modifyAllThrusting,get_swingMask:t.get_swingMask,get_thrustMask:t.get_thrustMask,sortCoverageFlag:t.sortCoverageFlag,get_bodyForArmor:t.get_bodyForArmor,get_hitLocationIds:t.get_hitLocationIds,get_hitLocationDummy:t.get_hitLocationDummy,crushAVInputHandler:t.crushAVInputHandler,get_handMask:t.get_handMask,get_shield:t.get_shield,get_isMeleeWeap:t.get_isMeleeWeap,get_meleeFlagDisablingMask:t.get_meleeFlagDisablingMask,get_missileFlagDisablingMask:t.get_missileFlagDisablingMask,get_meleeFlags:t.get_meleeFlags,get_missileFlags:t.get_missileFlags,get_weapon:t.get_weapon,get_weaponSpec:t.get_weaponSpec,get_firearm:t.get_firearm,get_crossbow:t.get_crossbow,get_isAmmo:t.get_isAmmo,get_armor:t.get_armor,get_isAttachment:t.get_isAttachment,onCustomMeleeCheck:t.onCustomMeleeCheck,onArmorCustomiseNotesCheck:t.onArmorCustomiseNotesCheck,onArmorBurdinadinCheck:t.onArmorBurdinadinCheck,onArmorSpecialCheck:t.onArmorSpecialCheck,onArmorWornWithCheck:t.onArmorWornWithCheck,onArmorLocationSpecificSpecialCheck:t.onArmorLocationSpecificSpecialCheck,onWeapSpecialCheck:t.onWeapSpecialCheck,checkboxHandler:t.checkboxHandler,checkboxMaskHandler:t.checkboxMaskHandler},this.props={item:{required:!0,type:Object},entryIndex:{required:!1,type:Number},weaponAssign:{required:!1},parentAttr:{required:!1},entry:{required:!0}},this.watch={weapon:t.watch_weapon}},__class__:Dr});var qr=function(){};n["troshx.util.DiceRoller"]=qr,qr.__name__=["troshx","util","DiceRoller"],qr.getRollNumSuccesses=function(t,e){var n;qr.NUM_ONES=0;for(var i=t,r=0,s=0;--i>-1;)1==(n=1+(10*Math.random()|0))&&qr.NUM_ONES++,r+=n>=e?1:0,s+=e>10&&10==n?1:0;if(s>0)for(i=s;--i>-1;)r+=(n=1+(10*Math.random()|0))>=e-10?1:0;return qr.LAST_ROLL_SUCCESSES=r,r},qr.makeChallengeRoll=function(t,e,n){var i=qr.getRollNumSuccesses(t,e);return i>=n?i-n:qr.NUM_ONES>=(t>1?2:1)?-2:-1},qr.makeIndividualRoll=function(t,e,n){n=null!=n?n:{successes:0,mayBotch:!1};var i=qr.getRollNumSuccesses(t,e);return n.successes=i,n.mayBotch=qr.NUM_ONES>=(t>1?2:1),n};var jr=function(){};n["troshx.util.LibUtil"]=jr,jr.__name__=["troshx","util","LibUtil"],jr.validInt=function(t){return null!=t&&!isNaN(t)},jr.as=function(t,e){return D.__instanceof(t,e)?t:null},jr.asNoInline=function(t,e){return D.__instanceof(t,e)?t:null},jr.tryParseFloat=function(t){return parseFloat(t)},jr.tryParseInt=function(t){return p.parseInt(t)},jr.sortAlphabetically=function(t,e){return(t=t.toLowerCase())<(e=e.toLowerCase())?-1:t>e?1:0},jr.setArrayLength=function(t,e){t.splice(e,t.length-e)},jr.field=function(t,e){return t[e]},jr.setField=function(t,e,n){t[e]=n},jr.override2ndObjInto=function(t,e){for(var n=0,i=d.fields(e);n<i.length;){var r=i[n];++n,t[r]=e[r]}return t},jr.setFieldChain=function(t,e,n){return t[e]=n,n},jr.arrayToList=function(t){for(var e=new l,n=0;n<t.length;){var i=t[n];++n,e.add(i)}return e},jr.getArrayItemAtIndex=function(t,e){return t[e]},jr.getListItemAtIndex=function(t,e){if(e<0||e>=t.length)return null;for(var n=t.h,i=0,r=e;i<r;){i++,n.item;n=n.next}var s=n.item;return n=n.next,s},jr.clearArray=function(t){t.length=0},jr.truncateArray=function(t,e){t.length=e},jr.findForList=function(t,e){for(var n=t.h;null!=n;){var i=n.item;n=n.next;var r=i;if(e(r))return r}return null},jr.minI=function(t,e){return t<e?t:e},jr.maxI=function(t,e){return t>=e?t:e},jr.minI_=function(t,e){return t<e?t:e},jr.maxI_=function(t,e){return t>=e?t:e},jr.removeArrayItemAtIndex=function(t,e){t.splice(e,1)},jr.toFixed=function(t,e){return t.toFixed(e)},jr.getURLQueryStringParams=function(t){for(var e=t.split("?").pop(),n={},i=0,r=new s("[&;]","g").split(e);i<r.length;){var a=r[i];++i;var o=a.split("=");if(!(o.length<2)){var l=o.shift(),u=decodeURIComponent(l.split("+").join(" ")),c=o.join("=");n[u]=decodeURIComponent(c.split("+").join(" "))}}return n};var Gr=t.troshx.util.TROSAI=function(){};n["troshx.util.TROSAI"]=Gr,Gr.__name__=["troshx","util","TROSAI"],Gr.factorial=function(t){0==t&&(t=1);for(var e=t;--e>1;)t*=e;return t},Gr.binomialCoef=function(t,e){if(e>0){var n=t;0==n&&(n=1);for(var i=n;--i>1;)n*=i;var r=n,s=e;0==s&&(s=1);for(var a=s;--a>1;)s*=a;var o=s,l=t-e;0==l&&(l=1);for(var u=l;--u>1;)l*=u;return r/(o*l)}return 1},Gr.getTNSuccessProbForDie=function(t){return t<11?(10-t+1)/10:(1-(t-10*Math.floor(t/10))/10)*Math.pow(.1,Math.floor(t/10))},Gr.getXSuccessesProb=function(t,e,n){var i,r=e<11?(10-e+1)/10:(1-(e-10*Math.floor(e/10))/10)*Math.pow(.1,Math.floor(e/10));if(n>0){var s=t;0==s&&(s=1);for(var a=s;--a>1;)s*=a;var o=s,l=n;0==l&&(l=1);for(var u=l;--u>1;)l*=u;var c=l,h=t-n;0==h&&(h=1);for(var d=h;--d>1;)h*=d;i=o/(c*h)}else i=1;return i*Math.pow(r,n)*Math.pow(1-r,t-n)},Gr.getAtLeastXSuccessesProb=function(t,e,n){for(var i=0;n<=t;){var r,s=e<11?(10-e+1)/10:(1-(e-10*Math.floor(e/10))/10)*Math.pow(.1,Math.floor(e/10));if(n>0){var a=t;0==a&&(a=1);for(var o=a;--o>1;)a*=o;var l=a,u=n;0==u&&(u=1);for(var c=u;--c>1;)u*=c;var h=u,d=t-n;0==d&&(d=1);for(var p=d;--p>1;)d*=p;r=l/(h*d)}else r=1;i+=r*Math.pow(s,n)*Math.pow(1-s,t-n),++n}return i>1&&(i=1),i},Gr.probabilityAOrB=function(t,e){return t+e-t*e},Gr.probabilityOfArrayOr=function(t){var e=0;if(0==t.length)return 0;e=t[0];for(var n=1,i=t.length;n<i;){var r=t[n++];e=e+r-e*r}return e},Gr.getBelowOrEqualXSuccessesProb=function(t,e,n){for(var i=0;n>=0;){var r,s=e<11?(10-e+1)/10:(1-(e-10*Math.floor(e/10))/10)*Math.pow(.1,Math.floor(e/10));if(n>0){var a=t;0==a&&(a=1);for(var o=a;--o>1;)a*=o;var l=a,u=n;0==u&&(u=1);for(var c=u;--c>1;)u*=c;var h=u,d=t-n;0==d&&(d=1);for(var p=d;--p>1;)d*=p;r=l/(h*d)}else r=1;i+=r*Math.pow(s,n)*Math.pow(1-s,t-n),--n}return i>1&&(i=1),i},Gr.getChanceToSucceedContest=function(t,e,n,i,r,s){if(null==s&&(s=!0),null==r&&(r=1),r>t)return 0;for(var a=s&&r<1?1:r,o=0;a<=t;){var l=a-r;for(l>n&&(l=n);l>=0;){var u,c=e<11?(10-e+1)/10:(1-(e-10*Math.floor(e/10))/10)*Math.pow(.1,Math.floor(e/10));if(a>0){var h=t;0==h&&(h=1);for(var d=h;--d>1;)h*=d;var p=h,g=a;0==g&&(g=1);for(var m=g;--m>1;)g*=m;var f=g,_=t-a;0==_&&(_=1);for(var v=_;--v>1;)_*=v;u=p/(f*_)}else u=1;var b,y=u*Math.pow(c,a)*Math.pow(1-c,t-a),w=i<11?(10-i+1)/10:(1-(i-10*Math.floor(i/10))/10)*Math.pow(.1,Math.floor(i/10));if(l>0){var S=n;0==S&&(S=1);for(var C=S;--C>1;)S*=C;var A=S,x=l;0==x&&(x=1);for(var I=x;--I>1;)x*=I;var k=x,T=n-l;0==T&&(T=1);for(var L=T;--L>1;)T*=L;b=A/(k*T)}else b=1;o+=y*(b*Math.pow(w,l)*Math.pow(1-w,n-l)),--l}++a}return o},Gr.getChanceToSucceed=function(t,e,n){return null==n&&(n=1),n>t?0:Gr.getAtLeastXSuccessesProb(t,e,n)},Gr.getAllXSuccessesProb=function(t,e){for(var n=[],i=0,r=t+1;i<r;){var s,a=i++,o=e<11?(10-e+1)/10:(1-(e-10*Math.floor(e/10))/10)*Math.pow(.1,Math.floor(e/10));if(a>0){var l=t;0==l&&(l=1);for(var u=l;--u>1;)l*=u;var c=l,h=a;0==h&&(h=1);for(var d=h;--d>1;)h*=d;var p=h,g=t-a;0==g&&(g=1);for(var m=g;--m>1;)g*=m;s=c/(p*g)}else s=1;n.push(s*Math.pow(o,a)*Math.pow(1-o,t-a))}return n},Gr.getTabulatedRollData=function(t,e){for(var n=[],i=0,r=t;r>=0;){var s,a=e<11?(10-e+1)/10:(1-(e-10*Math.floor(e/10))/10)*Math.pow(.1,Math.floor(e/10));if(r>0){var o=t;0==o&&(o=1);for(var l=o;--l>1;)o*=l;var u=o,c=r;0==c&&(c=1);for(var h=c;--h>1;)c*=h;var d=c,p=t-r;0==p&&(p=1);for(var g=p;--g>1;)p*=g;s=u/(d*p)}else s=1;var m=s*Math.pow(a,r)*Math.pow(1-a,t-r);i+=m,n.push({x:r,gte:i,eq:m}),--r}n.reverse();for(var f=0,_=n.length-1;f<_;){var v=f++;if(n[v+1].eq<=n[v].eq&&(n[v].peak=1,n[v+1].eq!=n[v].eq))break}return n},Gr.maxPrecision=function(t,e){return Gr.roundTo(t,Math.pow(10,-e))},Gr.roundTo=function(t,e){return Math.round(t/e)*e},Gr.displayAsPercentage=function(t){return(t*=100)<1&&t>0?Gr.roundTo(t,Math.pow(10,-2)):Math.floor(t)},Gr.prototype={__class__:Gr};var Ur=t.troshx.util.AIManueverChoice=function(){};function $r(t){return t instanceof Array?function(){return a.iter(t)}:"function"==typeof t.iterator?Zr(t,t.iterator):t.iterator}n["troshx.util.AIManueverChoice"]=Ur,Ur.__name__=["troshx","util","AIManueverChoice"],Ur.prototype={getManueverCPSpent:function(){return this.cost+this.manueverCP},nothing:function(){this.manuever="",this.manueverCP=0,this.targetZone=0,this.manueverType=0,this.offhand=!1,this.againstID=0,this.secondary=null},waitForQuickDefense:function(){this.manuever="",this.manueverCP=0,this.targetZone=0,this.manueverType=0,this.offhand=!1,this.againstID=0,this.secondary=null,this.manuever=Ur.DO_NOTHING_WAIT_FOR_DEFENSE,this.manueverType=1},setupSecondAttack:function(t,e,n,i,r,s){null==s&&(s=!1),null==this.secondary&&(this.secondary=new Ur),this.secondary.setAttack(t,e,n,i,r,s)},setupSecondDefend:function(t,e,n,i,r,s){null==s&&(s=!1),null==this.secondary&&(this.secondary=new Ur),this.secondary.setDefend(t,e,n,r,s)},copyTo:function(t,e){null==e&&(e=-1),t.manuever=this.manuever,t.manueverCP=this.manueverCP,t.targetZone=this.targetZone,t.manueverType=this.manueverType,t.offhand=this.offhand,t.manueverTN=this.manueverTN,t.againstID=e>=0?e:this.againstID},setAttack:function(t,e,n,i,r,s){null==s&&(s=!1),this.manuever=t,this.manueverCP=e,this.targetZone=i,this.offhand=s,this.manueverType=2,this.manueverTN=n,this.cost=r,this.secondary=null},setDefend:function(t,e,n,i,r){null==r&&(r=!1),this.manuever=t,this.manueverCP=e,this.targetZone=0,this.offhand=r,this.manueverType=1,this.manueverTN=n,this.cost=i,this.secondary=null},__class__:Ur};var zr=0;function Zr(t,e){return null==e?null:(null==e.__id__&&(e.__id__=zr++),null==t.hx__closures__?t.hx__closures__={}:n=t.hx__closures__[e.__id__],null==n&&((n=function(){return n.method.apply(n.scope,arguments)}).scope=t,n.method=e,t.hx__closures__[e.__id__]=n),n);var n}n.Math=Math,String.prototype.__class__=n.String=String,String.__name__=["String"],n.Array=Array,Array.__name__=["Array"],Date.prototype.__class__=n.Date=Date,Date.__name__=["Date"];var Qr=n.Int={__name__:["Int"]},Yr=n.Dynamic={__name__:["Dynamic"]},Kr=n.Float=Number;Kr.__name__=["Float"];var Xr=n.Bool=Boolean;Xr.__ename__=["Bool"];var Jr=n.Class={__name__:["Class"]},ts={},es={},ns=e.ArrayBuffer||j;null==ns.prototype.slice&&(ns.prototype.slice=j.sliceImpl);var is=e.Uint8Array||G._new;J.NIL=new J(null,null),y.USE_CACHE=!1,y.USE_ENUM_INDEX=!1,y.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:",C.DEFAULT_RESOLVER=new S,C.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:",I.count=0,R.NAMES=new k,R.SINGLETON_CACHE=new k,W.stack=[],D.__toStr={}.toString,G.BYTES_PER_ELEMENT=1,lt.__GOOD_EYES__BAD_EYES=1,lt.__GOOD_EARS_BAD_EARS=2,lt.__GOOD_EARS_BAD_NOSE=4,lt.__RICH__POOR=8,lt.__TRUE_GRIT_SHELTERED=16,lt.__ROBUST_FRAIL=32,lt.__ONE_EYED=64,lt.__CRAVEN__HONORABLE=128,lt.__HONORABLE__COMPLETE_MONSTER=256,lt.__TALL__SHORT=512,lt.CHARACTER_CREATION_ONLY=1,lt.CANNOT_BE_REMOVED=2,lt.TIMES_INFINITE=-1,lt.TIMES_VARYING=-2,lt.COSTLESS_ARRAY=[0],ct.COST_1=1,ct.COST_2=5,ct.COST_3=10,vt.MAX_BANE_EARNABLE=15,Dt.ALIVE=1,Dt.DEAD=2,Dt.ALIVE_ALIVE=3,_e.LEFT_ARM=1,_e.RIGHT_ARM=2,_e.LEFT_LEG=4,_e.RIGHT_LEG=8,_e.BOTH_LEGS=12,we.LEFT_ARM=1,we.RIGHT_ARM=2,we.LEFT_LEG=4,we.RIGHT_LEG=8,we.BOTH_LEGS=12,we.BOTH_ARMS=3,Ce.CASH_MULTIPLIERS=[1,1.5,2],xe.BONUS_POINTS=10,ke.WEALTH_PER_QTY=2,ke.COST_PER_ESTATE=10,Te.COUNT=0,Me.COST_1=1,Me.COST_2=3,Re.COST=2,Be.POWERFUL=1,Be.GRATING=2,Be.SOOTHING=4,Ne.COST_SINGLE=1,Ne.COST_2=2,Ne.COST_3=3,Fe.COST_MINOR=4,Fe.COST_MAJOR=8,ze.COST_3=18,ze.COST_2=15,ze.COST_1=10,Ze.HAND=131072,Ze.LOWER_ARM=196608,Ze.FULL_ARM=245776,Ze.FOOT=8192,Ze.LOWER_LEG=12288,Ze.FULL_LEG=15360,Ze.LEVEL_1_AREAS=139264,Ze.LEVEL_2_AREAS=208896,Ze.LEVEL_3_AREAS=261136,Xe.INT_MAX=2147483647,Xe.CATEGORY_RACE=0,Xe.CATEGORY_ATTRIBUTES=1,Xe.CATEGORY_BNB=2,Xe.CATEGORY_SKILLS=3,Xe.CATEGORY_SOCIAL_WEALTH=4,Xe.CATEGORY_PROFECIENCIES=5,Xe.ATTRIBUTE_START_MAX=8,Xe.MORTAL_MAX=12,Xe.PCP_COLUMN_ATTRIBUTES=[22,23,24,27,31,35,40,45,50,56],Xe.MAX_PACKET_SKILL_LEVEL=5,tn.UID_COUNT=0,tn.FLAG_TWO_HANDED=1,tn.FLAG_STRAPPED=2,tn.EYE_CORRECTIVE=4,tn.PROSTHETIC=8,tn.MASK_HANDED=3,tn.CP=0,tn.SP=1,tn.GP=2,en.WEAK_SPOT=1,en.HALF=2,en.THRUST_ONLY=4,en.HALF_SYMBOL="*",en.WEAK_SPOT_SYMBOL="ϕ",en.THRUST_ONLY_SYMBOL="t",en.SUPERSCRIPT_MINUS="⁻",en.SUPERSCRIPT_PLUS="⁺",en.SUPERSCRIPT_NUMBERS="⁰¹²³⁴⁵⁶⁷⁸⁹",nn.CREST_IDENTIFYING=1,nn.CREST_INTIMIDATING=2,nn.CREST_RUTHLESSLY_FASHIONABLE=3,rn.MOVABLE=1,rn.HARD=2,rn.MAIL=4,rn.TEXTILE=8,rn.BULLETPROOF=16,an.USE_AV_SELF=0,an.USE_AV_OTHER=-1,on.REACH_HA=1,on.REACH_H=2,on.REACH_S=3,on.REACH_M=4,on.REACH_L=5,on.REACH_VL=6,on.REACH_EL=7,on.REACH_LL=8,ln.BODKIN=0,ln.BARBED_BROADHEAD=1,ln.BLUDGEON_STUN=2,ln.BROADHEAD=3,ln.FIRE_ARROW=4,ln.HEAVY_BROADHEAD=5,ln.LOZENGE_HEAD=6,ln.SWALLOWTAIL=7,hn.SWING_DOWNWARD_HEAD=0,hn.SWING_UPWARD_HEAD=1,hn.SWING_NECK=2,hn.SWING_TORSO=3,hn.SWING_UPPER_ARM=4,hn.SWING_LOWER_ARM=5,hn.SWING_UPPER_LEG=6,hn.SWING_LOWER_LEG=7,hn.SWING_GROIN=8,hn.thrustStartIndex=9,hn.THRUST_HEAD=9,hn.THRUST_NECK=10,hn.THRUST_CHEST=11,hn.THRUST_BELLY=12,hn.THRUST_UPPER_ARM=13,hn.THRUST_LOWER_ARM=14,hn.THRUST_GROIN=15,hn.THRUST_UPPER_LEG=16,hn.THRUST_LOWER_LEG=17,hn.UPPER_HEAD=0,hn.FACE=1,hn.LOWER_HEAD=2,hn.NECK=3,hn.SHOULDER=4,hn.CHEST=5,hn.SIDE=6,hn.BELLY=7,hn.HIP=8,hn.GROIN=9,hn.THIGH=10,hn.KNEE=11,hn.SHIN=12,hn.FOOT=13,hn.UPPER_ARM=14,hn.ELBOW=15,hn.FOREARM=16,hn.HAND=17,hn.rearStartIndex=18,hn.UPPER_BACK=18,hn.LOWER_BACK=19,hn.FULL_HEAD=7,hn.FULL_TORSO=480,hn.FULL_LEG=15360,hn.FULL_ARM=245776,mn.HAND=0,mn.LEVER=1,mn.SCREW=2,mn.STIRRUP=3,mn.WINDLASS=4,mn.WINCH=5,mn.CRANK=6,fn.CUTTING=0,fn.PIERCING=1,fn.BLUDGEONING=2,fn.UNARMED=3,fn.FALLING=4,fn.BURN=5,fn.ELECTRICAL=6,fn.COLD=7,vn.CAPLOCK=0,vn.FIRELOCK=1,vn.FLINTLOCK=2,vn.MATCHLOCK=3,vn.NEEDLEFIRE=4,vn.SNAPLOCK=5,vn.WHEELOCK=6,bn.BALL=0,bn.BUCK_AND_BALL=1,bn.HEAVY_SHOT=2,bn.RIFLE_BALL=3,bn.SHOT=4,bn.SPIKE=5,yn.MANUAL=0,yn.BRASS_CATRIDGE=1,yn.PAPER_CATRIDGE=2,yn.PAPER_MACHE_CATRIDGE=3,Sn.SP_TO_GP=.05,Sn.GP_TO_SP=20,Sn.CP_TO_SP=.08333333333333333,Sn.SP_TO_CP=12,Sn.CP_TO_GP=.004166666666666667,Sn.GP_TO_CP=240,Sn.ZERO=new Sn,Sn.TEMP=new Sn,Cn.HELD_MASTER=1,Cn.HELD_OFF=2,Cn.HELD_BOTH=3,Cn.UNHELD_UNSPECIFIED=0,Cn.UNHELD_SHEATH_HOLSTER=1,Cn.UNHELD_STRAPPED_ARM=2,Cn.UNHELD_STRAPPED_SHOULDER=3,Cn.UNHELD_BACK=4,Cn.UNHELD_CONCEALED=5,Cn.UNHELD_FORCE_DISABLED=6,Cn.PREFER_UNHELD_PACKED=1,Cn.PREFER_UNHELD_DROPPED=2,Cn.PREFER_UNHELD_EQUIPPED=4,Cn.UID_COUNT=0,Cn.MONEY_CALC_CACHE=[0,0,0],Cn.MONEY_REF=new Sn,In.BRACE=1,In.CALVARY_SWORD=2,In.COMPANION_WEAPON=4,In.COUCHED_CHARGE=8,In.FLUID_THRUSTS=16,In.FORWARD_SWEPT=32,In.FREAKISHLY_LARGE=64,In.HAND_OFF=128,In.HEAVY_WEAPON=256,In.HOOK=512,In.LIGHT_BLADE=1024,In.PARRYING_TEETH=2048,In.SWINGING_SLOT=4096,In.THIN_BLADE=8192,In.THRUSTING_SLOT=16384,In.TIGHT_GRIP=32768,In.WEAPON_ATTACHMENT=65536,In.TOTAL_FLAGS=17,kn.BLUDGEON=1,kn.NARROW=2,kn.SHIELD_STICK=4,kn.AP_FIRST_HIT_ONLY=8,kn.CHEAT_ATTACHMENT=16,kn.TOTAL_FLAGS=5,Tn.ATTR_STR=0,Tn.ATTR_AGI=1,Tn.ATTR_END=2,Tn.ATTR_HLT=3,Tn.ATTR_WIL=4,Tn.ATTR_WIT=5,Tn.ATTR_INT=6,Tn.ATTR_PER=7,Tn.CMP_ADR=8,Tn.CMP_MOB=9,Tn.CMP_CAR=10,Tn.CMP_CHA=11,Tn.CMP_TOU=12,Tn.CP=13,Tn.REACH=14,Tn.MP=15,Tn.CAR_END=16,Tn.FATIQUE_END=17,Tn.STARTING_WEALTH=18,Tn.STARTING_MONEY=19,Tn.STARTING_GRIT=20,Tn.TOTAL_SLOTS=21,En.TYPE_MELEE=0,En.TYPE_RANGED=1,En.MASK_ALL=2147483647,En.M_1H_SWORD=0,En.M_1H_BLUNT=1,En.M_2H_BLUNT=2,En.M_2H_SWORD=3,En.M_SPEAR=4,En.M_POLEARM=5,En.M_DAGGER=6,En.M_WRESTLING=7,En.M_PUGILISM=8,En.TOTAL_M=9,En.R_BOW=0,En.R_SLING=1,En.R_CROSSBOW=2,En.R_FIREARM=3,En.R_THROWING=4,En.TOTAL_R=5,En.SEPERATOR="_$_",Rn.MAX_LEVELS=20,Rn.MASTERY_LEVEL=20,Nn.SIZE_SMALL=0,Nn.SIZE_MEDIUM=1,Nn.SIZE_LARGE=2,Nn.STRAP_ARM=0,Nn.STRAP_SHOULDER=1,Nn.POSITION_LOW=0,Nn.POSITION_HIGH=1,Wn.STR=1,Wn.AGI=2,Wn.END=4,Wn.HLT=8,Wn.WIP=16,Wn.WIT=32,Wn.INT=64,Wn.PER=128,Wn.CHA=256,Wn.TRAINED=1,Wn.TEACHER=4,Wn.MASTERY=10,Wn.CHARS_SPECIAL_OPEN=" (",Wn.CHARS_SPECIAL_CLOSE=")",qn.PISTOL=1,qn.DRAGON=2,qn.CUSTOM_HILT=1,qn.RIDICULOUSLY_SHARP=2,qn.EXQUISITE_DECORATION=4,qn.BIZARRE_GIMMICK=8,jn.STAUNCHED=1,jn.TREATED=2,jn.MASK_OPENWOUND=3,jn.UNIQUE_COUNT=0,zn.PCP_FOR_TIERS=[1,2,4,6,8],ai.SIMPLICITY=1,ai.FLOWING_WATER=2,ai.RAGING_FLAME=4,ai.BITING_WIND=8,ai.STOIC_EARTH=16,ci.PROTECT_THE_BANNER="Protect the Banner!",ci.RIDE_TO_RUIN="Ride to Ruin!",yi.GENDER_MALE=0,yi.GENDER_FEMALE=1,yi.VERSION=2,yi.LIQUIDATE_ASSET_BASE=6,Ii.CROSS_SWORDS="⚔",Ii.BULLS_EYE="◎",ki.DOMAIN_INVENTORY="sos-weapons-and-armour",ki.DOMAIN_CHARACTER="sos-sample-characters",ki.DOMAIN_RANGECALC="sos-sample-characters",ki.CURL_DOMAIN="https://effuse-church.000webhostapp.com",Mi.LABEL_YOUR="Your",Mi.SAMPLE_AV={avc:0,avp:0,avb:0},Ni.SAMPLE_AV={avc:0,avp:0,avb:0},Wi.ROUND_DOWN=0,Wi.ROUND_OFF=1,Wi.ROUND_UP=2,Wi.COVER_NONE=0,Wi.COVER_HALF=2,Wi.COVER_34=3,Wi.COVER_MURDERHOLE=4,Wi.BASE_RS=4,Oi.NAME="td-hands",Hi.NAME="td-unheld",Vi.NAME="td-prof",Di.NAME="td-widget",qi.NAME="InputInt",ji.NAME="InputNumber",Gi.NAME="InputString",$i.TEMPLATE='<input type="number" number :disabled="disabled" :value="obj[prop]" :readonly="readonly" v-on:blur="blurHandler($event.target)" v-on:input="inputHandler($event.target)" :class="{invalid:!valid}" :min="min" :max="max"></input>',zi.NAME="AttributeInput",Zi.NAME="BoonBaneInput",Qi.NAME="CategoryPCPInput",Yi.NAME="InputNameLabel",Ki.NAME="SchoolLevelInput",Xi.NAME="SkillLibInput",Ji.NAME="SkillPacketInput",tr.UID_COUNT=0,tr.ICON_CLOSED=0,tr.ICON_OPENED=1,tr.ICON_LEAF=2,tr.EVENT_CLICK="treeview_click",er.NAME="ArrayOf",nr.NAME="ArrayOfBits",rr.NAME="Bitmask",sr.NAME="ButtonCounter",ar.NAME="ButtonPermaPress",or.NAME="FieldInt",lr.NAME="FieldNumber",ur.NAME="FieldString",cr.NAME="FieldTextArea",hr.NAME="HitLocationMultiSelector",dr.NAME="HitLocationSelector",pr.NAME="Money",gr.NAME="SingleBitSelection",mr.NAME="SingleSelection",fr.NAME="SingleSelectionStr",br.NAME="WealthAssetField",wr.NAME="bb-apply",Sr.EVENT_OPEN="open",Sr.EVENT_LOADED_DOMAIN="loaded-domain",Sr.SERIALIZE_PREFIXES={"troshx.sos.core.Inventory":{name:"Inventory",icon:"❐"}},Cr.NAME="input-name",Ar.NAME="input-name-qty",Ir.NAME="ModifierList",kr.NAME="SchoolSheetDetails",Tr.NAME="select-held",Lr.NAME="SkillSubjectCreator",Er.NAME="w-ammo-spawner",Pr.NAME="w-ammunition",Rr.NAME="w-coverage",Br.NAME="w-firearm-name",Nr.NAME="w-melee-atk",Wr.NAME="w-melee-def",Fr.NAME="w-missile-atk",Or.NAME="w-prof",Vr.NAME="w-span-tools",Dr.NAME="w-tags",qr.NUM_ONES=0,qr.LAST_ROLL_SUCCESSES=0,qr.ROLL_RESULT_BOTCH=-2,qr.ROLL_RESULT_DRAW=0,qr.ROLL_RESULT_FAILED=-1,Gr.__rtti='<class path="troshx.util.TROSAI" params="">\n\t<factorial public="1" get="inline" set="null" line="23" static="1"><f a="val">\n\t<x path="Int"/>\n\t<x path="Float"/>\n</f></factorial>\n\t<binomialCoef public="1" get="inline" set="null" line="37" static="1"><f a="n:r">\n\t<x path="Int"/>\n\t<x path="Int"/>\n\t<x path="Float"/>\n</f></binomialCoef>\n\t<getTNSuccessProbForDie public="1" get="inline" set="null" line="47" static="1"><f a="tn">\n\t<x path="Int"/>\n\t<x path="Float"/>\n</f></getTNSuccessProbForDie>\n\t<getXSuccessesProb public="1" get="inline" set="null" line="51" static="1"><f a="numDiceToRoll:tn:x">\n\t<x path="Int"/>\n\t<x path="Int"/>\n\t<x path="Int"/>\n\t<x path="Float"/>\n</f></getXSuccessesProb>\n\t<getAtLeastXSuccessesProb public="1" set="method" line="56" static="1"><f a="numDiceToRoll:tn:x">\n\t<x path="Int"/>\n\t<x path="Int"/>\n\t<x path="Int"/>\n\t<x path="Float"/>\n</f></getAtLeastXSuccessesProb>\n\t<probabilityAOrB public="1" get="inline" set="null" line="66" static="1"><f a="a:b">\n\t<x path="Float"/>\n\t<x path="Float"/>\n\t<x path="Float"/>\n</f></probabilityAOrB>\n\t<probabilityOfArrayOr public="1" get="inline" set="null" line="70" static="1"><f a="arr">\n\t<c path="Array"><x path="Float"/></c>\n\t<x path="Float"/>\n</f></probabilityOfArrayOr>\n\t<getBelowOrEqualXSuccessesProb public="1" set="method" line="80" static="1"><f a="numDiceToRoll:tn:x">\n\t<x path="Int"/>\n\t<x path="Int"/>\n\t<x path="Int"/>\n\t<x path="Float"/>\n</f></getBelowOrEqualXSuccessesProb>\n\t<getChanceToSucceedContest public="1" set="method" line="102" static="1">\n\t\t<f a="numDice:tn:againstNumDice:againstTN:?rs:?requireAtLeast1TS" v="::::1:true">\n\t\t\t<x path="Int"/>\n\t\t\t<x path="Int"/>\n\t\t\t<x path="Int"/>\n\t\t\t<x path="Int"/>\n\t\t\t<x path="Int"/>\n\t\t\t<x path="Bool"/>\n\t\t\t<x path="Float"/>\n\t\t</f>\n\t\t<meta><m n=":value"><e>{ requireAtLeast1TS : true, rs : 1 }</e></m></meta>\n\t</getChanceToSucceedContest>\n\t<getChanceToSucceed public="1" set="method" line="139" static="1">\n\t\t<f a="numDice:tn:?rs" v="::1">\n\t\t\t<x path="Int"/>\n\t\t\t<x path="Int"/>\n\t\t\t<x path="Int"/>\n\t\t\t<x path="Float"/>\n\t\t</f>\n\t\t<meta><m n=":value"><e>{ rs : 1 }</e></m></meta>\n\t</getChanceToSucceed>\n\t<getAllXSuccessesProb public="1" set="method" line="146" static="1"><f a="numDice:tn">\n\t<x path="Int"/>\n\t<x path="Int"/>\n\t<c path="Array"><x path="Float"/></c>\n</f></getAllXSuccessesProb>\n\t<getTabulatedRollData public="1" set="method" line="154" static="1"><f a="numDice:tn">\n\t<x path="Int"/>\n\t<x path="Int"/>\n\t<c path="Array"><d/></c>\n</f></getTabulatedRollData>\n\t<maxPrecision public="1" get="inline" set="null" line="177" static="1"><f a="x:precision">\n\t<x path="Float"/>\n\t<x path="Int"/>\n\t<x path="Float"/>\n</f></maxPrecision>\n\t<roundTo public="1" set="method" line="181" static="1"><f a="x:y">\n\t<x path="Float"/>\n\t<x path="Float"/>\n\t<x path="Float"/>\n</f></roundTo>\n\t<INT32_MIN public="1" get="inline" set="null" expr="0x80000000" line="205" static="1">\n\t\t<x path="Int"/>\n\t\t<meta><m n=":value"><e>0x80000000</e></m></meta>\n\t</INT32_MIN>\n\t<INT32_MAX public="1" get="inline" set="null" expr="0x7fffffff" line="211" static="1">\n\t\t<x path="Int"/>\n\t\t<meta><m n=":value"><e>0x7fffffff</e></m></meta>\n\t</INT32_MAX>\n\t<displayAsPercentage public="1" get="inline" set="null" line="214" static="1"><f a="probability">\n\t<x path="Float"/>\n\t<x path="Float"/>\n</f></displayAsPercentage>\n\t<new public="1" set="method" line="13"><f a=""><x path="Void"/></f></new>\n\t<meta>\n\t\t<m n=":directlyUsed"/>\n\t\t<m n=":expose"/>\n\t\t<m n=":rtti"/>\n\t</meta>\n</class>',Gr.INT32_MIN=-2147483648,Gr.INT32_MAX=2147483647,Ur.__meta__={fields:{manuever:{inspect:null},manueverCP:{inspect:[{min:0}]},manueverTN:{inspect:[{min:0}]},targetZone:{inspect:[{min:0}]},manueverType:{inspect:[{display:"selector"}],choices:["TYPE"]},offhand:{inspect:null},againstID:{inspect:null},cost:{inspect:[{min:0}]}}},Ur.__rtti='<class path="troshx.util.AIManueverChoice" params="" module="troshx.util.TROSAI">\n\t<TYPE_ATTACKING public="1" get="inline" set="null" expr="2" line="237" static="1">\n\t\t<x path="Int"/>\n\t\t<meta><m n=":value"><e>2</e></m></meta>\n\t</TYPE_ATTACKING>\n\t<TYPE_DEFENDING public="1" get="inline" set="null" expr="1" line="238" static="1">\n\t\t<x path="Int"/>\n\t\t<meta><m n=":value"><e>1</e></m></meta>\n\t</TYPE_DEFENDING>\n\t<TARGET_WEAPON public="1" get="inline" set="null" expr="0" line="240" static="1">\n\t\t<x path="Int"/>\n\t\t<meta><m n=":value"><e>0</e></m></meta>\n\t</TARGET_WEAPON>\n\t<TARGET_SHIELD public="1" get="inline" set="null" expr="1" line="241" static="1">\n\t\t<x path="Int"/>\n\t\t<meta><m n=":value"><e>1</e></m></meta>\n\t</TARGET_SHIELD>\n\t<TARGET_OFFHAND public="1" get="inline" set="null" expr="TARGET_SHIELD" line="242" static="1">\n\t\t<x path="Int"/>\n\t\t<meta><m n=":value"><e>TARGET_SHIELD</e></m></meta>\n\t</TARGET_OFFHAND>\n\t<DO_NOTHING public="1" expr="&quot;doNothing&quot;" line="264" static="1">\n\t\t<c path="String"/>\n\t\t<meta><m n=":value"><e>"doNothing"</e></m></meta>\n\t</DO_NOTHING>\n\t<DO_NOTHING_WAIT_FOR_DEFENSE public="1" expr="&quot;waitForQuickDefense&quot;" line="265" static="1">\n\t\t<c path="String"/>\n\t\t<meta><m n=":value"><e>"waitForQuickDefense"</e></m></meta>\n\t</DO_NOTHING_WAIT_FOR_DEFENSE>\n\t<manuever public="1">\n\t\t<c path="String"/>\n\t\t<meta><m n="inspect"/></meta>\n\t</manuever>\n\t<manueverCP public="1">\n\t\t<x path="Int"/>\n\t\t<meta><m n="inspect"><e>{ min : 0 }</e></m></meta>\n\t</manueverCP>\n\t<manueverTN public="1">\n\t\t<x path="Int"/>\n\t\t<meta><m n="inspect"><e>{ min : 0 }</e></m></meta>\n\t</manueverTN>\n\t<targetZone public="1">\n\t\t<x path="Int"/>\n\t\t<meta><m n="inspect"><e>{ min : 0 }</e></m></meta>\n\t</targetZone>\n\t<manueverType public="1">\n\t\t<x path="Int"/>\n\t\t<meta>\n\t\t\t<m n="inspect"><e>{ display : "selector" }</e></m>\n\t\t\t<m n="choices"><e>"TYPE"</e></m>\n\t\t</meta>\n\t</manueverType>\n\t<offhand public="1">\n\t\t<x path="Bool"/>\n\t\t<meta><m n="inspect"/></meta>\n\t</offhand>\n\t<againstID public="1">\n\t\t<x path="Int"/>\n\t\t<meta><m n="inspect"/></meta>\n\t</againstID>\n\t<cost public="1">\n\t\t<x path="Int"/>\n\t\t<meta><m n="inspect"><e>{ min : 0 }</e></m></meta>\n\t</cost>\n\t<getManueverCPSpent public="1" get="inline" set="null" line="233"><f a=""><x path="Int"/></f></getManueverCPSpent>\n\t<secondary public="1"><c path="troshx.util.AIManueverChoice"/></secondary>\n\t<nothing public="1" get="inline" set="null" line="253"><f a=""><x path="Void"/></f></nothing>\n\t<waitForQuickDefense public="1" get="inline" set="null" line="266"><f a=""><x path="Void"/></f></waitForQuickDefense>\n\t<setupSecondAttack public="1" set="method" line="272">\n\t\t<f a="manuever:manueverCP:manueverTN:targetZone:cost:?offhand" v=":::::false">\n\t\t\t<c path="String"/>\n\t\t\t<x path="Int"/>\n\t\t\t<x path="Int"/>\n\t\t\t<x path="Int"/>\n\t\t\t<x path="Int"/>\n\t\t\t<x path="Bool"/>\n\t\t\t<x path="Void"/>\n\t\t</f>\n\t\t<meta><m n=":value"><e>{ offhand : false }</e></m></meta>\n\t</setupSecondAttack>\n\t<setupSecondDefend public="1" set="method" line="277">\n\t\t<f a="manuever:manueverCP:manueverTN:targetZone:cost:?offhand" v=":::::false">\n\t\t\t<c path="String"/>\n\t\t\t<x path="Int"/>\n\t\t\t<x path="Int"/>\n\t\t\t<x path="Int"/>\n\t\t\t<x path="Int"/>\n\t\t\t<x path="Bool"/>\n\t\t\t<x path="Void"/>\n\t\t</f>\n\t\t<meta><m n=":value"><e>{ offhand : false }</e></m></meta>\n\t</setupSecondDefend>\n\t<copyTo public="1" get="inline" set="null" line="282">\n\t\t<f a="newChoice:?newAgainstID" v=":-1">\n\t\t\t<c path="troshx.util.AIManueverChoice"/>\n\t\t\t<x path="Int"/>\n\t\t\t<x path="Void"/>\n\t\t</f>\n\t\t<meta><m n=":value"><e>{ newAgainstID : -1 }</e></m></meta>\n\t</copyTo>\n\t<setAttack public="1" set="method" line="293">\n\t\t<f a="manuever:manueverCP:manueverTN:targetZone:cost:?offhand" v=":::::false">\n\t\t\t<c path="String"/>\n\t\t\t<x path="Int"/>\n\t\t\t<x path="Int"/>\n\t\t\t<x path="Int"/>\n\t\t\t<x path="Int"/>\n\t\t\t<x path="Bool"/>\n\t\t\t<x path="Void"/>\n\t\t</f>\n\t\t<meta><m n=":value"><e>{ offhand : false }</e></m></meta>\n\t</setAttack>\n\t<setDefend public="1" set="method" line="305">\n\t\t<f a="manuever:manueverCP:manueverTN:cost:?offhand" v="::::false">\n\t\t\t<c path="String"/>\n\t\t\t<x path="Int"/>\n\t\t\t<x path="Int"/>\n\t\t\t<x path="Int"/>\n\t\t\t<x path="Bool"/>\n\t\t\t<x path="Void"/>\n\t\t</f>\n\t\t<meta><m n=":value"><e>{ offhand : false }</e></m></meta>\n\t</setDefend>\n\t<new public="1" set="method" line="246"><f a=""><x path="Void"/></f></new>\n\t<meta>\n\t\t<m n=":directlyUsed"/>\n\t\t<m n=":rtti"/>\n\t\t<m n=":expose"/>\n\t</meta>\n</class>',Ur.TYPE_ATTACKING=2,Ur.TYPE_DEFENDING=1,Ur.TARGET_WEAPON=0,Ur.TARGET_SHIELD=1,Ur.TARGET_OFFHAND=1,Ur.DO_NOTHING="doNothing",Ur.DO_NOTHING_WAIT_FOR_DEFENSE="waitForQuickDefense",h.main()}("undefined"!=typeof exports?exports:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this,"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);